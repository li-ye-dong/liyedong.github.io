
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="美少男">
      
      
        <meta name="author" content="李烨栋">
      
      
        <link rel="canonical" href="https://li-ye-dong.github.io/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/RHEL9/RHEL9-RHCSA%E5%AD%A6%E4%B9%A0/">
      
      
        <link rel="prev" href="../RHEL9-RHCE%E5%AD%A6%E4%B9%A0/">
      
      
        <link rel="next" href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%B4%E6%8A%A4/ventoy%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5%E3%80%82/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>文件目录 - 李烨栋的博客</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../../../static/stylesheets/google_font.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#文件目录" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../.." title="李烨栋的博客" class="md-header__button md-logo" aria-label="李烨栋的博客" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            李烨栋的博客
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              文件目录
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green"  aria-label="日间模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="日间模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="夜间模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="夜间模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/li-ye-dong/liyedong.github.io.git" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    li-ye-dong.github.io
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
    
  
  知识库索引

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../PDF%E7%AC%94%E8%AE%B0/" class="md-tabs__link">
          
  
    
  
  PDF笔记

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../k8s%E5%92%8C%E5%AE%B9%E5%99%A8/KubeSphere%E4%BD%93%E9%AA%8C/" class="md-tabs__link">
          
  
    
  
  K8s和容器

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/Nginx/Nginx%E5%AD%A6%E4%B9%A0/" class="md-tabs__link">
          
  
    
  
  中间件

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E5%88%86%E4%BA%AB/1.ai%E6%95%B0%E5%AD%97%E4%BA%BA/" class="md-tabs__link">
          
  
    
  
  分享

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E5%AE%89%E5%85%A8/Burp%20Suite%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7/" class="md-tabs__link">
          
  
    
  
  安全

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/2024%E5%B9%B46%E6%9C%88%E6%80%BB%E7%BB%93/" class="md-tabs__link">
          
  
    
  
  工具使用

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E5%BC%80%E5%8F%91/FastApi%E5%AD%A6%E4%B9%A0/" class="md-tabs__link">
          
  
    
  
  开发

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../windows%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6%E5%B8%A6%E6%9D%83%E9%99%90/" class="md-tabs__link">
          
  
    
  
  操作系统

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/MongoDB/MongoDB%20%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7%E5%92%8C%E9%9A%94%E7%A6%BB/" class="md-tabs__link">
          
  
    
  
  数据库笔记

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B9%A6%E7%AD%BE%E6%94%B6%E8%97%8F/%E5%AE%89%E5%A8%9C%E6%A1%A3%E6%A1%88%E5%AF%86%E9%92%A5/" class="md-tabs__link">
          
  
    
  
  浏览器书签收藏

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E7%9B%91%E6%8E%A7/%E7%9B%91%E6%8E%A7/zabbix%E7%9B%91%E6%8E%A7vsphere%E5%91%8A%E8%AD%A6/" class="md-tabs__link">
          
  
    
  
  监控

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E8%99%9A%E6%8B%9F%E5%8C%96/%E8%99%9A%E6%8B%9F%E5%8C%96/RVtools%E4%BD%BF%E7%94%A8/" class="md-tabs__link">
          
  
    
  
  虚拟化

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E8%AE%A4%E8%AF%81%E7%9B%B8%E5%85%B3/credly%E6%9F%A5%E7%9C%8B%E5%8B%8B%E7%AB%A0/" class="md-tabs__link">
          
  
    
  
  认证相关

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="李烨栋的博客" class="md-nav__button md-logo" aria-label="李烨栋的博客" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    李烨栋的博客
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/li-ye-dong/liyedong.github.io.git" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    li-ye-dong.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    知识库索引
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../PDF%E7%AC%94%E8%AE%B0/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    PDF笔记
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../k8s%E5%92%8C%E5%AE%B9%E5%99%A8/KubeSphere%E4%BD%93%E9%AA%8C/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    K8s和容器
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/Nginx/Nginx%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    中间件
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../%E5%88%86%E4%BA%AB/1.ai%E6%95%B0%E5%AD%97%E4%BA%BA/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    分享
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../%E5%AE%89%E5%85%A8/Burp%20Suite%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    安全
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/2024%E5%B9%B46%E6%9C%88%E6%80%BB%E7%BB%93/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    工具使用
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../%E5%BC%80%E5%8F%91/FastApi%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    开发
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  <span class="md-ellipsis">
    操作系统
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            操作系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6%E5%B8%A6%E6%9D%83%E9%99%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows文件复制带权限
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" checked>
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    操作系统
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            操作系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AD%E5%9F%9F%E6%8E%A7%E6%9E%B6%E6%9E%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AD域控架构最佳实践
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Centos8%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Centos8学习
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Centos%E5%AE%89%E8%A3%85docker%E5%92%8Cpodman/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Centos安装docker和podman
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux%E6%A8%A1%E6%9D%BF%E4%BC%98%E5%8C%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    系统安装
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../RHEL8%E6%90%AD%E5%BB%BAdns%E6%9C%8D%E5%8A%A1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    架构设计
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ubuntu%E5%AE%89%E8%A3%85/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ubuntu安装
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ubuntu%E5%AE%89%E8%A3%85docker%E5%92%8Cpodman/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ubuntu安装docker和podman
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Windows%20AD%E5%9F%9F%E7%8E%AF%E5%A2%83%E4%B8%AD%E4%BA%94%E5%A4%A7%E4%B8%BB%E6%9C%BA%E8%A7%92%E8%89%B2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows AD域环境中五大主机角色
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker%E5%AE%89%E8%A3%85MongoDB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker安装MongoDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker%E5%AE%89%E8%A3%85chemex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker安装chemex
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker%E5%AE%89%E8%A3%85mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker安装mysql
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker%E5%AE%89%E8%A3%85snipe-IT/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker安装snipe IT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lshell%E5%91%BD%E4%BB%A4%E7%AE%A1%E6%8E%A7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lshell（管理用户只能使用某些命令）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../windows%E6%97%A0%E6%95%88%E5%9F%9F%E6%8E%A7%E6%B8%85%E9%99%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows无效域控清除
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../windows%E6%A8%A1%E6%9D%BF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.关闭防火墙和设置远程桌面的服务端口和关闭windows自动更新和设置ntp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%AE%89%E8%A3%85lnmp%E7%8E%AF%E5%A2%83/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    安装lnmp环境
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网络管理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_18" checked>
        
          
          <label class="md-nav__link" for="__nav_9_2_18" id="__nav_9_2_18_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    RHEL9
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_2_18_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9_2_18">
            <span class="md-nav__icon md-icon"></span>
            RHEL9
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RHEL9-RHCE%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    部署ansible
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    文件目录
    
  </span>
  

      </a>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9_3" >
        
          
          <label class="md-nav__link" for="__nav_9_3" id="__nav_9_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    计算机维护
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_3">
            <span class="md-nav__icon md-icon"></span>
            计算机维护
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%B4%E6%8A%A4/ventoy%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5%E3%80%82/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ventoy启动失败。
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%B4%E6%8A%A4/ventoy%E5%90%AF%E5%8A%A8%E7%9B%98%E5%88%B6%E4%BD%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ventoy启动盘制作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%B4%E6%8A%A4/%E5%90%84%E5%93%81%E7%89%8C%E4%B8%BB%E6%9D%BFbios%E6%8C%89%E9%94%AE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    各品牌主板bios按键
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../../%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/MongoDB/MongoDB%20%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7%E5%92%8C%E9%9A%94%E7%A6%BB/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    数据库笔记
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B9%A6%E7%AD%BE%E6%94%B6%E8%97%8F/%E5%AE%89%E5%A8%9C%E6%A1%A3%E6%A1%88%E5%AF%86%E9%92%A5/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    浏览器书签收藏
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../../%E7%9B%91%E6%8E%A7/%E7%9B%91%E6%8E%A7/zabbix%E7%9B%91%E6%8E%A7vsphere%E5%91%8A%E8%AD%A6/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    监控
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../../%E8%99%9A%E6%8B%9F%E5%8C%96/%E8%99%9A%E6%8B%9F%E5%8C%96/RVtools%E4%BD%BF%E7%94%A8/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    虚拟化
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../%E8%AE%A4%E8%AF%81%E7%9B%B8%E5%85%B3/credly%E6%9F%A5%E7%9C%8B%E5%8B%8B%E7%AB%A0/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    认证相关
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="文件目录">文件目录<img alt="" src="../../../../images/1715349516345-3347fa14-d355-4302-b74b-6b6f24fa3975.png" /> <img alt="" src="../../../../images/1715418789370-67585f2f-0c0b-436d-b176-3e2c9ce40ec2.png" /><a class="headerlink" href="#文件目录" title="Permanent link">&para;</a></h1>
<h1 id="tab补全篇">Tab补全篇<a class="headerlink" href="#tab补全篇" title="Permanent link">&para;</a></h1>
<p>shell Tab补全依赖包bash-completion-2.11-4.el9.noarch(最小安装没有)</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="o">[</span>root@localhost<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -qa | grep bash</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>bash-5.1.8-4.el9.x86_64
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>bash-completion-2.11-4.el9.noarch
</code></pre></div></td></tr></table></div>
<h1 id="转义字符">转义字符"\"<a class="headerlink" href="#转义字符" title="Permanent link">&para;</a></h1>
<h2 id="分行提高可读性">分行(提高可读性)<a class="headerlink" href="#分行提高可读性" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>mkdir<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>test2<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>test3<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<h2 id="创建一个有空格的文件夹">创建一个有空格的文件夹<a class="headerlink" href="#创建一个有空格的文件夹" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a>mkdir<span class="w"> </span>c<span class="se">\ </span>d
</code></pre></div></td></tr></table></div>
<h1 id="cd命令">cd命令<a class="headerlink" href="#cd命令" title="Permanent link">&para;</a></h1>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span>
<span class="normal"><a href="#__codelineno-3-6">6</a></span>
<span class="normal"><a href="#__codelineno-3-7">7</a></span>
<span class="normal"><a href="#__codelineno-3-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cd var （改变目录位置至当前目录下的var子目录下）</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>var<span class="o">]</span><span class="c1"># cd .. （改变当前位置至当前目录的父目录）</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>var<span class="o">]</span><span class="c1"># cd . （切换到当前目前）</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cd （改变目录位置至用户登录时的工作目录）</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>~<span class="o">]</span><span class="c1"># cd ~ （改变目录位置至用户登录时的工作目录（用户的家目录）</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>~<span class="o">]</span><span class="c1"># cd ../etc （改变目录位置至当前目录的父目录下的etc的子目录下）</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>etc<span class="o">]</span><span class="c1"># cd /var/www （利用绝对路径表示改变目录到 /var/www目录下）</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>etc<span class="o">]</span><span class="c1"># cd - （返回上一次切换前的目录，相当于撤销）</span>
</code></pre></div></td></tr></table></div>
<h1 id="ls命令">ls命令<a class="headerlink" href="#ls命令" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">ls</font><font style="color:rgb(0,0,0);">命令用来</font><font style="color:rgb(243,50,50);">列出文件或目录信息。 </font></p>
<p><font style="color:rgb(0,0,0);">用法：</font><font style="color:rgb(0,0,0);">ls [</font><font style="color:rgb(0,0,0);">参数</font><font style="color:rgb(0,0,0);">] </font><font style="color:rgb(0,0,0);">目录名或文件名 </font></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">列出文件或目录信息</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>afs<span class="w"> </span>boot<span class="w"> </span>etc<span class="w"> </span>lib<span class="w"> </span>media<span class="w"> </span>opt<span class="w"> </span>root<span class="w"> </span>sbin<span class="w"> </span>sys<span class="w"> </span>usr<span class="w"> </span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>bin<span class="w"> </span>dev<span class="w"> </span>home<span class="w"> </span>lib64<span class="w"> </span>mnt<span class="w"> </span>proc<span class="w"> </span>run<span class="w"> </span>srv<span class="w"> </span>tmp<span class="w"> </span>var<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">显示所有文件</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong><strong><font style="color:rgb(243,50,50);">-a</font></strong><font style="color:rgb(0,0,0);">：显示所有内容，包括以</font><font style="color:rgb(0,0,0);">“</font><strong><font style="color:rgb(243,50,50);">.</font></strong><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">开头的隐藏文件。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># ls -a </span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>.<span class="w"> </span>afs<span class="w"> </span>boot<span class="w"> </span>etc<span class="w"> </span>lib<span class="w"> </span>media<span class="w"> </span>opt<span class="w"> </span>root<span class="w"> </span>sbin<span class="w"> </span>sys<span class="w"> </span>usr<span class="w"> </span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>..<span class="w"> </span>bin<span class="w"> </span>dev<span class="w"> </span>home<span class="w"> </span>lib64<span class="w"> </span>mnt<span class="w"> </span>proc<span class="w"> </span>run<span class="w"> </span>srv<span class="w"> </span>tmp<span class="w"> </span>var<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">显示目录下所有的子目录及文件</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong><strong><font style="color:rgb(243,50,50);">-A</font></strong><font style="color:rgb(0,0,0);">：显示所有的内容，包括以</font><font style="color:rgb(0,0,0);">“</font><strong><font style="color:rgb(243,50,50);">.</font></strong><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">开头的隐藏文件。但不显 </font></p>
<p><font style="color:rgb(0,0,0);">示</font><font style="color:rgb(0,0,0);">“</font><strong><font style="color:rgb(0,0,0);">.</font></strong><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">和</font><font style="color:rgb(0,0,0);">“</font><strong><font style="color:rgb(0,0,0);">..</font></strong><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># ls -A </span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>.123<span class="w"> </span>bin<span class="w"> </span>dev<span class="w"> </span>home<span class="w"> </span>lib64<span class="w"> </span>mnt<span class="w"> </span>proc<span class="w"> </span>run<span class="w"> </span>srv<span class="w"> </span>tmp<span class="w"> </span>var<span class="w"> </span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>afs<span class="w"> </span>boot<span class="w"> </span>etc<span class="w"> </span>lib<span class="w"> </span>media<span class="w"> </span>opt<span class="w"> </span>root<span class="w"> </span>sbin<span class="w"> </span>sys<span class="w"> </span>usr<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(243,50,50);">---</font></strong><strong><font style="color:rgb(243,50,50);">以长格式形式显示文件</font></strong><strong><font style="color:rgb(243,50,50);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-l</font></strong><font style="color:rgb(0,0,0);">：以长格式形式显示文件的详细信息。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ll </span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>total<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>May<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">23</span>:52<span class="w"> </span><span class="m">00</span><span class="w"> </span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>May<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">23</span>:51<span class="w"> </span><span class="m">01</span><span class="w"> </span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>May<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">23</span>:52<span class="w"> </span><span class="m">02</span>
</code></pre></div></td></tr></table></div>
<p><img alt="" src="../../../../images/1715522522383-5236c21c-da20-44b8-ab2f-5ffaf4bee175.png" /></p>
<p><font style="color:rgb(0,0,0);">1.</font><font style="color:rgb(0,0,0);">文件类型 </font></p>
<p><strong><font style="color:rgb(243,50,50);">- </font></strong><font style="color:rgb(0,0,0);">普通文件 </font></p>
<p><strong><font style="color:rgb(243,50,50);">d </font></strong><font style="color:rgb(0,0,0);">目录 </font></p>
<p><strong><font style="color:rgb(243,50,50);">l </font></strong><font style="color:rgb(0,0,0);">链接文件 </font></p>
<p><font style="color:rgb(0,0,0);">2.</font><font style="color:rgb(0,0,0);">权限位，三位一组，共三组，分别是文件的</font><font style="color:rgb(243,50,50);">属主</font><font style="color:rgb(0,0,0);">、</font><font style="color:rgb(243,50,50);">属组</font><font style="color:rgb(0,0,0);">、</font><font style="color:rgb(243,50,50);">others</font><font style="color:rgb(0,0,0);">的权限 </font></p>
<p><strong><font style="color:rgb(0,0,0);">r</font></strong><font style="color:rgb(0,0,0);">：</font><font style="color:rgb(243,50,50);">读</font><font style="color:rgb(0,0,0);">权限 </font><strong><font style="color:rgb(0,0,0);">w</font></strong><font style="color:rgb(0,0,0);">：</font><font style="color:rgb(243,50,50);">写</font><font style="color:rgb(0,0,0);">权限 </font><strong><font style="color:rgb(0,0,0);">x</font></strong><font style="color:rgb(0,0,0);">：</font><font style="color:rgb(243,50,50);">执行</font><font style="color:rgb(0,0,0);">权限 </font></p>
<p><font style="color:rgb(0,0,0);">左三位：</font><font style="color:rgb(0,0,0);">owner</font><font style="color:rgb(0,0,0);">的权限（</font><font style="color:rgb(243,50,50);">属主</font><font style="color:rgb(0,0,0);">） </font></p>
<p><font style="color:rgb(0,0,0);">中三位：</font><font style="color:rgb(0,0,0);">group</font><font style="color:rgb(0,0,0);">的权限（</font><font style="color:rgb(243,50,50);">属组</font><font style="color:rgb(0,0,0);">） </font></p>
<p><font style="color:rgb(0,0,0);">右三位：其他人的权限（</font><font style="color:rgb(243,50,50);">others</font><font style="color:rgb(0,0,0);">）</font><font style="color:rgb(0,0,0);">3.</font><font style="color:rgb(0,0,0);">文件硬链接次数 </font></p>
<p><font style="color:rgb(0,0,0);">4.</font><font style="color:rgb(0,0,0);">属主：属于的用户 </font></p>
<p><font style="color:rgb(0,0,0);">5.</font><font style="color:rgb(0,0,0);">属组：属于的组 </font></p>
<p><font style="color:rgb(0,0,0);">6.</font><font style="color:rgb(0,0,0);">文件或目录大小 </font></p>
<p><font style="color:rgb(0,0,0);">7.</font><font style="color:rgb(0,0,0);">最后一次被修改的时间 </font></p>
<p><font style="color:rgb(0,0,0);">8.文件或目录名</font></p>
<p><strong><font style="color:rgb(0,0,0);">--</font></strong><strong><font style="color:rgb(0,0,0);">以</font></strong><strong><font style="color:rgb(0,0,0);">K</font></strong><strong><font style="color:rgb(0,0,0);">，</font></strong><strong><font style="color:rgb(0,0,0);">M</font></strong><strong><font style="color:rgb(0,0,0);">，</font></strong><strong><font style="color:rgb(0,0,0);">G</font></strong><strong><font style="color:rgb(0,0,0);">单位显示文件大小</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-h</font></strong><font style="color:rgb(0,0,0);">：以</font><font style="color:rgb(0,0,0);">K</font><font style="color:rgb(0,0,0);">，</font><font style="color:rgb(0,0,0);">M</font><font style="color:rgb(0,0,0);">，</font><font style="color:rgb(0,0,0);">G</font><font style="color:rgb(0,0,0);">单位显示文件大小 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ll -h </span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>total<span class="w"> </span>84K<span class="w"> </span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span>28K<span class="w"> </span>May<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:08<span class="w"> </span><span class="m">1</span>.txt<span class="w"> </span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span>55K<span class="w"> </span>May<span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">13</span>:13<span class="w"> </span><span class="m">2</span>.txt
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">仅显示目录名称</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-d</font></strong><font style="color:rgb(0,0,0);">：如果目标是目录，则只显示其目录名称。 </font></p>
<p><font style="color:rgb(0,0,0);">而不是显示其下的各个文件，与</font><font style="color:rgb(243,50,50);">-l</font><font style="color:rgb(0,0,0);">搭配使用可以得到详细的目录信息。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># ls -d /root </span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>/root<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">按文件的修改时间排序</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-c</font></strong><font style="color:rgb(0,0,0);">：按文件的修改时间排序。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="m">00</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">02</span><span class="w"> </span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls -c </span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="m">00</span><span class="w"> </span><span class="m">02</span><span class="w"> </span><span class="m">01</span>
</code></pre></div></td></tr></table></div>
<h1 id="file命令">file命令<a class="headerlink" href="#file命令" title="Permanent link">&para;</a></h1>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;liyedong&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>test.txt
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>mv<span class="w"> </span>test.txt<span class="w"> </span>test.png
<a id="__codelineno-11-3" name="__codelineno-11-3"></a>file<span class="w"> </span>test.png
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">查看文件类型</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><font style="color:rgb(0,0,0);">file</font><font style="color:rgb(0,0,0);">命令查看文件类型 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># file 1.txt </span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="m">1</span>.txt:<span class="w"> </span>ASCII<span class="w"> </span>text,<span class="w"> </span>with<span class="w"> </span>very<span class="w"> </span>long<span class="w"> </span>lines<span class="w"> </span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># file difu </span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a>difu:<span class="w"> </span>directory
</code></pre></div></td></tr></table></div>
<h1 id="--指令-与--指令">“ &gt; ”指令 与“ &gt;&gt; ”指令<a class="headerlink" href="#--指令-与--指令" title="Permanent link">&para;</a></h1>
<p><strong><font style="color:rgb(243,50,50);">&gt; </font></strong><font style="color:rgb(0,0,0);">： 输出重定向（覆盖重定向） </font></p>
<p><strong><font style="color:rgb(243,50,50);">&gt;&gt; </font></strong><font style="color:rgb(0,0,0);">： 追加重定向（写入重定向）</font></p>
<h1 id="cat命令"><font style="color:rgb(0,0,0);">cat命令</font><a class="headerlink" href="#cat命令" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">cat</font><font style="color:rgb(0,0,0);">命令主要用于</font><font style="color:rgb(243,50,50);">滚屏显示文件内容</font><font style="color:rgb(0,0,0);">或是</font><font style="color:rgb(243,50,50);">将多个文件合并成一个文件</font><font style="color:rgb(0,0,0);">。 </font></p>
<p><font style="color:rgb(0,0,0);">用法：cat [参数] 文件名</font></p>
<p><strong><font style="color:rgb(0,0,0);">---cat</font></strong><strong><font style="color:rgb(0,0,0);">命令滚屏显示文件内容</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><font style="color:rgb(0,0,0);">cat</font><font style="color:rgb(0,0,0);">命令的常用参数选项如下： </font><strong><font style="color:rgb(243,50,50);">-b</font></strong><font style="color:rgb(0,0,0);">：对输出内容中的</font><font style="color:rgb(243,50,50);">非空行</font><font style="color:rgb(0,0,0);">标注行号。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat -b cat.txt </span>
</code></pre></div></td></tr></table></div>
<p><em><font style="color:rgb(0,0,0);">1 -b：对输出内容中的非空行标注行号</font></em></p>
<p><em><font style="color:rgb(0,0,0);">2 -n</font>__<font style="color:rgb(0,0,0);">：对输出内容中的所有行标注行号。 </font></em></p>
<p><strong><font style="color:rgb(243,50,50);">-n</font></strong><font style="color:rgb(0,0,0);">：对输出内容中的</font><font style="color:rgb(243,50,50);">所有行</font><font style="color:rgb(0,0,0);">标注行号。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span>
<span class="normal"><a href="#__codelineno-14-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat -n cat.txt </span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="m">1</span><span class="w"> </span>-b：对输出内容中的非空行标注行号。<span class="w"> </span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="m">2</span><span class="w"> </span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="m">3</span><span class="w"> </span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="m">4</span><span class="w"> </span>-n：对输出内容中的所有行标注行号。
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">通常使用cat命令查看文件内容，但是</font><font style="color:rgb(243,50,50);">cat命令</font><font style="color:rgb(0,0,0);">的输出内容</font><font style="color:rgb(243,50,50);">不能分页显示</font><font style="color:rgb(0,0,0);">。（要查看超过一屏的文 件内容，需要用到</font><font style="color:rgb(243,50,50);">more</font><font style="color:rgb(0,0,0);">或</font><font style="color:rgb(243,50,50);">less</font><font style="color:rgb(0,0,0);">等其他命令） </font></p>
<p><font style="color:rgb(0,0,0);">cat</font><font style="color:rgb(0,0,0);">命令中没有指定参数，则</font><font style="color:rgb(0,0,0);">cat</font><font style="color:rgb(0,0,0);">会直接显示文件原本的内容 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat /var/www/html/index.html </span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a>（查看/var/www/html目录下的index.html文件<span class="w"> </span>内容）<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">Test</font></p>
<p><strong><font style="color:rgb(0,0,0);">---cat</font></strong><strong><font style="color:rgb(0,0,0);">命令将多个文件文件合并成一个文件</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><font style="color:rgb(0,0,0);">利用</font><font style="color:rgb(0,0,0);">cat</font><font style="color:rgb(0,0,0);">命令还可以</font><font style="color:rgb(243,50,50);">合并多个文件</font><font style="color:rgb(0,0,0);">。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span>
<span class="normal"><a href="#__codelineno-16-18">18</a></span>
<span class="normal"><a href="#__codelineno-16-19">19</a></span>
<span class="normal"><a href="#__codelineno-16-20">20</a></span>
<span class="normal"><a href="#__codelineno-16-21">21</a></span>
<span class="normal"><a href="#__codelineno-16-22">22</a></span>
<span class="normal"><a href="#__codelineno-16-23">23</a></span>
<span class="normal"><a href="#__codelineno-16-24">24</a></span>
<span class="normal"><a href="#__codelineno-16-25">25</a></span>
<span class="normal"><a href="#__codelineno-16-26">26</a></span>
<span class="normal"><a href="#__codelineno-16-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="o">[</span>root@RHEL9/<span class="o">]</span><span class="c1"># cat file1</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="m">123</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat file2</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="m">456</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat file3 （file3已经存在，且原文件内容为 789）</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="m">789</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat file2 file1 &gt; file3 （此命令会覆盖file3原文件内容）</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat file3</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="m">456</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="m">123</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a>cat<span class="w"> </span>file2<span class="w"> </span>file1<span class="w"> </span>&gt;<span class="w"> </span>file3<span class="w"> </span>命令会把file2和file1文件的内容合并为file3。
<a id="__codelineno-16-12" name="__codelineno-16-12"></a>file2文件的内容在file1文件的内容前面（按顺序位置决定），且此命令会覆盖掉file3原文件
<a id="__codelineno-16-13" name="__codelineno-16-13"></a>内容。
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat file1</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="m">123</span>
<a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat file2</span>
<a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="m">456</span>
<a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat file3 （file3已经存在，且原文件内容为 789）</span>
<a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="m">789</span>
<a id="__codelineno-16-20" name="__codelineno-16-20"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat file2 file1 &gt;&gt; file3 （此命令会将file2和file3文件的内容附加到file3</span>
<a id="__codelineno-16-21" name="__codelineno-16-21"></a>的后面）
<a id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat file3</span>
<a id="__codelineno-16-23" name="__codelineno-16-23"></a><span class="m">789</span>
<a id="__codelineno-16-24" name="__codelineno-16-24"></a><span class="m">456</span>
<a id="__codelineno-16-25" name="__codelineno-16-25"></a><span class="m">123</span>
<a id="__codelineno-16-26" name="__codelineno-16-26"></a>cat<span class="w"> </span>file2<span class="w"> </span>file1&gt;&gt;file3<span class="w"> </span>
<a id="__codelineno-16-27" name="__codelineno-16-27"></a>命令会把file2和file1的文件内容附加到file3文件原有内容的后面
</code></pre></div></td></tr></table></div>
<h1 id="more命令">more命令<a class="headerlink" href="#more命令" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">可以一页一页地</font><font style="color:rgb(243,50,50);">分屏显示文件的内容</font><font style="color:rgb(0,0,0);">。</font><font style="color:rgb(0,0,0);">more</font><font style="color:rgb(0,0,0);">命令通常用于分屏显示文件内容。 </font></p>
<p><font style="color:rgb(0,0,0);">执行</font><font style="color:rgb(0,0,0);">more</font><font style="color:rgb(0,0,0);">命令后，进入</font><font style="color:rgb(0,0,0);">more</font><font style="color:rgb(0,0,0);">状态。 </font></p>
<p><font style="color:rgb(0,0,0);">按</font><font style="color:rgb(0,0,0);">“</font><font style="color:rgb(243,50,50);">Enter</font><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">键可以</font><font style="color:rgb(243,50,50);">向下移动一行</font><font style="color:rgb(0,0,0);">。 </font></p>
<p><font style="color:rgb(0,0,0);">按</font><font style="color:rgb(0,0,0);">“</font><font style="color:rgb(243,50,50);">Space</font><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">键可以</font><font style="color:rgb(243,50,50);">向下移动一页</font><font style="color:rgb(0,0,0);">。 </font></p>
<p><font style="color:rgb(0,0,0);">按</font><font style="color:rgb(0,0,0);">“</font><font style="color:rgb(243,50,50);">Q</font><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">键可以</font><font style="color:rgb(243,50,50);">退出</font><font style="color:rgb(243,50,50);">more</font><font style="color:rgb(243,50,50);">命令</font><font style="color:rgb(0,0,0);">。 </font></p>
<p><font style="color:rgb(0,0,0);">用法：</font><font style="color:rgb(0,0,0);">more [</font><font style="color:rgb(0,0,0);">参数</font><font style="color:rgb(0,0,0);">] </font><font style="color:rgb(0,0,0);">文件名 </font></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">指定分页显示时每页的行数</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-</font></strong><font style="color:rgb(243,50,50);">num</font><font style="color:rgb(0,0,0);">：</font><font style="color:rgb(243,50,50);">num</font><font style="color:rgb(243,50,50);">代表的是数字</font><font style="color:rgb(0,0,0);">，用来指定分页显示时</font><font style="color:rgb(243,50,50);">每页的行数</font><font style="color:rgb(0,0,0);">。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat test （原文件内容）</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="m">1</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="m">2</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="m">3</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="m">4</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="m">5</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="m">6</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># more -2 test （以每页2行显示文件内容）</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="m">1</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="m">2</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a>--More--<span class="o">(</span><span class="m">33</span>%<span class="o">)</span><span class="w"> </span>（已经显示文件内容的占比，6行文件以2行每页显示，第一页占比33%）
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">指定从文件的第</font></strong><strong><font style="color:rgb(0,0,0);">num</font></strong><strong><font style="color:rgb(0,0,0);">行开始显示</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">+</font></strong><font style="color:rgb(243,50,50);">num</font><font style="color:rgb(0,0,0);">：</font><font style="color:rgb(0,0,0);">num</font><font style="color:rgb(0,0,0);">代表的是数字，用来指定</font><font style="color:rgb(243,50,50);">从指定文件的第</font><font style="color:rgb(243,50,50);">num</font><font style="color:rgb(243,50,50);">行开始显示。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span>
<span class="normal"><a href="#__codelineno-18-6">6</a></span>
<span class="normal"><a href="#__codelineno-18-7">7</a></span>
<span class="normal"><a href="#__codelineno-18-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># cat test （原文件内容） </span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="m">1</span><span class="w"> </span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="m">2</span><span class="w"> </span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="m">3</span><span class="w"> </span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="m">4</span><span class="w"> </span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># more +3 test （从第三行开始显示文件内容） </span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="m">3</span><span class="w"> </span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="m">4</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<h1 id="less命令">less命令<a class="headerlink" href="#less命令" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">less</font><font style="color:rgb(0,0,0);">命令是</font><font style="color:rgb(0,0,0);">more</font><font style="color:rgb(0,0,0);">命令的改进版，比</font><font style="color:rgb(0,0,0);">more</font><font style="color:rgb(0,0,0);">命令的功能强大。 </font></p>
<p><font style="color:rgb(0,0,0);">less</font><font style="color:rgb(0,0,0);">命令可以向下、向上翻页，甚至可以前后左右移动。执行</font><font style="color:rgb(0,0,0);">less</font><font style="color:rgb(0,0,0);">命令后，进入了</font><font style="color:rgb(0,0,0);">less</font><font style="color:rgb(0,0,0);">状态。 </font></p>
<p><font style="color:rgb(0,0,0);">按</font><font style="color:rgb(0,0,0);">“</font><font style="color:rgb(243,50,50);">Enter</font><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">键可以</font><font style="color:rgb(243,50,50);">向下移动一行 </font></p>
<p><font style="color:rgb(0,0,0);">按</font><font style="color:rgb(0,0,0);">“</font><font style="color:rgb(243,50,50);">Space</font><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">键可以</font><font style="color:rgb(243,50,50);">向下移动一页 </font></p>
<p><font style="color:rgb(0,0,0);">按</font><font style="color:rgb(0,0,0);">“</font><font style="color:rgb(243,50,50);">B</font><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">键可以</font><font style="color:rgb(243,50,50);">向上移动一页</font><font style="color:rgb(0,0,0);">，也可以用光标键向前、后、左、右移动。 </font></p>
<p><font style="color:rgb(0,0,0);">按</font><font style="color:rgb(0,0,0);">“</font><font style="color:rgb(243,50,50);">Q</font><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">键可以</font><font style="color:rgb(243,50,50);">退出</font><font style="color:rgb(243,50,50);">less</font><font style="color:rgb(243,50,50);">命令</font><font style="color:rgb(0,0,0);">。 </font></p>
<p><font style="color:rgb(0,0,0);">less</font><font style="color:rgb(0,0,0);">命令支持在文本文件中快速查找 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span>
<span class="normal"><a href="#__codelineno-19-4">4</a></span>
<span class="normal"><a href="#__codelineno-19-5">5</a></span>
<span class="normal"><a href="#__codelineno-19-6">6</a></span>
<span class="normal"><a href="#__codelineno-19-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># less file1 </span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="m">1</span><span class="w"> </span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="m">2</span><span class="w"> </span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="m">3</span><span class="w"> </span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="m">4</span><span class="w"> </span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a>/3<span class="w"> </span>（直接按下<span class="w"> </span>/<span class="w"> </span>键盘，进入快速查找模式，类似于Windows系统的Ctrl+F。输入查找的关键<span class="w"> </span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a>字，回车查找）<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">less命令的用法与more命令基本相同</font></p>
<h1 id="head命令"><font style="color:rgb(0,0,0);">head命令</font><a class="headerlink" href="#head命令" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">head</font><font style="color:rgb(0,0,0);">命令用于显示文件的</font><font style="color:rgb(243,50,50);">开头</font><font style="color:rgb(0,0,0);">部分，</font><font style="color:rgb(243,50,50);">默认情况</font><font style="color:rgb(0,0,0);">下只显示文件的</font><font style="color:rgb(243,50,50);">前</font><font style="color:rgb(243,50,50);">10</font><font style="color:rgb(243,50,50);">行内容</font><font style="color:rgb(0,0,0);">。 </font></p>
<p><font style="color:rgb(0,0,0);">用法：</font><font style="color:rgb(0,0,0);">head [</font><font style="color:rgb(0,0,0);">参数</font><font style="color:rgb(0,0,0);">] </font><font style="color:rgb(0,0,0);">文件名 </font></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">显示指定文件的前</font></strong><strong><font style="color:rgb(0,0,0);">num</font></strong><strong><font style="color:rgb(0,0,0);">行</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-n</font></strong><font style="color:rgb(243,50,50);"> num</font><font style="color:rgb(0,0,0);">：显示指定文件的</font><font style="color:rgb(243,50,50);">前</font><font style="color:rgb(243,50,50);">num</font><font style="color:rgb(243,50,50);">行 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span>
<span class="normal"><a href="#__codelineno-20-4">4</a></span>
<span class="normal"><a href="#__codelineno-20-5">5</a></span>
<span class="normal"><a href="#__codelineno-20-6">6</a></span>
<span class="normal"><a href="#__codelineno-20-7">7</a></span>
<span class="normal"><a href="#__codelineno-20-8">8</a></span>
<span class="normal"><a href="#__codelineno-20-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># head file1 （head不加参数显示原文件前十行内容） </span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="m">123</span><span class="w"> </span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="m">456</span><span class="w"> </span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="m">789</span><span class="w"> </span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="m">012</span><span class="w"> </span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># head -n 3 file1 （-n 3 只显示文件的前3行内容） </span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="m">123</span><span class="w"> </span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="m">456</span><span class="w"> </span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="m">789</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">显示指定文件的前</font></strong><strong><font style="color:rgb(0,0,0);">num</font></strong><strong><font style="color:rgb(0,0,0);">个字符</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-c </font></strong><font style="color:rgb(243,50,50);">num</font><font style="color:rgb(0,0,0);">：显示指定文件的</font><font style="color:rgb(243,50,50);">前</font><font style="color:rgb(243,50,50);">num</font><font style="color:rgb(243,50,50);">个字符 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span>
<span class="normal"><a href="#__codelineno-21-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># head file2 （head不加参数显示文件前十行内容） </span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="m">123456</span><span class="w"> </span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># head -c 5 file2 （-c 5 只显示文件的前5个字符内容） </span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="m">12345</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<h1 id="tail命令-">**tail命令 **<a class="headerlink" href="#tail命令-" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">tail</font><font style="color:rgb(0,0,0);">命令用于显示文件的</font><font style="color:rgb(243,50,50);">末尾</font><font style="color:rgb(0,0,0);">部分，</font><font style="color:rgb(243,50,50);">默认情况</font><font style="color:rgb(0,0,0);">下只显示文件的</font><font style="color:rgb(243,50,50);">末尾</font><font style="color:rgb(243,50,50);">10</font><font style="color:rgb(243,50,50);">行内容</font><font style="color:rgb(0,0,0);">。 </font></p>
<p><font style="color:rgb(0,0,0);">用法：</font><font style="color:rgb(0,0,0);">tail [</font><font style="color:rgb(0,0,0);">参数</font><font style="color:rgb(0,0,0);">] </font><font style="color:rgb(0,0,0);">文件名 </font></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">显示指定文件的末尾</font></strong><strong><font style="color:rgb(0,0,0);">num</font></strong><strong><font style="color:rgb(0,0,0);">行</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(0,145,255);">-n </font></strong><font style="color:rgb(243,50,50);">num</font><font style="color:rgb(0,0,0);">：显示指定文件的末尾</font><font style="color:rgb(0,0,0);">num</font><font style="color:rgb(0,0,0);">行 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># tail -n 2 file1 </span>
</code></pre></div></td></tr></table></div>
<p><em><font style="color:rgb(0,0,0);">4 </font></em></p>
<p><em><font style="color:rgb(0,0,0);">5 </font></em></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">持续刷新文件内容</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-f </font></strong><font style="color:rgb(0,0,0);">：持续刷新文件内容。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span>
<span class="normal"><a href="#__codelineno-23-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># tail -f /var/log/cron </span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a>......<span class="w"> </span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a>Jan<span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">00</span>:23:01<span class="w"> </span>ansible<span class="w"> </span>CROND<span class="o">[</span><span class="m">4710</span><span class="o">]</span>:<span class="w"> </span><span class="o">(</span>root<span class="o">)</span><span class="w"> </span>CMD<span class="w"> </span><span class="o">(</span>logger<span class="w"> </span><span class="s2">&quot;EX200 in progress&quot;</span><span class="o">)</span><span class="w"> </span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a>Jan<span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">00</span>:24:01<span class="w"> </span>ansible<span class="w"> </span>CROND<span class="o">[</span><span class="m">4743</span><span class="o">]</span>:<span class="w"> </span><span class="o">(</span>root<span class="o">)</span><span class="w"> </span>CMD<span class="w"> </span><span class="o">(</span>logger<span class="w"> </span><span class="s2">&quot;EX200 in progress&quot;</span><span class="o">)</span>
</code></pre></div></td></tr></table></div>
<h1 id="mkdir命令">mkdir命令<a class="headerlink" href="#mkdir命令" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">mkdir</font><font style="color:rgb(0,0,0);">命令用于创建一个目录。 </font></p>
<p><font style="color:rgb(0,0,0);">用法：</font><font style="color:rgb(0,0,0);">mkdir [</font><font style="color:rgb(0,0,0);">参数</font><font style="color:rgb(0,0,0);">] </font><font style="color:rgb(0,0,0);">目录名 </font></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">创建目录</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><font style="color:rgb(0,0,0);">mkdir</font><font style="color:rgb(0,0,0);">命令用于创建一个目录。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># ls -d dir1/ </span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a>dir1/<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">递归创建目录</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-p</font></strong><font style="color:rgb(0,0,0);">：创建目录时，若父目录不存在，则同 时创建该目录与该目录的父目录。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span>
<span class="normal"><a href="#__codelineno-25-3">3</a></span>
<span class="normal"><a href="#__codelineno-25-4">4</a></span>
<span class="normal"><a href="#__codelineno-25-5">5</a></span>
<span class="normal"><a href="#__codelineno-25-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># mkdir -p /D1/D2/D3/D4 </span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># tree /D1 </span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a>/D1<span class="w"> </span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a>└──<span class="w"> </span>D2<span class="w"> </span>
<a id="__codelineno-25-5" name="__codelineno-25-5"></a>└──<span class="w"> </span>D3<span class="w"> </span>
<a id="__codelineno-25-6" name="__codelineno-25-6"></a>└──<span class="w"> </span>D4<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<h1 id="rmdir命令">rmdir命令<a class="headerlink" href="#rmdir命令" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">rmdir</font><font style="color:rgb(0,0,0);">命令用于删除空目录 </font></p>
<p><font style="color:rgb(0,0,0);">用法：</font><font style="color:rgb(0,0,0);">rmdir [</font><font style="color:rgb(0,0,0);">参数</font><font style="color:rgb(0,0,0);">] </font><font style="color:rgb(0,0,0);">目录名 </font></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">删除空目录</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span>
<span class="normal"><a href="#__codelineno-26-2">2</a></span>
<span class="normal"><a href="#__codelineno-26-3">3</a></span>
<span class="normal"><a href="#__codelineno-26-4">4</a></span>
<span class="normal"><a href="#__codelineno-26-5">5</a></span>
<span class="normal"><a href="#__codelineno-26-6">6</a></span>
<span class="normal"><a href="#__codelineno-26-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># rmdir D1 </span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a>rmdir:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>remove<span class="w"> </span><span class="s1">&#39;D1&#39;</span>:<span class="w"> </span>Directory<span class="w"> </span>not<span class="w"> </span>empty<span class="w"> </span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># rmdir D1/D2/D3/D4/ </span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># tree D1/ </span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a>D1/<span class="w"> </span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a>└──<span class="w"> </span>D2<span class="w"> </span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a>└──<span class="w"> </span>D3<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">递归删除目录</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-p</font></strong><font style="color:rgb(0,0,0);">：删除目录时，一同删除目录，但是父目录中除了要删除的目录之外必须已经没有其他目录及文 件。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span>
<span class="normal"><a href="#__codelineno-27-4">4</a></span>
<span class="normal"><a href="#__codelineno-27-5">5</a></span>
<span class="normal"><a href="#__codelineno-27-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># tree D1 </span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a>D1<span class="w"> </span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a>└──<span class="w"> </span>D1.11<span class="w"> </span>directory,<span class="w"> </span><span class="m">0</span><span class="w"> </span>files<span class="w"> </span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># rmdir -p D1/D1.1/ </span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>/<span class="o">]</span><span class="c1"># ls -d D1 </span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a>ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;D1&#39;</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</code></pre></div></td></tr></table></div>
<h1 id="cp命令">cp命令<a class="headerlink" href="#cp命令" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">cp</font><font style="color:rgb(0,0,0);">命令主要用于文件或者目录的复制。 </font></p>
<p><font style="color:rgb(0,0,0);">用法：cp [选项] 源文件 目标文件</font></p>
<p><img alt="" src="../../../../images/1715777205282-14320338-a032-4aa8-aab4-d83525d12166.png" /></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">递归复制目录</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-r</font></strong><font style="color:rgb(0,0,0);">：递归复制目录（将目录下所有内容一起复制） </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span>
<span class="normal"><a href="#__codelineno-28-2">2</a></span>
<span class="normal"><a href="#__codelineno-28-3">3</a></span>
<span class="normal"><a href="#__codelineno-28-4">4</a></span>
<span class="normal"><a href="#__codelineno-28-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>~<span class="o">]</span><span class="c1"># cp /var/www / </span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a>cp:<span class="w"> </span>-r<span class="w"> </span>not<span class="w"> </span>specified<span class="p">;</span><span class="w"> </span>omitting<span class="w"> </span>directory<span class="w"> </span><span class="s1">&#39;/var/www&#39;</span><span class="w"> </span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>~<span class="o">]</span><span class="c1"># cp -r /var/www / </span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>~<span class="o">]</span><span class="c1"># ls -d /www </span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a>/www
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">保留源文件的相关属性</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-p</font></strong><font style="color:rgb(0,0,0);">：保留源文件的相关属性 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>ansible<span class="o">]</span><span class="c1"># ll </span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a>total<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>ansible<span class="w"> </span>ansible<span class="w"> </span><span class="m">0</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">12</span>:30<span class="w"> </span>file<span class="w"> </span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>ansible<span class="o">]</span><span class="c1"># cp file / </span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>ansible<span class="o">]</span><span class="c1"># ll /file </span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">12</span>:32<span class="w"> </span>/file<span class="w"> </span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>ansible<span class="o">]</span><span class="c1"># cp -p file / </span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a>cp:<span class="w"> </span>overwrite<span class="w"> </span><span class="s1">&#39;/file&#39;</span>?<span class="w"> </span>y<span class="w"> </span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>ansible<span class="o">]</span><span class="c1"># ll /file </span>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>ansible<span class="w"> </span>ansible<span class="w"> </span><span class="m">0</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">12</span>:30<span class="w"> </span>/file<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(243,50,50);">-a</font></strong><font style="color:rgb(0,0,0);">：等同于同时使用以上选项</font></p>
<h1 id="mv命令"><font style="color:rgb(0,0,0);">mv命令</font><a class="headerlink" href="#mv命令" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">mv</font><font style="color:rgb(0,0,0);">命令主要用于文件或者目录的</font><font style="color:rgb(243,50,50);">移动</font><font style="color:rgb(0,0,0);">或</font><font style="color:rgb(243,50,50);">改名 </font></p>
<p><font style="color:rgb(0,0,0);">用法：mv [参数] 源文件或目录 目标文件或目录</font></p>
<p><font style="color:rgb(0,0,0);"># mv 源文件 目标 </font></p>
<p><img alt="" src="../../../../images/1715777352018-770c6003-ccc6-4d05-bb02-dd74894d2e28.png" /></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">目标文件或目录存在，提示是否覆盖</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-i</font></strong><font style="color:rgb(0,0,0);">：如果目标文件或者目录存在，则提示是否覆盖目标文件或者目录 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span>
<span class="normal"><a href="#__codelineno-30-2">2</a></span>
<span class="normal"><a href="#__codelineno-30-3">3</a></span>
<span class="normal"><a href="#__codelineno-30-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># mv 1.txt / </span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a>mv:<span class="w"> </span>overwrite<span class="w"> </span><span class="s1">&#39;/1.txt&#39;</span>?<span class="w"> </span>y<span class="w"> </span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># mv -i 1.txt / </span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a>mv:<span class="w"> </span>overwrite<span class="w"> </span><span class="s1">&#39;/1.txt&#39;</span>?<span class="w"> </span>y
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---强制移动或者覆盖---</font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-f</font></strong><font style="color:rgb(0,0,0);">：无论目标文件或者目录是否存在，直接覆盖目标文件或者目录。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># mv -f 1.txt / </span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">同时移动多个目录</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-t</font></strong><font style="color:rgb(0,0,0);">：将多个目录</font><font style="color:rgb(0,0,0);">mv</font><font style="color:rgb(0,0,0);">到一个目录中 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span>
<span class="normal"><a href="#__codelineno-32-2">2</a></span>
<span class="normal"><a href="#__codelineno-32-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># mv D1 D2 D3 -t / </span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls -d /D* </span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a>/D1<span class="w"> </span>/D2<span class="w"> </span>/D3<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(243,50,50);">注意：参数 </font><strong><font style="color:rgb(243,50,50);">-t </font></strong><font style="color:rgb(243,50,50);">后面必须要紧跟</font><font style="color:rgb(243,50,50);">mv</font><font style="color:rgb(243,50,50);">之后的目标目录 </font></p>
<p><font style="color:rgb(0,0,0);">第二种写法： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span>
<span class="normal"><a href="#__codelineno-33-2">2</a></span>
<span class="normal"><a href="#__codelineno-33-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># mv -t / D1 D2 D3 </span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls -d /D*</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a>/D1<span class="w"> </span>/D2<span class="w"> </span>/D3
</code></pre></div></td></tr></table></div>
<h1 id="rm命令">rm命令<a class="headerlink" href="#rm命令" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">rm</font><font style="color:rgb(0,0,0);">命令主要用于删除文件或者目录 </font></p>
<p><font style="color:rgb(0,0,0);">用法：rm [参数] 文件或目录名 rm -rf /</font></p>
<p><img alt="" src="../../../../images/1715777415313-4d847761-458b-4054-960c-698b7aaf275b.png" /></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">递归删除</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-r</font></strong><font style="color:rgb(0,0,0);">：递归删除目录与目录中的所有文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span>
<span class="normal"><a href="#__codelineno-34-3">3</a></span>
<span class="normal"><a href="#__codelineno-34-4">4</a></span>
<span class="normal"><a href="#__codelineno-34-5">5</a></span>
<span class="normal"><a href="#__codelineno-34-6">6</a></span>
<span class="normal"><a href="#__codelineno-34-7">7</a></span>
<span class="normal"><a href="#__codelineno-34-8">8</a></span>
<span class="normal"><a href="#__codelineno-34-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># rm -r A </span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a>rm:<span class="w"> </span>descend<span class="w"> </span>into<span class="w"> </span>directory<span class="w"> </span><span class="s1">&#39;A&#39;</span>?<span class="w"> </span>y<span class="w"> </span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a>rm:<span class="w"> </span>descend<span class="w"> </span>into<span class="w"> </span>directory<span class="w"> </span><span class="s1">&#39;A/B&#39;</span>?<span class="w"> </span>y<span class="w"> </span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a>rm:<span class="w"> </span>remove<span class="w"> </span>directory<span class="w"> </span><span class="s1">&#39;A/B/C&#39;</span>?<span class="w"> </span>y<span class="w"> </span>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a>rm:<span class="w"> </span>remove<span class="w"> </span>regular<span class="w"> </span>empty<span class="w"> </span>file<span class="w"> </span><span class="s1">&#39;A/B/fileC&#39;</span>?<span class="w"> </span>y<span class="w"> </span>
<a id="__codelineno-34-6" name="__codelineno-34-6"></a>rm:<span class="w"> </span>remove<span class="w"> </span>directory<span class="w"> </span><span class="s1">&#39;A/B&#39;</span>?<span class="w"> </span>y<span class="w"> </span>
<a id="__codelineno-34-7" name="__codelineno-34-7"></a>rm:<span class="w"> </span>remove<span class="w"> </span>regular<span class="w"> </span>empty<span class="w"> </span>file<span class="w"> </span><span class="s1">&#39;A/fileB&#39;</span>?<span class="w"> </span>y<span class="w"> </span>
<a id="__codelineno-34-8" name="__codelineno-34-8"></a>rm:<span class="w"> </span>remove<span class="w"> </span>directory<span class="w"> </span><span class="s1">&#39;A&#39;</span>?<span class="w"> </span>y<span class="w"> </span>
<a id="__codelineno-34-9" name="__codelineno-34-9"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1">#</span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">强制删除</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-f</font></strong><font style="color:rgb(0,0,0);">：强制删除且不提示 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1">1</a></span>
<span class="normal"><a href="#__codelineno-35-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># rm -f 2.txt </span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># </span>
</code></pre></div></td></tr></table></div>
<h1 id="touch命令">touch命令<a class="headerlink" href="#touch命令" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">touch</font><font style="color:rgb(0,0,0);">命令用于建立文件 </font></p>
<p><font style="color:rgb(0,0,0);">用法：touch [参数] 文件或目录名</font></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">创建文件</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span>
<span class="normal"><a href="#__codelineno-36-2">2</a></span>
<span class="normal"><a href="#__codelineno-36-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># touch file </span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ll file </span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">17</span>:18<span class="w"> </span>file<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---刷新时间--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-m</font></strong><font style="color:rgb(0,0,0);">：仅把文件或目录的存取时间改为当前时间 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span>
<span class="normal"><a href="#__codelineno-37-4">4</a></span>
<span class="normal"><a href="#__codelineno-37-5">5</a></span>
<span class="normal"><a href="#__codelineno-37-6">6</a></span>
<span class="normal"><a href="#__codelineno-37-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ll </span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a>total<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a>drwxr-xr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">18</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">17</span>:19<span class="w"> </span>difu<span class="w"> </span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># touch -m difu/ </span>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ll </span>
<a id="__codelineno-37-6" name="__codelineno-37-6"></a>total<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-37-7" name="__codelineno-37-7"></a>drwxr-xr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">18</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">17</span>:20<span class="w"> </span>difu
</code></pre></div></td></tr></table></div>
<h1 id="find命令">find命令<a class="headerlink" href="#find命令" title="Permanent link">&para;</a></h1>
<p><strong><font style="color:rgb(0,0,0);">find</font></strong><strong><font style="color:rgb(0,0,0);">命令用于文件查找 </font></strong></p>
<p><font style="color:rgb(0,0,0);">用法：find [路径] [匹配表达式]</font></p>
<p><img alt="" src="../../../../images/1715777535906-9a2f2596-ee98-4f4f-8532-2fb9a4e0b4ac.png" /></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">查找指定文件</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-name </font></strong><strong><font style="color:rgb(243,50,50);">文件名</font></strong><font style="color:rgb(0,0,0);">：查找指定的文件名称 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span>
<span class="normal"><a href="#__codelineno-38-2">2</a></span>
<span class="normal"><a href="#__codelineno-38-3">3</a></span>
<span class="normal"><a href="#__codelineno-38-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a>ABC<span class="w"> </span>difu<span class="w"> </span>file<span class="w"> </span>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># find / -name ABC </span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a>/time/ABC<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">查找属于指定用户文件</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-user </font></strong><strong><font style="color:rgb(243,50,50);">用户名</font></strong><font style="color:rgb(0,0,0);">：查找属于指定用户的文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span>
<span class="normal"><a href="#__codelineno-39-2">2</a></span>
<span class="normal"><a href="#__codelineno-39-3">3</a></span>
<span class="normal"><a href="#__codelineno-39-4">4</a></span>
<span class="normal"><a href="#__codelineno-39-5">5</a></span>
<span class="normal"><a href="#__codelineno-39-6">6</a></span>
<span class="normal"><a href="#__codelineno-39-7">7</a></span>
<span class="normal"><a href="#__codelineno-39-8">8</a></span>
<span class="normal"><a href="#__codelineno-39-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ll</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a>total<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>RHEL<span class="w"> </span>RHEL<span class="w"> </span><span class="m">0</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">17</span>:22<span class="w"> </span>ABC<span class="w"> </span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a>drwxr-xr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">18</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">17</span>:22<span class="w"> </span>difu<span class="w"> </span>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">17</span>:22<span class="w"> </span>file<span class="w"> </span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># find / -user RHEL </span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a>......<span class="w"> </span>
<a id="__codelineno-39-8" name="__codelineno-39-8"></a>/time/ABC<span class="w"> </span>
<a id="__codelineno-39-9" name="__codelineno-39-9"></a>......
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">查找属于指定组文件</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-group </font></strong><strong><font style="color:rgb(243,50,50);">组名</font></strong><font style="color:rgb(0,0,0);">：查找属于指定组的文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1">1</a></span>
<span class="normal"><a href="#__codelineno-40-2">2</a></span>
<span class="normal"><a href="#__codelineno-40-3">3</a></span>
<span class="normal"><a href="#__codelineno-40-4">4</a></span>
<span class="normal"><a href="#__codelineno-40-5">5</a></span>
<span class="normal"><a href="#__codelineno-40-6">6</a></span>
<span class="normal"><a href="#__codelineno-40-7">7</a></span>
<span class="normal"><a href="#__codelineno-40-8">8</a></span>
<span class="normal"><a href="#__codelineno-40-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ll </span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a>total<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>RHEL<span class="w"> </span>RHEL<span class="w"> </span><span class="m">0</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">17</span>:22<span class="w"> </span>ABC<span class="w"> </span>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a>drwxr-xr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">18</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">17</span>:22<span class="w"> </span>difu<span class="w"> </span>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">17</span>:22<span class="w"> </span>file<span class="w"> </span>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># find / -group RHEL </span>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a>......<span class="w"> </span>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a>/time/ABC<span class="w"> </span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a>......<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---查找指定大小范围文件--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-size +n / -n</font></strong><font style="color:rgb(0,0,0);">：查找大于或者小于指定大小的文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-41-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-41-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-41-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-41-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-41-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-41-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-41-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-41-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-41-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># find / -size +500M </span>
<a id="__codelineno-41-2" name="__codelineno-41-2"></a>......<span class="w"> </span>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a>/mnt/images/install.img<span class="w"> </span>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ll -h /mnt/images/install.img </span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a>-r--r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span>583M<span class="w"> </span>Oct<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span>/mnt/images/install.img<span class="w"> </span>
<a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># find / -size -5 </span>
<a id="__codelineno-41-7" name="__codelineno-41-7"></a>......<span class="w"> </span>
<a id="__codelineno-41-8" name="__codelineno-41-8"></a>/1.txt<span class="w"> </span>
<a id="__codelineno-41-9" name="__codelineno-41-9"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ll -h /1.txt </span>
<a id="__codelineno-41-10" name="__codelineno-41-10"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">17</span>:38<span class="w"> </span>/1.txt
</code></pre></div></td></tr></table></div>
<h1 id="通配符">通配符<a class="headerlink" href="#通配符" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">文件通配在</font><font style="color:rgb(0,0,0);">ls</font><font style="color:rgb(0,0,0);">，</font><font style="color:rgb(0,0,0);">cp</font><font style="color:rgb(0,0,0);">，</font><font style="color:rgb(0,0,0);">rm</font><font style="color:rgb(0,0,0);">等文件管理命令会经常用到 </font></p>
<p><font style="color:rgb(0,0,0);">使用通配符符来表示某一类文件</font></p>
<table>
<thead>
<tr>
<th>通配符号</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><font style="color:rgb(243,50,50);">* </font></strong></td>
<td>表示任意长度的任意字符</td>
</tr>
<tr>
<td><strong><font style="color:rgb(243,50,50);">？</font></strong></td>
<td>表示单个任意字符</td>
</tr>
<tr>
<td><strong><font style="color:rgb(243,50,50);">[ ] </font></strong></td>
<td><font style="color:rgb(57,57,57);">表示集合范围内的任意单个字符[0-9]表示任意单个数字，[a-z]表示任意单个</font><font style="color:rgb(243,50,50);">小写</font><font style="color:rgb(57,57,57);">字母</font></td>
</tr>
<tr>
<td><strong><font style="color:rgb(243,50,50);">[^]</font></strong></td>
<td><font style="color:rgb(57,57,57);">表示不在集合范围内的单个字符 </font><br/><font style="color:rgb(57,57,57);">[^a-z]表示除小写字母以外的其他字符</font></td>
</tr>
<tr>
<td><strong><font style="color:rgb(243,50,50);">{ } </font></strong></td>
<td><font style="color:rgb(57,57,57);">展开{ }中的内容</font></td>
</tr>
</tbody>
</table>
<p>例子</p>
<p>查找归simone所有的所有文件并将其副本放入/root/found目录</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1">1</a></span>
<span class="normal"><a href="#__codelineno-42-2">2</a></span>
<span class="normal"><a href="#__codelineno-42-3">3</a></span>
<span class="normal"><a href="#__codelineno-42-4">4</a></span>
<span class="normal"><a href="#__codelineno-42-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="s1">&#39;[commond]&#39;</span><span class="o">===</span>$<span class="o">[</span>commond<span class="o">]</span>
<a id="__codelineno-42-2" name="__codelineno-42-2"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/root/found
<a id="__codelineno-42-3" name="__codelineno-42-3"></a>cp<span class="w"> </span>-a<span class="w"> </span><span class="sb">`</span>find<span class="w"> </span>/<span class="w"> </span>-user<span class="w"> </span>simone<span class="sb">`</span><span class="w"> </span>/root/found
<a id="__codelineno-42-4" name="__codelineno-42-4"></a>或者
<a id="__codelineno-42-5" name="__codelineno-42-5"></a>cp<span class="w"> </span>-a<span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>/<span class="w"> </span>-user<span class="w"> </span>simone<span class="k">)</span><span class="w"> </span>/root/found
</code></pre></div></td></tr></table></div>
<h1 id="tar文件归档打包工具"><strong><font style="color:rgb(243,50,50);">tar文件归档打包工具</font></strong><a class="headerlink" href="#tar文件归档打包工具" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">将多个文件或者目录打包成一个文件 </font></p>
<p><font style="color:rgb(0,0,0);">用法：tar [选项] 归档后的文件 被归档的文件</font></p>
<p><img alt="" src="../../../../images/1715777804675-375515c8-90e5-4f69-b173-6aa88673d42d.png" /></p>
<p><strong><font style="color:rgb(0,0,0);">---创建归档文件---</font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1">1</a></span>
<span class="normal"><a href="#__codelineno-43-2">2</a></span>
<span class="normal"><a href="#__codelineno-43-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># tar -cf file.tar file1 file2 file3</span>
<a id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls</span>
<a id="__codelineno-43-3" name="__codelineno-43-3"></a>file1<span class="w"> </span>file2<span class="w"> </span>file3<span class="w"> </span>file.tar<span class="w"> </span>tar
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---提取归档文件---</font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-44-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-44-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-44-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-44-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-44-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-44-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-44-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-44-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-44-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># tar -xvf file.tar -C tar/</span>
<a id="__codelineno-44-2" name="__codelineno-44-2"></a>file1
<a id="__codelineno-44-3" name="__codelineno-44-3"></a>file2
<a id="__codelineno-44-4" name="__codelineno-44-4"></a>file3
<a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># tree tar/</span>
<a id="__codelineno-44-6" name="__codelineno-44-6"></a>tar/
<a id="__codelineno-44-7" name="__codelineno-44-7"></a>├──<span class="w"> </span>file1
<a id="__codelineno-44-8" name="__codelineno-44-8"></a>├──<span class="w"> </span>file2
<a id="__codelineno-44-9" name="__codelineno-44-9"></a>└──<span class="w"> </span>file3
<a id="__codelineno-44-10" name="__codelineno-44-10"></a><span class="m">0</span><span class="w"> </span>directories,<span class="w"> </span><span class="m">3</span><span class="w"> </span>files
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(243,50,50);">归档并压缩</font></strong></p>
<p><font style="color:rgb(0,0,0);">tar </font><font style="color:rgb(0,0,0);">本身不具备压缩功能，可以通过调用其它压缩工具进行压缩 </font></p>
<p><font style="color:rgb(0,0,0);">用法：tar [选项] 压缩文件 源文件</font></p>
<p><font style="color:rgb(0,0,0);">linux</font><font style="color:rgb(0,0,0);">下常用的压缩工具：</font><font style="color:rgb(0,0,0);">gzip bzip2 </font></p>
<p><font style="color:rgb(0,0,0);">创建的归档名称可以自定义，可通过</font><font style="color:rgb(243,50,50);">file命令</font><font style="color:rgb(0,0,0);">查看归档类型。</font></p>
<p><img alt="" src="../../../../images/1715777887296-adb79ec0-1514-4811-9972-a4f75114bc97.png" /></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">创建与提取</font></strong><strong><font style="color:rgb(0,0,0);">gzip</font></strong><strong><font style="color:rgb(0,0,0);">压缩格式</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-z(</font></strong><strong><font style="color:rgb(243,50,50);">小写</font></strong><strong><font style="color:rgb(243,50,50);">)</font></strong><font style="color:rgb(0,0,0);">：使用</font><font style="color:rgb(0,0,0);">gzip</font><font style="color:rgb(0,0,0);">压缩 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-45-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-45-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-45-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-45-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-45-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-45-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-45-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-45-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-45-10">10</a></span>
<span class="normal"><a href="#__codelineno-45-11">11</a></span>
<span class="normal"><a href="#__codelineno-45-12">12</a></span>
<span class="normal"><a href="#__codelineno-45-13">13</a></span>
<span class="normal"><a href="#__codelineno-45-14">14</a></span>
<span class="normal"><a href="#__codelineno-45-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># tar -czvf file.tar.gzip file1 file2 file3 </span>
<a id="__codelineno-45-2" name="__codelineno-45-2"></a>file1<span class="w"> </span>
<a id="__codelineno-45-3" name="__codelineno-45-3"></a>file2<span class="w"> </span>
<a id="__codelineno-45-4" name="__codelineno-45-4"></a>file3<span class="w"> </span>
<a id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-45-6" name="__codelineno-45-6"></a>file1<span class="w"> </span>file2<span class="w"> </span>file3<span class="w"> </span>file.tar.gzip<span class="w"> </span>
<a id="__codelineno-45-7" name="__codelineno-45-7"></a>-x：提取gzip压缩文件<span class="w"> </span>
<a id="__codelineno-45-8" name="__codelineno-45-8"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-45-9" name="__codelineno-45-9"></a>file.tar.gzip<span class="w"> </span>
<a id="__codelineno-45-10" name="__codelineno-45-10"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># tar -xzvf file.tar.gzip </span>
<a id="__codelineno-45-11" name="__codelineno-45-11"></a>file1<span class="w"> </span>
<a id="__codelineno-45-12" name="__codelineno-45-12"></a>file2<span class="w"> </span>
<a id="__codelineno-45-13" name="__codelineno-45-13"></a>file3<span class="w"> </span>
<a id="__codelineno-45-14" name="__codelineno-45-14"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-45-15" name="__codelineno-45-15"></a>file1<span class="w"> </span>file2<span class="w"> </span>file3<span class="w"> </span>file.tar.gzip
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---创建与提取bzip2压缩格式--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-j(小写)</font></strong><font style="color:rgb(0,0,0);">：使用bzip2压缩 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1">1</a></span>
<span class="normal"><a href="#__codelineno-46-2">2</a></span>
<span class="normal"><a href="#__codelineno-46-3">3</a></span>
<span class="normal"><a href="#__codelineno-46-4">4</a></span>
<span class="normal"><a href="#__codelineno-46-5">5</a></span>
<span class="normal"><a href="#__codelineno-46-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># tar -cjvf file.tar.bzip2 file1 file2 file3 </span>
<a id="__codelineno-46-2" name="__codelineno-46-2"></a>file1<span class="w"> </span>
<a id="__codelineno-46-3" name="__codelineno-46-3"></a>file2<span class="w"> </span>
<a id="__codelineno-46-4" name="__codelineno-46-4"></a>file3<span class="w"> </span>
<a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls</span>
<a id="__codelineno-46-6" name="__codelineno-46-6"></a>file1<span class="w"> </span>file2<span class="w"> </span>file3<span class="w"> </span>file.tar.bzip2
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(243,50,50);">-x</font></strong><font style="color:rgb(0,0,0);">：提取bzip2压缩文件</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1">1</a></span>
<span class="normal"><a href="#__codelineno-47-2">2</a></span>
<span class="normal"><a href="#__codelineno-47-3">3</a></span>
<span class="normal"><a href="#__codelineno-47-4">4</a></span>
<span class="normal"><a href="#__codelineno-47-5">5</a></span>
<span class="normal"><a href="#__codelineno-47-6">6</a></span>
<span class="normal"><a href="#__codelineno-47-7">7</a></span>
<span class="normal"><a href="#__codelineno-47-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls</span>
<a id="__codelineno-47-2" name="__codelineno-47-2"></a>file.tar.bzip2
<a id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># tar -xjvf file.tar.bzip2</span>
<a id="__codelineno-47-4" name="__codelineno-47-4"></a>file1
<a id="__codelineno-47-5" name="__codelineno-47-5"></a>file2
<a id="__codelineno-47-6" name="__codelineno-47-6"></a>file3
<a id="__codelineno-47-7" name="__codelineno-47-7"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls</span>
<a id="__codelineno-47-8" name="__codelineno-47-8"></a>file1<span class="w"> </span>file2<span class="w"> </span>file3<span class="w"> </span>file.tar.bzip2
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">创建与提取</font></strong><strong><font style="color:rgb(0,0,0);">xz</font></strong><strong><font style="color:rgb(0,0,0);">压缩格式</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">-J</font></strong><strong><font style="color:rgb(243,50,50);">（大写）</font></strong><font style="color:rgb(0,0,0);">：使用</font><font style="color:rgb(0,0,0);">xz</font><font style="color:rgb(0,0,0);">压缩 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1">1</a></span>
<span class="normal"><a href="#__codelineno-48-2">2</a></span>
<span class="normal"><a href="#__codelineno-48-3">3</a></span>
<span class="normal"><a href="#__codelineno-48-4">4</a></span>
<span class="normal"><a href="#__codelineno-48-5">5</a></span>
<span class="normal"><a href="#__codelineno-48-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># tar -cJvf file.tar.xz file1 file2 file3 </span>
<a id="__codelineno-48-2" name="__codelineno-48-2"></a>file1<span class="w"> </span>
<a id="__codelineno-48-3" name="__codelineno-48-3"></a>file2<span class="w"> </span>
<a id="__codelineno-48-4" name="__codelineno-48-4"></a>file3<span class="w"> </span>
<a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-48-6" name="__codelineno-48-6"></a>file1<span class="w"> </span>file2<span class="w"> </span>file3<span class="w"> </span>file.tar.xz<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(243,50,50);">-x</font></strong><font style="color:rgb(0,0,0);">：提取</font><font style="color:rgb(0,0,0);">xz</font><font style="color:rgb(0,0,0);">压缩文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1">1</a></span>
<span class="normal"><a href="#__codelineno-49-2">2</a></span>
<span class="normal"><a href="#__codelineno-49-3">3</a></span>
<span class="normal"><a href="#__codelineno-49-4">4</a></span>
<span class="normal"><a href="#__codelineno-49-5">5</a></span>
<span class="normal"><a href="#__codelineno-49-6">6</a></span>
<span class="normal"><a href="#__codelineno-49-7">7</a></span>
<span class="normal"><a href="#__codelineno-49-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-49-2" name="__codelineno-49-2"></a>file.tar.xz<span class="w"> </span>
<a id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># tar -xJvf file.tar.xz </span>
<a id="__codelineno-49-4" name="__codelineno-49-4"></a>file1<span class="w"> </span>
<a id="__codelineno-49-5" name="__codelineno-49-5"></a>file2<span class="w"> </span>
<a id="__codelineno-49-6" name="__codelineno-49-6"></a>file3<span class="w"> </span>
<a id="__codelineno-49-7" name="__codelineno-49-7"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-49-8" name="__codelineno-49-8"></a>file1<span class="w"> </span>file2<span class="w"> </span>file3<span class="w"> </span>file.tar.xz
</code></pre></div></td></tr></table></div>
<h3 id="总结"><strong><font style="color:rgb(57,57,57);">总结：</font></strong><a class="headerlink" href="#总结" title="Permanent link">&para;</a></h3>
<p><font style="color:rgb(223,64,42);">tar -czvf [</font><font style="color:rgb(223,64,42);">创建归档并</font><font style="color:rgb(223,64,42);">gzip</font><font style="color:rgb(223,64,42);">压缩</font><font style="color:rgb(223,64,42);">] </font></p>
<p><font style="color:rgb(223,64,42);">tar -xzvf [</font><font style="color:rgb(223,64,42);">提取</font><font style="color:rgb(223,64,42);">gzip</font><font style="color:rgb(223,64,42);">压缩的归档文件</font><font style="color:rgb(223,64,42);">] </font></p>
<p><font style="color:rgb(223,64,42);">tar -cjvf [</font><font style="color:rgb(223,64,42);">创建归档并使用</font><font style="color:rgb(223,64,42);">bzip2</font><font style="color:rgb(223,64,42);">压缩</font><font style="color:rgb(223,64,42);">] </font></p>
<p><font style="color:rgb(223,64,42);">tar -cJvf [</font><font style="color:rgb(223,64,42);">创建归档并使用</font><font style="color:rgb(223,64,42);">xz</font><font style="color:rgb(223,64,42);">压缩</font><font style="color:rgb(223,64,42);">] </font></p>
<p><font style="color:rgb(223,64,42);">gzip ==== z </font></p>
<p><font style="color:rgb(223,64,42);">bzip2 ==== j </font></p>
<p><font style="color:rgb(223,64,42);">xz ===== J </font></p>
<p><font style="color:rgb(223,64,42);">zip ====== zip</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># tar -czvf /home/ahdifu/local.tar.gzip /home/myth/</span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">[归档后的目标路径] [文件源路径]</font></p>
<p><strong><font style="color:rgb(243,50,50);">其它一些常用的压缩文件工具</font></strong></p>
<p><font style="color:rgb(0,0,0);">zip工具</font></p>
<p><strong><font style="color:rgb(0,0,0);">---</font></strong><strong><font style="color:rgb(0,0,0);">创建与提取</font></strong><strong><font style="color:rgb(0,0,0);">zip</font></strong><strong><font style="color:rgb(0,0,0);">压缩格式</font></strong><strong><font style="color:rgb(0,0,0);">--- </font></strong></p>
<p><strong><font style="color:rgb(243,50,50);">zip</font></strong><font style="color:rgb(0,0,0);">：使用</font><font style="color:rgb(0,0,0);">zip</font><font style="color:rgb(0,0,0);">压缩 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1">1</a></span>
<span class="normal"><a href="#__codelineno-51-2">2</a></span>
<span class="normal"><a href="#__codelineno-51-3">3</a></span>
<span class="normal"><a href="#__codelineno-51-4">4</a></span>
<span class="normal"><a href="#__codelineno-51-5">5</a></span>
<span class="normal"><a href="#__codelineno-51-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># zip file.zip file1 file2 file3 </span>
<a id="__codelineno-51-2" name="__codelineno-51-2"></a>adding:<span class="w"> </span>file1<span class="w"> </span><span class="o">(</span>stored<span class="w"> </span><span class="m">0</span>%<span class="o">)</span><span class="w"> </span>
<a id="__codelineno-51-3" name="__codelineno-51-3"></a>adding:<span class="w"> </span>file2<span class="w"> </span><span class="o">(</span>stored<span class="w"> </span><span class="m">0</span>%<span class="o">)</span><span class="w"> </span>
<a id="__codelineno-51-4" name="__codelineno-51-4"></a>adding:<span class="w"> </span>file3<span class="w"> </span><span class="o">(</span>stored<span class="w"> </span><span class="m">0</span>%<span class="o">)</span><span class="w"> </span>
<a id="__codelineno-51-5" name="__codelineno-51-5"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-51-6" name="__codelineno-51-6"></a>file1<span class="w"> </span>file2<span class="w"> </span>file3<span class="w"> </span>file.zip<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(243,50,50);">unzip</font></strong><font style="color:rgb(0,0,0);">：提取</font><font style="color:rgb(0,0,0);">zip</font><font style="color:rgb(0,0,0);">压缩文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1">1</a></span>
<span class="normal"><a href="#__codelineno-52-2">2</a></span>
<span class="normal"><a href="#__codelineno-52-3">3</a></span>
<span class="normal"><a href="#__codelineno-52-4">4</a></span>
<span class="normal"><a href="#__codelineno-52-5">5</a></span>
<span class="normal"><a href="#__codelineno-52-6">6</a></span>
<span class="normal"><a href="#__codelineno-52-7">7</a></span>
<span class="normal"><a href="#__codelineno-52-8">8</a></span>
<span class="normal"><a href="#__codelineno-52-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-52-2" name="__codelineno-52-2"></a>file.zip<span class="w"> </span>
<a id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># unzip file.zip </span>
<a id="__codelineno-52-4" name="__codelineno-52-4"></a>Archive:<span class="w"> </span>file.zip<span class="w"> </span>
<a id="__codelineno-52-5" name="__codelineno-52-5"></a>extracting:<span class="w"> </span>file1<span class="w"> </span>
<a id="__codelineno-52-6" name="__codelineno-52-6"></a>extracting:<span class="w"> </span>file2<span class="w"> </span>
<a id="__codelineno-52-7" name="__codelineno-52-7"></a>extracting:<span class="w"> </span>file3<span class="w"> </span>
<a id="__codelineno-52-8" name="__codelineno-52-8"></a><span class="o">[</span>root@RHEL9<span class="w"> </span>time<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-52-9" name="__codelineno-52-9"></a>file1<span class="w"> </span>file2<span class="w"> </span>file3<span class="w"> </span>file.zip<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">一些命令的组合使用： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-53-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-53-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-53-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-53-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-53-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-53-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-53-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-53-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-53-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1"></a>ls<span class="w"> </span>-ld<span class="w"> </span><span class="o">====</span><span class="w"> </span>ll<span class="w"> </span>-d<span class="w"> </span>
<a id="__codelineno-53-2" name="__codelineno-53-2"></a><span class="nb">echo</span><span class="w"> </span>ahdifu<span class="w"> </span>&gt;<span class="w"> </span><span class="m">1</span>.txt<span class="w"> </span>
<a id="__codelineno-53-3" name="__codelineno-53-3"></a><span class="nb">echo</span><span class="w"> </span>ahdifu<span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="m">1</span>.txt<span class="w"> </span>
<a id="__codelineno-53-4" name="__codelineno-53-4"></a>rm<span class="w"> </span>-rf<span class="w"> </span>/time/*.*<span class="w"> </span>
<a id="__codelineno-53-5" name="__codelineno-53-5"></a>rm<span class="w"> </span>-rf<span class="w"> </span>/time/*<span class="w"> </span>
<a id="__codelineno-53-6" name="__codelineno-53-6"></a>rm<span class="w"> </span>-rf<span class="w"> </span>/time/*.t??<span class="w"> </span>
<a id="__codelineno-53-7" name="__codelineno-53-7"></a>a.txt<span class="w"> </span>bc.att<span class="w"> </span>cd..txt<span class="w"> </span>aaa.ttt
<a id="__codelineno-53-8" name="__codelineno-53-8"></a>cp<span class="w"> </span>-a<span class="w"> </span><span class="sb">`</span>find<span class="w"> </span>/<span class="w"> </span>-name<span class="w"> </span>*.txt<span class="sb">`</span><span class="w"> </span>/time
<a id="__codelineno-53-9" name="__codelineno-53-9"></a>find<span class="w"> </span>/<span class="w"> </span>-name<span class="w"> </span>*.txt<span class="w"> </span>-exec<span class="w"> </span>cp<span class="w"> </span>-a<span class="w"> </span><span class="o">{}</span><span class="w"> </span>/time/<span class="w"> </span><span class="se">\;</span>
<a id="__codelineno-53-10" name="__codelineno-53-10"></a>-exec<span class="w"> </span>：把查找到的内容交给exec后面的命令执行
</code></pre></div></td></tr></table></div>
<h1 id="配置主机名"><strong><font style="color:rgb(0,0,0);">配置主机名 </font></strong><a class="headerlink" href="#配置主机名" title="Permanent link">&para;</a></h1>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1">1</a></span>
<span class="normal"><a href="#__codelineno-54-2">2</a></span>
<span class="normal"><a href="#__codelineno-54-3">3</a></span>
<span class="normal"><a href="#__codelineno-54-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="c1"># hostnamectl set-hostname HOST_NAME </span>
<a id="__codelineno-54-2" name="__codelineno-54-2"></a><span class="o">[</span>root@ahdifu<span class="w"> </span>~<span class="o">]</span><span class="c1"># hostnamectl set-hostname Ahdifu </span>
<a id="__codelineno-54-3" name="__codelineno-54-3"></a><span class="nb">exit</span><span class="w"> </span>或者使用<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>bash退出再次登录shell<span class="w"> </span>
<a id="__codelineno-54-4" name="__codelineno-54-4"></a><span class="o">[</span>root@Ahdifu<span class="w"> </span>~<span class="o">]</span><span class="c1">#</span>
</code></pre></div></td></tr></table></div>
<h1 id="正确的关机方法"><strong><font style="color:rgb(0,0,0);">正确的关机方法</font></strong><a class="headerlink" href="#正确的关机方法" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">重启主机：</font><font style="color:rgb(0,0,0);">reboot </font></p>
<p><font style="color:rgb(0,0,0);">其它一些关机命令：</font><font style="color:rgb(0,0,0);">halt</font><font style="color:rgb(0,0,0);">、</font><font style="color:rgb(0,0,0);">poweroff</font><font style="color:rgb(0,0,0);">、</font><font style="color:rgb(0,0,0);">shutdown </font></p>
<p><font style="color:rgb(0,0,0);">shutdown作用：关机，重启，定时关机 </font></p>
<p><font style="color:rgb(0,0,0);">语法：shutdown [选项]</font></p>
<p><img alt="" src="../../../../images/1715778144966-f6afb585-1851-4283-8fd2-2e1b010402bb.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-55-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-55-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-55-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-55-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-55-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-55-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-55-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-55-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-55-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-55-10">10</a></span>
<span class="normal"><a href="#__codelineno-55-11">11</a></span>
<span class="normal"><a href="#__codelineno-55-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="c1"># shutdown -h +10 10分钟之后关机</span>
<a id="__codelineno-55-2" name="__codelineno-55-2"></a><span class="c1"># shutdown -h 23:30 指定具体的时间点进行关机</span>
<a id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="c1"># shutdown -h now 立即关机</span>
<a id="__codelineno-55-4" name="__codelineno-55-4"></a><span class="c1"># shutdown -r now 立即重启</span>
<a id="__codelineno-55-5" name="__codelineno-55-5"></a><span class="c1"># shutdown -r +10 10 分钟以后重启</span>
<a id="__codelineno-55-6" name="__codelineno-55-6"></a><span class="c1"># shutdown -r 22:22 22:22 以后重启</span>
<a id="__codelineno-55-7" name="__codelineno-55-7"></a>
<a id="__codelineno-55-8" name="__codelineno-55-8"></a>init：服务等级，Linux中一共有7个等级，目前先了解常用的4个等级
<a id="__codelineno-55-9" name="__codelineno-55-9"></a>init<span class="w"> </span><span class="m">0</span><span class="w"> </span>关机
<a id="__codelineno-55-10" name="__codelineno-55-10"></a>init<span class="w"> </span><span class="m">3</span><span class="w"> </span>纯命令行模式
<a id="__codelineno-55-11" name="__codelineno-55-11"></a>init<span class="w"> </span><span class="m">5</span><span class="w"> </span>含有图形界面的模式
<a id="__codelineno-55-12" name="__codelineno-55-12"></a>init<span class="w"> </span><span class="m">6</span><span class="w"> </span>重启
</code></pre></div></td></tr></table></div>
<h1 id="用户管理">用户管理<a class="headerlink" href="#用户管理" title="Permanent link">&para;</a></h1>
<p><strong><font style="color:rgb(0,0,0);">管理用户 </font></strong></p>
<p><font style="color:rgb(57,57,57);">useradd </font><font style="color:rgb(57,57,57);">， </font><font style="color:rgb(57,57,57);">userdel </font><font style="color:rgb(57,57,57);">， </font><font style="color:rgb(57,57,57);">usermod , passwd , id ,w,who, chage </font></p>
<p><font style="color:rgb(57,57,57);">添加用户：</font><font style="color:rgb(57,57,57);">useradd </font></p>
<p><font style="color:rgb(57,57,57);">1.useradd [</font><font style="color:rgb(57,57,57);">选项</font><font style="color:rgb(57,57,57);">] username </font></p>
<p><font style="color:rgb(57,57,57);">常见选项： </font></p>
<p><font style="color:rgb(223,64,42);">-u </font><font style="color:rgb(57,57,57);">指定 </font><font style="color:rgb(57,57,57);">UID </font></p>
<p><font style="color:rgb(223,64,42);">-g </font><font style="color:rgb(57,57,57);">指定基本组（组 ID/组名）</font></p>
<p><font style="color:rgb(223,64,42);">-G </font><font style="color:rgb(57,57,57);">指定附加组 （组 </font><font style="color:rgb(57,57,57);">ID/</font><font style="color:rgb(57,57,57);">组名） </font></p>
<p><font style="color:rgb(57,57,57);">-c </font><font style="color:rgb(57,57,57);">添加描述 </font></p>
<p><font style="color:rgb(57,57,57);">-d </font><font style="color:rgb(57,57,57);">指定用户家目录 </font></p>
<p><font style="color:rgb(223,64,42);">-s </font><font style="color:rgb(57,57,57);">指定默认登录 </font><font style="color:rgb(57,57,57);">shell </font></p>
<p><font style="color:rgb(57,57,57);">-e </font><font style="color:rgb(57,57,57);">指定账户过期日期</font><font style="color:rgb(57,57,57);">,</font><font style="color:rgb(57,57,57);">格式 </font><font style="color:rgb(57,57,57);">YY-MM-DD </font></p>
<p><font style="color:rgb(57,57,57);">-M </font><font style="color:rgb(57,57,57);">不创建家目录 </font></p>
<p><font style="color:rgb(57,57,57);">-r 添加为系统用户（不可以为纯数字）</font></p>
<p><font style="color:rgb(57,57,57);">用户家目录文件是由</font><font style="color:rgb(57,57,57);">/etc/skel </font><font style="color:rgb(57,57,57);">目录中复制而来 </font></p>
<p><font style="color:rgb(57,57,57);">新建用户默认属性变量文件：/etc/login.defs</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-56-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-56-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-56-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-56-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-56-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-56-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-56-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-56-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-56-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-56-10">10</a></span>
<span class="normal"><a href="#__codelineno-56-11">11</a></span>
<span class="normal"><a href="#__codelineno-56-12">12</a></span>
<span class="normal"><a href="#__codelineno-56-13">13</a></span>
<span class="normal"><a href="#__codelineno-56-14">14</a></span>
<span class="normal"><a href="#__codelineno-56-15">15</a></span>
<span class="normal"><a href="#__codelineno-56-16">16</a></span>
<span class="normal"><a href="#__codelineno-56-17">17</a></span>
<span class="normal"><a href="#__codelineno-56-18">18</a></span>
<span class="normal"><a href="#__codelineno-56-19">19</a></span>
<span class="normal"><a href="#__codelineno-56-20">20</a></span>
<span class="normal"><a href="#__codelineno-56-21">21</a></span>
<span class="normal"><a href="#__codelineno-56-22">22</a></span>
<span class="normal"><a href="#__codelineno-56-23">23</a></span>
<span class="normal"><a href="#__codelineno-56-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># useradd yukang</span>
<a id="__codelineno-56-2" name="__codelineno-56-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># cat /etc/passwd</span>
<a id="__codelineno-56-3" name="__codelineno-56-3"></a>yukang:x:1001:1001::/home/yukang:/bin/bash
<a id="__codelineno-56-4" name="__codelineno-56-4"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id yukang</span>
<a id="__codelineno-56-5" name="__codelineno-56-5"></a><span class="nv">uid</span><span class="o">=</span><span class="m">1001</span><span class="o">(</span>yukang<span class="o">)</span><span class="w"> </span><span class="nv">gid</span><span class="o">=</span><span class="m">1001</span><span class="o">(</span>yukang<span class="o">)</span><span class="w"> </span><span class="nv">groups</span><span class="o">=</span><span class="m">1001</span><span class="o">(</span>yukang<span class="o">)</span>
<a id="__codelineno-56-6" name="__codelineno-56-6"></a>创建一个用户名为<span class="w"> </span>ansible<span class="w"> </span>且<span class="w"> </span>uid<span class="w"> </span>为<span class="w"> </span><span class="m">2000</span>：
<a id="__codelineno-56-7" name="__codelineno-56-7"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># useradd -u 2000 ansible</span>
<a id="__codelineno-56-8" name="__codelineno-56-8"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id ansible</span>
<a id="__codelineno-56-9" name="__codelineno-56-9"></a><span class="nv">uid</span><span class="o">=</span><span class="m">2000</span><span class="o">(</span>ansible<span class="o">)</span><span class="w"> </span><span class="nv">gid</span><span class="o">=</span><span class="m">2000</span><span class="o">(</span>ansible<span class="o">)</span><span class="w"> </span><span class="nv">groups</span><span class="o">=</span><span class="m">2000</span><span class="o">(</span>ansible<span class="o">)</span>
<a id="__codelineno-56-10" name="__codelineno-56-10"></a>创建用户时候，会同时创建相同名字的用户组，默认只有基本组
<a id="__codelineno-56-11" name="__codelineno-56-11"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># useradd -u 1500 test01 -g difushare</span>
<a id="__codelineno-56-12" name="__codelineno-56-12"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id test01</span>
<a id="__codelineno-56-13" name="__codelineno-56-13"></a><span class="nv">uid</span><span class="o">=</span><span class="m">1500</span><span class="o">(</span>test01<span class="o">)</span><span class="w"> </span><span class="nv">gid</span><span class="o">=</span><span class="m">2001</span><span class="o">(</span>difushare<span class="o">)</span><span class="w"> </span><span class="nv">groups</span><span class="o">=</span><span class="m">2001</span><span class="o">(</span>difushare<span class="o">)</span>
<a id="__codelineno-56-14" name="__codelineno-56-14"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># useradd user01 -G difushare</span>
<a id="__codelineno-56-15" name="__codelineno-56-15"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id user01</span>
<a id="__codelineno-56-16" name="__codelineno-56-16"></a><span class="nv">uid</span><span class="o">=</span><span class="m">2001</span><span class="o">(</span>user01<span class="o">)</span><span class="w"> </span><span class="nv">gid</span><span class="o">=</span><span class="m">2002</span><span class="o">(</span>user01<span class="o">)</span><span class="w"> </span><span class="nv">groups</span><span class="o">=</span><span class="m">2002</span><span class="o">(</span>user01<span class="o">)</span>,2001<span class="o">(</span>difushare<span class="o">)</span>
<a id="__codelineno-56-17" name="__codelineno-56-17"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># useradd -u 3000 -s /sbin/nologin -M web</span>
<a id="__codelineno-56-18" name="__codelineno-56-18"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id web</span>
<a id="__codelineno-56-19" name="__codelineno-56-19"></a><span class="nv">uid</span><span class="o">=</span><span class="m">3000</span><span class="o">(</span>web<span class="o">)</span><span class="w"> </span><span class="nv">gid</span><span class="o">=</span><span class="m">3000</span><span class="o">(</span>web<span class="o">)</span><span class="w"> </span><span class="nv">groups</span><span class="o">=</span><span class="m">3000</span><span class="o">(</span>web<span class="o">)</span>
<a id="__codelineno-56-20" name="__codelineno-56-20"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># cd /home/</span>
<a id="__codelineno-56-21" name="__codelineno-56-21"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># su - web</span>
<a id="__codelineno-56-22" name="__codelineno-56-22"></a>su:<span class="w"> </span>warning:<span class="w"> </span>cannot<span class="w"> </span>change<span class="w"> </span>directory<span class="w"> </span>to<span class="w"> </span>/home/web:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
<a id="__codelineno-56-23" name="__codelineno-56-23"></a>This<span class="w"> </span>account<span class="w"> </span>is<span class="w"> </span>currently<span class="w"> </span>not<span class="w"> </span>available.<span class="w"> </span>
<a id="__codelineno-56-24" name="__codelineno-56-24"></a><span class="o">[</span>root@Myth_RHEL<span class="w"> </span>~<span class="o">]</span><span class="c1"># useradd -s /bin/false user4</span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">删除用户</font><font style="color:rgb(57,57,57);">: userdel </font></p>
<p><font style="color:rgb(57,57,57);">2.userdel </font></p>
<p><font style="color:rgb(57,57,57);">[</font><font style="color:rgb(57,57,57);">选项</font><font style="color:rgb(57,57,57);">] </font></p>
<p><font style="color:rgb(57,57,57);">username </font></p>
<p><font style="color:rgb(57,57,57);">-f </font><font style="color:rgb(57,57,57);">强制删除 </font></p>
<p><font style="color:rgb(57,57,57);">-r </font><font style="color:rgb(57,57,57);">删除用户时同时删除用户家目录 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-57-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-57-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-57-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-57-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-57-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-57-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-57-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-57-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-57-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-57-10">10</a></span>
<span class="normal"><a href="#__codelineno-57-11">11</a></span>
<span class="normal"><a href="#__codelineno-57-12">12</a></span>
<span class="normal"><a href="#__codelineno-57-13">13</a></span>
<span class="normal"><a href="#__codelineno-57-14">14</a></span>
<span class="normal"><a href="#__codelineno-57-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>/<span class="o">]</span><span class="c1"># cd /home/ </span>
<a id="__codelineno-57-2" name="__codelineno-57-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>home<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-57-3" name="__codelineno-57-3"></a>ansible<span class="w"> </span>myth<span class="w"> </span>test01<span class="w"> </span>test02<span class="w"> </span>user01<span class="w"> </span>
<a id="__codelineno-57-4" name="__codelineno-57-4"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>home<span class="o">]</span><span class="c1"># userdel test01 </span>
<a id="__codelineno-57-5" name="__codelineno-57-5"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>home<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-57-6" name="__codelineno-57-6"></a>ansible<span class="w"> </span>myth<span class="w"> </span>test01<span class="w"> </span>test02<span class="w"> </span>user01<span class="w"> </span>
<a id="__codelineno-57-7" name="__codelineno-57-7"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>home<span class="o">]</span><span class="c1"># cat /etc/passwd </span>
<a id="__codelineno-57-8" name="__codelineno-57-8"></a>myth:x:1000:1000:myth:/home/myth:/bin/bash<span class="w"> </span>
<a id="__codelineno-57-9" name="__codelineno-57-9"></a>ansible:x:2000:2000::/home/ansible:/bin/bash<span class="w"> </span>
<a id="__codelineno-57-10" name="__codelineno-57-10"></a>test02:x:1600:1600::/home/test02:/bin/bash<span class="w"> </span>
<a id="__codelineno-57-11" name="__codelineno-57-11"></a>user01:x:2001:2002::/home/user01:/bin/bash<span class="w"> </span>
<a id="__codelineno-57-12" name="__codelineno-57-12"></a>web:x:3000:3000::/home/web:/sbin/nologin<span class="w"> </span>
<a id="__codelineno-57-13" name="__codelineno-57-13"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># cd /var/spool/mail/ </span>
<a id="__codelineno-57-14" name="__codelineno-57-14"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>mail<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-57-15" name="__codelineno-57-15"></a>ansible<span class="w"> </span>myth<span class="w"> </span>rpc<span class="w"> </span>test01<span class="w"> </span>test02<span class="w"> </span>user01<span class="w"> </span>web<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">直接使用 </font><font style="color:rgb(57,57,57);">userdel </font><font style="color:rgb(57,57,57);">不加参数删除用户，可以删除用户，但是不删除用 </font></p>
<p><font style="color:rgb(57,57,57);">户的家目录和邮件目录 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-58-1">1</a></span>
<span class="normal"><a href="#__codelineno-58-2">2</a></span>
<span class="normal"><a href="#__codelineno-58-3">3</a></span>
<span class="normal"><a href="#__codelineno-58-4">4</a></span>
<span class="normal"><a href="#__codelineno-58-5">5</a></span>
<span class="normal"><a href="#__codelineno-58-6">6</a></span>
<span class="normal"><a href="#__codelineno-58-7">7</a></span>
<span class="normal"><a href="#__codelineno-58-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>home<span class="o">]</span><span class="c1"># userdel user01 </span>
<a id="__codelineno-58-2" name="__codelineno-58-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>home<span class="o">]</span><span class="c1"># useradd user01 </span>
<a id="__codelineno-58-3" name="__codelineno-58-3"></a>useradd:<span class="w"> </span>warning:<span class="w"> </span>the<span class="w"> </span>home<span class="w"> </span>directory<span class="w"> </span>already<span class="w"> </span>exists.<span class="w"> </span>
<a id="__codelineno-58-4" name="__codelineno-58-4"></a>Not<span class="w"> </span>copying<span class="w"> </span>any<span class="w"> </span>file<span class="w"> </span>from<span class="w"> </span>skel<span class="w"> </span>directory<span class="w"> </span>into<span class="w"> </span>it.<span class="w"> </span>
<a id="__codelineno-58-5" name="__codelineno-58-5"></a>Creating<span class="w"> </span>mailbox<span class="w"> </span>file:<span class="w"> </span>File<span class="w"> </span>exists
<a id="__codelineno-58-6" name="__codelineno-58-6"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>home<span class="o">]</span><span class="c1"># userdel -rf user01</span>
<a id="__codelineno-58-7" name="__codelineno-58-7"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>home<span class="o">]</span><span class="c1"># ls</span>
<a id="__codelineno-58-8" name="__codelineno-58-8"></a>ansible<span class="w"> </span>myth<span class="w"> </span>test02
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">管理组 </font></strong></p>
<p><font style="color:rgb(57,57,57);">groupadd: </font><font style="color:rgb(57,57,57);">添加组 </font></p>
<p><strong><font style="color:rgb(57,57,57);">-g </font></strong><strong><font style="color:rgb(57,57,57);">指定 </font></strong><strong><font style="color:rgb(57,57,57);">GID </font></strong></p>
<p><font style="color:rgb(57,57,57);">[root@df_rhel ~]# groupadd -g 2019 difutech </font></p>
<p><font style="color:rgb(0,0,0);">[root@df_rhel ~]# cat /etc/group [</font><font style="color:rgb(0,0,0);">查看创建的组及组 </font><font style="color:rgb(0,0,0);">ID] </font></p>
<p><font style="color:rgb(57,57,57);">groupdel : </font><font style="color:rgb(57,57,57);">删除组 </font></p>
<p><font style="color:rgb(57,57,57);">查看账户属性信息</font><font style="color:rgb(57,57,57);">: id </font></p>
<p><font style="color:rgb(57,57,57);">3.id username </font></p>
<p><font style="color:rgb(57,57,57);">-u </font><font style="color:rgb(57,57,57);">显示 </font><font style="color:rgb(57,57,57);">UID </font></p>
<p><font style="color:rgb(57,57,57);">-g </font><font style="color:rgb(57,57,57);">显示基本组 </font><font style="color:rgb(57,57,57);">GID </font></p>
<p><font style="color:rgb(57,57,57);">-G </font><font style="color:rgb(57,57,57);">显示附加组 </font><font style="color:rgb(57,57,57);">GID </font></p>
<p><font style="color:rgb(57,57,57);">-n </font><font style="color:rgb(57,57,57);">和 </font><font style="color:rgb(57,57,57);">u,g,G </font><font style="color:rgb(57,57,57);">一起使用，显示具体名称，不显示 </font><font style="color:rgb(57,57,57);">id, </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-59-1">1</a></span>
<span class="normal"><a href="#__codelineno-59-2">2</a></span>
<span class="normal"><a href="#__codelineno-59-3">3</a></span>
<span class="normal"><a href="#__codelineno-59-4">4</a></span>
<span class="normal"><a href="#__codelineno-59-5">5</a></span>
<span class="normal"><a href="#__codelineno-59-6">6</a></span>
<span class="normal"><a href="#__codelineno-59-7">7</a></span>
<span class="normal"><a href="#__codelineno-59-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id myth </span>
<a id="__codelineno-59-2" name="__codelineno-59-2"></a><span class="nv">uid</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span><span class="nv">gid</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span><span class="nv">groups</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span>
<a id="__codelineno-59-3" name="__codelineno-59-3"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id -nu myth </span>
<a id="__codelineno-59-4" name="__codelineno-59-4"></a>myth<span class="w"> </span>
<a id="__codelineno-59-5" name="__codelineno-59-5"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id -ng myth </span>
<a id="__codelineno-59-6" name="__codelineno-59-6"></a>myth<span class="w"> </span>
<a id="__codelineno-59-7" name="__codelineno-59-7"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id -nG myth </span>
<a id="__codelineno-59-8" name="__codelineno-59-8"></a>myth
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">查看用户信息： </font><font style="color:rgb(57,57,57);">w/who </font></p>
<p><font style="color:rgb(57,57,57);">w:</font><font style="color:rgb(57,57,57);">查看当前登录系统的所有系统信息 </font></p>
<p><font style="color:rgb(57,57,57);">who:</font><font style="color:rgb(57,57,57);">查看当前登录用户 </font></p>
<p><font style="color:rgb(57,57,57);">修改账号属性：</font><font style="color:rgb(57,57,57);">usermod </font></p>
<p><font style="color:rgb(57,57,57);">5.usermod [</font><font style="color:rgb(57,57,57);">选项</font><font style="color:rgb(57,57,57);">] username </font></p>
<p><font style="color:rgb(57,57,57);">-u </font><font style="color:rgb(57,57,57);">修改 </font><font style="color:rgb(57,57,57);">uid </font></p>
<p><font style="color:rgb(57,57,57);">-g </font><font style="color:rgb(57,57,57);">修改基本组 </font></p>
<p><font style="color:rgb(57,57,57);">-G </font><font style="color:rgb(57,57,57);">修改附加组 </font></p>
<p><font style="color:rgb(57,57,57);">--</font><font style="color:rgb(57,57,57);">会覆盖原有的附加组 </font></p>
<p><font style="color:rgb(57,57,57);">-a -G </font><font style="color:rgb(57,57,57);">添加附加组 </font><font style="color:rgb(57,57,57);">--</font><font style="color:rgb(57,57,57);">不会覆盖 </font></p>
<p><font style="color:rgb(57,57,57);">-s </font><font style="color:rgb(57,57,57);">修改登录 </font><font style="color:rgb(57,57,57);">shell </font></p>
<p><strong><font style="color:rgb(57,57,57);">-u </font></strong><strong><font style="color:rgb(57,57,57);">修改 </font></strong><strong><font style="color:rgb(57,57,57);">uid </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-60-1">1</a></span>
<span class="normal"><a href="#__codelineno-60-2">2</a></span>
<span class="normal"><a href="#__codelineno-60-3">3</a></span>
<span class="normal"><a href="#__codelineno-60-4">4</a></span>
<span class="normal"><a href="#__codelineno-60-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id myth </span>
<a id="__codelineno-60-2" name="__codelineno-60-2"></a><span class="nv">uid</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span><span class="nv">gid</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span><span class="nv">groups</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span>
<a id="__codelineno-60-3" name="__codelineno-60-3"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># usermod -u 1111 myth </span>
<a id="__codelineno-60-4" name="__codelineno-60-4"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id myth </span>
<a id="__codelineno-60-5" name="__codelineno-60-5"></a><span class="nv">uid</span><span class="o">=</span><span class="m">1111</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span><span class="nv">gid</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span><span class="nv">groups</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(57,57,57);">-g </font></strong><strong><font style="color:rgb(57,57,57);">修改基本组 </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-61-1">1</a></span>
<span class="normal"><a href="#__codelineno-61-2">2</a></span>
<span class="normal"><a href="#__codelineno-61-3">3</a></span>
<span class="normal"><a href="#__codelineno-61-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># usermod -g difushare myth </span>
<a id="__codelineno-61-2" name="__codelineno-61-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id myth </span>
<a id="__codelineno-61-3" name="__codelineno-61-3"></a><span class="nv">uid</span><span class="o">=</span><span class="m">1111</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span><span class="nv">gid</span><span class="o">=</span><span class="m">2001</span><span class="o">(</span>difushare<span class="o">)</span><span class="w"> </span><span class="nv">groups</span><span class="o">=</span><span class="m">2001</span><span class="o">(</span>difushare<span class="o">)</span>,1000<span class="o">(</span>myth<span class="o">)</span><span class="w"> </span>
<a id="__codelineno-61-4" name="__codelineno-61-4"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(57,57,57);">-G </font></strong><strong><font style="color:rgb(57,57,57);">修改附加组 </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-62-1">1</a></span>
<span class="normal"><a href="#__codelineno-62-2">2</a></span>
<span class="normal"><a href="#__codelineno-62-3">3</a></span>
<span class="normal"><a href="#__codelineno-62-4">4</a></span>
<span class="normal"><a href="#__codelineno-62-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id myth </span>
<a id="__codelineno-62-2" name="__codelineno-62-2"></a><span class="nv">uid</span><span class="o">=</span><span class="m">1111</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span><span class="nv">gid</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span><span class="nv">groups</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myth<span class="o">)</span>,2001<span class="o">(</span>difushare<span class="o">)</span>
<a id="__codelineno-62-3" name="__codelineno-62-3"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># usermod -G difustudent myth </span>
<a id="__codelineno-62-4" name="__codelineno-62-4"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id myth </span>
<a id="__codelineno-62-5" name="__codelineno-62-5"></a><span class="nv">uid</span><span class="o">=</span><span class="m">1111</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span><span class="nv">gid</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span><span class="nv">groups</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myth<span class="o">)</span>,3001<span class="o">(</span>difustudent<span class="o">)</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">思考题： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-63-1">1</a></span>
<span class="normal"><a href="#__codelineno-63-2">2</a></span>
<span class="normal"><a href="#__codelineno-63-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># usermod -G myth myth </span>
<a id="__codelineno-63-2" name="__codelineno-63-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># id myth </span>
<a id="__codelineno-63-3" name="__codelineno-63-3"></a><span class="nv">uid</span><span class="o">=</span><span class="m">1111</span><span class="o">(</span>myth<span class="o">)</span><span class="w"> </span><span class="nv">gid</span><span class="o">=</span><span class="m">2001</span><span class="o">(</span>difushare<span class="o">)</span><span class="w"> </span><span class="nv">groups</span><span class="o">=</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(57,57,57);">-s </font></strong><strong><font style="color:rgb(57,57,57);">修改登录 </font></strong><strong><font style="color:rgb(57,57,57);">shell </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-64-1">1</a></span>
<span class="normal"><a href="#__codelineno-64-2">2</a></span>
<span class="normal"><a href="#__codelineno-64-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># usermod -s /sbin/nologin ansible </span>
<a id="__codelineno-64-2" name="__codelineno-64-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># su - ansible </span>
<a id="__codelineno-64-3" name="__codelineno-64-3"></a>This<span class="w"> </span>account<span class="w"> </span>is<span class="w"> </span>currently<span class="w"> </span>not<span class="w"> </span>available.<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">修改用户密码 ： </font><font style="color:rgb(57,57,57);">passwd </font></p>
<p><font style="color:rgb(57,57,57);">6.passwd username : </font></p>
<p><font style="color:rgb(57,57,57);">--stdin </font><font style="color:rgb(57,57,57);">从标准输入读取密码 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-65-1">1</a></span>
<span class="normal"><a href="#__codelineno-65-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1"></a><span class="c1">#echo “password” | passwd --stdin username --使用标准输入更改密码 不适合debian和ubuntu</span>
<a id="__codelineno-65-2" name="__codelineno-65-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;root:password&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>chpasswd<span class="w"> </span><span class="c1">#适合大部分发行版</span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">切换用户 </font><font style="color:rgb(57,57,57);">: su </font></p>
<p><font style="color:rgb(57,57,57);">7.su </font><font style="color:rgb(57,57,57);">切换用户 </font></p>
<p><font style="color:rgb(0,0,0);">---“su ”</font><font style="color:rgb(0,0,0);">与 </font><font style="color:rgb(0,0,0);">“su - ” </font><font style="color:rgb(0,0,0);">的区别 </font></p>
<p><font style="color:rgb(57,57,57);">su username</font><font style="color:rgb(57,57,57);">：不会切换用户环境 </font></p>
<p><font style="color:rgb(57,57,57);">su </font><font style="color:rgb(223,64,42);">- </font><font style="color:rgb(57,57,57);">username</font><font style="color:rgb(57,57,57);">：切换用户环境，相当于用户正常登陆 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-66-1">1</a></span>
<span class="normal"><a href="#__codelineno-66-2">2</a></span>
<span class="normal"><a href="#__codelineno-66-3">3</a></span>
<span class="normal"><a href="#__codelineno-66-4">4</a></span>
<span class="normal"><a href="#__codelineno-66-5">5</a></span>
<span class="normal"><a href="#__codelineno-66-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># su myth </span>
<a id="__codelineno-66-2" name="__codelineno-66-2"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>root<span class="o">]</span>$<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>
<a id="__codelineno-66-3" name="__codelineno-66-3"></a><span class="nb">exit</span>
<a id="__codelineno-66-4" name="__codelineno-66-4"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># su - myth </span>
<a id="__codelineno-66-5" name="__codelineno-66-5"></a>Last<span class="w"> </span>login:<span class="w"> </span>Sat<span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">09</span>:53:01<span class="w"> </span>EDT<span class="w"> </span><span class="m">2019</span><span class="w"> </span>on<span class="w"> </span>pts/1<span class="w"> </span>
<a id="__codelineno-66-6" name="__codelineno-66-6"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">---</font><font style="color:rgb(0,0,0);">管理员与非管理员之间的切换 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-67-1">1</a></span>
<span class="normal"><a href="#__codelineno-67-2">2</a></span>
<span class="normal"><a href="#__codelineno-67-3">3</a></span>
<span class="normal"><a href="#__codelineno-67-4">4</a></span>
<span class="normal"><a href="#__codelineno-67-5">5</a></span>
<span class="normal"><a href="#__codelineno-67-6">6</a></span>
<span class="normal"><a href="#__codelineno-67-7">7</a></span>
<span class="normal"><a href="#__codelineno-67-8">8</a></span>
<span class="normal"><a href="#__codelineno-67-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># su - myth </span>
<a id="__codelineno-67-2" name="__codelineno-67-2"></a>Last<span class="w"> </span>login:<span class="w"> </span>Sat<span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">09</span>:50:32<span class="w"> </span>EDT<span class="w"> </span><span class="m">2019</span><span class="w"> </span>on<span class="w"> </span>pts/1<span class="w"> </span>
<a id="__codelineno-67-3" name="__codelineno-67-3"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>su<span class="w"> </span>-<span class="w"> </span>difu<span class="w"> </span>
<a id="__codelineno-67-4" name="__codelineno-67-4"></a>Password:<span class="w"> </span>
<a id="__codelineno-67-5" name="__codelineno-67-5"></a>Last<span class="w"> </span>login:<span class="w"> </span>Sat<span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">09</span>:50:48<span class="w"> </span>EDT<span class="w"> </span><span class="m">2019</span><span class="w"> </span>on<span class="w"> </span>pts/1<span class="w"> </span>
<a id="__codelineno-67-6" name="__codelineno-67-6"></a><span class="o">[</span>difu@df_rhel<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>su<span class="w"> </span>-<span class="w"> </span>root<span class="w"> </span>
<a id="__codelineno-67-7" name="__codelineno-67-7"></a>Password:<span class="w"> </span>
<a id="__codelineno-67-8" name="__codelineno-67-8"></a>Last<span class="w"> </span>login:<span class="w"> </span>Sat<span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">09</span>:11:31<span class="w"> </span>EDT<span class="w"> </span><span class="m">2019</span><span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.200.222<span class="w"> </span>on<span class="w"> </span>pts/1<span class="w"> </span>
<a id="__codelineno-67-9" name="__codelineno-67-9"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">从 </font><font style="color:rgb(0,0,0);">root </font><font style="color:rgb(0,0,0);">用户切换到其他用户是不需要密码验证，从普通用户切换到任何用户都 </font></p>
<p><font style="color:rgb(0,0,0);">需要密码验证</font></p>
<h1 id="文件权限管理"><font style="color:rgb(0,0,0);">文件权限管理</font><a class="headerlink" href="#文件权限管理" title="Permanent link">&para;</a></h1>
<p><strong><font style="color:rgb(0,0,0);">权限管理 </font></strong></p>
<p><font style="color:rgb(57,57,57);">普通权限：read ，write ，execute</font></p>
<p><img alt="" src="../../../../images/1716011045130-a7e6f743-131d-46d7-8ddc-55c468197d5a.png" /></p>
<p><font style="color:rgb(0,0,0);">查看文件权限属性： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-68-1">1</a></span>
<span class="normal"><a href="#__codelineno-68-2">2</a></span>
<span class="normal"><a href="#__codelineno-68-3">3</a></span>
<span class="normal"><a href="#__codelineno-68-4">4</a></span>
<span class="normal"><a href="#__codelineno-68-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>file.txt<span class="w"> </span>
<a id="__codelineno-68-2" name="__codelineno-68-2"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">0</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:00<span class="w"> </span>file.txt<span class="w"> </span>
<a id="__codelineno-68-3" name="__codelineno-68-3"></a>或<span class="w"> </span>
<a id="__codelineno-68-4" name="__codelineno-68-4"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>ll<span class="w"> </span>file.txt<span class="w"> </span>
<a id="__codelineno-68-5" name="__codelineno-68-5"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">0</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:00<span class="w"> </span>file.txt<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">查看目录的权限属性： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-69-1">1</a></span>
<span class="normal"><a href="#__codelineno-69-2">2</a></span>
<span class="normal"><a href="#__codelineno-69-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>ll<span class="w"> </span>-d<span class="w"> </span>dir
<a id="__codelineno-69-2" name="__codelineno-69-2"></a>drwxrwxr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">6</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>dir
<a id="__codelineno-69-3" name="__codelineno-69-3"></a><span class="m">111</span><span class="w"> </span><span class="m">111</span><span class="w"> </span><span class="m">000</span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">文件权限应用： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-70-1">1</a></span>
<span class="normal"><a href="#__codelineno-70-2">2</a></span>
<span class="normal"><a href="#__codelineno-70-3">3</a></span>
<span class="normal"><a href="#__codelineno-70-4">4</a></span>
<span class="normal"><a href="#__codelineno-70-5">5</a></span>
<span class="normal"><a href="#__codelineno-70-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1"></a><span class="o">[</span>difu@df_rhel<span class="w"> </span>tmp<span class="o">]</span>$<span class="w"> </span>ll<span class="w"> </span>file.txt<span class="w"> </span>
<a id="__codelineno-70-2" name="__codelineno-70-2"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">4</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:06<span class="w"> </span>file.txt<span class="w"> </span>
<a id="__codelineno-70-3" name="__codelineno-70-3"></a><span class="o">[</span>difu@df_rhel<span class="w"> </span>tmp<span class="o">]</span>$<span class="w"> </span>cat<span class="w"> </span>file.txt<span class="w"> </span>
<a id="__codelineno-70-4" name="__codelineno-70-4"></a><span class="m">123</span><span class="w"> </span>
<a id="__codelineno-70-5" name="__codelineno-70-5"></a><span class="o">[</span>difu@df_rhel<span class="w"> </span>tmp<span class="o">]</span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">456</span><span class="w"> </span>&gt;<span class="w"> </span>file.txt<span class="w"> </span>
<a id="__codelineno-70-6" name="__codelineno-70-6"></a>-bash:<span class="w"> </span>file.txt:<span class="w"> </span>Permission<span class="w"> </span>denied<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">file.txt 该文件的属主和属组都是 myth，因此 difu 这个用户对该文 </font></p>
<p><font style="color:rgb(57,57,57);">件的身份就属于 others，只有读（r）的权限，因此不能写入数据</font></p>
<p><font style="color:rgb(57,57,57);">目录权限应用： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-71-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-71-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-71-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-71-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-71-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-71-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-71-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-71-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-71-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-71-10">10</a></span>
<span class="normal"><a href="#__codelineno-71-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>home<span class="o">]</span>$<span class="w"> </span>ll<span class="w"> </span>
<a id="__codelineno-71-2" name="__codelineno-71-2"></a>total<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-71-3" name="__codelineno-71-3"></a>drwx------.<span class="w"> </span><span class="m">3</span><span class="w"> </span>ansible<span class="w"> </span>ansible<span class="w"> </span><span class="m">78</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">08</span>:03<span class="w"> </span>ansible<span class="w"> </span>
<a id="__codelineno-71-4" name="__codelineno-71-4"></a>drwx------.<span class="w"> </span><span class="m">5</span><span class="w"> </span>difu<span class="w"> </span>difu<span class="w"> </span><span class="m">128</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">09</span>:50<span class="w"> </span>difu<span class="w"> </span>
<a id="__codelineno-71-5" name="__codelineno-71-5"></a>drwx------.<span class="w"> </span><span class="m">6</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">139</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:05<span class="w"> </span>myth
<a id="__codelineno-71-6" name="__codelineno-71-6"></a>drwx------.<span class="w"> </span><span class="m">3</span><span class="w"> </span>test02<span class="w"> </span>test02<span class="w"> </span><span class="m">78</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">08</span>:12<span class="w"> </span>test02
<a id="__codelineno-71-7" name="__codelineno-71-7"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>home<span class="o">]</span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>difu
<a id="__codelineno-71-8" name="__codelineno-71-8"></a>-bash:<span class="w"> </span>cd:<span class="w"> </span>difu:<span class="w"> </span>Permission<span class="w"> </span>denied
<a id="__codelineno-71-9" name="__codelineno-71-9"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>home<span class="o">]</span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>myth
<a id="__codelineno-71-10" name="__codelineno-71-10"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span><span class="nb">pwd</span>
<a id="__codelineno-71-11" name="__codelineno-71-11"></a>/home/myth
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">权限修改： </font></p>
<p><font style="color:rgb(57,57,57);">chown : 修改文件或目录属主/属组 </font></p>
<p><strong><font style="color:rgb(57,57,57);">#chown username filename --修改属主 </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-72-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-72-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-72-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-72-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-72-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-72-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-72-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-72-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-72-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-72-10">10</a></span>
<span class="normal"><a href="#__codelineno-72-11">11</a></span>
<span class="normal"><a href="#__codelineno-72-12">12</a></span>
<span class="normal"><a href="#__codelineno-72-13">13</a></span>
<span class="normal"><a href="#__codelineno-72-14">14</a></span>
<span class="normal"><a href="#__codelineno-72-15">15</a></span>
<span class="normal"><a href="#__codelineno-72-16">16</a></span>
<span class="normal"><a href="#__codelineno-72-17">17</a></span>
<span class="normal"><a href="#__codelineno-72-18">18</a></span>
<span class="normal"><a href="#__codelineno-72-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll file.txt </span>
<a id="__codelineno-72-2" name="__codelineno-72-2"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">4</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:06<span class="w"> </span>file.txt<span class="w"> </span>
<a id="__codelineno-72-3" name="__codelineno-72-3"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># chown difu file.txt </span>
<a id="__codelineno-72-4" name="__codelineno-72-4"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll file.txt </span>
<a id="__codelineno-72-5" name="__codelineno-72-5"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>difu<span class="w"> </span>myth<span class="w"> </span><span class="m">4</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:06<span class="w"> </span>file.txt<span class="w"> </span>
<a id="__codelineno-72-6" name="__codelineno-72-6"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># su - difu </span>
<a id="__codelineno-72-7" name="__codelineno-72-7"></a><span class="o">[</span>difu@df_rhel<span class="w"> </span>tmp<span class="o">]</span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">456</span><span class="w"> </span>&gt;<span class="w"> </span>file.txt<span class="w"> </span>
<a id="__codelineno-72-8" name="__codelineno-72-8"></a><span class="o">[</span>difu@df_rhel<span class="w"> </span>tmp<span class="o">]</span>$<span class="w"> </span>cat<span class="w"> </span>file.txt
<a id="__codelineno-72-9" name="__codelineno-72-9"></a><span class="m">456</span>
<a id="__codelineno-72-10" name="__codelineno-72-10"></a><span class="o">[</span>difu@df_rhel<span class="w"> </span>tmp<span class="o">]</span>$<span class="w"> </span>su<span class="w"> </span>-<span class="w"> </span>myth
<a id="__codelineno-72-11" name="__codelineno-72-11"></a>Password:
<a id="__codelineno-72-12" name="__codelineno-72-12"></a>Last<span class="w"> </span>login:<span class="w"> </span>Sat<span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:10:38<span class="w"> </span>EDT<span class="w"> </span><span class="m">2019</span><span class="w"> </span>on<span class="w"> </span>pts/1
<a id="__codelineno-72-13" name="__codelineno-72-13"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>tmp<span class="o">]</span>$<span class="w"> </span>ll
<a id="__codelineno-72-14" name="__codelineno-72-14"></a>total<span class="w"> </span><span class="m">4</span>
<a id="__codelineno-72-15" name="__codelineno-72-15"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>difu<span class="w"> </span>myth<span class="w"> </span><span class="m">4</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:18<span class="w"> </span>file.txt
<a id="__codelineno-72-16" name="__codelineno-72-16"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>tmp<span class="o">]</span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">123</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>file.txt
<a id="__codelineno-72-17" name="__codelineno-72-17"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>tmp<span class="o">]</span>$<span class="w"> </span>cat<span class="w"> </span>file.txt
<a id="__codelineno-72-18" name="__codelineno-72-18"></a><span class="m">456</span>
<a id="__codelineno-72-19" name="__codelineno-72-19"></a><span class="m">123</span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(57,57,57);">#chown :grpname filename --修改属组 </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-73-1">1</a></span>
<span class="normal"><a href="#__codelineno-73-2">2</a></span>
<span class="normal"><a href="#__codelineno-73-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># chown :difu file.txt </span>
<a id="__codelineno-73-2" name="__codelineno-73-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll file.txt </span>
<a id="__codelineno-73-3" name="__codelineno-73-3"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>difu<span class="w"> </span>difu<span class="w"> </span><span class="m">8</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:20<span class="w"> </span>file.txt
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(57,57,57);">#chown username:grpname filename --修改属主和属组 </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-74-1">1</a></span>
<span class="normal"><a href="#__codelineno-74-2">2</a></span>
<span class="normal"><a href="#__codelineno-74-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># chown myth:myth file.txt </span>
<a id="__codelineno-74-2" name="__codelineno-74-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll file.txt </span>
<a id="__codelineno-74-3" name="__codelineno-74-3"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">8</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:20<span class="w"> </span>file.txt<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">-R 递归修改 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-75-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-75-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-75-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-75-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-75-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-75-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-75-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-75-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-75-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-75-10">10</a></span>
<span class="normal"><a href="#__codelineno-75-11">11</a></span>
<span class="normal"><a href="#__codelineno-75-12">12</a></span>
<span class="normal"><a href="#__codelineno-75-13">13</a></span>
<span class="normal"><a href="#__codelineno-75-14">14</a></span>
<span class="normal"><a href="#__codelineno-75-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll dirall/ </span>
<a id="__codelineno-75-2" name="__codelineno-75-2"></a>total<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-75-3" name="__codelineno-75-3"></a>drwxrwxr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>difu<span class="w"> </span>difu<span class="w"> </span><span class="m">6</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dir01<span class="w"> </span>
<a id="__codelineno-75-4" name="__codelineno-75-4"></a>drwxrwxr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>difu<span class="w"> </span>difu<span class="w"> </span><span class="m">6</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dir02<span class="w"> </span>
<a id="__codelineno-75-5" name="__codelineno-75-5"></a>drwxrwxr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>difu<span class="w"> </span>difu<span class="w"> </span><span class="m">6</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dir03<span class="w"> </span>
<a id="__codelineno-75-6" name="__codelineno-75-6"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll -d dirall/ </span>
<a id="__codelineno-75-7" name="__codelineno-75-7"></a>drwxrwxr-x.<span class="w"> </span><span class="m">5</span><span class="w"> </span>difu<span class="w"> </span>difu<span class="w"> </span><span class="m">45</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dirall/<span class="w"> </span>
<a id="__codelineno-75-8" name="__codelineno-75-8"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># chown -R myth:myth dirall </span>
<a id="__codelineno-75-9" name="__codelineno-75-9"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll dirall/ </span>
<a id="__codelineno-75-10" name="__codelineno-75-10"></a>total<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-75-11" name="__codelineno-75-11"></a>drwxrwxr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">6</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dir01<span class="w"> </span>
<a id="__codelineno-75-12" name="__codelineno-75-12"></a>drwxrwxr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">6</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dir02<span class="w"> </span>
<a id="__codelineno-75-13" name="__codelineno-75-13"></a>drwxrwxr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">6</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dir03
<a id="__codelineno-75-14" name="__codelineno-75-14"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll -d dirall/</span>
<a id="__codelineno-75-15" name="__codelineno-75-15"></a>drwxrwxr-x.<span class="w"> </span><span class="m">5</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">45</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dirall/
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">chgrp : 修改文件或目录属组 </font></p>
<p><strong><font style="color:rgb(57,57,57);">#chgrp grpname filename </font></strong></p>
<p><font style="color:rgb(57,57,57);">-R 递归修改 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-76-1">1</a></span>
<span class="normal"><a href="#__codelineno-76-2">2</a></span>
<span class="normal"><a href="#__codelineno-76-3">3</a></span>
<span class="normal"><a href="#__codelineno-76-4">4</a></span>
<span class="normal"><a href="#__codelineno-76-5">5</a></span>
<span class="normal"><a href="#__codelineno-76-6">6</a></span>
<span class="normal"><a href="#__codelineno-76-7">7</a></span>
<span class="normal"><a href="#__codelineno-76-8">8</a></span>
<span class="normal"><a href="#__codelineno-76-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll </span>
<a id="__codelineno-76-2" name="__codelineno-76-2"></a>total<span class="w"> </span><span class="m">4</span><span class="w"> </span>
<a id="__codelineno-76-3" name="__codelineno-76-3"></a>drwxrwxr-x.<span class="w"> </span><span class="m">5</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">45</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dirall<span class="w"> </span>
<a id="__codelineno-76-4" name="__codelineno-76-4"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">8</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:20<span class="w"> </span>file.txt<span class="w"> </span>
<a id="__codelineno-76-5" name="__codelineno-76-5"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># chgrp difu ./* </span>
<a id="__codelineno-76-6" name="__codelineno-76-6"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll </span>
<a id="__codelineno-76-7" name="__codelineno-76-7"></a>total<span class="w"> </span><span class="m">4</span><span class="w"> </span>
<a id="__codelineno-76-8" name="__codelineno-76-8"></a>drwxrwxr-x.<span class="w"> </span><span class="m">5</span><span class="w"> </span>myth<span class="w"> </span>difu<span class="w"> </span><span class="m">45</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dirall<span class="w"> </span>
<a id="__codelineno-76-9" name="__codelineno-76-9"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>myth<span class="w"> </span>difu<span class="w"> </span><span class="m">8</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:20<span class="w"> </span>file.txt
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">chmod : 修改文件/目录权限 </font></p>
<p><font style="color:rgb(57,57,57);">选项： -R 递归修改</font><img alt="" src="../../../../images/1716011263151-e5fbd6b7-db83-49f1-8516-2c7a6ba49335.png" /></p>
<p><font style="color:rgb(0,32,96);">#chmod u+r 文件 为属主增加读的权限 </font></p>
<p><font style="color:rgb(0,32,96);">#chmod o=rx 文件 将其他人的权限设置为读和执行 </font></p>
<p><font style="color:rgb(0,32,96);">#chmod a=r 文件 将属主的权限设置为只读 </font></p>
<p><font style="color:rgb(0,32,96);">#chmod g-x 文件 减去属组执行的权限 </font></p>
<p><font style="color:rgb(0,0,0);">•</font><font style="color:rgb(255,0,0);">权限位是由 rwx 组成，没有权限可以不写或用“-”填充</font></p>
<p><strong><font style="color:rgb(0,32,96);">chmod u </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-77-1">1</a></span>
<span class="normal"><a href="#__codelineno-77-2">2</a></span>
<span class="normal"><a href="#__codelineno-77-3">3</a></span>
<span class="normal"><a href="#__codelineno-77-4">4</a></span>
<span class="normal"><a href="#__codelineno-77-5">5</a></span>
<span class="normal"><a href="#__codelineno-77-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># chmod u+x file.txt </span>
<a id="__codelineno-77-2" name="__codelineno-77-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll file.txt </span>
<a id="__codelineno-77-3" name="__codelineno-77-3"></a>-rwxrw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>myth<span class="w"> </span>difu<span class="w"> </span><span class="m">8</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:20<span class="w"> </span>file.txt<span class="w"> </span>
<a id="__codelineno-77-4" name="__codelineno-77-4"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># chmod u-w file.txt </span>
<a id="__codelineno-77-5" name="__codelineno-77-5"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll file.txt </span>
<a id="__codelineno-77-6" name="__codelineno-77-6"></a>-r-xrw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>myth<span class="w"> </span>difu<span class="w"> </span><span class="m">8</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:20<span class="w"> </span>file.txt
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,32,96);">chmod o </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-78-1">1</a></span>
<span class="normal"><a href="#__codelineno-78-2">2</a></span>
<span class="normal"><a href="#__codelineno-78-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># chmod o=rwx file.txt </span>
<a id="__codelineno-78-2" name="__codelineno-78-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll file.txt </span>
<a id="__codelineno-78-3" name="__codelineno-78-3"></a>-r-xrw-rwx.<span class="w"> </span><span class="m">1</span><span class="w"> </span>myth<span class="w"> </span>difu<span class="w"> </span><span class="m">8</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:20<span class="w"> </span>file.txt<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,32,96);">chmod g </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-79-1">1</a></span>
<span class="normal"><a href="#__codelineno-79-2">2</a></span>
<span class="normal"><a href="#__codelineno-79-3">3</a></span>
<span class="normal"><a href="#__codelineno-79-4">4</a></span>
<span class="normal"><a href="#__codelineno-79-5">5</a></span>
<span class="normal"><a href="#__codelineno-79-6">6</a></span>
<span class="normal"><a href="#__codelineno-79-7">7</a></span>
<span class="normal"><a href="#__codelineno-79-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># chmod -R g=--- dirall/ </span>
<a id="__codelineno-79-2" name="__codelineno-79-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll dirall/ </span>
<a id="__codelineno-79-3" name="__codelineno-79-3"></a>total<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-79-4" name="__codelineno-79-4"></a>drwx---r-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">6</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dir01<span class="w"> </span>
<a id="__codelineno-79-5" name="__codelineno-79-5"></a>drwx---r-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">6</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dir02<span class="w"> </span>
<a id="__codelineno-79-6" name="__codelineno-79-6"></a>drwx---r-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>myth<span class="w"> </span>myth<span class="w"> </span><span class="m">6</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dir03<span class="w"> </span>
<a id="__codelineno-79-7" name="__codelineno-79-7"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ll -d dirall </span>
<a id="__codelineno-79-8" name="__codelineno-79-8"></a>drwx---r-x.<span class="w"> </span><span class="m">5</span><span class="w"> </span>myth<span class="w"> </span>difu<span class="w"> </span><span class="m">45</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:26<span class="w"> </span>dirall
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">分别修改三类用户的权限 </font></p>
<p><font style="color:rgb(57,57,57);">三类用户： </font></p>
<p><font style="color:rgb(57,57,57);">u:属主</font></p>
<p><font style="color:rgb(57,57,57);">g:属组 </font></p>
<p><font style="color:rgb(57,57,57);">o:其它用户 </font></p>
<p><font style="color:rgb(57,57,57);">a:所有用户 </font></p>
<p><font style="color:rgb(57,57,57);">使用‘+’ ‘-’ ‘=’ 设置各类用户的权限 </font></p>
<p><font style="color:rgb(57,57,57);">#chmod u+x filename </font></p>
<p><font style="color:rgb(57,57,57);">#chmod o-w filename </font></p>
<p><font style="color:rgb(57,57,57);">#chmod a+x filename </font></p>
<p><font style="color:rgb(57,57,57);">#chmod o=r-x filename </font></p>
<p><font style="color:rgb(57,57,57);">没有权限直接接补为-</font></p>
<h2 id="文件访问控制列表"><font style="color:rgb(57,57,57);">文件访问控制列表 </font><a class="headerlink" href="#文件访问控制列表" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(57,57,57);">setfacl : 文件系统访问控制列表，针对具体用户设定权限，而非 </font></p>
<p><font style="color:rgb(57,57,57);">u,g,o 三类用户 </font></p>
<p><font style="color:rgb(57,57,57);">-m 设定权限 </font></p>
<p><font style="color:rgb(57,57,57);">-x 取消权限 </font></p>
<p><strong><font style="color:rgb(57,57,57);">#setfacl -m u:username:rw- filename --设定用户 acl </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-80-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-80-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-80-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-80-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-80-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-80-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-80-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-80-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-80-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-80-10">10</a></span>
<span class="normal"><a href="#__codelineno-80-11">11</a></span>
<span class="normal"><a href="#__codelineno-80-12">12</a></span>
<span class="normal"><a href="#__codelineno-80-13">13</a></span>
<span class="normal"><a href="#__codelineno-80-14">14</a></span>
<span class="normal"><a href="#__codelineno-80-15">15</a></span>
<span class="normal"><a href="#__codelineno-80-16">16</a></span>
<span class="normal"><a href="#__codelineno-80-17">17</a></span>
<span class="normal"><a href="#__codelineno-80-18">18</a></span>
<span class="normal"><a href="#__codelineno-80-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>public<span class="o">]</span><span class="c1"># ll </span>
<a id="__codelineno-80-2" name="__codelineno-80-2"></a>total<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-80-3" name="__codelineno-80-3"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:50<span class="w"> </span>file01.txt<span class="w"> </span>
<a id="__codelineno-80-4" name="__codelineno-80-4"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:50<span class="w"> </span>file02.txt<span class="w"> </span>
<a id="__codelineno-80-5" name="__codelineno-80-5"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>public<span class="o">]</span><span class="c1"># setfacl -m u:myth:rw file01.txt</span>
<a id="__codelineno-80-6" name="__codelineno-80-6"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>public<span class="o">]</span><span class="c1"># ll</span>
<a id="__codelineno-80-7" name="__codelineno-80-7"></a>total<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-80-8" name="__codelineno-80-8"></a>-rw-rw-r--+<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:50<span class="w"> </span>file01.txt<span class="w"> </span>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">0</span><span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:50<span class="w"> </span>file02.txt
<a id="__codelineno-80-9" name="__codelineno-80-9"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>public<span class="o">]</span><span class="c1"># getfacl file01.txt</span>
<a id="__codelineno-80-10" name="__codelineno-80-10"></a><span class="c1"># file: file01.txt</span>
<a id="__codelineno-80-11" name="__codelineno-80-11"></a><span class="c1"># owner: root</span>
<a id="__codelineno-80-12" name="__codelineno-80-12"></a><span class="c1"># group: root</span>
<a id="__codelineno-80-13" name="__codelineno-80-13"></a>user::rw-<span class="w"> </span>user:myth:rw-<span class="w"> </span>group::rw-<span class="w"> </span>mask::rw-<span class="w"> </span>other::r--
<a id="__codelineno-80-14" name="__codelineno-80-14"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>public<span class="o">]</span><span class="c1"># su - myth</span>
<a id="__codelineno-80-15" name="__codelineno-80-15"></a>Last<span class="w"> </span>login:<span class="w"> </span>Sat<span class="w"> </span>May<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span>:56:33<span class="w"> </span>EDT<span class="w"> </span><span class="m">2019</span><span class="w"> </span>on<span class="w"> </span>pts/1
<a id="__codelineno-80-16" name="__codelineno-80-16"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/home/public/
<a id="__codelineno-80-17" name="__codelineno-80-17"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>public<span class="o">]</span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">123</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>file01.txt
<a id="__codelineno-80-18" name="__codelineno-80-18"></a><span class="o">[</span>myth@df_rhel<span class="w"> </span>public<span class="o">]</span>$<span class="w"> </span>cat<span class="w"> </span>file01.txt
<a id="__codelineno-80-19" name="__codelineno-80-19"></a><span class="m">123</span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(57,57,57);">#setfacl -m g:grpname:r-x filename --设定组 acl </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-81-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-81-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-81-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-81-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-81-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-81-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-81-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-81-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-81-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-81-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>public<span class="o">]</span><span class="c1"># setfacl -m g:difu:rw file02.txt </span>
<a id="__codelineno-81-2" name="__codelineno-81-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>public<span class="o">]</span><span class="c1"># getfacl file02.txt </span>
<a id="__codelineno-81-3" name="__codelineno-81-3"></a><span class="c1"># file: file02.txt </span>
<a id="__codelineno-81-4" name="__codelineno-81-4"></a><span class="c1"># owner: root </span>
<a id="__codelineno-81-5" name="__codelineno-81-5"></a><span class="c1"># group: root </span>
<a id="__codelineno-81-6" name="__codelineno-81-6"></a>user::rw-<span class="w"> </span>
<a id="__codelineno-81-7" name="__codelineno-81-7"></a>group::r--<span class="w"> </span>
<a id="__codelineno-81-8" name="__codelineno-81-8"></a>group:difu:rw-<span class="w"> </span>
<a id="__codelineno-81-9" name="__codelineno-81-9"></a>mask::rw-<span class="w"> </span>
<a id="__codelineno-81-10" name="__codelineno-81-10"></a>other::r--<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(57,57,57);">#setfacl -x username filename -- 取消用户 acl </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-82-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-82-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-82-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-82-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-82-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-82-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-82-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-82-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-82-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-82-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>public<span class="o">]</span><span class="c1"># setfacl -x myth file01.txt </span>
<a id="__codelineno-82-2" name="__codelineno-82-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>public<span class="o">]</span><span class="c1"># getfacl file01.txt </span>
<a id="__codelineno-82-3" name="__codelineno-82-3"></a><span class="c1"># file: file01.txt </span>
<a id="__codelineno-82-4" name="__codelineno-82-4"></a><span class="c1"># owner: root </span>
<a id="__codelineno-82-5" name="__codelineno-82-5"></a><span class="c1"># group: root </span>
<a id="__codelineno-82-6" name="__codelineno-82-6"></a>user::rw-<span class="w"> </span>
<a id="__codelineno-82-7" name="__codelineno-82-7"></a>group::rw-<span class="w"> </span>
<a id="__codelineno-82-8" name="__codelineno-82-8"></a>mask::rw-
<a id="__codelineno-82-9" name="__codelineno-82-9"></a>other::r--
<a id="__codelineno-82-10" name="__codelineno-82-10"></a><span class="o">[</span>root@myth<span class="w"> </span>myth<span class="o">]</span><span class="c1"># setfacl -x g:difu 2.txt --取消属组的特殊权限</span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">#getfacl filename </font></p>
<p><font style="color:rgb(57,57,57);">--获取文件的 acl</font></p>
<h2 id="特殊权限"><strong><font style="color:rgb(0,0,0);">特殊权限 </font></strong><a class="headerlink" href="#特殊权限" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-83-1">1</a></span>
<span class="normal"><a href="#__codelineno-83-2">2</a></span>
<span class="normal"><a href="#__codelineno-83-3">3</a></span>
<span class="normal"><a href="#__codelineno-83-4">4</a></span>
<span class="normal"><a href="#__codelineno-83-5">5</a></span>
<span class="normal"><a href="#__codelineno-83-6">6</a></span>
<span class="normal"><a href="#__codelineno-83-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1"></a>rwsrwsrwt
<a id="__codelineno-83-2" name="__codelineno-83-2"></a>rwSrwSrwT
<a id="__codelineno-83-3" name="__codelineno-83-3"></a>s对于属主:代表特殊权限，表示以root用户执行<span class="w"> </span>数值表示为<span class="w"> </span><span class="m">4</span>
<a id="__codelineno-83-4" name="__codelineno-83-4"></a>s对于属组：该目录下创建文件的属组将自动和目录属组一致
<a id="__codelineno-83-5" name="__codelineno-83-5"></a>t:在<span class="w"> </span>others<span class="w"> </span>设置，在公共目录（用户都具有写权限的目录）中，用户<span class="w"> </span>
<a id="__codelineno-83-6" name="__codelineno-83-6"></a>只能删除自己拥有的文件。<span class="w"> </span>
<a id="__codelineno-83-7" name="__codelineno-83-7"></a>大写表示没有x执行权限
</code></pre></div></td></tr></table></div>
<p>:::color2
<font style="color:rgb(57,57,57);">SUID 权限： </font></p>
<p><font style="color:rgb(57,57,57);">在 user 位设置，以文件的属主身份而非当前操作者的身份操作文件。 </font></p>
<p><font style="color:rgb(57,57,57);">对目录无影响。 </font></p>
<p><font style="color:rgb(57,57,57);">数值表示为 4 </font></p>
<p><font style="color:rgb(57,57,57);">表现为 s 或 S，s 表示含有 x 权限，S 则表示没有 x 权限 </font></p>
<p><font style="color:rgb(57,57,57);">如 passwd 命令就含有 s 权限，当普通用户执行 passwd 修改密码 </font></p>
<p><font style="color:rgb(57,57,57);">时会获得 root 权限，以 root 身份将密码写入 shadow 文件中 </font></p>
<p><font style="color:rgb(57,57,57);"></font></p>
<p><font style="color:rgb(57,57,57);">SGID 权限： </font></p>
<p><font style="color:rgb(57,57,57);">在 group 位设置，以文件属组的身份操作文件。对于目录，用户在 </font></p>
<p><font style="color:rgb(57,57,57);">该目录下创建文件的属组将自动和目录属组一致。 </font></p>
<p><font style="color:rgb(57,57,57);">数值表示为 2</font></p>
<p><font style="color:rgb(57,57,57);"></font></p>
<p><font style="color:rgb(57,57,57);">Sticky 权限： </font></p>
<p><font style="color:rgb(57,57,57);">在 others 设置，在公共目录（用户都具有写权限的目录）中，用户 </font></p>
<p><font style="color:rgb(57,57,57);">只能删除自己拥有的文件。 </font></p>
<p>:::</p>
<p><font style="color:rgb(57,57,57);">数值表示为 1 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-84-1">1</a></span>
<span class="normal"><a href="#__codelineno-84-2">2</a></span>
<span class="normal"><a href="#__codelineno-84-3">3</a></span>
<span class="normal"><a href="#__codelineno-84-4">4</a></span>
<span class="normal"><a href="#__codelineno-84-5">5</a></span>
<span class="normal"><a href="#__codelineno-84-6">6</a></span>
<span class="normal"><a href="#__codelineno-84-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1"></a>chmod<span class="w"> </span>u+s<span class="w"> </span>filename<span class="w"> </span>
<a id="__codelineno-84-2" name="__codelineno-84-2"></a>chmod<span class="w"> </span>g+s<span class="w"> </span>filename<span class="w"> </span>
<a id="__codelineno-84-3" name="__codelineno-84-3"></a>chmod<span class="w"> </span>o+t<span class="w"> </span>filename<span class="w"> </span>
<a id="__codelineno-84-4" name="__codelineno-84-4"></a>chmod<span class="w"> </span><span class="m">4755</span><span class="w"> </span>filename<span class="w"> </span><span class="c1"># -&gt; rwsrwxrwt</span>
<a id="__codelineno-84-5" name="__codelineno-84-5"></a>chmod<span class="w"> </span><span class="m">2755</span><span class="w"> </span>filename<span class="w"> </span><span class="c1"># -&gt; rwxrwsrwx</span>
<a id="__codelineno-84-6" name="__codelineno-84-6"></a>chmod<span class="w"> </span><span class="m">1755</span><span class="w"> </span>filename<span class="w"> </span><span class="c1"># -&gt; rwxrwxrwt</span>
<a id="__codelineno-84-7" name="__codelineno-84-7"></a>chmod<span class="w"> </span><span class="m">7755</span><span class="w"> </span>filename<span class="w"> </span><span class="c1"># -&gt; rwsrwsrwt</span>
</code></pre></div></td></tr></table></div>
<h3 id="练习">练习<a class="headerlink" href="#练习" title="Permanent link">&para;</a></h3>
<p><img alt="" src="../../../../images/1716129022819-25b6768b-7abb-41fe-96ef-e47edbfeecb5.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-85-1">1</a></span>
<span class="normal"><a href="#__codelineno-85-2">2</a></span>
<span class="normal"><a href="#__codelineno-85-3">3</a></span>
<span class="normal"><a href="#__codelineno-85-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/home/contrib
<a id="__codelineno-85-2" name="__codelineno-85-2"></a>groupadd<span class="w"> </span>manager
<a id="__codelineno-85-3" name="__codelineno-85-3"></a>chown<span class="w"> </span>:manager<span class="w"> </span>/home/contrib
<a id="__codelineno-85-4" name="__codelineno-85-4"></a>chmod<span class="w"> </span><span class="m">2770</span><span class="w"> </span>/home/contrib
</code></pre></div></td></tr></table></div>
<h2 id="mode八进制权限模型"><font style="color:rgb(57,57,57);">MODE:八进制权限模型 </font><a class="headerlink" href="#mode八进制权限模型" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-86-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-86-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-86-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-86-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-86-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-86-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-86-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-86-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-86-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-86-10">10</a></span>
<span class="normal"><a href="#__codelineno-86-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1"></a>---<span class="w"> </span>---<span class="w"> </span>---<span class="w"> </span>
<a id="__codelineno-86-2" name="__codelineno-86-2"></a>rwx<span class="w"> </span>r-x<span class="w"> </span>r-x<span class="w"> </span>
<a id="__codelineno-86-3" name="__codelineno-86-3"></a><span class="m">111</span><span class="w"> </span><span class="m">101</span><span class="w"> </span><span class="nv">101</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">755</span><span class="w"> </span>
<a id="__codelineno-86-4" name="__codelineno-86-4"></a>---<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-86-5" name="__codelineno-86-5"></a>--x<span class="w"> </span><span class="m">1</span><span class="w"> </span>
<a id="__codelineno-86-6" name="__codelineno-86-6"></a>-w-<span class="w"> </span><span class="m">2</span><span class="w"> </span>
<a id="__codelineno-86-7" name="__codelineno-86-7"></a>-wx<span class="w"> </span><span class="m">3</span><span class="w"> </span>
<a id="__codelineno-86-8" name="__codelineno-86-8"></a>r--<span class="w"> </span><span class="m">4</span><span class="w"> </span>
<a id="__codelineno-86-9" name="__codelineno-86-9"></a>r-x<span class="w"> </span><span class="m">5</span><span class="w"> </span>
<a id="__codelineno-86-10" name="__codelineno-86-10"></a>rw-<span class="w"> </span><span class="m">6</span><span class="w"> </span>
<a id="__codelineno-86-11" name="__codelineno-86-11"></a>rwx<span class="w"> </span><span class="m">7</span>
</code></pre></div></td></tr></table></div>
<h2 id="默认权限-umask"><font style="color:rgb(57,57,57);">默认权限 umask </font><a class="headerlink" href="#默认权限-umask" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-87-1">1</a></span>
<span class="normal"><a href="#__codelineno-87-2">2</a></span>
<span class="normal"><a href="#__codelineno-87-3">3</a></span>
<span class="normal"><a href="#__codelineno-87-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1"></a><span class="nb">umask</span>
<a id="__codelineno-87-2" name="__codelineno-87-2"></a><span class="m">0022</span>
<a id="__codelineno-87-3" name="__codelineno-87-3"></a><span class="m">0666</span>-0022<span class="w"> </span>--&gt;644<span class="w"> </span>rw-r--r--
<a id="__codelineno-87-4" name="__codelineno-87-4"></a><span class="m">0777</span>-0022<span class="w"> </span>--&gt;755<span class="w"> </span>rwxr-xr-x
</code></pre></div></td></tr></table></div>
<p>:::color2
文件默认权限=666-umask </p>
<p>文件默认没有执行权限，若通过掩码计算的默认权限中有执行权限，默认权限将自动加 1 </p>
<p>目录默认权限=777-umask </p>
<p>root 用户默认 umask 值位 0022 </p>
<p>普通用户默认 umask 值位 0002 (用户的基本组名必须和用户名相 同) </p>
<p>:::</p>
<h3 id="umask-设定"><font style="color:rgb(57,57,57);">umask 设定 </font><a class="headerlink" href="#umask-设定" title="Permanent link">&para;</a></h3>
<p>:::color2
<font style="color:rgb(57,57,57);">在 bash 全局配置文件/etc/profile 设定 ，对所有用户生效 </font></p>
<p><font style="color:rgb(57,57,57);">在~/.bash_profile 中设定，对当前用户生效</font></p>
<p>:::</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-88-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-88-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-88-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-88-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-88-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-88-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-88-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-88-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-88-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-88-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1"></a>vim<span class="w"> </span>/etc/profile
<a id="__codelineno-88-2" name="__codelineno-88-2"></a>vim<span class="w"> </span>~/.bash_profile
<a id="__codelineno-88-3" name="__codelineno-88-3"></a>
<a id="__codelineno-88-4" name="__codelineno-88-4"></a>直接在空语句加入
<a id="__codelineno-88-5" name="__codelineno-88-5"></a><span class="nb">umask</span><span class="w"> </span><span class="m">0002</span>
<a id="__codelineno-88-6" name="__codelineno-88-6"></a><span class="nb">source</span><span class="w"> </span>/etc/profile
<a id="__codelineno-88-7" name="__codelineno-88-7"></a><span class="nb">source</span><span class="w"> </span>~/bash_profile
<a id="__codelineno-88-8" name="__codelineno-88-8"></a>mkdir<span class="w"> </span><span class="nb">test</span>
<a id="__codelineno-88-9" name="__codelineno-88-9"></a>touch<span class="w"> </span>test.txt
<a id="__codelineno-88-10" name="__codelineno-88-10"></a>ls<span class="w"> </span>-l
</code></pre></div></td></tr></table></div>
<h3 id="练习_1">练习<a class="headerlink" href="#练习_1" title="Permanent link">&para;</a></h3>
<p><img alt="" src="../../../../images/1716131096071-577108bb-993e-4f86-8217-f544f048a263.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-89-1">1</a></span>
<span class="normal"><a href="#__codelineno-89-2">2</a></span>
<span class="normal"><a href="#__codelineno-89-3">3</a></span>
<span class="normal"><a href="#__codelineno-89-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1"></a><span class="m">0666</span><span class="w"> </span>-<span class="w"> </span><span class="nv">0020</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0646</span>
<a id="__codelineno-89-2" name="__codelineno-89-2"></a>vim<span class="w"> </span>~/.bash_profile
<a id="__codelineno-89-3" name="__codelineno-89-3"></a><span class="nb">umask</span><span class="w"> </span><span class="m">0646</span>
<a id="__codelineno-89-4" name="__codelineno-89-4"></a><span class="nb">source</span><span class="w"> </span>~/bash_profile
</code></pre></div></td></tr></table></div>
<p><img alt="" src="../../../../images/1716131225358-682f4d0f-0eb9-403d-8b74-ac7ed32ad3a5.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-90-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1"></a>----w-r--
</code></pre></div></td></tr></table></div>
<p><img alt="" src="../../../../images/1716131290477-bc4f0bb1-9968-4e68-b252-742be90851b3.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-91-1">1</a></span>
<span class="normal"><a href="#__codelineno-91-2">2</a></span>
<span class="normal"><a href="#__codelineno-91-3">3</a></span>
<span class="normal"><a href="#__codelineno-91-4">4</a></span>
<span class="normal"><a href="#__codelineno-91-5">5</a></span>
<span class="normal"><a href="#__codelineno-91-6">6</a></span>
<span class="normal"><a href="#__codelineno-91-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1"></a>su<span class="w"> </span>-<span class="w"> </span>daffy
<a id="__codelineno-91-2" name="__codelineno-91-2"></a>vim<span class="w"> </span>/home/daffy/.bash_profile
<a id="__codelineno-91-3" name="__codelineno-91-3"></a><span class="nb">umask</span><span class="w"> </span><span class="m">0027</span>
<a id="__codelineno-91-4" name="__codelineno-91-4"></a><span class="nb">source</span><span class="w"> </span>/home/daffy/.bash_profile
<a id="__codelineno-91-5" name="__codelineno-91-5"></a>mkdir<span class="w"> </span><span class="nb">test</span>
<a id="__codelineno-91-6" name="__codelineno-91-6"></a>touch<span class="w"> </span>test.txt
<a id="__codelineno-91-7" name="__codelineno-91-7"></a>ls<span class="w"> </span>-l
</code></pre></div></td></tr></table></div>
<h1 id="history命令">history命令<a class="headerlink" href="#history命令" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">命令历史： </font></p>
<p><font style="color:rgb(0,0,0);">命令历史：系统默认会记录最近所输入的命令 </font></p>
<p><font style="color:rgb(0,0,0);">history</font><font style="color:rgb(0,0,0);">命令可以查看命令历史 </font></p>
<p><font style="color:rgb(0,0,0);">使用方法： </font></p>
<p><font style="color:rgb(0,0,0);"># history [</font><font style="color:rgb(0,0,0);">选项</font><font style="color:rgb(0,0,0);">] </font></p>
<p><font style="color:rgb(0,0,0);">常用选项： </font></p>
<p><font style="color:rgb(0,0,0);">-c </font><font style="color:rgb(0,0,0);">清空缓冲区命令历史 </font></p>
<p><font style="color:rgb(0,0,0);">-w </font><font style="color:rgb(0,0,0);">把缓冲区的命令写入到文件中 </font></p>
<p><font style="color:rgb(0,0,0);">-d 10 </font><font style="color:rgb(0,0,0);">删除命令历史中的第</font><font style="color:rgb(0,0,0);">10</font><font style="color:rgb(0,0,0);">条记录 </font></p>
<p><font style="color:rgb(0,0,0);">其他 </font></p>
<p><font style="color:rgb(0,0,0);">命令历史文件： </font><font style="color:rgb(0,0,0);">~/.bash_history </font></p>
<p><font style="color:rgb(0,0,0);">调用历史命令</font></p>
<p><img alt="" src="../../../../images/1716207150278-8d34ab04-6588-44c6-81f9-0252a88f3576.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-92-1">1</a></span>
<span class="normal"><a href="#__codelineno-92-2">2</a></span>
<span class="normal"><a href="#__codelineno-92-3">3</a></span>
<span class="normal"><a href="#__codelineno-92-4">4</a></span>
<span class="normal"><a href="#__codelineno-92-5">5</a></span>
<span class="normal"><a href="#__codelineno-92-6">6</a></span>
<span class="normal"><a href="#__codelineno-92-7">7</a></span>
<span class="normal"><a href="#__codelineno-92-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1"></a><span class="o">[</span>root@difu<span class="w"> </span>~<span class="o">]</span><span class="c1"># ls -l /etc/passwd</span>
<a id="__codelineno-92-2" name="__codelineno-92-2"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">2303</span><span class="w"> </span>2月<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">09</span>:27<span class="w"> </span>/etc/passwd
<a id="__codelineno-92-3" name="__codelineno-92-3"></a><span class="o">[</span>root@difu<span class="w"> </span>~<span class="o">]</span><span class="c1"># !!</span>
<a id="__codelineno-92-4" name="__codelineno-92-4"></a>ls<span class="w"> </span>-l<span class="w"> </span>/etc/passwd
<a id="__codelineno-92-5" name="__codelineno-92-5"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">2303</span><span class="w"> </span>2月<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">09</span>:27<span class="w"> </span>/etc/passwd
<a id="__codelineno-92-6" name="__codelineno-92-6"></a><span class="o">[</span>root@difu<span class="w"> </span>~<span class="o">]</span><span class="c1"># systemctl restart sshd</span>
<a id="__codelineno-92-7" name="__codelineno-92-7"></a><span class="o">[</span>root@difu<span class="w"> </span>~<span class="o">]</span><span class="c1"># !sys</span>
<a id="__codelineno-92-8" name="__codelineno-92-8"></a>systemctl<span class="w"> </span>restart<span class="w"> </span>sshd！！
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">命令别名和命令替换： </font></p>
<p><font style="color:rgb(0,0,0);">命令替换：把命令的执行结果传递给前面的命令 </font></p>
<p><font style="color:rgb(0,0,0);">命令替换方式： </font></p>
<p><font style="color:rgb(0,0,0);">使用</font><strong><font style="color:rgb(223,64,42);"><code></code></font></strong><font style="color:rgb(0,0,0);"> , </font></p>
<p><font style="color:rgb(0,0,0);">#</font><font style="color:rgb(0,0,0);">命令</font><font style="color:rgb(0,0,0);">1 <code>&lt;/font&gt;&lt;font style="color:rgb(0,0,0);"&gt;命令&lt;/font&gt;&lt;font style="color:rgb(0,0,0);"&gt;2</code> </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-93-1">1</a></span>
<span class="normal"><a href="#__codelineno-93-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># ls -l `which ps` </span>
<a id="__codelineno-93-2" name="__codelineno-93-2"></a>-rwxr-xr-x.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">100120</span><span class="w"> </span>Sep<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">2017</span><span class="w"> </span>/usr/bin/ps<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">2. </font><font style="color:rgb(0,0,0);">使用</font><font style="color:rgb(0,0,0);">$() </font></p>
<p><font style="color:rgb(0,0,0);">#</font><font style="color:rgb(0,0,0);">命令</font><font style="color:rgb(0,0,0);">1 $(</font><font style="color:rgb(0,0,0);">命令</font><font style="color:rgb(0,0,0);">2) </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-94-1">1</a></span>
<span class="normal"><a href="#__codelineno-94-2">2</a></span>
<span class="normal"><a href="#__codelineno-94-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># touch $(date +%Y%m%d) </span>
<a id="__codelineno-94-2" name="__codelineno-94-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># ls </span>
<a id="__codelineno-94-3" name="__codelineno-94-3"></a><span class="m">20190515</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(223,64,42);">把</font><font style="color:rgb(223,64,42);">``</font><font style="color:rgb(223,64,42);">或</font><font style="color:rgb(223,64,42);">$()</font><font style="color:rgb(223,64,42);">中的内容当作命令执行，然后引用执行的结果 </font></p>
<p><font style="color:rgb(0,0,0);">命令别名：把一条命令定义为一个命令，当运行这个别名就相当于运行整条命令</font></p>
<p><img alt="" src="../../../../images/1716207183793-19d214bb-a819-4fad-9e5c-8541dd4b4c8e.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-95-1">1</a></span>
<span class="normal"><a href="#__codelineno-95-2">2</a></span>
<span class="normal"><a href="#__codelineno-95-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># vim /etc/sysconfig/network-scripts/ifcfg-ens33</span>
<a id="__codelineno-95-2" name="__codelineno-95-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># alias veth=&#39;vim /etc/sysconfig/network-scripts/ifcfgens33&#39;</span>
<a id="__codelineno-95-3" name="__codelineno-95-3"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># veth</span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">管道和重定向： </font></p>
<p><font style="color:rgb(0,0,0);">I/O</font><font style="color:rgb(0,0,0);">重定向 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-96-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-96-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-96-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-96-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-96-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-96-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-96-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-96-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-96-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-96-10">10</a></span>
<span class="normal"><a href="#__codelineno-96-11">11</a></span>
<span class="normal"><a href="#__codelineno-96-12">12</a></span>
<span class="normal"><a href="#__codelineno-96-13">13</a></span>
<span class="normal"><a href="#__codelineno-96-14">14</a></span>
<span class="normal"><a href="#__codelineno-96-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1"></a><span class="o">[</span>root@difu<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># echo Hello </span>
<a id="__codelineno-96-2" name="__codelineno-96-2"></a>Hello<span class="w"> </span>
<a id="__codelineno-96-3" name="__codelineno-96-3"></a><span class="o">[</span>root@difu<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># echo Hello &gt; file1</span>
<a id="__codelineno-96-4" name="__codelineno-96-4"></a><span class="o">[</span>root@difu<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># cat file1</span>
<a id="__codelineno-96-5" name="__codelineno-96-5"></a>Hello
<a id="__codelineno-96-6" name="__codelineno-96-6"></a><span class="o">[</span>root@difu<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ls</span>
<a id="__codelineno-96-7" name="__codelineno-96-7"></a>centos<span class="w"> </span>difu<span class="w"> </span>file1<span class="w"> </span>redhat
<a id="__codelineno-96-8" name="__codelineno-96-8"></a><span class="o">[</span>root@difu<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># ls &gt;&gt; file1 [追加重定向]</span>
<a id="__codelineno-96-9" name="__codelineno-96-9"></a><span class="o">[</span>root@difu<span class="w"> </span>tmp<span class="o">]</span><span class="c1"># cat file1</span>
<a id="__codelineno-96-10" name="__codelineno-96-10"></a>Hello
<a id="__codelineno-96-11" name="__codelineno-96-11"></a>centos
<a id="__codelineno-96-12" name="__codelineno-96-12"></a>difu
<a id="__codelineno-96-13" name="__codelineno-96-13"></a>file1
<a id="__codelineno-96-14" name="__codelineno-96-14"></a>redhat
<a id="__codelineno-96-15" name="__codelineno-96-15"></a><span class="o">[</span>root@difu<span class="w"> </span>tmp<span class="o">]</span><span class="c1">#</span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">管道： </font></p>
<p><font style="color:rgb(0,0,0);">将前一条命令的标准输出作为后一条命令的标准输入 </font></p>
<p><font style="color:rgb(0,0,0);">管道的操作符是</font><font style="color:rgb(0,0,0);">“|” </font></p>
<p><font style="color:rgb(0,0,0);">注意：</font><font style="color:rgb(0,0,0);">1.</font><font style="color:rgb(0,0,0);">管道命令只处理前一个命令正确输出，不处理错误输出 </font></p>
<p><font style="color:rgb(0,0,0);">2.管道右边命令，必须能够接收标准输入流命令才行</font></p>
<p><img alt="" src="../../../../images/1716207427669-8cdb7929-18e8-4396-ab57-c1f8fca24b11.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-97-1">1</a></span>
<span class="normal"><a href="#__codelineno-97-2">2</a></span>
<span class="normal"><a href="#__codelineno-97-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># echo ahdifu.com | passwd --stdin myth</span>
<a id="__codelineno-97-2" name="__codelineno-97-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># ls /etc/ | more</span>
<a id="__codelineno-97-3" name="__codelineno-97-3"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># ls /etc/ | wc -l</span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">文本文件：ascii格式的文件，Linux下很多文件都是文本文件</font></strong><img alt="" src="../../../../images/1716207446022-5f5499d1-b76e-4165-a9a2-000e14440451.png" /></p>
<h1 id="使用vim编辑文本"><strong><font style="color:rgb(0,0,0);">使用VIM编辑文本： </font></strong><a class="headerlink" href="#使用vim编辑文本" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">vi</font><font style="color:rgb(0,0,0);">：</font><font style="color:rgb(0,0,0);">Visual Interface </font><font style="color:rgb(0,0,0);">可视化文本编辑器 </font></p>
<p><font style="color:rgb(0,0,0);">vim</font><font style="color:rgb(0,0,0);">：</font><font style="color:rgb(0,0,0);">vi</font><font style="color:rgb(0,0,0);">的增强版 </font></p>
<p><font style="color:rgb(0,0,0);">vim</font><font style="color:rgb(0,0,0);">语法格式 </font></p>
<p><font style="color:rgb(0,0,0);">#vim [</font><font style="color:rgb(0,0,0);">选项</font><font style="color:rgb(0,0,0);">] </font><font style="color:rgb(0,0,0);">文件 </font></p>
<p><font style="color:rgb(223,64,42);">如果文件不存在，</font><font style="color:rgb(223,64,42);">vim</font><font style="color:rgb(223,64,42);">将新建一个文件 </font></p>
<p><strong><font style="color:rgb(0,0,0);">vim</font></strong><strong><font style="color:rgb(0,0,0);">模式： </font></strong></p>
<p><font style="color:rgb(0,0,0);">命令模式：此状态下敲击键盘动作会被</font><font style="color:rgb(0,0,0);">vim</font><font style="color:rgb(0,0,0);">识别为命令，而非输入字符 </font></p>
<p><font style="color:rgb(0,0,0);">输入模式：常规的文本编辑 </font></p>
<p><font style="color:rgb(0,0,0);">末行模式：也叫底线模式，此模式下可以输入单个或多个字符命令</font><img alt="" src="../../../../images/1716207740463-003cde4f-4313-4cdc-b9a1-8407434f91ce.png" /><font style="color:rgb(0,0,0);">VIM </font><font style="color:rgb(0,0,0);">打开文件： </font></p>
<p><font style="color:rgb(223,64,42);">#vim file </font></p>
<p><font style="color:rgb(0,0,0);">#vim +10 file: </font><font style="color:rgb(0,0,0);">打开文件并使光标处于第</font><font style="color:rgb(0,0,0);">10</font><font style="color:rgb(0,0,0);">行 </font></p>
<p><font style="color:rgb(0,0,0);">#vim + file: </font><font style="color:rgb(0,0,0);">打开文件并使光标处于最后一行 </font></p>
<p><font style="color:rgb(0,0,0);">#vim +/abc file: 打开文件并使光标处于第一次匹配到abc的行</font><img alt="" src="../../../../images/1716207754836-9a67a20d-6b75-411a-8186-3a3f27332884.png" /><font style="color:rgb(0,0,0);">vim保存关闭文件</font><img alt="" src="../../../../images/1716207778911-a847a868-85f2-44d8-9e2e-975c03880ff5.png" /></p>
<p><font style="color:rgb(0,0,0);">vim从命令模式进入编辑模式</font></p>
<p><font style="color:rgb(0,0,0);">光标移动</font><img alt="" src="../../../../images/1716207880536-bfcc594c-ff4c-458a-bf13-0cba055b1123.png" /><font style="color:rgb(0,0,0);">在末行模式下，光标行间跳转 </font></p>
<p><font style="color:rgb(0,0,0);">输入“:行号” &rarr; 回车</font><img alt="" src="../../../../images/1716208024638-f2ddb92c-fead-4949-8c2d-6f4386c5eb4a.png" /><font style="color:rgb(0,0,0);">删除字符或行</font><img alt="" src="../../../../images/1716208034019-b8dc14f8-8168-4323-9ded-6b150f071bfc.png" /><img alt="" src="../../../../images/1716208047137-665818a7-a4a9-427b-b8f4-c92b42642dce.png" /><font style="color:rgb(0,0,0);">复制和粘贴 复制和粘贴</font><img alt="" src="../../../../images/1716208058999-0e98c3bd-6145-49ba-b0d5-396092e830c6.png" /><font style="color:rgb(0,0,0);">撤销和恢复撤销</font><img alt="" src="../../../../images/1716208073135-d3ce527b-25b0-42e7-9af5-8ba838426315.png" /><font style="color:rgb(0,0,0);">字符替换</font><img alt="" src="../../../../images/1716208184644-ba88ff35-a2d4-4d60-9151-e88a1c1662d7.png" /></p>
<p><font style="color:rgb(0,0,0);">字符查找</font></p>
<p><img alt="" src="../../../../images/1716208201708-916e8065-ea07-4d41-a25a-7c76e35b2ece.png" /><strong><font style="color:rgb(0,0,0);">末行模式下字符查找和替换 </font></strong></p>
<p><font style="color:rgb(223,64,42);">:</font><font style="color:rgb(223,64,42);">起始行，结束行</font><font style="color:rgb(223,64,42);">s/pattern/string/gi </font></p>
<p><font style="color:rgb(0,0,0);">不指定起始和结束行则默认是只搜索替换光标所在行 </font></p>
<p><font style="color:rgb(0,0,0);">s </font><font style="color:rgb(0,0,0);">表示查找 </font></p>
<p><font style="color:rgb(0,0,0);">/ </font><font style="color:rgb(0,0,0);">是分割符，也可以用其他符号，前后保持一致即可 </font></p>
<p><font style="color:rgb(0,0,0);">pattern </font><font style="color:rgb(0,0,0);">是要搜索的字符，支持正则 </font></p>
<p><font style="color:rgb(0,0,0);">string </font><font style="color:rgb(0,0,0);">是替换的字符 </font></p>
<p><font style="color:rgb(0,0,0);">g </font><font style="color:rgb(0,0,0);">表示全局</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">默认是只替换一行里面第一次被匹配到的字符 </font></p>
<p><font style="color:rgb(0,0,0);">i </font><font style="color:rgb(0,0,0);">表示忽略大小写 </font></p>
<p><font style="color:rgb(0,0,0);">例如： </font></p>
<p><font style="color:rgb(0,0,0);">用</font><font style="color:rgb(0,0,0);">vim</font><font style="color:rgb(0,0,0);">把</font><font style="color:rgb(0,0,0);">/etc/passwd</font><font style="color:rgb(0,0,0);">中的</font><font style="color:rgb(0,0,0);">/bin/nologin</font><font style="color:rgb(0,0,0);">替换成</font><font style="color:rgb(0,0,0);">/bin/bash </font></p>
<p><font style="color:rgb(0,0,0);">:%s#/sbin/nologin#/bin/bash#gi </font></p>
<p><font style="color:rgb(223,64,42);">% </font><font style="color:rgb(223,64,42);">表示全文 </font></p>
<p><font style="color:rgb(0,0,0);">末行模式下配置其他特性</font><img alt="" src="../../../../images/1716208548300-f6ddf0fa-b26f-4948-a761-6ae133ba5ff6.png" /><img alt="" src="../../../../images/1716208553415-e50c3abe-cc71-49a1-942e-bd06937599c5.png" /><font style="color:rgb(0,0,0);">vim</font><font style="color:rgb(0,0,0);">参数配置 </font></p>
<p><font style="color:rgb(0,0,0);">vim的配置位于/etc/vimrc，用于配置vim相关功能</font><img alt="" src="../../../../images/1716208649790-426bdf26-58a5-45e8-bac3-3f5cb4ccdb53.png" /></p>
<h1 id="字符过滤"><strong><font style="color:rgb(0,0,0);">字符过滤</font></strong><a class="headerlink" href="#字符过滤" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">grep:</font><font style="color:rgb(0,0,0);">对文本内容进行关键词搜索匹配 </font></p>
<p><font style="color:rgb(223,64,42);">语法格式 </font></p>
<p><font style="color:rgb(0,0,0);">#grep [</font><font style="color:rgb(0,0,0);">选项</font><font style="color:rgb(0,0,0);">] ‘</font><font style="color:rgb(0,0,0);">搜索的字符</font><font style="color:rgb(0,0,0);">’</font><font style="color:rgb(0,0,0);">文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-98-1">1</a></span>
<span class="normal"><a href="#__codelineno-98-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># grep myth /etc/passwd </span>
<a id="__codelineno-98-2" name="__codelineno-98-2"></a>myth:x:1111:100<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">grep常用选项</font><img alt="" src="../../../../images/1716208663974-54d43b57-a31c-4070-a0f0-68efad588ba5.png" /></p>
<h2 id="正则表达式"><strong><font style="color:rgb(0,0,0);">正则表达式 </font></strong><a class="headerlink" href="#正则表达式" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(0,0,0);">正则表达式是一种模式匹配语言，用一些简单的符号来描述一个复杂的规则。 </font></p>
<p><font style="color:rgb(0,0,0);">正则表达式常用符号</font><img alt="" src="../../../../images/1716208746660-863ad11a-f57a-4db2-9eb3-c42b7ab9915b.png" /><font style="color:rgb(0,0,0);">例如： </font></p>
<p><font style="color:rgb(0,0,0);">1.</font><font style="color:rgb(0,0,0);">把</font><font style="color:rgb(0,0,0);">/etc/ssh/sshd_config</font><font style="color:rgb(0,0,0);">文件中有效配置</font><font style="color:rgb(0,0,0);">(</font><font style="color:rgb(0,0,0);">去除空行和以</font><font style="color:rgb(0,0,0);">#</font><font style="color:rgb(0,0,0);">开头的行</font><font style="color:rgb(0,0,0);">) </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-99-1">1</a></span>
<span class="normal"><a href="#__codelineno-99-2">2</a></span>
<span class="normal"><a href="#__codelineno-99-3">3</a></span>
<span class="normal"><a href="#__codelineno-99-4">4</a></span>
<span class="normal"><a href="#__codelineno-99-5">5</a></span>
<span class="normal"><a href="#__codelineno-99-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1"></a><span class="o">[</span>root@ahdifu<span class="w"> </span>~<span class="o">]</span><span class="c1">#grep -v ^# /etc/ssh/sshd_config | grep -v ^$ </span>
<a id="__codelineno-99-2" name="__codelineno-99-2"></a>HostKey<span class="w"> </span>/etc/ssh/ssh_host_rsa_key<span class="w"> </span>
<a id="__codelineno-99-3" name="__codelineno-99-3"></a>HostKey<span class="w"> </span>/etc/ssh/ssh_host_ecdsa_key<span class="w"> </span>
<a id="__codelineno-99-4" name="__codelineno-99-4"></a>HostKey<span class="w"> </span>/etc/ssh/ssh_host_ed25519_key<span class="w"> </span>
<a id="__codelineno-99-5" name="__codelineno-99-5"></a>SyslogFacility<span class="w"> </span>AUTHPRIV<span class="w"> </span>
<a id="__codelineno-99-6" name="__codelineno-99-6"></a>……<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">2.</font><font style="color:rgb(0,0,0);">过滤出</font><font style="color:rgb(0,0,0);">/proc/meminfo</font><font style="color:rgb(0,0,0);">中以</font><font style="color:rgb(0,0,0);">“S”</font><font style="color:rgb(0,0,0);">开头的行 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-100-1">1</a></span>
<span class="normal"><a href="#__codelineno-100-2">2</a></span>
<span class="normal"><a href="#__codelineno-100-3">3</a></span>
<span class="normal"><a href="#__codelineno-100-4">4</a></span>
<span class="normal"><a href="#__codelineno-100-5">5</a></span>
<span class="normal"><a href="#__codelineno-100-6">6</a></span>
<span class="normal"><a href="#__codelineno-100-7">7</a></span>
<span class="normal"><a href="#__codelineno-100-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-100-1" name="__codelineno-100-1"></a><span class="o">[</span>root@ahdifu<span class="w"> </span>~<span class="o">]</span><span class="c1"># grep ^S /proc/meminfo </span>
<a id="__codelineno-100-2" name="__codelineno-100-2"></a>SwapCached:<span class="w"> </span><span class="m">0</span><span class="w"> </span>kB<span class="w"> </span>
<a id="__codelineno-100-3" name="__codelineno-100-3"></a>SwapTotal:<span class="w"> </span><span class="m">2097148</span><span class="w"> </span>kB<span class="w"> </span>
<a id="__codelineno-100-4" name="__codelineno-100-4"></a>SwapFree:<span class="w"> </span><span class="m">2097148</span><span class="w"> </span>kB<span class="w"> </span>
<a id="__codelineno-100-5" name="__codelineno-100-5"></a>Shmem:<span class="w"> </span><span class="m">10556</span><span class="w"> </span>kB<span class="w"> </span>
<a id="__codelineno-100-6" name="__codelineno-100-6"></a>Slab:<span class="w"> </span><span class="m">105428</span><span class="w"> </span>kB<span class="w"> </span>
<a id="__codelineno-100-7" name="__codelineno-100-7"></a>SReclaimable:<span class="w"> </span><span class="m">48412</span><span class="w"> </span>kB<span class="w"> </span>
<a id="__codelineno-100-8" name="__codelineno-100-8"></a>SUnreclaim:<span class="w"> </span><span class="m">57016</span><span class="w"> </span>kB
</code></pre></div></td></tr></table></div>
<h1 id="文本统计"><strong><font style="color:rgb(0,0,0);">文本统计 </font></strong><a class="headerlink" href="#文本统计" title="Permanent link">&para;</a></h1>
<p><strong><font style="color:rgb(0,0,0);">wc </font></strong><font style="color:rgb(0,0,0);">统计文件的行数，词数和字符数 </font></p>
<p><font style="color:rgb(247,117,103);">语法格式 </font></p>
<p><font style="color:rgb(0,0,0);">#wc [</font><font style="color:rgb(0,0,0);">选项</font><font style="color:rgb(0,0,0);">] </font><font style="color:rgb(0,0,0);">文件 </font></p>
<p><font style="color:rgb(0,0,0);">默认统计行数、词数和字符数 </font></p>
<p><font style="color:rgb(247,117,103);">选项： </font></p>
<p><font style="color:rgb(0,0,0);">-l </font><font style="color:rgb(0,0,0);">只统计行数 </font></p>
<p><font style="color:rgb(0,0,0);">-w </font><font style="color:rgb(0,0,0);">只统计词数 </font></p>
<p><font style="color:rgb(0,0,0);">-c </font><font style="color:rgb(0,0,0);">只统计字符数 </font></p>
<p><font style="color:rgb(0,0,0);">-L </font><font style="color:rgb(0,0,0);">统计最长行的字符数 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-101-1">1</a></span>
<span class="normal"><a href="#__codelineno-101-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-101-1" name="__codelineno-101-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># wc /etc/passwd </span>
<a id="__codelineno-101-2" name="__codelineno-101-2"></a><span class="m">46</span><span class="w"> </span><span class="m">87</span><span class="w"> </span><span class="m">2366</span><span class="w"> </span>/etc/passwd<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">行数 词数 字符数 </font></p>
<p><font style="color:rgb(0,0,0);">统计</font><font style="color:rgb(0,0,0);">/etc</font><font style="color:rgb(0,0,0);">目录下的文件和目录数量 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-102-1">1</a></span>
<span class="normal"><a href="#__codelineno-102-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-102-1" name="__codelineno-102-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># ls /etc/ | wc -l </span>
<a id="__codelineno-102-2" name="__codelineno-102-2"></a><span class="m">274</span>
</code></pre></div></td></tr></table></div>
<h1 id="网络管理">网络管理<a class="headerlink" href="#网络管理" title="Permanent link">&para;</a></h1>
<h2 id="网卡配置文件">网卡配置文件<a class="headerlink" href="#网卡配置文件" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(57,57,57);">网卡和配置文件一起形成网络功能，同一个网卡可以有多个配置，但只能有一个处于活动 </font></p>
<p><font style="color:rgb(57,57,57);">状态。 </font></p>
<p><font style="color:rgb(0,0,0);">网卡配置文件存放的位置： </font></p>
<p><font style="color:rgb(0,0,0);">Red Hat Enterprise Linux 8 版本 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-103-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-103-1" name="__codelineno-103-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># cd /etc/sysconfig/network-scripts/ </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">Red Hat Enterprise Linux 9 版本 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-104-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-104-1" name="__codelineno-104-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># cd /etc/NetworkManager/system-connections/ </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">⾃红帽企业 Linux 9 起，⽹络配置存储在 /etc/NetworkManager/system-connections/ ⽬录中。 </font></p>
<p><font style="color:rgb(0,0,0);">此新配置位置使⽤密钥⽂件格式，⽽不是 ifcfg 格式。 </font></p>
<p><font style="color:rgb(0,0,0);">不过，以前存储在 /etc/ sysconfig/network-scripts/ 的配置将继续有效。 </font></p>
<p><font style="color:rgb(0,0,0);">/etc/NetworkManager/system-connections/ ⽬录存储通过 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-105-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-105-1" name="__codelineno-105-1"></a>nmcli<span class="w"> </span>con<span class="w"> </span>mod<span class="w"> </span>name<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">命令进⾏的任 何更改。</font></p>
<p><img alt="" src="../../../../images/1717049333258-5cf15e76-e585-4941-8dfd-e82a0c4a0e80.png" /></p>
<h2 id="网卡管理"><strong><font style="color:rgb(0,0,0);">网卡管理</font></strong><a class="headerlink" href="#网卡管理" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(57,57,57);">网卡接口： </font></p>
<p><font style="color:rgb(57,57,57);">ifconfig 显示当前活动的网卡 windows下的 ipconfig </font></p>
<p><font style="color:rgb(57,57,57);">-a 显示所有状态的网卡 </font></p>
<p><font style="color:rgb(57,57,57);">命名规则： </font></p>
<p><font style="color:rgb(57,57,57);">eno16777736 </font></p>
<p><font style="color:rgb(57,57,57);">ens160 </font></p>
<p><font style="color:rgb(57,57,57);">以太网(ethernet): en </font></p>
<p><font style="color:rgb(57,57,57);">WLAN接口: wl </font></p>
<p><font style="color:rgb(57,57,57);">板载: o </font></p>
<p><font style="color:rgb(57,57,57);">热插拔: s </font></p>
<p><font style="color:rgb(57,57,57);">PCI插槽上的: p</font></p>
<p><font style="color:rgb(57,57,57);"></font></p>
<h2 id="配置文件管理"><strong><font style="color:rgb(0,0,0);">配置文件管理 </font></strong><a class="headerlink" href="#配置文件管理" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(57,57,57);">修改网络配置文件的方法：</font></p>
<h3 id="1图形界面修改"><strong><font style="color:rgb(0,0,0);">1.图形界面修改</font></strong><a class="headerlink" href="#1图形界面修改" title="Permanent link">&para;</a></h3>
<p><img alt="" src="../../../../images/1717049649318-fdf71b7f-fc89-4bc3-89d8-63e69abc6c39.png" /></p>
<h3 id="2直接编辑网卡配置文件"><strong><font style="color:rgb(0,0,0);">2.直接编辑网卡配置文件 </font></strong><a class="headerlink" href="#2直接编辑网卡配置文件" title="Permanent link">&para;</a></h3>
<p><font style="color:rgb(243,50,50);">/etc/NetworkManager/system-connections/</font><font style="color:rgb(57,57,57);"> 此目录下都是跟网络功能相关的配置的文 </font></p>
<p><font style="color:rgb(57,57,57);">件 </font></p>
<p><font style="color:rgb(223,64,42);">#vim </font><font style="color:rgb(243,50,50);">/etc/NetworkManager/system-connections/test.nmconnection </font><font style="color:rgb(57,57,57);">--编辑网卡的配 </font></p>
<p><font style="color:rgb(57,57,57);">置文件</font></p>
<p><img alt="" src="../../../../images/1717049669997-955f4bb8-3c74-4e3d-bd5a-a3fcea3ed1d9.png" /></p>
<p><img alt="" src="../../../../images/1717049676401-01629e32-95fb-46ed-aff5-c98f9c8d22a8.png" /></p>
<p><font style="color:rgb(57,57,57);">直接编辑网卡配置文件需要 使⽤ nmcli 命令来激活新⽹络地址 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-106-1">1</a></span>
<span class="normal"><a href="#__codelineno-106-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-106-1" name="__codelineno-106-1"></a>nmcli<span class="w"> </span>con<span class="w"> </span>reload<span class="w"> </span><span class="c1">#需要先加载配置文件，不然更新不会生效</span>
<a id="__codelineno-106-2" name="__codelineno-106-2"></a>nmcli<span class="w"> </span>con<span class="w"> </span>up<span class="w"> </span>&lt;profile-name&gt;<span class="w"> </span><span class="c1">#更新配置文件后，重新连接eth0的配置文件</span>
</code></pre></div></td></tr></table></div>
<h3 id="3使用-nmcli-配置网络"><strong><font style="color:rgb(0,0,0);">3.使用 nmcli 配置网络: </font></strong><a class="headerlink" href="#3使用-nmcli-配置网络" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-107-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-107-1" name="__codelineno-107-1"></a>network<span class="w"> </span>manager<span class="w"> </span>command-line<span class="w"> </span>interface<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">网络管理器(NetworManager)是检测网络、自动连接网络的程序 </font></p>
<p><font style="color:rgb(0,0,0);">启动：systemctl start NetworkManger </font></p>
<p><font style="color:rgb(0,0,0);">关闭：systemctl stop NetworkManager </font></p>
<p><font style="color:rgb(0,0,0);">开机启动：systemctl enable NetworkManger </font></p>
<p><font style="color:rgb(0,0,0);">查看是否开机启动：systemctl is-enabled NetworkManager </font></p>
<p><font style="color:rgb(0,0,0);">禁用开机启动：systemctl disable NetworkManager </font></p>
<p><strong><font style="color:rgb(0,0,0);">连接配置名称：con-name （eth0）</font></strong></p>
<p><strong><font style="color:rgb(0,0,0);">硬件设备名称：if-name （ens33）</font></strong></p>
<p><font style="color:rgb(57,57,57);">查看所有网卡的连接： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-108-1">1</a></span>
<span class="normal"><a href="#__codelineno-108-2">2</a></span>
<span class="normal"><a href="#__codelineno-108-3">3</a></span>
<span class="normal"><a href="#__codelineno-108-4">4</a></span>
<span class="normal"><a href="#__codelineno-108-5">5</a></span>
<span class="normal"><a href="#__codelineno-108-6">6</a></span>
<span class="normal"><a href="#__codelineno-108-7">7</a></span>
<span class="normal"><a href="#__codelineno-108-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-108-1" name="__codelineno-108-1"></a><span class="c1">#nmcli connection show </span>
<a id="__codelineno-108-2" name="__codelineno-108-2"></a><span class="c1">#nmcli device status </span>
<a id="__codelineno-108-3" name="__codelineno-108-3"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># nmcli device status (查看网卡硬件设备信息) </span>
<a id="__codelineno-108-4" name="__codelineno-108-4"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># nmcli connection show --active </span>
<a id="__codelineno-108-5" name="__codelineno-108-5"></a>NAME<span class="w"> </span>UUID<span class="w"> </span>TYPE<span class="w"> </span>DEVICE<span class="w"> </span>
<a id="__codelineno-108-6" name="__codelineno-108-6"></a>ens33<span class="w"> </span>96bd750e-9395-4d8d-bd48-449cab8a17d1<span class="w"> </span><span class="m">802</span>-3-ethernet<span class="w"> </span>ens33<span class="w"> </span>
<a id="__codelineno-108-7" name="__codelineno-108-7"></a>virbr0<span class="w"> </span>c4fda5cb-64bd-40d4-a12d-6707425d893c<span class="w"> </span>bridge<span class="w"> </span>virbr0<span class="w"> </span>
<a id="__codelineno-108-8" name="__codelineno-108-8"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># nmcli connection show ens33 </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">显示所有设备状态信息： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-109-1">1</a></span>
<span class="normal"><a href="#__codelineno-109-2">2</a></span>
<span class="normal"><a href="#__codelineno-109-3">3</a></span>
<span class="normal"><a href="#__codelineno-109-4">4</a></span>
<span class="normal"><a href="#__codelineno-109-5">5</a></span>
<span class="normal"><a href="#__codelineno-109-6">6</a></span>
<span class="normal"><a href="#__codelineno-109-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-109-1" name="__codelineno-109-1"></a><span class="c1">#nmcli device status </span>
<a id="__codelineno-109-2" name="__codelineno-109-2"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># nmcli device status （查看网卡链接状态） </span>
<a id="__codelineno-109-3" name="__codelineno-109-3"></a>DEVICE<span class="w"> </span>TYPE<span class="w"> </span>STATE<span class="w"> </span>CONNECTION<span class="w"> </span>
<a id="__codelineno-109-4" name="__codelineno-109-4"></a>virbr0<span class="w"> </span>bridge<span class="w"> </span>connected<span class="w"> </span>virbr0<span class="w"> </span>
<a id="__codelineno-109-5" name="__codelineno-109-5"></a>ens33<span class="w"> </span>ethernet<span class="w"> </span>connected<span class="w"> </span>ens33<span class="w"> </span>
<a id="__codelineno-109-6" name="__codelineno-109-6"></a>lo<span class="w"> </span>loopback<span class="w"> </span>unmanaged<span class="w"> </span>--<span class="w"> </span>
<a id="__codelineno-109-7" name="__codelineno-109-7"></a>virbr0-nic<span class="w"> </span>tun<span class="w"> </span>unmanaged<span class="w"> </span>-<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">创建网络连接 </font></p>
<p><font style="color:rgb(57,57,57);">创建一个文件名为eth01，并且与物理网卡名为ens38绑定 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-110-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-110-1" name="__codelineno-110-1"></a><span class="c1"># nmcli connection add type ethernet con-name eth01 ifname ens38 </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">再次创建一个文件名为eth0，同样与物理网卡名为ens38绑定，并且设置ip地址及网关 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-111-1">1</a></span>
<span class="normal"><a href="#__codelineno-111-2">2</a></span>
<span class="normal"><a href="#__codelineno-111-3">3</a></span>
<span class="normal"><a href="#__codelineno-111-4">4</a></span>
<span class="normal"><a href="#__codelineno-111-5">5</a></span>
<span class="normal"><a href="#__codelineno-111-6">6</a></span>
<span class="normal"><a href="#__codelineno-111-7">7</a></span>
<span class="normal"><a href="#__codelineno-111-8">8</a></span>
<span class="normal"><a href="#__codelineno-111-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-111-1" name="__codelineno-111-1"></a><span class="c1">#nmcli connection add type ethernet con-name eth1 ifname ens38 ipv4.addresses </span>
<a id="__codelineno-111-2" name="__codelineno-111-2"></a><span class="m">192</span>.168.200.248/24<span class="w"> </span>ipv4.gateway<span class="w"> </span><span class="m">192</span>.168.200.254<span class="w"> </span>ipv4.dns<span class="w"> </span><span class="m">202</span>.102.192.68<span class="w"> </span>
<a id="__codelineno-111-3" name="__codelineno-111-3"></a>autoconnect<span class="w"> </span>yes<span class="w"> </span>ipv4.method<span class="w"> </span>manual<span class="w"> </span>
<a id="__codelineno-111-4" name="__codelineno-111-4"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># nmcli connection show </span>
<a id="__codelineno-111-5" name="__codelineno-111-5"></a>NAME<span class="w"> </span>UUID<span class="w"> </span>TYPE<span class="w"> </span>DEVICE<span class="w"> </span>
<a id="__codelineno-111-6" name="__codelineno-111-6"></a>ens33<span class="w"> </span>96bd750e-9395-4d8d-bd48-449cab8a17d1<span class="w"> </span><span class="m">802</span>-3-ethernet<span class="w"> </span>ens33<span class="w"> </span>
<a id="__codelineno-111-7" name="__codelineno-111-7"></a>eth0<span class="w"> </span>d789dfee-4d28-4055-9de9-a4e4c5ebc779<span class="w"> </span><span class="m">802</span>-3-ethernet<span class="w"> </span>ens38<span class="w"> </span>
<a id="__codelineno-111-8" name="__codelineno-111-8"></a>virbr0<span class="w"> </span>c4fda5cb-64bd-40d4-a12d-6707425d893c<span class="w"> </span>bridge<span class="w"> </span>virbr0<span class="w"> </span>
<a id="__codelineno-111-9" name="__codelineno-111-9"></a>eth01<span class="w"> </span>11fd8563-4e6b-4697-b97d-95657b0cc207<span class="w"> </span><span class="m">802</span>-3-ethernet<span class="w"> </span>--
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">查看接口地址 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-112-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-112-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-112-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-112-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-112-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-112-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-112-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-112-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-112-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-112-10">10</a></span>
<span class="normal"><a href="#__codelineno-112-11">11</a></span>
<span class="normal"><a href="#__codelineno-112-12">12</a></span>
<span class="normal"><a href="#__codelineno-112-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-112-1" name="__codelineno-112-1"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># ip addr </span>
<a id="__codelineno-112-2" name="__codelineno-112-2"></a><span class="m">5</span>:<span class="w"> </span>ens38:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>pfifo_fast<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>qlen<span class="w"> </span>
<a id="__codelineno-112-3" name="__codelineno-112-3"></a><span class="m">1000</span><span class="w"> </span>
<a id="__codelineno-112-4" name="__codelineno-112-4"></a>link/ether<span class="w"> </span><span class="m">00</span>:0c:29:74:87:8e<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff<span class="w"> </span>
<a id="__codelineno-112-5" name="__codelineno-112-5"></a>inet<span class="w"> </span><span class="m">192</span>.168.200.124/24<span class="w"> </span>brd<span class="w"> </span><span class="m">192</span>.168.200.255<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>ens38<span class="w"> </span>
<a id="__codelineno-112-6" name="__codelineno-112-6"></a>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever<span class="w"> </span>
<a id="__codelineno-112-7" name="__codelineno-112-7"></a>inet6<span class="w"> </span>fe80::56a7:ee0f:5828:b48b/64<span class="w"> </span>scope<span class="w"> </span>link<span class="w"> </span>
<a id="__codelineno-112-8" name="__codelineno-112-8"></a>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever<span class="w"> </span>
<a id="__codelineno-112-9" name="__codelineno-112-9"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># nmcli connection show eth0 </span>
<a id="__codelineno-112-10" name="__codelineno-112-10"></a>IP4.ADDRESS<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span><span class="m">192</span>.168.200.124/24<span class="w"> </span>
<a id="__codelineno-112-11" name="__codelineno-112-11"></a>IP4.GATEWAY:<span class="w"> </span><span class="m">192</span>.168.200.254<span class="w"> </span>
<a id="__codelineno-112-12" name="__codelineno-112-12"></a>IP6.ADDRESS<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>fe80::56a7:ee0f:5828:b48b/64N<span class="w"> </span>
<a id="__codelineno-112-13" name="__codelineno-112-13"></a>IP6.GATEWAY:<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">修改某个连接的配置 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-113-1">1</a></span>
<span class="normal"><a href="#__codelineno-113-2">2</a></span>
<span class="normal"><a href="#__codelineno-113-3">3</a></span>
<span class="normal"><a href="#__codelineno-113-4">4</a></span>
<span class="normal"><a href="#__codelineno-113-5">5</a></span>
<span class="normal"><a href="#__codelineno-113-6">6</a></span>
<span class="normal"><a href="#__codelineno-113-7">7</a></span>
<span class="normal"><a href="#__codelineno-113-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-113-1" name="__codelineno-113-1"></a><span class="c1"># nmcli connection modify eth0 ipv4.addresses 192.168.200.125/24 ipv4.dns 8.8.8.8 </span>
<a id="__codelineno-113-2" name="__codelineno-113-2"></a>ipv4.gateway<span class="w"> </span><span class="m">192</span>.168.200.254<span class="w"> </span>ipv4.method<span class="w"> </span>manual<span class="w"> </span>
<a id="__codelineno-113-3" name="__codelineno-113-3"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># nmcli connection show eth0 </span>
<a id="__codelineno-113-4" name="__codelineno-113-4"></a>IP4.ADDRESS<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span><span class="m">192</span>.168.200.125/24<span class="w"> </span>
<a id="__codelineno-113-5" name="__codelineno-113-5"></a>IP4.GATEWAY:<span class="w"> </span><span class="m">192</span>.168.200.254<span class="w"> </span>
<a id="__codelineno-113-6" name="__codelineno-113-6"></a>IP4.DNS<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span><span class="m">8</span>.8.8.8<span class="w"> </span>
<a id="__codelineno-113-7" name="__codelineno-113-7"></a>IP6.ADDRESS<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>fe80::56a7:ee0f:5828:b48b/64<span class="w"> </span>
<a id="__codelineno-113-8" name="__codelineno-113-8"></a>IP6.GATEWAY:<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">增加某个值 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-114-1">1</a></span>
<span class="normal"><a href="#__codelineno-114-2">2</a></span>
<span class="normal"><a href="#__codelineno-114-3">3</a></span>
<span class="normal"><a href="#__codelineno-114-4">4</a></span>
<span class="normal"><a href="#__codelineno-114-5">5</a></span>
<span class="normal"><a href="#__codelineno-114-6">6</a></span>
<span class="normal"><a href="#__codelineno-114-7">7</a></span>
<span class="normal"><a href="#__codelineno-114-8">8</a></span>
<span class="normal"><a href="#__codelineno-114-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-114-1" name="__codelineno-114-1"></a><span class="c1"># nmcli connection modify eth0 +ipv4.dns 4.4.4.4 </span>
<a id="__codelineno-114-2" name="__codelineno-114-2"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># systemctl restart network </span>
<a id="__codelineno-114-3" name="__codelineno-114-3"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># nmcli connection show eth0 | grep IP4</span>
<a id="__codelineno-114-4" name="__codelineno-114-4"></a>IP4.ADDRESS<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span><span class="m">192</span>.168.200.125/24<span class="w"> </span>
<a id="__codelineno-114-5" name="__codelineno-114-5"></a>IP4.GATEWAY:<span class="w"> </span><span class="m">192</span>.168.200.254
<a id="__codelineno-114-6" name="__codelineno-114-6"></a>IP4.DNS<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span><span class="m">8</span>.8.8.8
<a id="__codelineno-114-7" name="__codelineno-114-7"></a>IP4.DNS<span class="o">[</span><span class="m">2</span><span class="o">]</span>:<span class="w"> </span><span class="m">4</span>.4.4.4
<a id="__codelineno-114-8" name="__codelineno-114-8"></a>IP6.ADDRESS<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>fe80::56a7:ee0f:5828:b48b/64
<a id="__codelineno-114-9" name="__codelineno-114-9"></a>IP6.GATEWAY:
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">【注：激活接口地址的几种方式】</font></p>
<p><font style="color:rgb(57,57,57);">重新链接eth0网卡</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-115-1">1</a></span>
<span class="normal"><a href="#__codelineno-115-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-115-1" name="__codelineno-115-1"></a><span class="c1"># nmcli connection reload </span>
<a id="__codelineno-115-2" name="__codelineno-115-2"></a><span class="c1"># nmcli connection up eth0</span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">删除某个连接</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-116-1">1</a></span>
<span class="normal"><a href="#__codelineno-116-2">2</a></span>
<span class="normal"><a href="#__codelineno-116-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-116-1" name="__codelineno-116-1"></a><span class="c1">#nmcli connection delete eth0</span>
<a id="__codelineno-116-2" name="__codelineno-116-2"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># nmcli connection delete eth01</span>
<a id="__codelineno-116-3" name="__codelineno-116-3"></a>Connection<span class="w"> </span><span class="s1">&#39;eth01&#39;</span><span class="w"> </span><span class="o">(</span>11fd8563-4e6b-4697-b97d-95657b0cc207<span class="o">)</span><span class="w"> </span>successfully<span class="w"> </span>deleted.
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">断开某个连接</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-117-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-117-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-117-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-117-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-117-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-117-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-117-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-117-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-117-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-117-10">10</a></span>
<span class="normal"><a href="#__codelineno-117-11">11</a></span>
<span class="normal"><a href="#__codelineno-117-12">12</a></span>
<span class="normal"><a href="#__codelineno-117-13">13</a></span>
<span class="normal"><a href="#__codelineno-117-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-117-1" name="__codelineno-117-1"></a><span class="c1">#nmcli connection down eth0</span>
<a id="__codelineno-117-2" name="__codelineno-117-2"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># nmcli connection show</span>
<a id="__codelineno-117-3" name="__codelineno-117-3"></a>NAME<span class="w"> </span>UUID<span class="w"> </span>TYPE<span class="w"> </span>DEVICE
<a id="__codelineno-117-4" name="__codelineno-117-4"></a>ens33<span class="w"> </span>96bd750e-9395-4d8d-bd48-449cab8a17d1<span class="w"> </span><span class="m">802</span>-3-ethernet<span class="w"> </span>ens33
<a id="__codelineno-117-5" name="__codelineno-117-5"></a>eth0<span class="w"> </span>d789dfee-4d28-4055-9de9-a4e4c5ebc779<span class="w"> </span><span class="m">802</span>-3-ethernet<span class="w"> </span>ens38
<a id="__codelineno-117-6" name="__codelineno-117-6"></a>virbr0<span class="w"> </span>c4fda5cb-64bd-40d4-a12d-6707425d893c<span class="w"> </span>bridge<span class="w"> </span>virbr0
<a id="__codelineno-117-7" name="__codelineno-117-7"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># nmcli connection down eth0</span>
<a id="__codelineno-117-8" name="__codelineno-117-8"></a>Connection<span class="w"> </span><span class="s1">&#39;eth0&#39;</span><span class="w"> </span>successfully<span class="w"> </span>deactivated<span class="w"> </span><span class="o">(</span>D-Bus<span class="w"> </span>active<span class="w"> </span>path:
<a id="__codelineno-117-9" name="__codelineno-117-9"></a>/org/freedesktop/NetworkManager/ActiveConnection/23<span class="o">)</span>
<a id="__codelineno-117-10" name="__codelineno-117-10"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># nmcli connection show</span>
<a id="__codelineno-117-11" name="__codelineno-117-11"></a>NAME<span class="w"> </span>UUID<span class="w"> </span>TYPE<span class="w"> </span>DEVICE
<a id="__codelineno-117-12" name="__codelineno-117-12"></a>ens33<span class="w"> </span>96bd750e-9395-4d8d-bd48-449cab8a17d1<span class="w"> </span><span class="m">802</span>-3-ethernet<span class="w"> </span>ens33
<a id="__codelineno-117-13" name="__codelineno-117-13"></a>virbr0<span class="w"> </span>c4fda5cb-64bd-40d4-a12d-6707425d893c<span class="w"> </span>bridge<span class="w"> </span>virbr0
<a id="__codelineno-117-14" name="__codelineno-117-14"></a>eth0<span class="w"> </span>d789dfee-4d28-4055-9de9-a4e4c5ebc779<span class="w"> </span><span class="m">802</span>-3-ethernet<span class="w"> </span>--
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">激活某个连接</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-118-1">1</a></span>
<span class="normal"><a href="#__codelineno-118-2">2</a></span>
<span class="normal"><a href="#__codelineno-118-3">3</a></span>
<span class="normal"><a href="#__codelineno-118-4">4</a></span>
<span class="normal"><a href="#__codelineno-118-5">5</a></span>
<span class="normal"><a href="#__codelineno-118-6">6</a></span>
<span class="normal"><a href="#__codelineno-118-7">7</a></span>
<span class="normal"><a href="#__codelineno-118-8">8</a></span>
<span class="normal"><a href="#__codelineno-118-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-118-1" name="__codelineno-118-1"></a><span class="c1">#nmcli connection up eth0</span>
<a id="__codelineno-118-2" name="__codelineno-118-2"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># nmcli connection up eth0</span>
<a id="__codelineno-118-3" name="__codelineno-118-3"></a>Connection<span class="w"> </span>successfully<span class="w"> </span>activated<span class="w"> </span><span class="o">(</span>D-Bus<span class="w"> </span>active<span class="w"> </span>path:
<a id="__codelineno-118-4" name="__codelineno-118-4"></a>/org/freedesktop/NetworkManager/ActiveConnection/24<span class="o">)</span>
<a id="__codelineno-118-5" name="__codelineno-118-5"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># nmcli connection show</span>
<a id="__codelineno-118-6" name="__codelineno-118-6"></a>NAME<span class="w"> </span>UUID<span class="w"> </span>TYPE<span class="w"> </span>DEVICE
<a id="__codelineno-118-7" name="__codelineno-118-7"></a>ens33<span class="w"> </span>96bd750e-9395-4d8d-bd48-449cab8a17d1<span class="w"> </span><span class="m">802</span>-3-ethernet<span class="w"> </span>ens33
<a id="__codelineno-118-8" name="__codelineno-118-8"></a>eth0<span class="w"> </span>d789dfee-4d28-4055-9de9-a4e4c5ebc779<span class="w"> </span><span class="m">802</span>-3-ethernet<span class="w"> </span>ens38
<a id="__codelineno-118-9" name="__codelineno-118-9"></a>virbr0<span class="w"> </span>c4fda5cb-64bd-40d4-a12d-6707425d893c<span class="w"> </span>bridge<span class="w"> </span>virbr0
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">网卡配置文件的断开与连接 </font></p>
<p><font style="color:rgb(0,0,0);">断开： nmcli </font><font style="color:rgb(223,64,42);">connection </font><font style="color:rgb(0,0,0);">down ens161 </font></p>
<p><font style="color:rgb(0,0,0);">连接：nmcli </font><font style="color:rgb(223,64,42);">connection </font><font style="color:rgb(0,0,0);">up ens161 </font></p>
<p><font style="color:rgb(0,0,0);">网卡设备的断开与连接 </font></p>
<p><font style="color:rgb(0,0,0);">断开：nmcli </font><font style="color:rgb(223,64,42);">device disconnect ens160 </font></p>
<p><font style="color:rgb(0,0,0);">连接：nmcli </font><font style="color:rgb(223,64,42);">device connect ens160 </font></p>
<p><font style="color:rgb(57,57,57);">断开设备连接 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-119-1">1</a></span>
<span class="normal"><a href="#__codelineno-119-2">2</a></span>
<span class="normal"><a href="#__codelineno-119-3">3</a></span>
<span class="normal"><a href="#__codelineno-119-4">4</a></span>
<span class="normal"><a href="#__codelineno-119-5">5</a></span>
<span class="normal"><a href="#__codelineno-119-6">6</a></span>
<span class="normal"><a href="#__codelineno-119-7">7</a></span>
<span class="normal"><a href="#__codelineno-119-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-119-1" name="__codelineno-119-1"></a><span class="c1"># nmcli device disconnect ensxxx </span>
<a id="__codelineno-119-2" name="__codelineno-119-2"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># nmcli device disconnect ens38 </span>
<a id="__codelineno-119-3" name="__codelineno-119-3"></a>Device<span class="w"> </span><span class="s1">&#39;ens38&#39;</span><span class="w"> </span>successfully<span class="w"> </span>disconnected.<span class="w"> </span>
<a id="__codelineno-119-4" name="__codelineno-119-4"></a>打开设备连接<span class="w"> </span>
<a id="__codelineno-119-5" name="__codelineno-119-5"></a><span class="c1"># nmcli device connect ensxxx </span>
<a id="__codelineno-119-6" name="__codelineno-119-6"></a><span class="o">[</span>root@myth<span class="w"> </span>network-scripts<span class="o">]</span><span class="c1"># nmcli device connect ens38 </span>
<a id="__codelineno-119-7" name="__codelineno-119-7"></a>Device<span class="w"> </span><span class="s1">&#39;ens38&#39;</span><span class="w"> </span>successfully<span class="w"> </span>activated<span class="w"> </span>with<span class="w"> </span><span class="s1">&#39;d789dfee-4d28-4055-9de9- </span>
<a id="__codelineno-119-8" name="__codelineno-119-8"></a><span class="s1">a4e4c5ebc779&#39;</span>.
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">其他网络信息配置：</font></p>
<p><strong><font style="color:rgb(0,0,0);">主机名修改 </font></strong></p>
<p><font style="color:rgb(57,57,57);">1.通过修改/etc/hostname 文件 </font></p>
<p><font style="color:rgb(57,57,57);">修改后重启系统生效 </font></p>
<p><font style="color:rgb(0,0,0);">查看当前主机名： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-120-1">1</a></span>
<span class="normal"><a href="#__codelineno-120-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-120-1" name="__codelineno-120-1"></a><span class="o">[</span>root@yukang<span class="w"> </span>~<span class="o">]</span><span class="c1"># cat /etc/hostname </span>
<a id="__codelineno-120-2" name="__codelineno-120-2"></a>yukang<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">可以通过vim编辑，编辑后，重启生效 </font></p>
<p><font style="color:rgb(57,57,57);">2.使用hostnamectl修改 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-121-1">1</a></span>
<span class="normal"><a href="#__codelineno-121-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-121-1" name="__codelineno-121-1"></a>hostnamectl<span class="w"> </span>hostname<span class="w"> </span>HOSTNAME<span class="w"> </span>
<a id="__codelineno-121-2" name="__codelineno-121-2"></a>获取主机名<span class="w"> </span><span class="c1">#hostname</span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">配置本地名称解析 </font></strong></p>
<p><font style="color:rgb(57,57,57);">修改/etc/hosts 文件 </font></p>
<p><font style="color:rgb(57,57,57);">格式： </font></p>
<p><font style="color:rgb(57,57,57);">ip 主机名 别名 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-122-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-122-1" name="__codelineno-122-1"></a><span class="m">192</span>.168.10.20<span class="w"> </span>qm.com<span class="w"> </span>qm<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">DNS解析配置文件 </font></p>
<p><font style="color:rgb(57,57,57);">文件 </font><font style="color:rgb(223,64,42);">/etc/resolv.conf </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-123-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-123-1" name="__codelineno-123-1"></a>nameservcer<span class="w"> </span><span class="m">192</span>.168.10.1
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">网络端口侦听和网络连接信息查看： </font></strong></p>
<p><font style="color:rgb(57,57,57);">1.netstat </font></p>
<p><font style="color:rgb(57,57,57);">-r 显示路由信息 </font></p>
<p><font style="color:rgb(57,57,57);">-t 显示TCP连接 </font></p>
<p><font style="color:rgb(57,57,57);">-u 显示UDP连接 </font></p>
<p><font style="color:rgb(57,57,57);">-n 以数字方式显示端口和ip </font></p>
<p><font style="color:rgb(57,57,57);">-l 显示listen状态的连接 </font></p>
<p><font style="color:rgb(57,57,57);">-p 显示监听套接字的进程名和PID </font></p>
<p><font style="color:rgb(57,57,57);">-a all</font></p>
<p><font style="color:rgb(57,57,57);">-tunalp </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-124-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-124-1" name="__codelineno-124-1"></a>netstat<span class="w"> </span>-tunalp<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>telnet<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">2.ss </font></p>
<p><font style="color:rgb(57,57,57);">选项同netstat </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-125-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-125-1" name="__codelineno-125-1"></a>ss<span class="w"> </span>-tunalp<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>sshd
</code></pre></div></td></tr></table></div>
<h1 id="软件管理">软件管理<a class="headerlink" href="#软件管理" title="Permanent link">&para;</a></h1>
<p><strong><font style="color:rgb(0,0,0);">什么是软件？ </font></strong></p>
<p><font style="color:rgb(0,0,0);">软件：</font><font style="color:rgb(57,57,57);">Software</font><font style="color:rgb(0,0,0);">是一系列按照特定顺序组织的计算机数据和</font><font style="color:rgb(57,57,57);">指令</font><font style="color:rgb(0,0,0);">的集合。一般来讲软件被划分为</font><font style="color:rgb(57,57,57);">系统 </font></p>
<p><font style="color:rgb(57,57,57);">软件</font><font style="color:rgb(0,0,0);">、应用软件和介于这两者之间的</font><font style="color:rgb(57,57,57);">中间件</font><font style="color:rgb(0,0,0);">。 </font></p>
<p><font style="color:rgb(0,0,0);">.exe </font></p>
<p><font style="color:rgb(0,0,0);">不同的系统平台指令不同，因此软件也不同，所以在不同类别的系统中，软件并不能通用，比如微软 </font></p>
<p><font style="color:rgb(0,0,0);">系统中的exe安装包，一般无法在linux系统中安装 </font></p>
<p><font style="color:rgb(0,0,0);">在Linux界有两大常见的软件安装方式：DPKG、RPM </font></p>
<p><font style="color:rgb(0,0,0);">dpkg最早由debian linux社区开发，B2D和ubuntu主要用这种安装方式 </font></p>
<p><font style="color:rgb(0,0,0);">rpm最早是由red hat研发，Fedora、CentOS、SuSE等知名的开发商都是用该种方式</font></p>
<p><strong><font style="color:rgb(0,0,0);">RPM介绍： </font></strong></p>
<p><font style="color:rgb(51,51,51);">RedHat Package Manager 是以一种数据库记录的方式来将所需要的软件安装到 Linux 系 </font></p>
<p><font style="color:rgb(51,51,51);">统的一套管理机制。 </font></p>
<p><strong><font style="color:rgb(0,0,0);">特性： </font></strong></p>
<p><font style="color:rgb(79,79,79);">在通用平台上将软件编译好，打包成为 RPM 机制的包 [安装环境已定制化]。记录并检查软件安装的</font><font style="color:rgb(223,64,42);">依 </font></p>
<p><font style="color:rgb(223,64,42);">赖包</font><font style="color:rgb(79,79,79);">，安装的时候就将该软件的信息整个写入 RPM 的数据库中，供后续查询、升级和卸载。</font></p>
<p><font style="color:rgb(0,0,0);">RPM软件包文件采用的软件名称组合 </font></p>
<p><font style="color:rgb(0,0,0);">name-version-release.architecture的命名方式进行命名 </font></p>
<p><font style="color:rgb(223,64,42);">httpd-2.4.6-88.el7.x86_64.rpm </font><font style="color:rgb(57,57,57);">[</font><font style="color:rgb(51,51,51);">软件名-版本号-编译次数.发行商版本.处理器平台</font><font style="color:rgb(57,57,57);">] </font></p>
<p><font style="color:rgb(0,0,0);">name：描述其内容的一个或多个单词 （httpd） </font></p>
<p><font style="color:rgb(0,0,0);">version： 软件的原始版本号 （2.4.6） </font></p>
<p><font style="color:rgb(0,0,0);">release：在原始的发行版本号基础上，被新的软件开发商编译的次数及新的命名（88.el7） </font></p>
<p><font style="color:rgb(0,0,0);">arch：该软件可运行的处理机器架构 (x86_64);"noarch"表示不限定架构 </font></p>
<p><font style="color:rgb(0,0,0);">（目前常见的几种处理器硬件架构：x86、arm、PowerPC）</font></p>
<p><strong><font style="color:rgb(0,0,0);">RPM使用： </font></strong></p>
<p><strong><font style="color:rgb(0,0,0);">安装包下载： </font></strong></p>
<p><font style="color:rgb(0,0,0);">本地软件包： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-126-1">1</a></span>
<span class="normal"><a href="#__codelineno-126-2">2</a></span>
<span class="normal"><a href="#__codelineno-126-3">3</a></span>
<span class="normal"><a href="#__codelineno-126-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-126-1" name="__codelineno-126-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># mount /dev/sr0 /media/ </span>
<a id="__codelineno-126-2" name="__codelineno-126-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># cd /media/Packages/ </span>
<a id="__codelineno-126-3" name="__codelineno-126-3"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>Packages<span class="o">]</span><span class="c1"># ls | wc -l </span>
<a id="__codelineno-126-4" name="__codelineno-126-4"></a><span class="m">51</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);"></font></p>
<p><font style="color:rgb(0,0,0);">网络软件包： </font></p>
<p><font style="color:rgb(3,102,214);">http://rpm.pbone.net/ </font></p>
<p><font style="color:rgb(3,102,214);">http://rpmfind.net</font></p>
<p><font style="color:rgb(0,0,0);">wget </font></p>
<p><font style="color:rgb(0,0,0);">ftp://ftp.pbone.net/mirror/archive.fedoraproject.org/fedora/linux/updates/27/armhfp/Packag </font></p>
<p><font style="color:rgb(0,0,0);">es/c/cowsay-3.04-8.fc27.noarch.rpm</font></p>
<p><font style="color:rgb(0,0,0);">软件安装： </font></p>
<p><font style="color:rgb(223,64,42);">#rpm -ivh package_name </font><font style="color:rgb(51,51,51);">--可以同时安装多个软件，软件包可以下载到本地，也可以是 </font></p>
<p><font style="color:rgb(51,51,51);">通过网络安装 </font></p>
<p><font style="color:rgb(79,79,79);">-i:install </font></p>
<p><font style="color:rgb(79,79,79);">-v:显示指令的执行过程 </font></p>
<p><font style="color:rgb(79,79,79);">-h:显示安装进度 </font></p>
<p><font style="color:rgb(79,79,79);">--nodeps 忽略包依赖关系 </font></p>
<p><font style="color:rgb(79,79,79);">--force 强制安装，实现降级或重装 </font></p>
<p><font style="color:rgb(79,79,79);">--replacepkgs 替换原有安装</font></p>
<p><strong><font style="color:rgb(0,0,0);">查询 </font></strong></p>
<p><font style="color:rgb(223,64,42);">#rpm -q PACKGE_NAME </font><font style="color:rgb(57,57,57);">查询包是否安装 </font></p>
<p><strong><font style="color:rgb(243,50,50);">-qa 查询所有已安装的包 </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-127-1">1</a></span>
<span class="normal"><a href="#__codelineno-127-2">2</a></span>
<span class="normal"><a href="#__codelineno-127-3">3</a></span>
<span class="normal"><a href="#__codelineno-127-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-127-1" name="__codelineno-127-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -qa cowsay</span>
<a id="__codelineno-127-2" name="__codelineno-127-2"></a>cowsay-3.04-12.fc30.noarch
<a id="__codelineno-127-3" name="__codelineno-127-3"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -qa telnet</span>
<a id="__codelineno-127-4" name="__codelineno-127-4"></a>telnet-0.17-64.el7.x86_64
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">-qi 查询指定包的说明信息 （已安装的包） </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-128-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-128-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-128-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-128-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-128-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-128-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-128-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-128-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-128-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-128-10">10</a></span>
<span class="normal"><a href="#__codelineno-128-11">11</a></span>
<span class="normal"><a href="#__codelineno-128-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-128-1" name="__codelineno-128-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -qi cowsay </span>
<a id="__codelineno-128-2" name="__codelineno-128-2"></a>Name<span class="w"> </span>:<span class="w"> </span>cowsay<span class="w"> </span>
<a id="__codelineno-128-3" name="__codelineno-128-3"></a>Version<span class="w"> </span>:<span class="w"> </span><span class="m">3</span>.04<span class="w"> </span>
<a id="__codelineno-128-4" name="__codelineno-128-4"></a>Release<span class="w"> </span>:<span class="w"> </span><span class="m">12</span>.fc30<span class="w"> </span>
<a id="__codelineno-128-5" name="__codelineno-128-5"></a>Architecture:<span class="w"> </span>noarch<span class="w"> </span>
<a id="__codelineno-128-6" name="__codelineno-128-6"></a>Install<span class="w"> </span>Date:<span class="w"> </span>Sat<span class="w"> </span><span class="m">18</span><span class="w"> </span>May<span class="w"> </span><span class="m">2019</span><span class="w"> </span><span class="m">11</span>:34:15<span class="w"> </span>AM<span class="w"> </span>EDT<span class="w"> </span>
<a id="__codelineno-128-7" name="__codelineno-128-7"></a>Group<span class="w"> </span>:<span class="w"> </span>Unspecified<span class="w"> </span>
<a id="__codelineno-128-8" name="__codelineno-128-8"></a>Size<span class="w"> </span>:<span class="w"> </span><span class="m">78106</span><span class="w"> </span>
<a id="__codelineno-128-9" name="__codelineno-128-9"></a>License<span class="w"> </span>:<span class="w"> </span>GPLv3+<span class="w"> </span>
<a id="__codelineno-128-10" name="__codelineno-128-10"></a>Signature<span class="w"> </span>:<span class="w"> </span>RSA/SHA256,<span class="w"> </span>Thu<span class="w"> </span><span class="m">07</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2019</span><span class="w"> </span><span class="m">12</span>:39:22<span class="w"> </span>AM<span class="w"> </span>EST,<span class="w"> </span>Key<span class="w"> </span>ID<span class="w"> </span>ef3c111fcfc659b9<span class="w"> </span>
<a id="__codelineno-128-11" name="__codelineno-128-11"></a>Source<span class="w"> </span>RPM<span class="w"> </span>:<span class="w"> </span>cowsay-3.04-12.fc30.src.rpm<span class="w"> </span>
<a id="__codelineno-128-12" name="__codelineno-128-12"></a>........
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(243,50,50);">-ql 查询指定包安装后生成的文件列表 </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-129-1">1</a></span>
<span class="normal"><a href="#__codelineno-129-2">2</a></span>
<span class="normal"><a href="#__codelineno-129-3">3</a></span>
<span class="normal"><a href="#__codelineno-129-4">4</a></span>
<span class="normal"><a href="#__codelineno-129-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-129-1" name="__codelineno-129-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -ql telnet </span>
<a id="__codelineno-129-2" name="__codelineno-129-2"></a>/usr/bin/telnet<span class="w"> </span>
<a id="__codelineno-129-3" name="__codelineno-129-3"></a>/usr/share/doc/telnet-0.17<span class="w"> </span>
<a id="__codelineno-129-4" name="__codelineno-129-4"></a>/usr/share/doc/telnet-0.17/README<span class="w"> </span>
<a id="__codelineno-129-5" name="__codelineno-129-5"></a>/usr/share/man/man1/telnet.1.gz<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(243,50,50);">-qc </font><font style="color:rgb(57,57,57);">查询指定包安装后的配置文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-130-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-130-1" name="__codelineno-130-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -qc httpd </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">-qd 查询指定包安装后的帮助文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-131-1">1</a></span>
<span class="normal"><a href="#__codelineno-131-2">2</a></span>
<span class="normal"><a href="#__codelineno-131-3">3</a></span>
<span class="normal"><a href="#__codelineno-131-4">4</a></span>
<span class="normal"><a href="#__codelineno-131-5">5</a></span>
<span class="normal"><a href="#__codelineno-131-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-131-1" name="__codelineno-131-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -qd cowsay </span>
<a id="__codelineno-131-2" name="__codelineno-131-2"></a>/usr/share/doc/cowsay/ChangeLog<span class="w"> </span>
<a id="__codelineno-131-3" name="__codelineno-131-3"></a>/usr/share/doc/cowsay/LICENSE<span class="w"> </span>
<a id="__codelineno-131-4" name="__codelineno-131-4"></a>/usr/share/doc/cowsay/README<span class="w"> </span>
<a id="__codelineno-131-5" name="__codelineno-131-5"></a>/usr/share/man/man1/cowsay.1.gz<span class="w"> </span>
<a id="__codelineno-131-6" name="__codelineno-131-6"></a>/usr/share/man/man1/cowthink.1.gz
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">-qf /path/file 查询指定的文件是由哪个包安装产生的 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-132-1">1</a></span>
<span class="normal"><a href="#__codelineno-132-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-132-1" name="__codelineno-132-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -qf /usr/share/doc/cowsay/ChangeLog </span>
<a id="__codelineno-132-2" name="__codelineno-132-2"></a>cowsay-3.04-12.fc30.noarch
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">-qpi 查询未安装包的信息 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-133-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-133-1" name="__codelineno-133-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -qpi cowsay-3.04-12.fc30.noarch.rpm </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">-qpl 查询未安装包在安装后生成的文件列表 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-134-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-134-1" name="__codelineno-134-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -qpl cowsay-3.04-12.fc30.noarch.rpm</span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">RPM默认的文件安装路径： </font></p>
<p><font style="color:rgb(57,57,57);">/usr/bin 一些可执行文件 </font></p>
<p><font style="color:rgb(57,57,57);">/usr/lib 一些程序使用的动态函数库 </font></p>
<p><font style="color:rgb(243,50,50);">/usr/share/doc </font><font style="color:rgb(57,57,57);">一些基本的软件使用手册与帮助文档 </font></p>
<p><font style="color:rgb(57,57,57);">/usr/share/man 一些man page文件 </font></p>
<p><strong><font style="color:rgb(0,0,0);">升级 </font></strong></p>
<p><font style="color:rgb(223,64,42);">#rpm -Uvh </font><font style="color:rgb(57,57,57);">如果有旧版版则升级，否则安装 </font></p>
<p><font style="color:rgb(223,64,42);">#rpm -Fvh </font><font style="color:rgb(57,57,57);">如果有旧版本则升级，否则退出 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-135-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-135-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-135-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-135-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-135-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-135-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-135-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-135-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-135-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-135-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-135-1" name="__codelineno-135-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -qa telnet </span>
<a id="__codelineno-135-2" name="__codelineno-135-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -Fvh telnet-0.17-64.el7.x86_64.rpm </span>
<a id="__codelineno-135-3" name="__codelineno-135-3"></a>warning:<span class="w"> </span>telnet-0.17-64.el7.x86_64.rpm:<span class="w"> </span>Header<span class="w"> </span>V3<span class="w"> </span>RSA/SHA256<span class="w"> </span>Signature,<span class="w"> </span>key<span class="w"> </span>ID<span class="w"> </span>f4a80eb5:<span class="w"> </span>
<a id="__codelineno-135-4" name="__codelineno-135-4"></a>NOKEY<span class="w"> </span>
<a id="__codelineno-135-5" name="__codelineno-135-5"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -Uvh telnet-0.17-64.el7.x86_64.rpm </span>
<a id="__codelineno-135-6" name="__codelineno-135-6"></a>warning:<span class="w"> </span>telnet-0.17-64.el7.x86_64.rpm:<span class="w"> </span>Header<span class="w"> </span>V3<span class="w"> </span>RSA/SHA256<span class="w"> </span>Signature,<span class="w"> </span>key<span class="w"> </span>ID<span class="w"> </span>f4a80eb5:<span class="w"> </span>
<a id="__codelineno-135-7" name="__codelineno-135-7"></a>NOKEY<span class="w"> </span>
<a id="__codelineno-135-8" name="__codelineno-135-8"></a>Preparing...<span class="w"> </span><span class="c1">################################# [100%] </span>
<a id="__codelineno-135-9" name="__codelineno-135-9"></a>Updating<span class="w"> </span>/<span class="w"> </span>installing...<span class="w"> </span>
<a id="__codelineno-135-10" name="__codelineno-135-10"></a><span class="m">1</span>:telnet-1:0.17-64.el7<span class="w"> </span><span class="c1">################################# [100%] </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">卸载 </font></strong></p>
<p><font style="color:rgb(223,64,42);">#rpm -e PACKGE_NAME </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-136-1">1</a></span>
<span class="normal"><a href="#__codelineno-136-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-136-1" name="__codelineno-136-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -e telnet</span>
<a id="__codelineno-136-2" name="__codelineno-136-2"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -qa telnet</span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">重建rpm数据库 </font></strong></p>
<p><font style="color:rgb(223,64,42);">#rpm --rebuilddb </font><font style="color:rgb(57,57,57);">重建数据库 </font></p>
<p><font style="color:rgb(223,64,42);">#rpm --initdb </font><font style="color:rgb(57,57,57);">初始化数据库，没有则建立 </font></p>
<p><font style="color:rgb(0,0,0);">如何查看当前系统版本及升级系统版本 </font></p>
<p><strong><font style="color:rgb(0,0,0);">RHEL7.5： </font></strong></p>
<p><font style="color:rgb(0,0,0);">[root@df_rhel ~]#</font><strong><font style="color:rgb(223,64,42);"> uname -a </font></strong></p>
<p><font style="color:rgb(0,0,0);">Linux df_rhel </font><font style="color:rgb(223,64,42);">3.10.0-862.el7.x86_64</font><font style="color:rgb(0,0,0);"> #1 SMP Wed Mar 21 18:14:51 EDT 2018 x86_64 x86_64 </font></p>
<p><font style="color:rgb(0,0,0);">x86_64 GNU/Linux </font></p>
<p><strong><font style="color:rgb(0,0,0);">RHEL8.0： </font></strong></p>
<p><font style="color:rgb(0,0,0);">[root@myth_8 ~]# uname -a </font></p>
<p><font style="color:rgb(0,0,0);">Linux myth_8.0 </font><font style="color:rgb(223,64,42);">4.18.0-80.el8.x86_64</font><font style="color:rgb(0,0,0);"> #1 SMP Wed Mar 13 12:02:46 UTC 2019 x86_64 x86_64 </font></p>
<p><font style="color:rgb(0,0,0);">x86_64 GNU/Linux </font></p>
<p><strong><font style="color:rgb(0,0,0);">RHEL7.5： </font></strong></p>
<p><font style="color:rgb(0,0,0);">[root@df_rhel ~]# </font><strong><font style="color:rgb(223,64,42);">more /etc/os-release </font></strong></p>
<p><font style="color:rgb(0,0,0);">NAME="</font><font style="color:rgb(223,64,42);">Red Hat Enterprise Linux Serve</font><font style="color:rgb(0,0,0);">r" </font></p>
<p><font style="color:rgb(0,0,0);">VERSION="</font><font style="color:rgb(223,64,42);">7.5 (Maipo)</font><font style="color:rgb(0,0,0);">" </font></p>
<p><font style="color:rgb(0,0,0);">ID="</font><font style="color:rgb(223,64,42);">rhel</font><font style="color:rgb(0,0,0);">" </font></p>
<p><font style="color:rgb(0,0,0);">ID_LIKE="fedora" </font></p>
<p><font style="color:rgb(0,0,0);">VARIANT="Server" </font></p>
<p><font style="color:rgb(0,0,0);">VARIANT_ID="server" </font></p>
<p><font style="color:rgb(0,0,0);">VERSION_ID="7.5" </font></p>
<p><font style="color:rgb(0,0,0);">PRETTY_NAME="Red Hat Enterprise Linux Server 7.5 (Maipo)" </font></p>
<p><font style="color:rgb(0,0,0);">ANSI_COLOR="0;31" </font></p>
<p><font style="color:rgb(0,0,0);">CPE_NAME="cpe:/o:redhat:enterprise_linux:7.5:GA:server" </font></p>
<p><font style="color:rgb(0,0,0);">HOME_URL="https://www.redhat.com/" </font></p>
<p><font style="color:rgb(0,0,0);">BUG_REPORT_URL="https://bugzilla.redhat.com/" </font></p>
<p><font style="color:rgb(0,0,0);">REDHAT_BUGZILLA_PRODUCT="Red Hat Enterprise Linux 7" </font></p>
<p><font style="color:rgb(0,0,0);">REDHAT_BUGZILLA_PRODUCT_VERSION=7.5</font></p>
<p><font style="color:rgb(0,0,0);">REDHAT_SUPPORT_PRODUCT="Red Hat Enterprise Linux" </font></p>
<p><font style="color:rgb(0,0,0);">REDHAT_SUPPORT_PRODUCT_VERSION="7.5" </font></p>
<p><strong><font style="color:rgb(0,0,0);">RHEL8.0： </font></strong></p>
<p><font style="color:rgb(0,0,0);">[root@myth_8 ~]# cat /etc/os-release </font></p>
<p><font style="color:rgb(0,0,0);">NAME="Red Hat Enterprise Linux" </font></p>
<p><font style="color:rgb(0,0,0);">VERSION="8.0 (Ootpa)" </font></p>
<p><font style="color:rgb(0,0,0);">ID="rhel" </font></p>
<p><font style="color:rgb(0,0,0);">ID_LIKE="fedora" </font></p>
<p><font style="color:rgb(0,0,0);">VERSION_ID="8.0" </font></p>
<p><font style="color:rgb(0,0,0);">PLATFORM_ID="platform:el8" </font></p>
<p><font style="color:rgb(0,0,0);">PRETTY_NAME="Red Hat Enterprise Linux 8.0 (Ootpa)" </font></p>
<p><font style="color:rgb(0,0,0);">ANSI_COLOR="0;31" </font></p>
<p><font style="color:rgb(0,0,0);">CPE_NAME="cpe:/o:redhat:enterprise_linux:8.0:GA" </font></p>
<p><font style="color:rgb(0,0,0);">HOME_URL="https://www.redhat.com/" </font></p>
<p><font style="color:rgb(0,0,0);">BUG_REPORT_URL="https://bugzilla.redhat.com/" </font></p>
<p><font style="color:rgb(0,0,0);">REDHAT_BUGZILLA_PRODUCT="Red Hat Enterprise Linux 8" </font></p>
<p><font style="color:rgb(0,0,0);">REDHAT_BUGZILLA_PRODUCT_VERSION=8.0 </font></p>
<p><font style="color:rgb(0,0,0);">REDHAT_SUPPORT_PRODUCT="Red Hat Enterprise Linux" </font></p>
<p><font style="color:rgb(0,0,0);">REDHAT_SUPPORT_PRODUCT_VERSION="8.0" </font></p>
<p><strong><font style="color:rgb(0,0,0);">RHEL7.5： </font></strong></p>
<p><font style="color:rgb(0,0,0);">[root@df_rhel ~]# </font><strong><font style="color:rgb(223,64,42);">rpm -qa kernel </font></strong></p>
<p><font style="color:rgb(0,0,0);">kernel-</font><font style="color:rgb(223,64,42);">3.10.0</font><font style="color:rgb(0,0,0);">-862.el7.x86_64 </font></p>
<p><strong><font style="color:rgb(0,0,0);">RHEL8.0： </font></strong></p>
<p><font style="color:rgb(0,0,0);">[root@myth_8 ~]# </font><font style="color:rgb(223,64,42);">rpm -qa kernel </font></p>
<p><font style="color:rgb(0,0,0);">kernel-</font><font style="color:rgb(223,64,42);">4.18.0</font><font style="color:rgb(0,0,0);">-80.el8.x86_64 </font></p>
<p><font style="color:rgb(0,0,0);">升级内核： </font></p>
<p><font style="color:rgb(0,0,0);">[root@df_rhel ~]# rpm -ivh kernel-4.18.0-80.el8.x86_64.rpm </font></p>
<h2 id="拥有红帽订阅通过互联网连接到红帽"><font style="color:rgb(0,0,0);">拥有红帽订阅，通过互联网连接到红帽</font><a class="headerlink" href="#拥有红帽订阅通过互联网连接到红帽" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(0,0,0);">注册 </font></p>
<p><font style="color:rgb(0,0,0);">subscription-manager register --username ahdifu </font></p>
<p><font style="color:rgb(0,0,0);">列出可用的订阅 </font></p>
<p><font style="color:rgb(0,0,0);">subscription-manager list --available </font></p>
<p><font style="color:rgb(0,0,0);">列出可用仓库 </font></p>
<p><font style="color:rgb(0,0,0);">subscription-manager repos </font></p>
<p><font style="color:rgb(0,0,0);">启用目标软件仓库 </font></p>
<p><font style="color:rgb(0,0,0);">subscription-manager repos --enable &lt;仓库全名&gt;</font><img alt="" src="../../../../images/1717077106716-2bde2d41-c213-4d4d-88db-de3794fa1353.png" /><img alt="" src="../../../../images/1717077114832-e551af41-20d5-4b41-b738-2f6a4265d0a0.png" /></p>
<h2 id="dnf介绍"><strong><font style="color:rgb(0,0,0);">DNF介绍 </font></strong><a class="headerlink" href="#dnf介绍" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(0,0,0);">使⽤ DNF 管理软件包 </font></p>
<p><font style="color:rgb(0,0,0);">DNF (Dandi</font><font style="color:rgb(0,0,0);">fi</font><font style="color:rgb(0,0,0);">ed YUM) 取代了 YUM，作为红帽企业 Linux 9 中的软件包管理器。 </font></p>
<p><font style="color:rgb(0,0,0);">DNF 命令在功能上与 YUM 命令相同。出于兼容性考虑，YUM 命令依然作为 DNF 的符号链接⽽存 </font></p>
<p><font style="color:rgb(0,0,0);">在： </font></p>
<p><font style="color:rgb(0,0,0);">使⽤ DNF 查找软件 </font></p>
<p><font style="color:rgb(0,0,0);">dnf help 命令显⽰⽤法信息。 dnf list 命令显⽰已安装和可⽤的软件包。 </font></p>
<p><font style="color:rgb(0,0,0);">dnf search KEYWORD 命令仅列出按照名称和摘要字段中找到的关键字找到的软件包。 </font></p>
<p><font style="color:rgb(0,0,0);">若要搜索 名称、摘要和描述字段中包含“web server”的软件包，可使⽤ search all </font></p>
<p><font style="color:rgb(0,0,0);">dnf info PACKAGENAME 命令返回与软件包相关的详细信息，包括安装所需的磁盘空间。 </font></p>
<p><font style="color:rgb(0,0,0);">dnf provides PATHNAME 命令显示与指定路径名匹配的软件包（路径名通常包含通配符） </font></p>
<p><font style="color:rgb(0,0,0);">使⽤ DNF 安装和删除软件 </font></p>
<p><font style="color:rgb(0,0,0);">dnf install PACKAGENAME 命令获取并安装软件包，包括所有依赖项。 </font></p>
<p><font style="color:rgb(0,0,0);">dnf update PACKAGENAME 命令获取并安装指定软件包的较新版本，包括所有依赖项。 </font></p>
<p><font style="color:rgb(0,0,0);">通常，该 过程会尝试适当保留配置⽂件，但在某些情况下，如果打包商认为旧名称在更新后 </font></p>
<p><font style="color:rgb(0,0,0);">将无法使用，则 可能对这些⽂件进⾏重命名。 </font></p>
<p><font style="color:rgb(0,0,0);">如果未指定 PACKAGENAME，它将安装所有相关更新。 </font></p>
<p><font style="color:rgb(0,0,0);">使⽤ dnf list kernel 命令可列出所有已安装和可⽤的内核。 </font></p>
<p><font style="color:rgb(0,0,0);">dnf remove PACKAGENAME 命令可删除安装的软件包，包括所有受⽀持的软件包。 </font></p>
<p><font style="color:rgb(0,0,0);">使⽤ DNF 安装和删除软件组 </font></p>
<p><font style="color:rgb(0,0,0);">dnf 命令也具有组的概念，即针对特定⽬的⽽⼀起安装的相关软件集合。 </font></p>
<p><font style="color:rgb(0,0,0);">dnf group list 命令可显⽰已安装和可⽤的组的名称。 </font></p>
<p><font style="color:rgb(0,0,0);">dnf group info 命令显⽰与组相关的信息。</font></p>
<p><font style="color:rgb(0,0,0);">dnf group install 命令将安装⼀个组，同时安装其必选和默认的软件包，以及它们依赖的软件 包。 </font></p>
<p><font style="color:rgb(0,0,0);">dnf group install "RPM Development Tools" -y</font><img alt="" src="../../../../images/1717077157820-36c1fa9c-12d9-4ea2-a6cd-c32471cdc494.png" /></p>
<p><font style="color:rgb(0,0,0);">启⽤红帽软件存储库 </font></p>
<p><font style="color:rgb(0,0,0);">在许多情况下，系统可以访问诸多红帽存储库。 </font></p>
<p><font style="color:rgb(0,0,0);">dnf repolist all 命令可列出所有可⽤的存储 库及其状态 </font></p>
<p><font style="color:rgb(0,0,0);">dnf config-manager 命令可以启⽤或禁⽤存储库。 </font></p>
<p><font style="color:rgb(0,0,0);">例如，以下命令可启⽤ rhel-9-server- debug-rpms 存储库： </font></p>
<p><font style="color:rgb(0,0,0);">dnf config-manager --enable rhel-9-server-debug-rpms </font></p>
<p><font style="color:rgb(0,0,0);">添加 DNF 存储库 </font></p>
<p><font style="color:rgb(0,0,0);">dnf config-manager 命令还可以向计算机添加存储库。 </font></p>
<p><font style="color:rgb(0,0,0);">以下命令使⽤现有存储库的 URL 来创建 .repo ⽂件。 </font></p>
<p><font style="color:rgb(0,0,0);">dnf config-manager --add</font></p>
<p><font style="color:rgb(0,0,0);">repo="https://dl.fedoraproject.org/pub/epel/9/Everything/x86_64/" </font></p>
<p><strong><font style="color:rgb(0,0,0);">配置本地存储库 </font></strong></p>
<p><font style="color:rgb(57,57,57);">配置文件 </font><font style="color:rgb(223,64,42);">/etc/yum.repos.d/*.repo </font><font style="color:rgb(57,57,57);">，该目录下所有以.repo结尾的文件都是有效配置文件 </font></p>
<p><font style="color:rgb(57,57,57);">配置文件主要参数： </font></p>
<p><font style="color:rgb(223,64,42);">[rhel9] </font><font style="color:rgb(0,0,0);">--仓库id </font></p>
<p><font style="color:rgb(223,64,42);">name=rhel </font><font style="color:rgb(0,0,0);">--仓库名称或者描述</font></p>
<p><font style="color:rgb(223,64,42);">baseurl=file:///media </font><font style="color:rgb(0,0,0);">--仓库地址 ，可以是本地目录也可以是网络上的路径file表示使用本地路 </font></p>
<p><font style="color:rgb(0,0,0);">径， </font></p>
<p><font style="color:rgb(0,0,0);">http和ftp表示使用网络路径 </font></p>
<p><font style="color:rgb(223,64,42);">gpgcheck=0 </font><font style="color:rgb(0,0,0);">--是否校验仓库内软件包，0不校验，1校验，如果校验需要指明校验密钥 </font></p>
<p><font style="color:rgb(223,64,42);">enabled=1 </font><font style="color:rgb(0,0,0);">--是否启用该yum仓库,0不启用，1启用 </font></p>
<p><strong><font style="color:rgb(223,64,42);">priority=1 </font></strong><strong><font style="color:rgb(0,0,0);">（只有一个仓库可以不用设置） </font></strong></p>
<p><font style="color:rgb(0,0,0);">--设置仓库优先级，数字越小越优 </font></p>
<p><strong><font style="color:rgb(0,0,0);">RedHat Enterprise Linux 8 中的 yum 技术 </font></strong></p>
<p><font style="color:rgb(79,79,79);">Yellow dog Update Modified （yellow dog是Linux的一个发行版本） </font></p>
<p><font style="color:rgb(79,79,79);">YUM是Fedora、RedHat、CentOS中的前端软件包管理器，使用Python编写 </font></p>
<p><font style="color:rgb(57,57,57);">YUM原理： </font></p>
<p><font style="color:rgb(57,57,57);">使用一个仓库管理所有应用程序，通过程序间关系计算出软件的</font><font style="color:rgb(223,64,42);">依赖关系</font><font style="color:rgb(57,57,57);">进行软件安装、 </font></p>
<p><font style="color:rgb(57,57,57);">升级、删除、查询等操作。 </font></p>
<p><font style="color:rgb(57,57,57);">通过一个或多个配置文件来描述仓库的网络地址，通过http或ftp协议从仓库获得信息，下 </font></p>
<p><font style="color:rgb(57,57,57);">载相关软件包 </font></p>
<p><strong><font style="color:rgb(0,0,0);">YUM基本操作： </font></strong></p>
<p><strong><font style="color:rgb(0,0,0);">配置本地YUM源 </font></strong></p>
<p><font style="color:rgb(57,57,57);">配置文件 </font><font style="color:rgb(223,64,42);">/etc/yum.repos.d/*.repo </font><font style="color:rgb(57,57,57);">，该目录下所有以.repo结尾的文件都是yum的有效配 </font></p>
<p><font style="color:rgb(57,57,57);">置文件 </font></p>
<p><font style="color:rgb(57,57,57);">配置文件主要参数： </font></p>
<p><font style="color:rgb(223,64,42);">[rhel8] </font></p>
<p><font style="color:rgb(0,0,0);">--仓库id </font></p>
<p><font style="color:rgb(223,64,42);">name=rhel </font></p>
<p><font style="color:rgb(0,0,0);">--仓库名称 </font></p>
<p><font style="color:rgb(223,64,42);">baseurl=file:///media </font></p>
<p><font style="color:rgb(0,0,0);">--仓库地址 ，可以是本地目录也可以是网络上的路径file表示使用本地路径，http和ftp表示使用网络 </font></p>
<p><font style="color:rgb(0,0,0);">路径</font></p>
<p><font style="color:rgb(223,64,42);">gpgcheck=0 </font></p>
<p><font style="color:rgb(0,0,0);">--是否校验仓库内软件包，0不校验，1校验，如果校验需要指明校验密钥 </font></p>
<p><font style="color:rgb(223,64,42);">enabled=1 </font></p>
<p><font style="color:rgb(0,0,0);">--是否启用该yum仓库,0不启用，1启用 </font></p>
<p><strong><font style="color:rgb(223,64,42);">priority=1 </font></strong><strong><font style="color:rgb(0,0,0);">（只有一个仓库可以不用设置） </font></strong></p>
<p><font style="color:rgb(0,0,0);">--设置仓库优先级，数字越小越优 </font></p>
<p><font style="color:rgb(223,64,42);">#yum list </font><font style="color:rgb(0,0,0);">查看仓库软件列表 </font></p>
<p><font style="color:rgb(223,64,42);">#yum makecache </font><font style="color:rgb(0,0,0);">生成软件仓库缓存 </font></p>
<p><font style="color:rgb(223,64,42);">yum-config-manager --add-repo="file:///media" </font></p>
<p><font style="color:rgb(0,0,0);">to register. </font></p>
<p><font style="color:rgb(0,0,0);">adding repo from: file:///media </font></p>
<p><font style="color:rgb(0,0,0);">[media] </font></p>
<p><font style="color:rgb(0,0,0);">name=added from: file:///media </font></p>
<p><font style="color:rgb(0,0,0);">baseurl=file:///media </font></p>
<p><font style="color:rgb(0,0,0);">enabled=1 </font></p>
<p><font style="color:rgb(57,57,57);">配置网络yum源： </font></p>
<p><font style="color:rgb(57,57,57);">本地yum源可能有局限性，当本地的yum源无法满足软件安装需求的时候，可以选择网络 </font></p>
<p><font style="color:rgb(57,57,57);">yum源，前提是主机必须能访问外网 </font></p>
<p><font style="color:rgb(3,102,214);">https://opsx.alibaba.com/</font><img alt="" src="../../../../images/1717077215862-a38590d7-5517-42b2-bc60-0a05cadf7f02.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-137-1">1</a></span>
<span class="normal"><a href="#__codelineno-137-2">2</a></span>
<span class="normal"><a href="#__codelineno-137-3">3</a></span>
<span class="normal"><a href="#__codelineno-137-4">4</a></span>
<span class="normal"><a href="#__codelineno-137-5">5</a></span>
<span class="normal"><a href="#__codelineno-137-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-137-1" name="__codelineno-137-1"></a>rhel8
<a id="__codelineno-137-2" name="__codelineno-137-2"></a>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>https://mirrors.aliyun.com/epel/epel-release-latest-8.noarch.rpm
<a id="__codelineno-137-3" name="__codelineno-137-3"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s|^#baseurl=https://download.example/pub|baseurl=https://mirrors.aliyun.com|&#39;</span><span class="w"> </span>/etc/yum.repos.d/epel*
<a id="__codelineno-137-4" name="__codelineno-137-4"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s|^metalink|#metalink|&#39;</span><span class="w"> </span>/etc/yum.repos.d/epel*
<a id="__codelineno-137-5" name="__codelineno-137-5"></a>rhel7
<a id="__codelineno-137-6" name="__codelineno-137-6"></a>wget<span class="w"> </span>-O<span class="w"> </span>/etc/yum.repos.d/epel.repo<span class="w"> </span>https://mirrors.aliyun.com/repo/epel-7.repo
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">yum代理： </font></p>
<p><font style="color:rgb(0,0,0);">如果主机不方便访问外部网络，可以通过内部可上网的主机做代理 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-138-1">1</a></span>
<span class="normal"><a href="#__codelineno-138-2">2</a></span>
<span class="normal"><a href="#__codelineno-138-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-138-1" name="__codelineno-138-1"></a><span class="nv">proxy</span><span class="o">=</span>https://www.ahdifu.com:8080<span class="w"> </span>前面为代理地址或域名，后面为端口<span class="w"> </span>
<a id="__codelineno-138-2" name="__codelineno-138-2"></a><span class="nv">proxy_username</span><span class="o">=</span>myth<span class="w"> </span>代理服务器的用户名<span class="w"> </span>
<a id="__codelineno-138-3" name="__codelineno-138-3"></a><span class="nv">proxy_password</span><span class="o">=</span>ahdifu.com<span class="w"> </span>代理服务器的密码<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">YUM使用： </font></strong></p>
<p><font style="color:rgb(57,57,57);">yum安装软件 </font></p>
<p><font style="color:rgb(223,64,42);">#yum -y install PACKGE_NAME ---y 自动应答yes </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-139-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-139-1" name="__codelineno-139-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># yum -y install sl </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(223,64,42);">#yum -y groupinstall PACKGE_GROUP_NAME </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-140-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-140-1" name="__codelineno-140-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># yum -y groupinstall “KDE Desktop” </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">yum查询</font></p>
<p><font style="color:rgb(223,64,42);">#yum list 列出yum仓库中的软件列表 </font></p>
<p><font style="color:rgb(223,64,42);">#yum list installed 列出已安装的 </font></p>
<p><font style="color:rgb(0,0,0);">[root@df_rhel ~]# yum list installed | wc -l </font></p>
<p><font style="color:rgb(223,64,42);">#yum list updates 列出可以升级的 </font></p>
<p><font style="color:rgb(223,64,42);">#yum grouplist 列出包组 </font></p>
<p><font style="color:rgb(223,64,42);">#yum info PACKGE_NAME 查看软件包信息 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-141-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-141-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-141-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-141-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-141-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-141-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-141-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-141-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-141-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-141-10">10</a></span>
<span class="normal"><a href="#__codelineno-141-11">11</a></span>
<span class="normal"><a href="#__codelineno-141-12">12</a></span>
<span class="normal"><a href="#__codelineno-141-13">13</a></span>
<span class="normal"><a href="#__codelineno-141-14">14</a></span>
<span class="normal"><a href="#__codelineno-141-15">15</a></span>
<span class="normal"><a href="#__codelineno-141-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-141-1" name="__codelineno-141-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># yum info cowsay </span>
<a id="__codelineno-141-2" name="__codelineno-141-2"></a>Loaded<span class="w"> </span>plugins:<span class="w"> </span>langpacks,<span class="w"> </span>product-id,<span class="w"> </span>search-disabled-repos,<span class="w"> </span>subscription-<span class="w"> </span>
<a id="__codelineno-141-3" name="__codelineno-141-3"></a>:<span class="w"> </span>manager<span class="w"> </span>
<a id="__codelineno-141-4" name="__codelineno-141-4"></a>This<span class="w"> </span>system<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>registered<span class="w"> </span>with<span class="w"> </span>an<span class="w"> </span>entitlement<span class="w"> </span>server.<span class="w"> </span>You<span class="w"> </span>can<span class="w"> </span>use<span class="w"> </span>subscription-manager<span class="w"> </span>to<span class="w"> </span>
<a id="__codelineno-141-5" name="__codelineno-141-5"></a>register.<span class="w"> </span>
<a id="__codelineno-141-6" name="__codelineno-141-6"></a>Installed<span class="w"> </span>Packages<span class="w"> </span><span class="o">[</span>该软件是已经安装好的<span class="o">]</span><span class="w"> </span>
<a id="__codelineno-141-7" name="__codelineno-141-7"></a>Name<span class="w"> </span>:<span class="w"> </span>cowsay<span class="w"> </span><span class="o">[</span>软件的名称<span class="o">]</span><span class="w"> </span>
<a id="__codelineno-141-8" name="__codelineno-141-8"></a>Arch<span class="w"> </span>:<span class="w"> </span>noarch<span class="w"> </span><span class="o">[</span>软件的编译架构<span class="o">]</span><span class="w"> </span>
<a id="__codelineno-141-9" name="__codelineno-141-9"></a>Version<span class="w"> </span>:<span class="w"> </span><span class="m">3</span>.04<span class="w"> </span><span class="o">[</span>软件的源版本<span class="o">]</span><span class="w"> </span>
<a id="__codelineno-141-10" name="__codelineno-141-10"></a>Release<span class="w"> </span>:<span class="w"> </span><span class="m">12</span>.fc30<span class="w"> </span><span class="o">[</span>发布的版本<span class="o">]</span><span class="w"> </span>
<a id="__codelineno-141-11" name="__codelineno-141-11"></a>Size<span class="w"> </span>:<span class="w"> </span><span class="m">76</span><span class="w"> </span>k<span class="w"> </span><span class="o">[</span>软件的总大小<span class="o">]</span><span class="w"> </span>
<a id="__codelineno-141-12" name="__codelineno-141-12"></a>Repo<span class="w"> </span>:<span class="w"> </span>installed<span class="w"> </span>
<a id="__codelineno-141-13" name="__codelineno-141-13"></a>Summary<span class="w"> </span>:<span class="w"> </span>Configurable<span class="w"> </span>speaking/thinking<span class="w"> </span>cow<span class="w"> </span>
<a id="__codelineno-141-14" name="__codelineno-141-14"></a>URL<span class="w"> </span>:<span class="w"> </span>https://github.com/tnalpgge/rank-amateur-cowsay<span class="w"> </span>
<a id="__codelineno-141-15" name="__codelineno-141-15"></a>License<span class="w"> </span>:<span class="w"> </span>GPLv3+<span class="w"> </span><span class="o">[</span>授权<span class="o">]</span><span class="w"> </span>
<a id="__codelineno-141-16" name="__codelineno-141-16"></a>.......<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">yum卸载软件 </font></p>
<p><font style="color:rgb(223,64,42);">#yum remove | erase PACKGE_NAME </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-142-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-142-1" name="__codelineno-142-1"></a><span class="o">[</span>root@df_rhel<span class="w"> </span>~<span class="o">]</span><span class="c1"># yum -y remove sl</span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">yum升级软件 </font></p>
<p><font style="color:rgb(223,64,42);">#yum update</font></p>
<p><strong><font style="color:rgb(0,0,0);">YUM缓存 </font></strong></p>
<p><font style="color:rgb(223,64,42);">生成缓存 #yum makecache </font></p>
<p><font style="color:rgb(223,64,42);">清空缓存 #yum clean all</font></p>
<h2 id="rpm网站"><font style="color:rgb(223,64,42);">rpm网站</font><a class="headerlink" href="#rpm网站" title="Permanent link">&para;</a></h2>
<p><a href="http://rpmfind.net">http://rpmfind.net</a></p>
<p><a href="http://rpm.pbone.net">http://rpm.pbone.net</a></p>
<h2 id="破解root密码">破解root密码<a class="headerlink" href="#破解root密码" title="Permanent link">&para;</a></h2>
<p>选择第二个</p>
<p><img alt="" src="../../../../images/1717998761721-05439ae5-b6e7-4463-a819-e6a990a57938.png" /></p>
<p>按e</p>
<p><img alt="" src="../../../../images/1717998871854-381a1c37-1d5c-4170-97a0-0bb4dc9cac40.png" /></p>
<p>按回车</p>
<p><img alt="" src="../../../../images/1717998911618-d64b3ca1-0128-43fb-bebb-84016692864b.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-143-1">1</a></span>
<span class="normal"><a href="#__codelineno-143-2">2</a></span>
<span class="normal"><a href="#__codelineno-143-3">3</a></span>
<span class="normal"><a href="#__codelineno-143-4">4</a></span>
<span class="normal"><a href="#__codelineno-143-5">5</a></span>
<span class="normal"><a href="#__codelineno-143-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-143-1" name="__codelineno-143-1"></a>mount<span class="w"> </span>-o<span class="w"> </span>remount,rw<span class="w"> </span>/sysroot
<a id="__codelineno-143-2" name="__codelineno-143-2"></a>chroot<span class="w"> </span>/sysroot
<a id="__codelineno-143-3" name="__codelineno-143-3"></a><span class="nb">echo</span><span class="w"> </span><span class="m">123456</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>passwd<span class="w"> </span>--stdin<span class="w"> </span>root
<a id="__codelineno-143-4" name="__codelineno-143-4"></a>touch<span class="w"> </span>/.autorelabel
<a id="__codelineno-143-5" name="__codelineno-143-5"></a><span class="nb">exit</span>
<a id="__codelineno-143-6" name="__codelineno-143-6"></a>reboot
</code></pre></div></td></tr></table></div>
<h1 id="磁盘管理">磁盘管理<a class="headerlink" href="#磁盘管理" title="Permanent link">&para;</a></h1>
<p><strong><font style="color:rgb(0,0,0);">磁盘接口类型： </font></strong></p>
<p><font style="color:rgb(57,57,57);">IDE/ATA: </font><font style="color:rgb(57,57,57);">并行接口，</font><font style="color:rgb(68,68,68);">133MB/s </font></p>
<p><font style="color:rgb(57,57,57);">SATA:</font><font style="color:rgb(57,57,57);">串口，最高可实现 </font><font style="color:rgb(57,57,57);">600MB/S </font><font style="color:rgb(57,57,57);">传输速率 </font></p>
<p><font style="color:rgb(57,57,57);">SCSI</font><font style="color:rgb(57,57,57);">：并行接口，小型计算机系统接口 </font></p>
<p><font style="color:rgb(57,57,57);">SAS</font><font style="color:rgb(57,57,57);">：串行连接的 </font><font style="color:rgb(57,57,57);">SCSI </font></p>
<p><font style="color:rgb(57,57,57);">FC</font><font style="color:rgb(57,57,57);">：光纤通道 </font></p>
<p><font style="color:rgb(57,57,57);">SSD:</font><font style="color:rgb(57,57,57);">固态存储单元 </font></p>
<p><font style="color:rgb(57,57,57);">USB:</font></p>
<p><strong><font style="color:rgb(0,0,0);">磁盘设备文件命名： </font></strong></p>
<p><font style="color:rgb(223,64,42);">ATA,IDE: /dev/hda,/dev/hdb... </font></p>
<p><font style="color:rgb(223,64,42);">SCSI,SATA,USB</font><font style="color:rgb(223,64,42);">，</font><font style="color:rgb(223,64,42);">SAS:/dev/sda,/dev/sdb... </font></p>
<p><font style="color:rgb(57,57,57);">不同磁盘设备文件命名</font><font style="color:rgb(57,57,57);">: </font></p>
<p><font style="color:rgb(57,57,57);">a-z </font></p>
<p><font style="color:rgb(57,57,57);">同一磁盘不同分区：/dev/sda1，/dev/sda5</font></p>
<h2 id="磁盘查看"><strong><font style="color:rgb(0,0,0);">磁盘查看：</font></strong><a class="headerlink" href="#磁盘查看" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-144-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-144-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-144-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-144-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-144-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-144-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-144-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-144-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-144-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-144-10">10</a></span>
<span class="normal"><a href="#__codelineno-144-11">11</a></span>
<span class="normal"><a href="#__codelineno-144-12">12</a></span>
<span class="normal"><a href="#__codelineno-144-13">13</a></span>
<span class="normal"><a href="#__codelineno-144-14">14</a></span>
<span class="normal"><a href="#__codelineno-144-15">15</a></span>
<span class="normal"><a href="#__codelineno-144-16">16</a></span>
<span class="normal"><a href="#__codelineno-144-17">17</a></span>
<span class="normal"><a href="#__codelineno-144-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-144-1" name="__codelineno-144-1"></a>fdisk<span class="w"> </span>-l
<a id="__codelineno-144-2" name="__codelineno-144-2"></a>Disk<span class="w"> </span>/dev/sda:<span class="w"> </span><span class="m">17</span>.2<span class="w"> </span>GB,<span class="w"> </span><span class="m">17179869184</span><span class="w"> </span>bytes,<span class="w"> </span><span class="m">33554432</span><span class="w"> </span>sectors
<a id="__codelineno-144-3" name="__codelineno-144-3"></a><span class="nv">Units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>sectors<span class="w"> </span>of<span class="w"> </span><span class="m">1</span><span class="w"> </span>*<span class="w"> </span><span class="nv">512</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
<a id="__codelineno-144-4" name="__codelineno-144-4"></a>Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes<span class="w"> </span>/<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
<a id="__codelineno-144-5" name="__codelineno-144-5"></a>I/O<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>minimum/optimal<span class="o">)</span>:<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes<span class="w"> </span>/<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
<a id="__codelineno-144-6" name="__codelineno-144-6"></a>Disk<span class="w"> </span>label<span class="w"> </span>type:<span class="w"> </span>dos
<a id="__codelineno-144-7" name="__codelineno-144-7"></a>Disk<span class="w"> </span>identifier:<span class="w"> </span>0x0007e81b
<a id="__codelineno-144-8" name="__codelineno-144-8"></a>Device<span class="w"> </span>Boot<span class="w"> </span>Start<span class="w"> </span>End<span class="w"> </span>Blocks<span class="w"> </span>Id<span class="w"> </span>System
<a id="__codelineno-144-9" name="__codelineno-144-9"></a>/dev/sda1<span class="w"> </span>*<span class="w"> </span><span class="m">2048</span><span class="w"> </span><span class="m">2099199</span><span class="w"> </span><span class="m">1048576</span><span class="w"> </span><span class="m">83</span><span class="w"> </span>Linux
<a id="__codelineno-144-10" name="__codelineno-144-10"></a>/dev/sda2<span class="w"> </span><span class="m">2099200</span><span class="w"> </span><span class="m">33554431</span><span class="w"> </span><span class="m">15727616</span><span class="w"> </span>8e<span class="w"> </span>Linux<span class="w"> </span>LVM
<a id="__codelineno-144-11" name="__codelineno-144-11"></a>Disk<span class="w"> </span>/dev/mapper/rhel-root:<span class="w"> </span><span class="m">14</span>.4<span class="w"> </span>GB,<span class="w"> </span><span class="m">14382268416</span><span class="w"> </span>bytes,<span class="w"> </span><span class="m">28090368</span><span class="w"> </span>sectors
<a id="__codelineno-144-12" name="__codelineno-144-12"></a><span class="nv">Units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>sectors<span class="w"> </span>of<span class="w"> </span><span class="m">1</span><span class="w"> </span>*<span class="w"> </span><span class="nv">512</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
<a id="__codelineno-144-13" name="__codelineno-144-13"></a>Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes<span class="w"> </span>/<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
<a id="__codelineno-144-14" name="__codelineno-144-14"></a>I/O<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>minimum/optimal<span class="o">)</span>:<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes<span class="w"> </span>/<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
<a id="__codelineno-144-15" name="__codelineno-144-15"></a>Disk<span class="w"> </span>/dev/mapper/rhel-swap:<span class="w"> </span><span class="m">1719</span><span class="w"> </span>MB,<span class="w"> </span><span class="m">1719664640</span><span class="w"> </span>bytes,<span class="w"> </span><span class="m">3358720</span><span class="w"> </span>sectors
<a id="__codelineno-144-16" name="__codelineno-144-16"></a><span class="nv">Units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>sectors<span class="w"> </span>of<span class="w"> </span><span class="m">1</span><span class="w"> </span>*<span class="w"> </span><span class="nv">512</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
<a id="__codelineno-144-17" name="__codelineno-144-17"></a>Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes<span class="w"> </span>/<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
<a id="__codelineno-144-18" name="__codelineno-144-18"></a>I/O<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>minimum/optimal<span class="o">)</span>:<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes<span class="w"> </span>/<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-145-1">1</a></span>
<span class="normal"><a href="#__codelineno-145-2">2</a></span>
<span class="normal"><a href="#__codelineno-145-3">3</a></span>
<span class="normal"><a href="#__codelineno-145-4">4</a></span>
<span class="normal"><a href="#__codelineno-145-5">5</a></span>
<span class="normal"><a href="#__codelineno-145-6">6</a></span>
<span class="normal"><a href="#__codelineno-145-7">7</a></span>
<span class="normal"><a href="#__codelineno-145-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-145-1" name="__codelineno-145-1"></a>lsblk
<a id="__codelineno-145-2" name="__codelineno-145-2"></a>NAME<span class="w"> </span>MAJ:MIN<span class="w"> </span>RM<span class="w"> </span>SIZE<span class="w"> </span>RO<span class="w"> </span>TYPE<span class="w"> </span>MOUNTPOINT
<a id="__codelineno-145-3" name="__codelineno-145-3"></a>sda<span class="w"> </span><span class="m">8</span>:0<span class="w"> </span><span class="m">0</span><span class="w"> </span>16G<span class="w"> </span><span class="m">0</span><span class="w"> </span>disk
<a id="__codelineno-145-4" name="__codelineno-145-4"></a>├─sda1<span class="w"> </span><span class="m">8</span>:1<span class="w"> </span><span class="m">0</span><span class="w"> </span>1G<span class="w"> </span><span class="m">0</span><span class="w"> </span>part<span class="w"> </span>/boot
<a id="__codelineno-145-5" name="__codelineno-145-5"></a>└─sda2<span class="w"> </span><span class="m">8</span>:2<span class="w"> </span><span class="m">0</span><span class="w"> </span>15G<span class="w"> </span><span class="m">0</span><span class="w"> </span>part
<a id="__codelineno-145-6" name="__codelineno-145-6"></a>├─rhel-root<span class="w"> </span><span class="m">253</span>:0<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">13</span>.4G<span class="w"> </span><span class="m">0</span><span class="w"> </span>lvm<span class="w"> </span>/
<a id="__codelineno-145-7" name="__codelineno-145-7"></a>└─rhel-swap<span class="w"> </span><span class="m">253</span>:1<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.6G<span class="w"> </span><span class="m">0</span><span class="w"> </span>lvm<span class="w"> </span><span class="o">[</span>SWAP<span class="o">]</span>
<a id="__codelineno-145-8" name="__codelineno-145-8"></a>sr0<span class="w"> </span><span class="m">11</span>:0<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span>.3G<span class="w"> </span><span class="m">0</span><span class="w"> </span>rom<span class="w"> </span>/media
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">--</font><font style="color:rgb(57,57,57);">虚拟机不重启识别新添加磁盘： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-146-1">1</a></span>
<span class="normal"><a href="#__codelineno-146-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-146-1" name="__codelineno-146-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;- - -&quot;</span><span class="w"> </span>&gt;/sys/class/scsi_host/host0/scan
<a id="__codelineno-146-2" name="__codelineno-146-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;- - -&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>/sys/class/scsi_host/host*/scan
</code></pre></div></td></tr></table></div>
<h2 id="分区"><strong><font style="color:rgb(0,0,0);">分区： </font></strong><a class="headerlink" href="#分区" title="Permanent link">&para;</a></h2>
<p><strong><font style="color:rgb(0,0,0);">分区的好处： </font></strong></p>
<p><font style="color:rgb(68,68,68);">优化 I/O 性能 </font></p>
<p><font style="color:rgb(68,68,68);">实现磁盘空间配额限制 </font></p>
<p><font style="color:rgb(68,68,68);">提高修复速度 </font></p>
<p><font style="color:rgb(68,68,68);">隔离系统和程序 </font></p>
<p><font style="color:rgb(68,68,68);">使用不同的文件系统</font></p>
<p><strong><font style="color:rgb(68,68,68);">分区方式： </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">MBR</font></strong><strong><font style="color:rgb(57,57,57);">： </font></strong><strong><font style="color:rgb(68,68,68);">Master </font></strong></p>
<p><strong><font style="color:rgb(68,68,68);">Boot Record </font></strong><font style="color:rgb(68,68,68);">主引导记录分区表 </font></p>
<p><font style="color:rgb(223,64,42);">使用 32 表示扇区数，分区不超过 2T </font><strong><font style="color:rgb(223,64,42);">主分区+扩展分区 &lt; = 4  </font></strong></p>
<p><font style="color:rgb(223,64,42);">按柱面分区</font></p>
<p><strong><font style="color:rgb(57,57,57);">GPT </font></strong><strong><font style="color:rgb(57,57,57);">：</font></strong><strong><font style="color:rgb(68,68,68);">GUID patition table </font></strong><font style="color:rgb(68,68,68);">全局唯一标识分区表 </font></p>
<p><font style="color:rgb(68,68,68);">最大支持 </font><font style="color:rgb(68,68,68);">128 </font><font style="color:rgb(68,68,68);">个主分区 </font></p>
<p><strong><font style="color:rgb(68,68,68);">主分区：</font></strong><font style="color:rgb(68,68,68);">也称为主磁盘分区，和扩展分区、逻辑分区一样，是一种分区类型。</font><font style="color:rgb(223,64,42);">主分区中不能 再划分其它类型的分区 </font></p>
<p><strong><font style="color:rgb(57,57,57);">扩展分区：</font></strong><font style="color:rgb(57,57,57);">主分区以外分区，</font><font style="color:rgb(223,64,42);">不能直接使用</font><font style="color:rgb(57,57,57);">，必须在扩展分区中划分若干逻辑分区,每块磁盘最多只可以划分</font><font style="color:rgb(223,64,42);">一个</font><font style="color:rgb(57,57,57);">扩展分区</font></p>
<p><strong><font style="color:rgb(57,57,57);">逻辑分区：</font></strong><font style="color:rgb(57,57,57);">从扩展分区中划分，可以直接使用</font></p>
<p><img alt="" src="../../../../images/1717140511708-0754e48b-9290-421c-8951-b771813cf248.png" /></p>
<p><strong><font style="color:rgb(57,57,57);">分区编号 </font></strong></p>
<p><font style="color:rgb(57,57,57);">主分区和扩展分区的分区编号为 </font><font style="color:rgb(57,57,57);">1-4 </font></p>
<p><font style="color:rgb(57,57,57);">逻辑分区的分区编号从 5 开始</font></p>
<h2 id="使用-fdisk-进行分区操作"><font style="color:rgb(57,57,57);">使用 fdisk 进行分区操作</font><a class="headerlink" href="#使用-fdisk-进行分区操作" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(57,57,57);">fdisk 默认是 MBR 分区方式，可以使用 parted 进行 GPT 分区</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-147-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-147-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-147-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-147-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-147-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-147-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-147-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-147-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-147-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-147-10">10</a></span>
<span class="normal"><a href="#__codelineno-147-11">11</a></span>
<span class="normal"><a href="#__codelineno-147-12">12</a></span>
<span class="normal"><a href="#__codelineno-147-13">13</a></span>
<span class="normal"><a href="#__codelineno-147-14">14</a></span>
<span class="normal"><a href="#__codelineno-147-15">15</a></span>
<span class="normal"><a href="#__codelineno-147-16">16</a></span>
<span class="normal"><a href="#__codelineno-147-17">17</a></span>
<span class="normal"><a href="#__codelineno-147-18">18</a></span>
<span class="normal"><a href="#__codelineno-147-19">19</a></span>
<span class="normal"><a href="#__codelineno-147-20">20</a></span>
<span class="normal"><a href="#__codelineno-147-21">21</a></span>
<span class="normal"><a href="#__codelineno-147-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-147-1" name="__codelineno-147-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># fdisk /dev/sda</span>
<a id="__codelineno-147-2" name="__codelineno-147-2"></a>Command<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">help</span><span class="o">)</span>:<span class="w"> </span>h<span class="w"> </span>获取帮助
<a id="__codelineno-147-3" name="__codelineno-147-3"></a>h:<span class="w"> </span>unknown<span class="w"> </span><span class="nb">command</span>
<a id="__codelineno-147-4" name="__codelineno-147-4"></a>Command<span class="w"> </span>action
<a id="__codelineno-147-5" name="__codelineno-147-5"></a>a<span class="w"> </span>toggle<span class="w"> </span>a<span class="w"> </span>bootable<span class="w"> </span>flag
<a id="__codelineno-147-6" name="__codelineno-147-6"></a>b<span class="w"> </span>edit<span class="w"> </span>bsd<span class="w"> </span>disklabel
<a id="__codelineno-147-7" name="__codelineno-147-7"></a>c<span class="w"> </span>toggle<span class="w"> </span>the<span class="w"> </span>dos<span class="w"> </span>compatibility<span class="w"> </span>flag
<a id="__codelineno-147-8" name="__codelineno-147-8"></a>d<span class="w"> </span>delete<span class="w"> </span>a<span class="w"> </span>partition<span class="w"> </span>删除分区
<a id="__codelineno-147-9" name="__codelineno-147-9"></a>g<span class="w"> </span>create<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>empty<span class="w"> </span>GPT<span class="w"> </span>partition<span class="w"> </span>table
<a id="__codelineno-147-10" name="__codelineno-147-10"></a>G<span class="w"> </span>create<span class="w"> </span>an<span class="w"> </span>IRIX<span class="w"> </span><span class="o">(</span>SGI<span class="o">)</span><span class="w"> </span>partition<span class="w"> </span>table
<a id="__codelineno-147-11" name="__codelineno-147-11"></a>l<span class="w"> </span>list<span class="w"> </span>known<span class="w"> </span>partition<span class="w"> </span>types<span class="w"> </span>列出分区类型
<a id="__codelineno-147-12" name="__codelineno-147-12"></a>m<span class="w"> </span>print<span class="w"> </span>this<span class="w"> </span>menu
<a id="__codelineno-147-13" name="__codelineno-147-13"></a>n<span class="w"> </span>add<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>partition<span class="w"> </span>添加新分区
<a id="__codelineno-147-14" name="__codelineno-147-14"></a>o<span class="w"> </span>create<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>empty<span class="w"> </span>DOS<span class="w"> </span>partition<span class="w"> </span>table
<a id="__codelineno-147-15" name="__codelineno-147-15"></a>p<span class="w"> </span>print<span class="w"> </span>the<span class="w"> </span>partition<span class="w"> </span>table<span class="w"> </span>打印分区表
<a id="__codelineno-147-16" name="__codelineno-147-16"></a>q<span class="w"> </span>quit<span class="w"> </span>without<span class="w"> </span>saving<span class="w"> </span>changes<span class="w"> </span>不保存退出
<a id="__codelineno-147-17" name="__codelineno-147-17"></a>s<span class="w"> </span>create<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>empty<span class="w"> </span>Sun<span class="w"> </span>disklabel
<a id="__codelineno-147-18" name="__codelineno-147-18"></a>t<span class="w"> </span>change<span class="w"> </span>a<span class="w"> </span>partition‘s<span class="w"> </span>system<span class="w"> </span>id<span class="w"> </span>修改分区类型
<a id="__codelineno-147-19" name="__codelineno-147-19"></a>u<span class="w"> </span>change<span class="w"> </span>display/entry<span class="w"> </span>units
<a id="__codelineno-147-20" name="__codelineno-147-20"></a>v<span class="w"> </span>verify<span class="w"> </span>the<span class="w"> </span>partition<span class="w"> </span>table
<a id="__codelineno-147-21" name="__codelineno-147-21"></a>w<span class="w"> </span>write<span class="w"> </span>table<span class="w"> </span>to<span class="w"> </span>disk<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>保存分区信息并退出
<a id="__codelineno-147-22" name="__codelineno-147-22"></a>x<span class="w"> </span>extra<span class="w"> </span>functionality<span class="w"> </span><span class="o">(</span>experts<span class="w"> </span>only<span class="o">)</span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(223,64,42);">#fdisk /dev/sdb </font></p>
<p><font style="color:rgb(57,57,57);">p: </font><font style="color:rgb(57,57,57);">显示当前硬件的分区 </font></p>
<p><font style="color:rgb(57,57,57);">n: </font><font style="color:rgb(57,57,57);">创建新分区 </font></p>
<p><font style="color:rgb(57,57,57);">e: </font><font style="color:rgb(57,57,57);">扩展分区 </font></p>
<p><font style="color:rgb(57,57,57);">p: </font><font style="color:rgb(57,57,57);">主分区 </font></p>
<p><font style="color:rgb(57,57,57);">l: </font><font style="color:rgb(57,57,57);">逻辑分区 </font></p>
<p><font style="color:rgb(57,57,57);">d: </font><font style="color:rgb(57,57,57);">删除一个分区 </font></p>
<p><font style="color:rgb(57,57,57);">t: </font><font style="color:rgb(57,57,57);">修改分区类型 </font></p>
<p><font style="color:rgb(57,57,57);">l: </font><font style="color:rgb(57,57,57);">显示所支持的所有类型 </font></p>
<p><font style="color:rgb(57,57,57);">w: </font><font style="color:rgb(57,57,57);">保存退出 </font></p>
<p><font style="color:rgb(57,57,57);">q: 不保存退出</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-148-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-148-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-148-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-148-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-148-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-148-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-148-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-148-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-148-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-148-10">10</a></span>
<span class="normal"><a href="#__codelineno-148-11">11</a></span>
<span class="normal"><a href="#__codelineno-148-12">12</a></span>
<span class="normal"><a href="#__codelineno-148-13">13</a></span>
<span class="normal"><a href="#__codelineno-148-14">14</a></span>
<span class="normal"><a href="#__codelineno-148-15">15</a></span>
<span class="normal"><a href="#__codelineno-148-16">16</a></span>
<span class="normal"><a href="#__codelineno-148-17">17</a></span>
<span class="normal"><a href="#__codelineno-148-18">18</a></span>
<span class="normal"><a href="#__codelineno-148-19">19</a></span>
<span class="normal"><a href="#__codelineno-148-20">20</a></span>
<span class="normal"><a href="#__codelineno-148-21">21</a></span>
<span class="normal"><a href="#__codelineno-148-22">22</a></span>
<span class="normal"><a href="#__codelineno-148-23">23</a></span>
<span class="normal"><a href="#__codelineno-148-24">24</a></span>
<span class="normal"><a href="#__codelineno-148-25">25</a></span>
<span class="normal"><a href="#__codelineno-148-26">26</a></span>
<span class="normal"><a href="#__codelineno-148-27">27</a></span>
<span class="normal"><a href="#__codelineno-148-28">28</a></span>
<span class="normal"><a href="#__codelineno-148-29">29</a></span>
<span class="normal"><a href="#__codelineno-148-30">30</a></span>
<span class="normal"><a href="#__codelineno-148-31">31</a></span>
<span class="normal"><a href="#__codelineno-148-32">32</a></span>
<span class="normal"><a href="#__codelineno-148-33">33</a></span>
<span class="normal"><a href="#__codelineno-148-34">34</a></span>
<span class="normal"><a href="#__codelineno-148-35">35</a></span>
<span class="normal"><a href="#__codelineno-148-36">36</a></span>
<span class="normal"><a href="#__codelineno-148-37">37</a></span>
<span class="normal"><a href="#__codelineno-148-38">38</a></span>
<span class="normal"><a href="#__codelineno-148-39">39</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-148-1" name="__codelineno-148-1"></a>Command<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">help</span><span class="o">)</span>:<span class="w"> </span>n<span class="w"> </span>--新建分区
<a id="__codelineno-148-2" name="__codelineno-148-2"></a>Partition<span class="w"> </span>type:
<a id="__codelineno-148-3" name="__codelineno-148-3"></a>p<span class="w"> </span>primary<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>primary,<span class="w"> </span><span class="m">0</span><span class="w"> </span>extended,<span class="w"> </span><span class="m">4</span><span class="w"> </span>free<span class="o">)</span>
<a id="__codelineno-148-4" name="__codelineno-148-4"></a>e<span class="w"> </span>extended
<a id="__codelineno-148-5" name="__codelineno-148-5"></a>Select<span class="w"> </span><span class="o">(</span>default<span class="w"> </span>p<span class="o">)</span>:<span class="w"> </span>p<span class="w"> </span>--创建主分区
<a id="__codelineno-148-6" name="__codelineno-148-6"></a>Partition<span class="w"> </span>number<span class="w"> </span><span class="o">(</span><span class="m">1</span>-4,<span class="w"> </span>default<span class="w"> </span><span class="m">1</span><span class="o">)</span>:<span class="w"> </span>--分区编号，默认为<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-148-7" name="__codelineno-148-7"></a>First<span class="w"> </span>sector<span class="w"> </span><span class="o">(</span><span class="m">2048</span>-41943039,<span class="w"> </span>default<span class="w"> </span><span class="m">2048</span><span class="o">)</span>:<span class="w"> </span>--分区的起始扇区
<a id="__codelineno-148-8" name="__codelineno-148-8"></a>Using<span class="w"> </span>default<span class="w"> </span>value<span class="w"> </span><span class="m">2048</span>
<a id="__codelineno-148-9" name="__codelineno-148-9"></a>Last<span class="w"> </span>sector,<span class="w"> </span>+sectors<span class="w"> </span>or<span class="w"> </span>+size<span class="o">{</span>K,M,G<span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="m">2048</span>-41943039,<span class="w"> </span>default
<a id="__codelineno-148-10" name="__codelineno-148-10"></a><span class="m">41943039</span><span class="o">)</span>:<span class="w"> </span>+5G<span class="w"> </span><span class="o">[</span>结束扇区，可直接写+size<span class="o">{</span>K,M,G<span class="o">}]</span>
<a id="__codelineno-148-11" name="__codelineno-148-11"></a>Partition<span class="w"> </span><span class="m">1</span><span class="w"> </span>of<span class="w"> </span><span class="nb">type</span><span class="w"> </span>Linux<span class="w"> </span>and<span class="w"> </span>of<span class="w"> </span>size<span class="w"> </span><span class="m">5</span><span class="w"> </span>GiB<span class="w"> </span>is<span class="w"> </span><span class="nb">set</span>
<a id="__codelineno-148-12" name="__codelineno-148-12"></a>Command<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">help</span><span class="o">)</span>:<span class="w"> </span>n<span class="w"> </span>--添加新分区
<a id="__codelineno-148-13" name="__codelineno-148-13"></a>Partition<span class="w"> </span>type:
<a id="__codelineno-148-14" name="__codelineno-148-14"></a>p<span class="w"> </span>primary<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="w"> </span>primary,<span class="w"> </span><span class="m">0</span><span class="w"> </span>extended,<span class="w"> </span><span class="m">3</span><span class="w"> </span>free<span class="o">)</span>
<a id="__codelineno-148-15" name="__codelineno-148-15"></a>e<span class="w"> </span>extended
<a id="__codelineno-148-16" name="__codelineno-148-16"></a>Select<span class="w"> </span><span class="o">(</span>default<span class="w"> </span>p<span class="o">)</span>:<span class="w"> </span>e<span class="w"> </span>--创建扩展分区
<a id="__codelineno-148-17" name="__codelineno-148-17"></a>Partition<span class="w"> </span>number<span class="w"> </span><span class="o">(</span><span class="m">2</span>-4,<span class="w"> </span>default<span class="w"> </span><span class="m">2</span><span class="o">)</span>:
<a id="__codelineno-148-18" name="__codelineno-148-18"></a>First<span class="w"> </span>sector<span class="w"> </span><span class="o">(</span><span class="m">10487808</span>-41943039,<span class="w"> </span>default<span class="w"> </span><span class="m">10487808</span><span class="o">)</span>:
<a id="__codelineno-148-19" name="__codelineno-148-19"></a>Using<span class="w"> </span>default<span class="w"> </span>value<span class="w"> </span><span class="m">10487808</span>
<a id="__codelineno-148-20" name="__codelineno-148-20"></a>Last<span class="w"> </span>sector,<span class="w"> </span>+sectors<span class="w"> </span>or<span class="w"> </span>+size<span class="o">{</span>K,M,G<span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="m">10487808</span>-41943039,<span class="w"> </span>default
<a id="__codelineno-148-21" name="__codelineno-148-21"></a><span class="m">41943039</span><span class="o">)</span>:<span class="w"> </span><span class="o">[</span>结束扇区不写，直接回车表示将剩余所有空间都这个分区<span class="o">]</span>
<a id="__codelineno-148-22" name="__codelineno-148-22"></a>Using<span class="w"> </span>default<span class="w"> </span>value<span class="w"> </span><span class="m">41943039</span>
<a id="__codelineno-148-23" name="__codelineno-148-23"></a>Partition<span class="w"> </span><span class="m">2</span><span class="w"> </span>of<span class="w"> </span><span class="nb">type</span><span class="w"> </span>Extended<span class="w"> </span>and<span class="w"> </span>of<span class="w"> </span>size<span class="w"> </span><span class="m">15</span><span class="w"> </span>GiB<span class="w"> </span>is<span class="w"> </span><span class="nb">set</span>
<a id="__codelineno-148-24" name="__codelineno-148-24"></a>Command<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">help</span><span class="o">)</span>:<span class="w"> </span>n<span class="w"> </span>--添加新分区
<a id="__codelineno-148-25" name="__codelineno-148-25"></a>Partition<span class="w"> </span>type:
<a id="__codelineno-148-26" name="__codelineno-148-26"></a>p<span class="w"> </span>primary<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="w"> </span>primary,<span class="w"> </span><span class="m">1</span><span class="w"> </span>extended,<span class="w"> </span><span class="m">2</span><span class="w"> </span>free<span class="o">)</span>
<a id="__codelineno-148-27" name="__codelineno-148-27"></a>l<span class="w"> </span>logical<span class="w"> </span><span class="o">(</span>numbered<span class="w"> </span>from<span class="w"> </span><span class="m">5</span><span class="o">)</span><span class="w"> </span><span class="o">[</span>这里只有主分区和逻辑分区可以选了，而且
<a id="__codelineno-148-28" name="__codelineno-148-28"></a>逻辑分区的分区编号无需设置，默认为<span class="w"> </span><span class="m">5</span><span class="o">]</span>
<a id="__codelineno-148-29" name="__codelineno-148-29"></a>Select<span class="w"> </span><span class="o">(</span>default<span class="w"> </span>p<span class="o">)</span>:<span class="w"> </span>l<span class="w"> </span>--创建逻辑分区
<a id="__codelineno-148-30" name="__codelineno-148-30"></a>Adding<span class="w"> </span>logical<span class="w"> </span>partition<span class="w"> </span><span class="m">5</span>
<a id="__codelineno-148-31" name="__codelineno-148-31"></a>First<span class="w"> </span>sector<span class="w"> </span><span class="o">(</span><span class="m">10489856</span>-41943039,<span class="w"> </span>default<span class="w"> </span><span class="m">10489856</span><span class="o">)</span>:
<a id="__codelineno-148-32" name="__codelineno-148-32"></a>
<a id="__codelineno-148-33" name="__codelineno-148-33"></a>
<a id="__codelineno-148-34" name="__codelineno-148-34"></a>
<a id="__codelineno-148-35" name="__codelineno-148-35"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># ls /dev/sdb*</span>
<a id="__codelineno-148-36" name="__codelineno-148-36"></a>/dev/sdb<span class="w"> </span>/dev/sdb1<span class="w"> </span>/dev/sdb2<span class="w"> </span>/dev/sdb5
<a id="__codelineno-148-37" name="__codelineno-148-37"></a>
<a id="__codelineno-148-38" name="__codelineno-148-38"></a><span class="c1">#partprobe 刷新分区</span>
<a id="__codelineno-148-39" name="__codelineno-148-39"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># partprobe /dev/sdb</span>
</code></pre></div></td></tr></table></div>
<h2 id="创建文件系统"><strong><font style="color:rgb(0,0,0);">创建文件系统： </font></strong><a class="headerlink" href="#创建文件系统" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(57,57,57);">什么是文件系统</font><font style="color:rgb(57,57,57);">: </font></p>
<p><font style="color:rgb(57,57,57);">文件系统是一种存储和组织计算机数据的方法，文件系统种类有很多，每一种文件系统的结 </font></p>
<p><font style="color:rgb(57,57,57);">构、逻辑、大小、安全性、存取效率都不一样。</font></p>
<p><img alt="" src="../../../../images/1717144411374-ee6ba4f5-d205-44fe-9cb4-a51a0bd5e831.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-149-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-149-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-149-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-149-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-149-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-149-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-149-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-149-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-149-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-149-10">10</a></span>
<span class="normal"><a href="#__codelineno-149-11">11</a></span>
<span class="normal"><a href="#__codelineno-149-12">12</a></span>
<span class="normal"><a href="#__codelineno-149-13">13</a></span>
<span class="normal"><a href="#__codelineno-149-14">14</a></span>
<span class="normal"><a href="#__codelineno-149-15">15</a></span>
<span class="normal"><a href="#__codelineno-149-16">16</a></span>
<span class="normal"><a href="#__codelineno-149-17">17</a></span>
<span class="normal"><a href="#__codelineno-149-18">18</a></span>
<span class="normal"><a href="#__codelineno-149-19">19</a></span>
<span class="normal"><a href="#__codelineno-149-20">20</a></span>
<span class="normal"><a href="#__codelineno-149-21">21</a></span>
<span class="normal"><a href="#__codelineno-149-22">22</a></span>
<span class="normal"><a href="#__codelineno-149-23">23</a></span>
<span class="normal"><a href="#__codelineno-149-24">24</a></span>
<span class="normal"><a href="#__codelineno-149-25">25</a></span>
<span class="normal"><a href="#__codelineno-149-26">26</a></span>
<span class="normal"><a href="#__codelineno-149-27">27</a></span>
<span class="normal"><a href="#__codelineno-149-28">28</a></span>
<span class="normal"><a href="#__codelineno-149-29">29</a></span>
<span class="normal"><a href="#__codelineno-149-30">30</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-149-1" name="__codelineno-149-1"></a><span class="c1">#mkfs -t ext4 -m 3 -b size=1024 /dev/sdb1 </span>
<a id="__codelineno-149-2" name="__codelineno-149-2"></a>-t<span class="w"> </span>指定文件系统类型<span class="w"> </span>
<a id="__codelineno-149-3" name="__codelineno-149-3"></a>-m<span class="w"> </span>指定管理块所占百分比，默认<span class="w"> </span><span class="m">5</span>%<span class="w"> </span>
<a id="__codelineno-149-4" name="__codelineno-149-4"></a>-b<span class="w"> </span>指定块大小，默认<span class="w"> </span>4096byte<span class="w"> </span>
<a id="__codelineno-149-5" name="__codelineno-149-5"></a>-f<span class="w"> </span>强行指定文件系统类型
<a id="__codelineno-149-6" name="__codelineno-149-6"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># mkfs.xfs /dev/sdb5</span>
<a id="__codelineno-149-7" name="__codelineno-149-7"></a>meta-data<span class="o">=</span>/dev/sdb5<span class="w"> </span><span class="nv">isize</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">agcount</span><span class="o">=</span><span class="m">4</span>,<span class="w"> </span><span class="nv">agsize</span><span class="o">=</span><span class="m">655360</span><span class="w"> </span><span class="nv">blks</span>
<a id="__codelineno-149-8" name="__codelineno-149-8"></a><span class="o">=</span><span class="w"> </span><span class="nv">sectsz</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">attr</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">projid32bit</span><span class="o">=</span><span class="nv">1</span>
<a id="__codelineno-149-9" name="__codelineno-149-9"></a><span class="o">=</span><span class="w"> </span><span class="nv">crc</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">finobt</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">sparse</span><span class="o">=</span><span class="m">0</span>
<a id="__codelineno-149-10" name="__codelineno-149-10"></a><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">2621440</span>,<span class="w"> </span><span class="nv">imaxpct</span><span class="o">=</span><span class="nv">25</span>
<a id="__codelineno-149-11" name="__codelineno-149-11"></a><span class="o">=</span><span class="w"> </span><span class="nv">sunit</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">swidth</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>blks
<a id="__codelineno-149-12" name="__codelineno-149-12"></a><span class="nv">naming</span><span class="w"> </span><span class="o">=</span>version<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span>ascii-ci<span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">ftype</span><span class="o">=</span><span class="m">1</span>
<a id="__codelineno-149-13" name="__codelineno-149-13"></a><span class="nv">log</span><span class="w"> </span><span class="o">=</span>internal<span class="w"> </span>log<span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">2560</span>,<span class="w"> </span><span class="nv">version</span><span class="o">=</span><span class="nv">2</span>
<a id="__codelineno-149-14" name="__codelineno-149-14"></a><span class="o">=</span><span class="w"> </span><span class="nv">sectsz</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">sunit</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>blks,<span class="w"> </span>lazy-count<span class="o">=</span><span class="m">1</span>
<a id="__codelineno-149-15" name="__codelineno-149-15"></a><span class="nv">realtime</span><span class="w"> </span><span class="o">=</span>none<span class="w"> </span><span class="nv">extsz</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">rtextents</span><span class="o">=</span><span class="m">0</span>
<a id="__codelineno-149-16" name="__codelineno-149-16"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># mkfs.ext4 /dev/sdb5</span>
<a id="__codelineno-149-17" name="__codelineno-149-17"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># mkfs.xfs /dev/sdb5</span>
<a id="__codelineno-149-18" name="__codelineno-149-18"></a>mkfs.xfs:<span class="w"> </span>/dev/sdb5<span class="w"> </span>appears<span class="w"> </span>to<span class="w"> </span>contain<span class="w"> </span>an<span class="w"> </span>existing<span class="w"> </span>filesystem
<a id="__codelineno-149-19" name="__codelineno-149-19"></a><span class="o">(</span>ext4<span class="o">)</span>.
<a id="__codelineno-149-20" name="__codelineno-149-20"></a>mkfs.xfs:<span class="w"> </span>Use<span class="w"> </span>the<span class="w"> </span>-f<span class="w"> </span>option<span class="w"> </span>to<span class="w"> </span>force<span class="w"> </span>overwrite.
<a id="__codelineno-149-21" name="__codelineno-149-21"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># mkfs.xfs -f /dev/sdb5</span>
<a id="__codelineno-149-22" name="__codelineno-149-22"></a>meta-data<span class="o">=</span>/dev/sdb5<span class="w"> </span><span class="nv">isize</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">agcount</span><span class="o">=</span><span class="m">4</span>,<span class="w"> </span><span class="nv">agsize</span><span class="o">=</span><span class="m">655360</span><span class="w"> </span><span class="nv">blks</span>
<a id="__codelineno-149-23" name="__codelineno-149-23"></a><span class="o">=</span><span class="w"> </span><span class="nv">sectsz</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">attr</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">projid32bit</span><span class="o">=</span><span class="nv">1</span>
<a id="__codelineno-149-24" name="__codelineno-149-24"></a><span class="o">=</span><span class="w"> </span><span class="nv">crc</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">finobt</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">sparse</span><span class="o">=</span><span class="m">0</span>
<a id="__codelineno-149-25" name="__codelineno-149-25"></a><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">2621440</span>,<span class="w"> </span><span class="nv">imaxpct</span><span class="o">=</span><span class="nv">25</span>
<a id="__codelineno-149-26" name="__codelineno-149-26"></a><span class="o">=</span><span class="w"> </span><span class="nv">sunit</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">swidth</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>blks
<a id="__codelineno-149-27" name="__codelineno-149-27"></a><span class="nv">naming</span><span class="w"> </span><span class="o">=</span>version<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span>ascii-ci<span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">ftype</span><span class="o">=</span><span class="m">1</span>
<a id="__codelineno-149-28" name="__codelineno-149-28"></a><span class="nv">log</span><span class="w"> </span><span class="o">=</span>internal<span class="w"> </span>log<span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">2560</span>,<span class="w"> </span><span class="nv">version</span><span class="o">=</span><span class="nv">2</span>
<a id="__codelineno-149-29" name="__codelineno-149-29"></a><span class="o">=</span><span class="w"> </span><span class="nv">sectsz</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">sunit</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>blks,<span class="w"> </span>lazy-count<span class="o">=</span><span class="m">1</span>
<a id="__codelineno-149-30" name="__codelineno-149-30"></a><span class="nv">realtime</span><span class="w"> </span><span class="o">=</span>none<span class="w"> </span><span class="nv">extsz</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">rtextents</span><span class="o">=</span><span class="m">0</span>
</code></pre></div></td></tr></table></div>
<h2 id="blkid-查看文件系统和属性">blkid 查看文件系统和属性<a class="headerlink" href="#blkid-查看文件系统和属性" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-150-1">1</a></span>
<span class="normal"><a href="#__codelineno-150-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-150-1" name="__codelineno-150-1"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># blkid /dev/sdb5</span>
<a id="__codelineno-150-2" name="__codelineno-150-2"></a>/dev/sdb5:<span class="w"> </span><span class="nv">UUID</span><span class="o">=</span><span class="s2">&quot;06a7f9e8-e6bb-431f-af49-0332c45323b9&quot;</span><span class="w"> </span><span class="nv">TYPE</span><span class="o">=</span><span class="s2">&quot;xfs&quot;</span>
</code></pre></div></td></tr></table></div>
<h2 id="创建交换分区">创建交换分区<a class="headerlink" href="#创建交换分区" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(57,57,57);">创建分区：</font></p>
<p><font style="color:rgb(57,57,57);">[创建 sdb6，步骤省略]</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-151-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-151-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-151-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-151-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-151-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-151-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-151-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-151-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-151-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-151-10">10</a></span>
<span class="normal"><a href="#__codelineno-151-11">11</a></span>
<span class="normal"><a href="#__codelineno-151-12">12</a></span>
<span class="normal"><a href="#__codelineno-151-13">13</a></span>
<span class="normal"><a href="#__codelineno-151-14">14</a></span>
<span class="normal"><a href="#__codelineno-151-15">15</a></span>
<span class="normal"><a href="#__codelineno-151-16">16</a></span>
<span class="normal"><a href="#__codelineno-151-17">17</a></span>
<span class="normal"><a href="#__codelineno-151-18">18</a></span>
<span class="normal"><a href="#__codelineno-151-19">19</a></span>
<span class="normal"><a href="#__codelineno-151-20">20</a></span>
<span class="normal"><a href="#__codelineno-151-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-151-1" name="__codelineno-151-1"></a>修改分区类型标记
<a id="__codelineno-151-2" name="__codelineno-151-2"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># fdisk /dev/sdb</span>
<a id="__codelineno-151-3" name="__codelineno-151-3"></a>Welcome<span class="w"> </span>to<span class="w"> </span>fdisk<span class="w"> </span><span class="o">(</span>util-linux<span class="w"> </span><span class="m">2</span>.23.2<span class="o">)</span>.
<a id="__codelineno-151-4" name="__codelineno-151-4"></a>Changes<span class="w"> </span>will<span class="w"> </span>remain<span class="w"> </span><span class="k">in</span><span class="w"> </span>memory<span class="w"> </span>only,<span class="w"> </span><span class="k">until</span><span class="w"> </span>you<span class="w"> </span>decide<span class="w"> </span>to<span class="w"> </span>write<span class="w"> </span>them.
<a id="__codelineno-151-5" name="__codelineno-151-5"></a>Be<span class="w"> </span>careful<span class="w"> </span>before<span class="w"> </span>using<span class="w"> </span>the<span class="w"> </span>write<span class="w"> </span>command.
<a id="__codelineno-151-6" name="__codelineno-151-6"></a>Command<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">help</span><span class="o">)</span>:<span class="w"> </span>t
<a id="__codelineno-151-7" name="__codelineno-151-7"></a>Partition<span class="w"> </span>number<span class="w"> </span><span class="o">(</span><span class="m">1</span>,2,5,6,<span class="w"> </span>default<span class="w"> </span><span class="m">6</span><span class="o">)</span>:
<a id="__codelineno-151-8" name="__codelineno-151-8"></a>Hex<span class="w"> </span>code<span class="w"> </span><span class="o">(</span><span class="nb">type</span><span class="w"> </span>L<span class="w"> </span>to<span class="w"> </span>list<span class="w"> </span>all<span class="w"> </span>codes<span class="o">)</span>:<span class="w"> </span><span class="m">82</span><span class="w"> </span><span class="c1">#代表swap分区，具体信息可以使用L查看</span>
<a id="__codelineno-151-9" name="__codelineno-151-9"></a>Changed<span class="w"> </span><span class="nb">type</span><span class="w"> </span>of<span class="w"> </span>partition<span class="w"> </span><span class="s1">&#39;Linux&#39;</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;Linux swap / Solaris&#39;</span>
<a id="__codelineno-151-10" name="__codelineno-151-10"></a>Command<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">help</span><span class="o">)</span>:<span class="w"> </span>p
<a id="__codelineno-151-11" name="__codelineno-151-11"></a>Disk<span class="w"> </span>/dev/sdb:<span class="w"> </span><span class="m">21</span>.5<span class="w"> </span>GB,<span class="w"> </span><span class="m">21474836480</span><span class="w"> </span>bytes,<span class="w"> </span><span class="m">41943040</span><span class="w"> </span>sectors
<a id="__codelineno-151-12" name="__codelineno-151-12"></a><span class="nv">Units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>sectors<span class="w"> </span>of<span class="w"> </span><span class="m">1</span><span class="w"> </span>*<span class="w"> </span><span class="nv">512</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
<a id="__codelineno-151-13" name="__codelineno-151-13"></a>Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes<span class="w"> </span>/<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
<a id="__codelineno-151-14" name="__codelineno-151-14"></a>I/O<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>minimum/optimal<span class="o">)</span>:<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes<span class="w"> </span>/<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
<a id="__codelineno-151-15" name="__codelineno-151-15"></a>Disk<span class="w"> </span>label<span class="w"> </span>type:<span class="w"> </span>dos
<a id="__codelineno-151-16" name="__codelineno-151-16"></a>Disk<span class="w"> </span>identifier:<span class="w"> </span>0xa4a00952
<a id="__codelineno-151-17" name="__codelineno-151-17"></a>Device<span class="w"> </span>Boot<span class="w"> </span>Start<span class="w"> </span>End<span class="w"> </span>Blocks<span class="w"> </span>Id<span class="w"> </span>System
<a id="__codelineno-151-18" name="__codelineno-151-18"></a>/dev/sdb1<span class="w"> </span><span class="m">2048</span><span class="w"> </span><span class="m">1026047</span><span class="w"> </span><span class="m">512000</span><span class="w"> </span><span class="m">83</span><span class="w"> </span>Linux
<a id="__codelineno-151-19" name="__codelineno-151-19"></a>/dev/sdb2<span class="w"> </span><span class="m">1026048</span><span class="w"> </span><span class="m">41943039</span><span class="w"> </span><span class="m">20458496</span><span class="w"> </span><span class="m">5</span><span class="w"> </span>Extended
<a id="__codelineno-151-20" name="__codelineno-151-20"></a>/dev/sdb5<span class="w"> </span><span class="m">1028096</span><span class="w"> </span><span class="m">21999615</span><span class="w"> </span><span class="m">10485760</span><span class="w"> </span><span class="m">83</span><span class="w"> </span>Linux
<a id="__codelineno-151-21" name="__codelineno-151-21"></a>/dev/sdb6<span class="w"> </span><span class="m">22001664</span><span class="w"> </span><span class="m">23640063</span><span class="w"> </span><span class="m">819200</span><span class="w"> </span><span class="m">82</span><span class="w"> </span>Linux<span class="w"> </span>swap<span class="w"> </span>/<span class="w"> </span>Solaris
</code></pre></div></td></tr></table></div>
<h3 id="查看交换分区"><font style="color:rgb(57,57,57);">查看交换分区 </font><a class="headerlink" href="#查看交换分区" title="Permanent link">&para;</a></h3>
<p><font style="color:rgb(223,64,42);">#swapon -s </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-152-1">1</a></span>
<span class="normal"><a href="#__codelineno-152-2">2</a></span>
<span class="normal"><a href="#__codelineno-152-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-152-1" name="__codelineno-152-1"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># swapon -s </span>
<a id="__codelineno-152-2" name="__codelineno-152-2"></a>Filename<span class="w"> </span>Type<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Priority<span class="w"> </span>
<a id="__codelineno-152-3" name="__codelineno-152-3"></a>/dev/dm-1<span class="w"> </span>partition<span class="w"> </span><span class="m">2047996</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>-2<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<h3 id="创建-swap-分区"><font style="color:rgb(57,57,57);">创建 swap 分区 </font><a class="headerlink" href="#创建-swap-分区" title="Permanent link">&para;</a></h3>
<p><font style="color:rgb(223,64,42);">#mkswap /dev/sda6 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-153-1">1</a></span>
<span class="normal"><a href="#__codelineno-153-2">2</a></span>
<span class="normal"><a href="#__codelineno-153-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-153-1" name="__codelineno-153-1"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># mkswap /dev/sdb6 </span>
<a id="__codelineno-153-2" name="__codelineno-153-2"></a>Setting<span class="w"> </span>up<span class="w"> </span>swapspace<span class="w"> </span>version<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="nv">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">819196</span><span class="w"> </span>KiB<span class="w"> </span>
<a id="__codelineno-153-3" name="__codelineno-153-3"></a>no<span class="w"> </span>label,<span class="w"> </span><span class="nv">UUID</span><span class="o">=</span>9bb41238-7931-4cca-98dc-dbcbe6bf008d<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<h3 id="启用交换分区"><font style="color:rgb(57,57,57);">启用交换分区 </font><a class="headerlink" href="#启用交换分区" title="Permanent link">&para;</a></h3>
<p><font style="color:rgb(223,64,42);">#swapon /dev/sda6 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-154-1">1</a></span>
<span class="normal"><a href="#__codelineno-154-2">2</a></span>
<span class="normal"><a href="#__codelineno-154-3">3</a></span>
<span class="normal"><a href="#__codelineno-154-4">4</a></span>
<span class="normal"><a href="#__codelineno-154-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-154-1" name="__codelineno-154-1"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># swapon /dev/sdb6 </span>
<a id="__codelineno-154-2" name="__codelineno-154-2"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># swapon -s </span>
<a id="__codelineno-154-3" name="__codelineno-154-3"></a>Filename<span class="w"> </span>Type<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Priority<span class="w"> </span>
<a id="__codelineno-154-4" name="__codelineno-154-4"></a>/dev/dm-1<span class="w"> </span>partition<span class="w"> </span><span class="m">2047996</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>-2<span class="w"> </span>
<a id="__codelineno-154-5" name="__codelineno-154-5"></a>/dev/sdb6<span class="w"> </span>partition<span class="w"> </span><span class="m">819196</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>-3<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<h3 id="关闭交换分区"><font style="color:rgb(57,57,57);">关闭交换分区 </font><a class="headerlink" href="#关闭交换分区" title="Permanent link">&para;</a></h3>
<p><font style="color:rgb(223,64,42);">#swapoff /dev/sda6</font></p>
<h2 id="磁盘挂载"><strong><font style="color:rgb(0,0,0);">磁盘挂载</font></strong><a class="headerlink" href="#磁盘挂载" title="Permanent link">&para;</a></h2>
<h3 id="临时挂载"><strong><font style="color:rgb(0,0,0);">临时挂载</font></strong><a class="headerlink" href="#临时挂载" title="Permanent link">&para;</a></h3>
<p><font style="color:rgb(57,57,57);">挂载设备其实就是给设备提供一个访问入口 </font></p>
<p><font style="color:rgb(57,57,57);">#mount </font><font style="color:rgb(57,57,57);">设备名 挂载点 </font></p>
<p><font style="color:rgb(57,57,57);">设备名： </font></p>
<p><font style="color:rgb(57,57,57);">UUID</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-155-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-155-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-155-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-155-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-155-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-155-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-155-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-155-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-155-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-155-10">10</a></span>
<span class="normal"><a href="#__codelineno-155-11">11</a></span>
<span class="normal"><a href="#__codelineno-155-12">12</a></span>
<span class="normal"><a href="#__codelineno-155-13">13</a></span>
<span class="normal"><a href="#__codelineno-155-14">14</a></span>
<span class="normal"><a href="#__codelineno-155-15">15</a></span>
<span class="normal"><a href="#__codelineno-155-16">16</a></span>
<span class="normal"><a href="#__codelineno-155-17">17</a></span>
<span class="normal"><a href="#__codelineno-155-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-155-1" name="__codelineno-155-1"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># mkdir /home/ahdifu/mountdir</span>
<a id="__codelineno-155-2" name="__codelineno-155-2"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># mount /dev/sdb5 /home/ahdifu/mountdir/</span>
<a id="__codelineno-155-3" name="__codelineno-155-3"></a>
<a id="__codelineno-155-4" name="__codelineno-155-4"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># blkid /dev/sdb5</span>
<a id="__codelineno-155-5" name="__codelineno-155-5"></a>/dev/sdb5:<span class="w"> </span><span class="nv">UUID</span><span class="o">=</span><span class="s2">&quot;76ddc841-77d6-4e6a-8f5f-03c9fedf42b3&quot;</span><span class="w"> </span><span class="nv">TYPE</span><span class="o">=</span><span class="s2">&quot;xfs&quot;</span>
<a id="__codelineno-155-6" name="__codelineno-155-6"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># umount /dev/sdb5</span>
<a id="__codelineno-155-7" name="__codelineno-155-7"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># mount</span>
<a id="__codelineno-155-8" name="__codelineno-155-8"></a><span class="nv">UUID</span><span class="o">=</span><span class="s2">&quot;76ddc841-77d6-4e6a-8f5f-03c9fedf42b3&quot;</span><span class="w"> </span>/home/ahdifu/mountdir/
<a id="__codelineno-155-9" name="__codelineno-155-9"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># df</span>
<a id="__codelineno-155-10" name="__codelineno-155-10"></a>Filesystem<span class="w"> </span>1K-blocks<span class="w"> </span>Used<span class="w"> </span>Available<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on
<a id="__codelineno-155-11" name="__codelineno-155-11"></a>/dev/mapper/rhel-root<span class="w"> </span><span class="m">18397184</span><span class="w"> </span><span class="m">4101352</span><span class="w"> </span><span class="m">14295832</span><span class="w"> </span><span class="m">23</span>%<span class="w"> </span>/
<a id="__codelineno-155-12" name="__codelineno-155-12"></a>devtmpfs<span class="w"> </span><span class="m">914800</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">914800</span><span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev
<a id="__codelineno-155-13" name="__codelineno-155-13"></a>tmpfs<span class="w"> </span><span class="m">931612</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">931612</span><span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev/shm
<a id="__codelineno-155-14" name="__codelineno-155-14"></a>tmpfs<span class="w"> </span><span class="m">931612</span><span class="w"> </span><span class="m">10192</span><span class="w"> </span><span class="m">921420</span><span class="w"> </span><span class="m">2</span>%<span class="w"> </span>/run
<a id="__codelineno-155-15" name="__codelineno-155-15"></a>tmpfs<span class="w"> </span><span class="m">931612</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">931612</span><span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/sys/fs/cgroup
<a id="__codelineno-155-16" name="__codelineno-155-16"></a>/dev/sda1<span class="w"> </span><span class="m">508580</span><span class="w"> </span><span class="m">220368</span><span class="w"> </span><span class="m">288212</span><span class="w"> </span><span class="m">44</span>%<span class="w"> </span>/boot
<a id="__codelineno-155-17" name="__codelineno-155-17"></a>tmpfs<span class="w"> </span><span class="m">186324</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">186324</span><span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/run/user/0
<a id="__codelineno-155-18" name="__codelineno-155-18"></a>/dev/sdb5<span class="w"> </span><span class="m">10475520</span><span class="w"> </span><span class="m">32992</span><span class="w"> </span><span class="m">10442528</span><span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/home/ahdifu/mountdir
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">挂载点： </font></p>
<p><font style="color:rgb(57,57,57);">1.</font><font style="color:rgb(57,57,57);">目录必须存在，且未被其他进程使用 </font></p>
<p><font style="color:rgb(57,57,57);">2.目录中原有文件会暂时隐藏</font></p>
<p><font style="color:rgb(57,57,57);"></font></p>
<p><font style="color:rgb(57,57,57);">#mount </font><font style="color:rgb(57,57,57);">显示当前系统已经挂载的设备和挂载点 </font></p>
<p><font style="color:rgb(223,64,42);">#mount [options] [-o options] DEVICE MOUNT_POINT </font></p>
<p><font style="color:rgb(57,57,57);">-a </font><font style="color:rgb(57,57,57);">挂载</font><font style="color:rgb(57,57,57);">/etc/fstab </font><font style="color:rgb(57,57,57);">中定义的所有文件系统</font><font style="color:rgb(57,57,57);">[</font><font style="color:rgb(57,57,57);">重新读下</font><font style="color:rgb(57,57,57);">/etc/fstab </font><font style="color:rgb(57,57,57);">文件</font><font style="color:rgb(57,57,57);">] </font></p>
<p><font style="color:rgb(57,57,57);">-r </font><font style="color:rgb(57,57,57);">只读挂载 </font></p>
<p><font style="color:rgb(57,57,57);">-w </font><font style="color:rgb(57,57,57);">读写挂载 </font></p>
<p><font style="color:rgb(57,57,57);">-o </font><font style="color:rgb(57,57,57);">额外指定挂载选项 </font></p>
<p><font style="color:rgb(57,57,57);">remount </font><font style="color:rgb(57,57,57);">重新挂载 </font></p>
<p><font style="color:rgb(57,57,57);">ro </font></p>
<p><font style="color:rgb(57,57,57);">rw </font></p>
<h3 id="永久挂载"><strong><font style="color:rgb(0,0,0);">永久挂载 </font></strong><a class="headerlink" href="#永久挂载" title="Permanent link">&para;</a></h3>
<p><strong><font style="color:rgb(0,0,0);">开机自动挂载，需要把挂载信息写入到挂载表中 </font></strong><strong><font style="color:rgb(0,0,0);">/etc/fstab </font></strong></p>
<p><font style="color:rgb(57,57,57);">fstab </font><font style="color:rgb(57,57,57);">中参数格式 </font></p>
<p><font style="color:rgb(57,57,57);">/dev/mapper/rhel-root / xfs defaults 0 0 </font></p>
<p><font style="color:rgb(57,57,57);">设备 挂载点 挂载类型 挂载参数 是否备份 检查顺序</font></p>
<p><strong><font style="color:rgb(57,57,57);">挂载类型： </font></strong></p>
<p><font style="color:rgb(57,57,57);">ext2,ext3,ext4,xfs,iso9660,nfs,smbfs,swap,auto </font></p>
<p><strong><font style="color:rgb(57,57,57);">挂载参数： </font></strong></p>
<p><font style="color:rgb(57,57,57);">defaults </font></p>
<p><strong><font style="color:rgb(57,57,57);">是否备份</font></strong><strong><font style="color:rgb(57,57,57);">: </font></strong></p>
<p><font style="color:rgb(57,57,57);">0:</font><font style="color:rgb(57,57,57);">不备份 </font></p>
<p><font style="color:rgb(57,57,57);">1:</font><font style="color:rgb(57,57,57);">使用 </font><font style="color:rgb(57,57,57);">dump </font><font style="color:rgb(57,57,57);">工具制作备份 </font></p>
<p><strong><font style="color:rgb(57,57,57);">检查顺序</font></strong><font style="color:rgb(57,57,57);">：</font><font style="color:rgb(57,57,57);">0|1|2 </font></p>
<p><font style="color:rgb(57,57,57);">1</font><font style="color:rgb(57,57,57);">：优先检查 </font></p>
<p><font style="color:rgb(57,57,57);">0：不检查</font></p>
<p><font style="color:rgb(0,0,0);">挂载普通分区： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-156-1">1</a></span>
<span class="normal"><a href="#__codelineno-156-2">2</a></span>
<span class="normal"><a href="#__codelineno-156-3">3</a></span>
<span class="normal"><a href="#__codelineno-156-4">4</a></span>
<span class="normal"><a href="#__codelineno-156-5">5</a></span>
<span class="normal"><a href="#__codelineno-156-6">6</a></span>
<span class="normal"><a href="#__codelineno-156-7">7</a></span>
<span class="normal"><a href="#__codelineno-156-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-156-1" name="__codelineno-156-1"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># vim /etc/fstab </span>
<a id="__codelineno-156-2" name="__codelineno-156-2"></a>/dev/sdb5/<span class="w"> </span>/home/ahdifu/mountdir/<span class="w"> </span>xfs<span class="w"> </span>defaults<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-156-3" name="__codelineno-156-3"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># mount -a [正常没有任何输出信息] </span>
<a id="__codelineno-156-4" name="__codelineno-156-4"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># mount -a </span>
<a id="__codelineno-156-5" name="__codelineno-156-5"></a>mount:<span class="w"> </span>wrong<span class="w"> </span>fs<span class="w"> </span>type,<span class="w"> </span>bad<span class="w"> </span>option,<span class="w"> </span>bad<span class="w"> </span>superblock<span class="w"> </span>on<span class="w"> </span>/dev/sdb5,<span class="w"> </span>
<a id="__codelineno-156-6" name="__codelineno-156-6"></a>missing<span class="w"> </span>codepage<span class="w"> </span>or<span class="w"> </span>helper<span class="w"> </span>program,<span class="w"> </span>or<span class="w"> </span>other<span class="w"> </span>error<span class="w"> </span>
<a id="__codelineno-156-7" name="__codelineno-156-7"></a>In<span class="w"> </span>some<span class="w"> </span>cases<span class="w"> </span>useful<span class="w"> </span>info<span class="w"> </span>is<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span>syslog<span class="w"> </span>-<span class="w"> </span>try<span class="w"> </span>
<a id="__codelineno-156-8" name="__codelineno-156-8"></a>dmesg<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>or<span class="w"> </span>so.<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">挂载 </font><font style="color:rgb(57,57,57);">swap </font><font style="color:rgb(57,57,57);">分区： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-157-1">1</a></span>
<span class="normal"><a href="#__codelineno-157-2">2</a></span>
<span class="normal"><a href="#__codelineno-157-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-157-1" name="__codelineno-157-1"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># vim /etc/fstab </span>
<a id="__codelineno-157-2" name="__codelineno-157-2"></a>/dev/sdb6<span class="w"> </span>swap<span class="w"> </span>swap<span class="w"> </span>defaults<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-157-3" name="__codelineno-157-3"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># mount -a </span>
</code></pre></div></td></tr></table></div>
<h3 id="卸载挂载设备"><font style="color:rgb(57,57,57);">卸载挂载设备 </font><a class="headerlink" href="#卸载挂载设备" title="Permanent link">&para;</a></h3>
<p><font style="color:rgb(223,64,42);">#umount DEVICE / #umount MOUNT_POINT </font></p>
<p><font style="color:rgb(57,57,57);">卸载设备时，挂载点下文件不能被其他进程占用 </font></p>
<p><font style="color:rgb(223,64,42);">#fuser /PATH </font><font style="color:rgb(57,57,57);">查看目录</font><font style="color:rgb(57,57,57);">/</font><font style="color:rgb(57,57,57);">文件当前被那些进程使用 </font></p>
<p><font style="color:rgb(57,57,57);">-v </font><font style="color:rgb(57,57,57);">详细显示 </font></p>
<p><font style="color:rgb(57,57,57);">-km </font><font style="color:rgb(57,57,57);">结束使用目录</font><font style="color:rgb(57,57,57);">/</font><font style="color:rgb(57,57,57);">文件的进程 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-158-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-158-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-158-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-158-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-158-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-158-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-158-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-158-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-158-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-158-10">10</a></span>
<span class="normal"><a href="#__codelineno-158-11">11</a></span>
<span class="normal"><a href="#__codelineno-158-12">12</a></span>
<span class="normal"><a href="#__codelineno-158-13">13</a></span>
<span class="normal"><a href="#__codelineno-158-14">14</a></span>
<span class="normal"><a href="#__codelineno-158-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-158-1" name="__codelineno-158-1"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># cd /home/ahdifu/mountdir/</span>
<a id="__codelineno-158-2" name="__codelineno-158-2"></a><span class="o">[</span>root@difu1909<span class="w"> </span>mountdir<span class="o">]</span><span class="c1"># umount /dev/sdb5 </span>
<a id="__codelineno-158-3" name="__codelineno-158-3"></a>umount:<span class="w"> </span>/home/ahdifu/mountdir:<span class="w"> </span>target<span class="w"> </span>is<span class="w"> </span>busy.<span class="w"> </span>
<a id="__codelineno-158-4" name="__codelineno-158-4"></a><span class="o">(</span>In<span class="w"> </span>some<span class="w"> </span>cases<span class="w"> </span>useful<span class="w"> </span>info<span class="w"> </span>about<span class="w"> </span>processes<span class="w"> </span>that<span class="w"> </span>use<span class="w"> </span>
<a id="__codelineno-158-5" name="__codelineno-158-5"></a>the<span class="w"> </span>device<span class="w"> </span>is<span class="w"> </span>found<span class="w"> </span>by<span class="w"> </span>lsof<span class="o">(</span><span class="m">8</span><span class="o">)</span><span class="w"> </span>or<span class="w"> </span>fuser<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span>
<a id="__codelineno-158-6" name="__codelineno-158-6"></a><span class="o">[</span>root@difu1909<span class="w"> </span>~<span class="o">]</span><span class="c1"># cd /home/ahdifu/mountdir/ </span>
<a id="__codelineno-158-7" name="__codelineno-158-7"></a><span class="o">[</span>root@difu1909<span class="w"> </span>mountdir<span class="o">]</span><span class="c1"># fuser -v /home/ahdifu/mountdir/ </span>
<a id="__codelineno-158-8" name="__codelineno-158-8"></a>USER<span class="w"> </span>PID<span class="w"> </span>ACCESS<span class="w"> </span>COMMAND<span class="w"> </span>
<a id="__codelineno-158-9" name="__codelineno-158-9"></a>/home/ahdifu/mountdir:<span class="w"> </span>
<a id="__codelineno-158-10" name="__codelineno-158-10"></a>root<span class="w"> </span>kernel<span class="w"> </span>mount<span class="w"> </span>/home/ahdifu/mountdir<span class="w"> </span>
<a id="__codelineno-158-11" name="__codelineno-158-11"></a>root<span class="w"> </span><span class="m">2872</span><span class="w"> </span>..c..<span class="w"> </span>bash<span class="w"> </span>
<a id="__codelineno-158-12" name="__codelineno-158-12"></a><span class="o">[</span>root@difu1909<span class="w"> </span>mountdir<span class="o">]</span><span class="c1"># ps </span>
<a id="__codelineno-158-13" name="__codelineno-158-13"></a>PID<span class="w"> </span>TTY<span class="w"> </span>TIME<span class="w"> </span>CMD<span class="w"> </span>
<a id="__codelineno-158-14" name="__codelineno-158-14"></a><span class="m">2872</span><span class="w"> </span>pts/0<span class="w"> </span><span class="m">00</span>:00:00<span class="w"> </span>bash<span class="w"> </span>
<a id="__codelineno-158-15" name="__codelineno-158-15"></a><span class="m">2930</span><span class="w"> </span>pts/0<span class="w"> </span><span class="m">00</span>:00:00<span class="w"> </span>ps
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">查看磁盘分区使用情况 </font></strong></p>
<p><font style="color:rgb(223,64,42);">#df </font></p>
<p><font style="color:rgb(57,57,57);">-h </font><font style="color:rgb(57,57,57);">以标准单位显示 </font></p>
<p><font style="color:rgb(57,57,57);">-l </font><font style="color:rgb(57,57,57);">不换行显示 </font></p>
<p><font style="color:rgb(57,57,57);">-T </font><font style="color:rgb(57,57,57);">显示文件系统类型 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-159-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-159-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-159-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-159-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-159-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-159-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-159-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-159-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-159-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-159-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-159-1" name="__codelineno-159-1"></a><span class="o">[</span>root@difu1909<span class="w"> </span>mountdir<span class="o">]</span><span class="c1"># df -Th </span>
<a id="__codelineno-159-2" name="__codelineno-159-2"></a>Filesystem<span class="w"> </span>Type<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on<span class="w"> </span>
<a id="__codelineno-159-3" name="__codelineno-159-3"></a>/dev/mapper/rhel-root<span class="w"> </span>xfs<span class="w"> </span>18G<span class="w"> </span><span class="m">4</span>.0G<span class="w"> </span>14G<span class="w"> </span><span class="m">23</span>%<span class="w"> </span>/<span class="w"> </span>
<a id="__codelineno-159-4" name="__codelineno-159-4"></a>devtmpfs<span class="w"> </span>devtmpfs<span class="w"> </span>894M<span class="w"> </span><span class="m">0</span><span class="w"> </span>894M<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev<span class="w"> </span>
<a id="__codelineno-159-5" name="__codelineno-159-5"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span>910M<span class="w"> </span><span class="m">0</span><span class="w"> </span>910M<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev/shm<span class="w"> </span>
<a id="__codelineno-159-6" name="__codelineno-159-6"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span>910M<span class="w"> </span>10M<span class="w"> </span>900M<span class="w"> </span><span class="m">2</span>%<span class="w"> </span>/run<span class="w"> </span>
<a id="__codelineno-159-7" name="__codelineno-159-7"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span>910M<span class="w"> </span><span class="m">0</span><span class="w"> </span>910M<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/sys/fs/cgroup<span class="w"> </span>
<a id="__codelineno-159-8" name="__codelineno-159-8"></a>/dev/sda1<span class="w"> </span>xfs<span class="w"> </span>497M<span class="w"> </span>216M<span class="w"> </span>282M<span class="w"> </span><span class="m">44</span>%<span class="w"> </span>/boot<span class="w"> </span>
<a id="__codelineno-159-9" name="__codelineno-159-9"></a>/dev/sdb5<span class="w"> </span>xfs<span class="w"> </span>10G<span class="w"> </span>33M<span class="w"> </span>10G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/home/ahdifu/mountdir<span class="w"> </span>
<a id="__codelineno-159-10" name="__codelineno-159-10"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span>182M<span class="w"> </span><span class="m">0</span><span class="w"> </span>182M<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/run/user/0<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">查看目录文件大小 </font></p>
<p><font style="color:rgb(223,64,42);">#du </font></p>
<p><font style="color:rgb(57,57,57);">-s </font><font style="color:rgb(57,57,57);">查看目录大小 </font></p>
<p><font style="color:rgb(57,57,57);">-h </font><font style="color:rgb(57,57,57);">标准单位显示 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-160-1">1</a></span>
<span class="normal"><a href="#__codelineno-160-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-160-1" name="__codelineno-160-1"></a><span class="o">[</span>root@difu1909<span class="w"> </span>mountdir<span class="o">]</span><span class="c1"># du -sh /home/ahdifu/ </span>
<a id="__codelineno-160-2" name="__codelineno-160-2"></a>24M<span class="w"> </span>/home/ahdifu/
</code></pre></div></td></tr></table></div>
<h3 id="自动挂载autofs">自动挂载:autofs<a class="headerlink" href="#自动挂载autofs" title="Permanent link">&para;</a></h3>
<p><font style="color:rgb(57,57,57);">autofs </font><font style="color:rgb(57,57,57);">服务程序是一种 </font><font style="color:rgb(57,57,57);">Linux </font><font style="color:rgb(57,57,57);">系统守护进程，当检测到用户试图访问一个尚未挂载的文 </font></p>
<p><font style="color:rgb(57,57,57);">件系统时，将自动挂载该文件系统 </font></p>
<p><font style="color:rgb(57,57,57);">将挂载信息填入</font><font style="color:rgb(57,57,57);">/etc/fstab </font><font style="color:rgb(57,57,57);">文件后，每次开机的时候，无论挂载需求是否需要，设备将 </font></p>
<p><font style="color:rgb(57,57,57);">会被自动挂载，而 </font><font style="color:rgb(57,57,57);">autofs </font><font style="color:rgb(57,57,57);">服务程序则是在用户需要使用该文件系统时才去动态挂载，从 </font></p>
<p><font style="color:rgb(57,57,57);">而节约了网络资源和服务器的硬件资源。 </font></p>
<p><font style="color:rgb(57,57,57);">autofs 多用于 NFS 和 samba 这种基于网络的挂载。</font></p>
<p><font style="color:rgb(57,57,57);">1</font><font style="color:rgb(57,57,57);">、安装服务程序 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-161-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-161-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-161-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-161-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-161-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-161-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-161-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-161-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-161-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-161-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-161-1" name="__codelineno-161-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># yum -y install autofs </span>
<a id="__codelineno-161-2" name="__codelineno-161-2"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -qc autofs </span>
<a id="__codelineno-161-3" name="__codelineno-161-3"></a>/etc/auto.master<span class="w"> </span>
<a id="__codelineno-161-4" name="__codelineno-161-4"></a>/etc/auto.misc<span class="w"> </span>
<a id="__codelineno-161-5" name="__codelineno-161-5"></a>/etc/auto.net<span class="w"> </span>
<a id="__codelineno-161-6" name="__codelineno-161-6"></a>/etc/auto.smb<span class="w"> </span>
<a id="__codelineno-161-7" name="__codelineno-161-7"></a>/etc/autofs.conf<span class="w"> </span>
<a id="__codelineno-161-8" name="__codelineno-161-8"></a>/etc/autofs_ldap_auth.conf<span class="w"> </span>
<a id="__codelineno-161-9" name="__codelineno-161-9"></a>/etc/sysconfig/autofs<span class="w"> </span>
<a id="__codelineno-161-10" name="__codelineno-161-10"></a>/usr/lib/systemd/system/autofs.service<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">2</font><font style="color:rgb(57,57,57);">、编辑主配置文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-162-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-162-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-162-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-162-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-162-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-162-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-162-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-162-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-162-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-162-10">10</a></span>
<span class="normal"><a href="#__codelineno-162-11">11</a></span>
<span class="normal"><a href="#__codelineno-162-12">12</a></span>
<span class="normal"><a href="#__codelineno-162-13">13</a></span>
<span class="normal"><a href="#__codelineno-162-14">14</a></span>
<span class="normal"><a href="#__codelineno-162-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-162-1" name="__codelineno-162-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># vim /etc/auto.master </span>
<a id="__codelineno-162-2" name="__codelineno-162-2"></a><span class="c1"># </span>
<a id="__codelineno-162-3" name="__codelineno-162-3"></a><span class="c1"># Sample auto.master file </span>
<a id="__codelineno-162-4" name="__codelineno-162-4"></a><span class="c1"># This is a &#39;master&#39; automounter map and it has the following format: </span>
<a id="__codelineno-162-5" name="__codelineno-162-5"></a><span class="c1"># mount-point [map-type[,format]:]map [options] </span>
<a id="__codelineno-162-6" name="__codelineno-162-6"></a><span class="c1"># For details of the format look at auto.master(5). </span>
<a id="__codelineno-162-7" name="__codelineno-162-7"></a><span class="c1"># </span>
<a id="__codelineno-162-8" name="__codelineno-162-8"></a>/misc<span class="w"> </span>/etc/auto.misc<span class="w"> </span>
<a id="__codelineno-162-9" name="__codelineno-162-9"></a><span class="c1"># </span>
<a id="__codelineno-162-10" name="__codelineno-162-10"></a>/home/myth/auto_dir<span class="w"> </span>/etc/auto.sdc<span class="w"> </span>
<a id="__codelineno-162-11" name="__codelineno-162-11"></a><span class="c1"># NOTE: mounts done from a hosts map will be mounted with the </span>
<a id="__codelineno-162-12" name="__codelineno-162-12"></a><span class="c1"># &quot;nosuid&quot; and &quot;nodev&quot; options unless the &quot;suid&quot; and &quot;dev&quot; </span>
<a id="__codelineno-162-13" name="__codelineno-162-13"></a><span class="c1"># options are explicitly given. </span>
<a id="__codelineno-162-14" name="__codelineno-162-14"></a>/home/myth/auto_dir<span class="w"> </span>自动挂载点的目标位置<span class="w"> </span>
<a id="__codelineno-162-15" name="__codelineno-162-15"></a>/etc/auto.sdc<span class="w"> </span>定义子配置文件<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">3</font><font style="color:rgb(57,57,57);">、编辑子配置文件： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-163-1">1</a></span>
<span class="normal"><a href="#__codelineno-163-2">2</a></span>
<span class="normal"><a href="#__codelineno-163-3">3</a></span>
<span class="normal"><a href="#__codelineno-163-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-163-1" name="__codelineno-163-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># vim /etc/auto.sdc</span>
<a id="__codelineno-163-2" name="__codelineno-163-2"></a>*<span class="w"> </span>挂载点目录（这里表示可以任意常见文件名作为挂载点目录）<span class="w"> </span>
<a id="__codelineno-163-3" name="__codelineno-163-3"></a>-fstype<span class="o">=</span>xfs<span class="w"> </span>挂载的类型<span class="w"> </span>
<a id="__codelineno-163-4" name="__codelineno-163-4"></a>:/dev/sdc5<span class="w"> </span>需要挂载的设备
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">4</font><font style="color:rgb(57,57,57);">、开启并重启 </font><font style="color:rgb(57,57,57);">autofs </font><font style="color:rgb(57,57,57);">服务 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-164-1">1</a></span>
<span class="normal"><a href="#__codelineno-164-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-164-1" name="__codelineno-164-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># systemctl enable autofs.service </span>
<a id="__codelineno-164-2" name="__codelineno-164-2"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># systemctl restart autofs.service</span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">查看当前的设备挂载状态： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-165-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-165-1" name="__codelineno-165-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># df -Th </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">创建标签，激活本地挂载 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-166-1">1</a></span>
<span class="normal"><a href="#__codelineno-166-2">2</a></span>
<span class="normal"><a href="#__codelineno-166-3">3</a></span>
<span class="normal"><a href="#__codelineno-166-4">4</a></span>
<span class="normal"><a href="#__codelineno-166-5">5</a></span>
<span class="normal"><a href="#__codelineno-166-6">6</a></span>
<span class="normal"><a href="#__codelineno-166-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-166-1" name="__codelineno-166-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># cd /home/myth/auto_dir/ </span>
<a id="__codelineno-166-2" name="__codelineno-166-2"></a><span class="o">[</span>root@myth<span class="w"> </span>auto_dir<span class="o">]</span><span class="c1"># touch 111 </span>
<a id="__codelineno-166-3" name="__codelineno-166-3"></a><span class="o">[</span>root@myth<span class="w"> </span>auto_dir<span class="o">]</span><span class="c1"># cd 111 </span>
<a id="__codelineno-166-4" name="__codelineno-166-4"></a><span class="o">[</span>root@myth<span class="w"> </span><span class="m">111</span><span class="o">]</span><span class="c1"># ll </span>
<a id="__codelineno-166-5" name="__codelineno-166-5"></a>total<span class="w"> </span><span class="m">4</span><span class="w"> </span>
<a id="__codelineno-166-6" name="__codelineno-166-6"></a>drwxr-xr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">6</span><span class="w"> </span>May<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">20</span>:16<span class="w"> </span><span class="m">123</span><span class="w"> </span>
<a id="__codelineno-166-7" name="__codelineno-166-7"></a>-rw-r--r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">10</span><span class="w"> </span>May<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">20</span>:23<span class="w"> </span><span class="m">1</span>.txt<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">再次查看设备挂载状态： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-167-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-167-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-167-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-167-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-167-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-167-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-167-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-167-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-167-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-167-10">10</a></span>
<span class="normal"><a href="#__codelineno-167-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-167-1" name="__codelineno-167-1"></a><span class="o">[</span>root@myth<span class="w"> </span><span class="m">111</span><span class="o">]</span><span class="c1"># df -Th </span>
<a id="__codelineno-167-2" name="__codelineno-167-2"></a>Filesystem<span class="w"> </span>Type<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on<span class="w"> </span>
<a id="__codelineno-167-3" name="__codelineno-167-3"></a>/dev/mapper/rhel-root<span class="w"> </span>xfs<span class="w"> </span>20G<span class="w"> </span><span class="m">3</span>.5G<span class="w"> </span>16G<span class="w"> </span><span class="m">18</span>%<span class="w"> </span>/<span class="w"> </span>
<a id="__codelineno-167-4" name="__codelineno-167-4"></a>devtmpfs<span class="w"> </span>devtmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev<span class="w"> </span>
<a id="__codelineno-167-5" name="__codelineno-167-5"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev/shm<span class="w"> </span>
<a id="__codelineno-167-6" name="__codelineno-167-6"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span>13M<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/run<span class="w"> </span>
<a id="__codelineno-167-7" name="__codelineno-167-7"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/sys/fs/cgroup<span class="w"> </span>
<a id="__codelineno-167-8" name="__codelineno-167-8"></a>/dev/sda1<span class="w"> </span>xfs<span class="w"> </span>497M<span class="w"> </span>145M<span class="w"> </span>353M<span class="w"> </span><span class="m">30</span>%<span class="w"> </span>/boot<span class="w"> </span>
<a id="__codelineno-167-9" name="__codelineno-167-9"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span>378M<span class="w"> </span>36K<span class="w"> </span>378M<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/run/user/0<span class="w"> </span>
<a id="__codelineno-167-10" name="__codelineno-167-10"></a>/dev/sr0<span class="w"> </span>iso9660<span class="w"> </span><span class="m">4</span>.4G<span class="w"> </span><span class="m">4</span>.4G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">100</span>%<span class="w"> </span>/run/media/root/RHEL-7.5<span class="w"> </span>Server.x86_64<span class="w"> </span>
<a id="__codelineno-167-11" name="__codelineno-167-11"></a>/dev/sdc5<span class="w"> </span>xfs<span class="w"> </span><span class="m">5</span>.0G<span class="w"> </span>33M<span class="w"> </span><span class="m">5</span>.0G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/home/myth/auto_dir/111
</code></pre></div></td></tr></table></div>
<h2 id="lvmlogical-volume-manager逻辑卷管理">LVM<strong><font style="color:rgb(0,0,0);">(Logical Volume Manager)</font></strong>逻辑卷管理<a class="headerlink" href="#lvmlogical-volume-manager逻辑卷管理" title="Permanent link">&para;</a></h2>
<p><strong><font style="color:rgb(0,0,0);">逻辑卷基本组成： </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">PV</font></strong><font style="color:rgb(57,57,57);">(Physical Volume): </font></p>
<p><font style="color:rgb(57,57,57);">物理卷，物理磁盘上的分区，是 </font><font style="color:rgb(57,57,57);">LVM </font><font style="color:rgb(57,57,57);">的基本存储逻辑块 </font></p>
<p><font style="color:rgb(57,57,57);">包括很多默认 </font><font style="color:rgb(57,57,57);">4MB </font><font style="color:rgb(57,57,57);">大小的 </font><font style="color:rgb(57,57,57);">PE</font><font style="color:rgb(57,57,57);">（</font><font style="color:rgb(57,57,57);">physical extent</font><font style="color:rgb(57,57,57);">，物理单元） </font></p>
<p><strong><font style="color:rgb(57,57,57);">VG</font></strong><font style="color:rgb(57,57,57);">(Volume Group): </font></p>
<p><font style="color:rgb(57,57,57);">卷组，由一个或多个 </font><font style="color:rgb(57,57,57);">PV </font><font style="color:rgb(57,57,57);">组成的存储池 </font></p>
<p><strong><font style="color:rgb(57,57,57);">LV</font></strong><font style="color:rgb(57,57,57);">(Logical Volume): </font></p>
<p><font style="color:rgb(57,57,57);">逻辑卷，建立在 </font><font style="color:rgb(57,57,57);">VG </font><font style="color:rgb(57,57,57);">之上的逻辑分区 </font></p>
<p><font style="color:rgb(57,57,57);">PE(Physical Extend): </font></p>
<p><font style="color:rgb(57,57,57);">物理块，</font><font style="color:rgb(57,57,57);">LVM </font><font style="color:rgb(57,57,57);">中的最小存储单元，在创建 </font><font style="color:rgb(57,57,57);">VG </font><font style="color:rgb(57,57,57);">时可以定义 </font><font style="color:rgb(57,57,57);">PE </font><font style="color:rgb(57,57,57);">块大小，默认是 </font><font style="color:rgb(57,57,57);">4M </font></p>
<p><font style="color:rgb(57,57,57);">LE:(Logical Extend): </font></p>
<p><font style="color:rgb(57,57,57);">逻辑块，逻辑卷中可以被寻址的基本单位，在同一卷组中，LE 和 PE 大小相同且一一对应。</font></p>
<p><strong><font style="color:rgb(57,57,57);">PV、VG、LV 关系如下：</font></strong></p>
<p><img alt="" src="../../../../images/1717145222702-d932fe80-6375-40e8-9ea1-30ca14d393d6.png" /></p>
<p><strong><font style="color:rgb(0,0,0);">创建一个逻辑卷的步骤： </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">1.</font></strong><strong><font style="color:rgb(57,57,57);">使用分区工具创建一个普通的分区，并修改分区类型为 </font></strong><strong><font style="color:rgb(57,57,57);">8e </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">2.将已划分好的分区创建为物理卷(PV)</font></strong></p>
<p><font style="color:rgb(223,64,42);">#pvcreate /dev/sdb5 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-168-1">1</a></span>
<span class="normal"><a href="#__codelineno-168-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-168-1" name="__codelineno-168-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># pvcreate /dev/sdb5 </span>
<a id="__codelineno-168-2" name="__codelineno-168-2"></a>Physical<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;/dev/sdb5&quot;</span><span class="w"> </span>successfully<span class="w"> </span>created.<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(57,57,57);">3.</font></strong><strong><font style="color:rgb(57,57,57);">创建卷组，并将物理卷加入到卷组中 </font></strong></p>
<p><font style="color:rgb(223,64,42);">#vgcreate VG_NAME /dev/sdb5 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-169-1">1</a></span>
<span class="normal"><a href="#__codelineno-169-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-169-1" name="__codelineno-169-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># vgcreate df_vg1 /dev/sdb5 </span>
<a id="__codelineno-169-2" name="__codelineno-169-2"></a>Volume<span class="w"> </span>group<span class="w"> </span><span class="s2">&quot;df_vg1&quot;</span><span class="w"> </span>successfully<span class="w"> </span>created<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">VG_NAME </font><font style="color:rgb(57,57,57);">是卷组的名字，自己定义。 </font></p>
<p><font style="color:rgb(57,57,57);">默认 </font><font style="color:rgb(57,57,57);">PE </font><font style="color:rgb(57,57,57);">大小是 </font><font style="color:rgb(57,57,57);">4M</font><font style="color:rgb(57,57,57);">，可以使用</font><font style="color:rgb(57,57,57);">-s </font><font style="color:rgb(57,57,57);">进行指定 </font></p>
<p><font style="color:rgb(223,64,42);">#vgcreate VG_NAME -s 32M /dev/sdb1 </font></p>
<p><strong><font style="color:rgb(57,57,57);">4.</font></strong><strong><font style="color:rgb(57,57,57);">创建逻辑卷 </font></strong></p>
<p><font style="color:rgb(223,64,42);">#lvcreate -n LV_NAME -L 5G VG_NAME PV_NAME[</font><font style="color:rgb(223,64,42);">可选</font><font style="color:rgb(223,64,42);">] </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-170-1">1</a></span>
<span class="normal"><a href="#__codelineno-170-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-170-1" name="__codelineno-170-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># lvcreate -n df_lv01 -L 3G df_vg1 </span>
<a id="__codelineno-170-2" name="__codelineno-170-2"></a>Logical<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;df_lv01&quot;</span><span class="w"> </span>created.<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(57,57,57);">-n </font><font style="color:rgb(57,57,57);">指定逻辑卷名称，</font><font style="color:rgb(57,57,57);">LV_NAME </font><font style="color:rgb(57,57,57);">是逻辑卷的名称，自行定义 </font></p>
<p><font style="color:rgb(57,57,57);">逻辑卷大小：使用</font><font style="color:rgb(57,57,57);">-L </font><font style="color:rgb(57,57,57);">或</font><font style="color:rgb(57,57,57);">-l </font><font style="color:rgb(57,57,57);">指定大小 </font></p>
<p><font style="color:rgb(57,57,57);">-L </font><font style="color:rgb(57,57,57);">直接指定逻辑卷具体大小 </font></p>
<p><font style="color:rgb(223,64,42);">#lvcreate -n LV_NAME -L 5G VG_NAME </font></p>
<p><font style="color:rgb(57,57,57);">-l </font><font style="color:rgb(57,57,57);">指定 </font><font style="color:rgb(57,57,57);">PE </font><font style="color:rgb(57,57,57);">个数 </font></p>
<p><font style="color:rgb(223,64,42);">#lvcreate -n LV_NAME -l 100 VG_NAME</font></p>
<p><strong><font style="color:rgb(57,57,57);">5.</font></strong><strong><font style="color:rgb(57,57,57);">格式化逻辑卷并进行挂载 </font></strong></p>
<p><font style="color:rgb(223,64,42);">#mkfs -t xfs /dev/VG_NAME/LV_NAME </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-171-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-171-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-171-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-171-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-171-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-171-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-171-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-171-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-171-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-171-10">10</a></span>
<span class="normal"><a href="#__codelineno-171-11">11</a></span>
<span class="normal"><a href="#__codelineno-171-12">12</a></span>
<span class="normal"><a href="#__codelineno-171-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-171-1" name="__codelineno-171-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># mkfs.xfs /dev/mapper/df_vg1-df_lv01 </span>
<a id="__codelineno-171-2" name="__codelineno-171-2"></a>meta-data<span class="o">=</span>/dev/mapper/df_vg1-df_lv01<span class="w"> </span><span class="nv">isize</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">agcount</span><span class="o">=</span><span class="m">4</span>,<span class="w"> </span><span class="nv">agsize</span><span class="o">=</span><span class="m">196608</span><span class="w"> </span><span class="nv">blks</span><span class="w"> </span>
<a id="__codelineno-171-3" name="__codelineno-171-3"></a><span class="o">=</span><span class="w"> </span><span class="nv">sectsz</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">attr</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">projid32bit</span><span class="o">=</span><span class="nv">1</span><span class="w"> </span>
<a id="__codelineno-171-4" name="__codelineno-171-4"></a><span class="o">=</span><span class="w"> </span><span class="nv">crc</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">finobt</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">sparse</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-171-5" name="__codelineno-171-5"></a><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">786432</span>,<span class="w"> </span><span class="nv">imaxpct</span><span class="o">=</span><span class="nv">25</span><span class="w"> </span>
<a id="__codelineno-171-6" name="__codelineno-171-6"></a><span class="o">=</span><span class="w"> </span><span class="nv">sunit</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">swidth</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>blks<span class="w"> </span>
<a id="__codelineno-171-7" name="__codelineno-171-7"></a><span class="nv">naming</span><span class="w"> </span><span class="o">=</span>version<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span>ascii-ci<span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">ftype</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>
<a id="__codelineno-171-8" name="__codelineno-171-8"></a><span class="nv">log</span><span class="w"> </span><span class="o">=</span>internal<span class="w"> </span>log<span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">2560</span>,<span class="w"> </span><span class="nv">version</span><span class="o">=</span><span class="nv">2</span><span class="w"> </span>
<a id="__codelineno-171-9" name="__codelineno-171-9"></a><span class="o">=</span><span class="w"> </span><span class="nv">sectsz</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">sunit</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>blks,<span class="w"> </span>lazy-count<span class="o">=</span><span class="m">1</span><span class="w"> </span>
<a id="__codelineno-171-10" name="__codelineno-171-10"></a><span class="nv">realtime</span><span class="w"> </span><span class="o">=</span>none<span class="w"> </span><span class="nv">extsz</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">rtextents</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-171-11" name="__codelineno-171-11"></a><span class="c1">#mount /dev/VG_NAME/LV_NAME /MOUNT_POINT </span>
<a id="__codelineno-171-12" name="__codelineno-171-12"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># mkdir /home/myth/lv_dir </span>
<a id="__codelineno-171-13" name="__codelineno-171-13"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># mount /dev/df_vg1/df_lv01 /home/myth/lv_dir/</span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">逻辑卷的管理： </font></strong></p>
<p><strong><font style="color:rgb(0,0,0);">逻辑卷信息查看： </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">查看 </font></strong><strong><font style="color:rgb(57,57,57);">pv </font></strong></p>
<p><font style="color:rgb(223,64,42);">#pvs </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-172-1">1</a></span>
<span class="normal"><a href="#__codelineno-172-2">2</a></span>
<span class="normal"><a href="#__codelineno-172-3">3</a></span>
<span class="normal"><a href="#__codelineno-172-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-172-1" name="__codelineno-172-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># pvs </span>
<a id="__codelineno-172-2" name="__codelineno-172-2"></a>PV<span class="w"> </span>VG<span class="w"> </span>Fmt<span class="w"> </span>Attr<span class="w"> </span>PSize<span class="w"> </span>PFree<span class="w"> </span>
<a id="__codelineno-172-3" name="__codelineno-172-3"></a>/dev/sda2<span class="w"> </span>rhel<span class="w"> </span>lvm2<span class="w"> </span>a--<span class="w"> </span>
<a id="__codelineno-172-4" name="__codelineno-172-4"></a>/dev/sdb5<span class="w"> </span>df_vg1<span class="w"> </span>lvm2<span class="w"> </span>a--<span class="w"> </span>&lt;<span class="m">2</span>.00g<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(223,64,42);">#pvdisplay </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-173-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-173-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-173-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-173-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-173-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-173-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-173-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-173-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-173-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-173-10">10</a></span>
<span class="normal"><a href="#__codelineno-173-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-173-1" name="__codelineno-173-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># pvdisplay </span>
<a id="__codelineno-173-2" name="__codelineno-173-2"></a>---<span class="w"> </span>Physical<span class="w"> </span>volume<span class="w"> </span>---<span class="w"> </span>
<a id="__codelineno-173-3" name="__codelineno-173-3"></a>PV<span class="w"> </span>Name<span class="w"> </span>/dev/sdb5<span class="w"> </span>
<a id="__codelineno-173-4" name="__codelineno-173-4"></a>VG<span class="w"> </span>Name<span class="w"> </span>df_vg1<span class="w"> </span>
<a id="__codelineno-173-5" name="__codelineno-173-5"></a>PV<span class="w"> </span>Size<span class="w"> </span><span class="m">5</span>.00<span class="w"> </span>GiB<span class="w"> </span>/<span class="w"> </span>not<span class="w"> </span>usable<span class="w"> </span><span class="m">4</span>.00<span class="w"> </span>MiB<span class="w"> </span>
<a id="__codelineno-173-6" name="__codelineno-173-6"></a>Allocatable<span class="w"> </span>yes<span class="w"> </span>
<a id="__codelineno-173-7" name="__codelineno-173-7"></a>PE<span class="w"> </span>Size<span class="w"> </span><span class="m">4</span>.00<span class="w"> </span>MiB<span class="w"> </span>
<a id="__codelineno-173-8" name="__codelineno-173-8"></a>Total<span class="w"> </span>PE<span class="w"> </span><span class="m">1279</span><span class="w"> </span>
<a id="__codelineno-173-9" name="__codelineno-173-9"></a>Free<span class="w"> </span>PE<span class="w"> </span><span class="m">511</span><span class="w"> </span>
<a id="__codelineno-173-10" name="__codelineno-173-10"></a>Allocated<span class="w"> </span>PE<span class="w"> </span><span class="m">768</span><span class="w"> </span>
<a id="__codelineno-173-11" name="__codelineno-173-11"></a>PV<span class="w"> </span>UUID<span class="w"> </span>5v8Jxd-375L-nv2Q-wnAN-naG7-Fcs6-52Mdbv<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(223,64,42);"># pvscan </font></p>
<p><font style="color:rgb(0,0,0);">[root@myth ~]# pvscan </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-174-1">1</a></span>
<span class="normal"><a href="#__codelineno-174-2">2</a></span>
<span class="normal"><a href="#__codelineno-174-3">3</a></span>
<span class="normal"><a href="#__codelineno-174-4">4</a></span>
<span class="normal"><a href="#__codelineno-174-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-174-1" name="__codelineno-174-1"></a>PV<span class="w"> </span>/dev/sdb5<span class="w"> </span>VG<span class="w"> </span>df_vg1<span class="w"> </span>lvm2<span class="w"> </span><span class="o">[</span><span class="w"> </span>
<a id="__codelineno-174-2" name="__codelineno-174-2"></a>PV<span class="w"> </span>/dev/sdb6<span class="w"> </span>VG<span class="w"> </span>df_vg1<span class="w"> </span>lvm2<span class="w"> </span><span class="o">[</span><span class="w"> </span>
<a id="__codelineno-174-3" name="__codelineno-174-3"></a>PV<span class="w"> </span>/dev/sda2<span class="w"> </span>VG<span class="w"> </span>rhel<span class="w"> </span>lvm2<span class="w"> </span><span class="o">[</span><span class="w"> </span>
<a id="__codelineno-174-4" name="__codelineno-174-4"></a>PV<span class="w"> </span>/dev/sdc<span class="w"> </span>lvm2<span class="w"> </span><span class="o">[</span><span class="m">10</span>.00<span class="w"> </span>GiB<span class="o">]</span><span class="w"> </span>
<a id="__codelineno-174-5" name="__codelineno-174-5"></a>Total:<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">[</span><span class="m">38</span>.50<span class="w"> </span>GiB<span class="o">]</span><span class="w"> </span>/<span class="w"> </span><span class="k">in</span><span class="w"> </span>use:<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">[</span><span class="m">28</span>.50<span class="w"> </span>GiB<span class="o">]</span><span class="w"> </span>/<span class="w"> </span><span class="k">in</span><span class="w"> </span>no<span class="w"> </span>VG:<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span><span class="m">10</span>.00<span class="w"> </span>GiB<span class="o">]</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(57,57,57);">查看 </font></strong><strong><font style="color:rgb(57,57,57);">vg </font></strong></p>
<p><font style="color:rgb(223,64,42);">#vgs </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-175-1">1</a></span>
<span class="normal"><a href="#__codelineno-175-2">2</a></span>
<span class="normal"><a href="#__codelineno-175-3">3</a></span>
<span class="normal"><a href="#__codelineno-175-4">4</a></span>
<span class="normal"><a href="#__codelineno-175-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-175-1" name="__codelineno-175-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># vgs </span>
<a id="__codelineno-175-2" name="__codelineno-175-2"></a>VG<span class="w"> </span><span class="c1">#PV #LV #SN Attr VSize VFree </span>
<a id="__codelineno-175-3" name="__codelineno-175-3"></a>df_vg1<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>wz--n-<span class="w"> </span>&lt;<span class="m">2</span>.00g<span class="w"> </span>
<a id="__codelineno-175-4" name="__codelineno-175-4"></a>rhel<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>wz--n-<span class="w"> </span>
<a id="__codelineno-175-5" name="__codelineno-175-5"></a><span class="c1">#vgdisplay </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(223,64,42);">#vgdisplay</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-176-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-176-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-176-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-176-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-176-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-176-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-176-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-176-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-176-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-176-10">10</a></span>
<span class="normal"><a href="#__codelineno-176-11">11</a></span>
<span class="normal"><a href="#__codelineno-176-12">12</a></span>
<span class="normal"><a href="#__codelineno-176-13">13</a></span>
<span class="normal"><a href="#__codelineno-176-14">14</a></span>
<span class="normal"><a href="#__codelineno-176-15">15</a></span>
<span class="normal"><a href="#__codelineno-176-16">16</a></span>
<span class="normal"><a href="#__codelineno-176-17">17</a></span>
<span class="normal"><a href="#__codelineno-176-18">18</a></span>
<span class="normal"><a href="#__codelineno-176-19">19</a></span>
<span class="normal"><a href="#__codelineno-176-20">20</a></span>
<span class="normal"><a href="#__codelineno-176-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-176-1" name="__codelineno-176-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># vgdisplay </span>
<a id="__codelineno-176-2" name="__codelineno-176-2"></a>---<span class="w"> </span>Volume<span class="w"> </span>group<span class="w"> </span>---<span class="w"> </span>
<a id="__codelineno-176-3" name="__codelineno-176-3"></a>VG<span class="w"> </span>Name<span class="w"> </span>df_vg1<span class="w"> </span>
<a id="__codelineno-176-4" name="__codelineno-176-4"></a>System<span class="w"> </span>ID<span class="w"> </span>
<a id="__codelineno-176-5" name="__codelineno-176-5"></a>Format<span class="w"> </span>lvm2<span class="w"> </span>
<a id="__codelineno-176-6" name="__codelineno-176-6"></a>Metadata<span class="w"> </span>Areas<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-176-7" name="__codelineno-176-7"></a>Metadata<span class="w"> </span>Sequence<span class="w"> </span>No<span class="w"> </span><span class="m">2</span>
<a id="__codelineno-176-8" name="__codelineno-176-8"></a>VG<span class="w"> </span>Access<span class="w"> </span>read/write
<a id="__codelineno-176-9" name="__codelineno-176-9"></a>VG<span class="w"> </span>Status<span class="w"> </span>resizable
<a id="__codelineno-176-10" name="__codelineno-176-10"></a>MAX<span class="w"> </span>LV<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-176-11" name="__codelineno-176-11"></a>Cur<span class="w"> </span>LV<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-176-12" name="__codelineno-176-12"></a>Open<span class="w"> </span>LV<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-176-13" name="__codelineno-176-13"></a>Max<span class="w"> </span>PV<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-176-14" name="__codelineno-176-14"></a>Cur<span class="w"> </span>PV<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-176-15" name="__codelineno-176-15"></a>Act<span class="w"> </span>PV<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-176-16" name="__codelineno-176-16"></a>VG<span class="w"> </span>Size
<a id="__codelineno-176-17" name="__codelineno-176-17"></a>PE<span class="w"> </span>Size<span class="w"> </span><span class="m">4</span>.00<span class="w"> </span>MiB
<a id="__codelineno-176-18" name="__codelineno-176-18"></a>Total<span class="w"> </span>PE<span class="w"> </span><span class="m">1279</span>
<a id="__codelineno-176-19" name="__codelineno-176-19"></a>Alloc<span class="w"> </span>PE<span class="w"> </span>/<span class="w"> </span>Size<span class="w"> </span><span class="m">768</span><span class="w"> </span>/<span class="w"> </span><span class="m">3</span>.00<span class="w"> </span>GiB
<a id="__codelineno-176-20" name="__codelineno-176-20"></a>Free<span class="w"> </span>PE<span class="w"> </span>/<span class="w"> </span>Size<span class="w"> </span><span class="m">511</span><span class="w"> </span>/
<a id="__codelineno-176-21" name="__codelineno-176-21"></a>VG<span class="w"> </span>UUID<span class="w"> </span>rdROCY-Ivvb-jZmg-6sZx-0gts-c99A-SS46hj
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(57,57,57);">查看 </font></strong><strong><font style="color:rgb(57,57,57);">lv </font></strong></p>
<p><font style="color:rgb(223,64,42);">#lvs </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-177-1">1</a></span>
<span class="normal"><a href="#__codelineno-177-2">2</a></span>
<span class="normal"><a href="#__codelineno-177-3">3</a></span>
<span class="normal"><a href="#__codelineno-177-4">4</a></span>
<span class="normal"><a href="#__codelineno-177-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-177-1" name="__codelineno-177-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># lvs </span>
<a id="__codelineno-177-2" name="__codelineno-177-2"></a>LV<span class="w"> </span>VG<span class="w"> </span>Attr<span class="w"> </span>LSize<span class="w"> </span>Pool<span class="w"> </span>Origin<span class="w"> </span>Data%<span class="w"> </span>Meta%<span class="w"> </span>Move<span class="w"> </span>Log<span class="w"> </span>Cpy%Sync<span class="w"> </span>Convert<span class="w"> </span>
<a id="__codelineno-177-3" name="__codelineno-177-3"></a>df_lv01<span class="w"> </span>df_vg1<span class="w"> </span>-wi-ao----<span class="w"> </span><span class="m">3</span>.00g<span class="w"> </span>
<a id="__codelineno-177-4" name="__codelineno-177-4"></a>root<span class="w"> </span>rhel<span class="w"> </span>-wi-ao----<span class="w"> </span><span class="m">19</span>.31g<span class="w"> </span>
<a id="__codelineno-177-5" name="__codelineno-177-5"></a>swap<span class="w"> </span>rhel<span class="w"> </span>-wi-ao----<span class="w"> </span><span class="m">200</span>.00m<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(223,64,42);">#lvdisplay </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-178-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-178-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-178-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-178-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-178-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-178-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-178-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-178-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-178-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-178-10">10</a></span>
<span class="normal"><a href="#__codelineno-178-11">11</a></span>
<span class="normal"><a href="#__codelineno-178-12">12</a></span>
<span class="normal"><a href="#__codelineno-178-13">13</a></span>
<span class="normal"><a href="#__codelineno-178-14">14</a></span>
<span class="normal"><a href="#__codelineno-178-15">15</a></span>
<span class="normal"><a href="#__codelineno-178-16">16</a></span>
<span class="normal"><a href="#__codelineno-178-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-178-1" name="__codelineno-178-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># lvdisplay </span>
<a id="__codelineno-178-2" name="__codelineno-178-2"></a>---<span class="w"> </span>Logical<span class="w"> </span>volume<span class="w"> </span>---<span class="w"> </span>
<a id="__codelineno-178-3" name="__codelineno-178-3"></a>LV<span class="w"> </span>Path<span class="w"> </span>/dev/df_vg1/df_lv01<span class="w"> </span>
<a id="__codelineno-178-4" name="__codelineno-178-4"></a>LV<span class="w"> </span>Name<span class="w"> </span>df_lv01<span class="w"> </span>
<a id="__codelineno-178-5" name="__codelineno-178-5"></a>VG<span class="w"> </span>Name<span class="w"> </span>df_vg1<span class="w"> </span>
<a id="__codelineno-178-6" name="__codelineno-178-6"></a>LV<span class="w"> </span>UUID<span class="w"> </span>dnfZk5-ptIu-sND3-c0BQ-NHQb-2ewC-x1OHGo<span class="w"> </span>
<a id="__codelineno-178-7" name="__codelineno-178-7"></a>LV<span class="w"> </span>Write<span class="w"> </span>Access<span class="w"> </span>read/write<span class="w"> </span>
<a id="__codelineno-178-8" name="__codelineno-178-8"></a>LV<span class="w"> </span>Creation<span class="w"> </span>host,<span class="w"> </span><span class="nb">time</span><span class="w"> </span>myth,<span class="w"> </span><span class="m">2019</span>-05-24<span class="w"> </span><span class="m">16</span>:07:21<span class="w"> </span>-0400<span class="w"> </span>
<a id="__codelineno-178-9" name="__codelineno-178-9"></a>LV<span class="w"> </span>Status<span class="w"> </span>available<span class="w"> </span>
<a id="__codelineno-178-10" name="__codelineno-178-10"></a><span class="c1"># open 1 </span>
<a id="__codelineno-178-11" name="__codelineno-178-11"></a>LV<span class="w"> </span>Size<span class="w"> </span><span class="m">3</span>.00<span class="w"> </span>GiB<span class="w"> </span>
<a id="__codelineno-178-12" name="__codelineno-178-12"></a>Current<span class="w"> </span>LE<span class="w"> </span><span class="m">768</span><span class="w"> </span>
<a id="__codelineno-178-13" name="__codelineno-178-13"></a>Segments<span class="w"> </span><span class="m">1</span><span class="w"> </span>
<a id="__codelineno-178-14" name="__codelineno-178-14"></a>Allocation<span class="w"> </span>inherit<span class="w"> </span>
<a id="__codelineno-178-15" name="__codelineno-178-15"></a>Read<span class="w"> </span>ahead<span class="w"> </span>sectors<span class="w"> </span>auto<span class="w"> </span>
<a id="__codelineno-178-16" name="__codelineno-178-16"></a>-<span class="w"> </span>currently<span class="w"> </span><span class="nb">set</span><span class="w"> </span>to<span class="w"> </span><span class="m">8192</span><span class="w"> </span>
<a id="__codelineno-178-17" name="__codelineno-178-17"></a>Block<span class="w"> </span>device<span class="w"> </span><span class="m">253</span>:2
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">逻辑卷扩展： </font></strong></p>
<p><strong><font style="color:rgb(0,0,0);">扩展卷组： </font></strong></p>
<p><font style="color:rgb(57,57,57);">1.</font><font style="color:rgb(57,57,57);">创建新的物理卷 </font></p>
<p><font style="color:rgb(57,57,57);">2.</font><font style="color:rgb(57,57,57);">向卷组中添加新的物理卷 </font></p>
<p><font style="color:rgb(223,64,42);">#vgextend VG_NAME /dev/sdb3 </font></p>
<p><strong><font style="color:rgb(57,57,57);">[root@myth ~]# vgextend df_vg1 /dev/sdb6 </font></strong></p>
<p><font style="color:rgb(57,57,57);">Volume group "df_vg1" successfully extended </font></p>
<p><strong><font style="color:rgb(0,0,0);">扩展逻辑卷： </font></strong></p>
<p><strong><font style="color:rgb(0,0,0);">1.</font></strong><strong><font style="color:rgb(0,0,0);">扩展逻辑卷（卷组 </font></strong><strong><font style="color:rgb(0,0,0);">VG </font></strong><strong><font style="color:rgb(0,0,0);">中需要有足够的空间） </font></strong></p>
<p><font style="color:rgb(223,64,42);">#lvextend -r -L +2G /dev/VG_NAME/LV_NAME </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-179-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-179-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-179-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-179-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-179-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-179-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-179-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-179-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-179-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-179-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-179-1" name="__codelineno-179-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># lvextend -L +2G /dev/mapper/df_vg1-df_lv01 </span>
<a id="__codelineno-179-2" name="__codelineno-179-2"></a>Size<span class="w"> </span>of<span class="w"> </span>logical<span class="w"> </span>volume<span class="w"> </span>df_vg1/df_lv01<span class="w"> </span>changed<span class="w"> </span>from<span class="w"> </span><span class="m">3</span>.00<span class="w"> </span>GiB<span class="w"> </span><span class="o">(</span><span class="m">768</span><span class="w"> </span>extents<span class="o">)</span><span class="w"> </span>
<a id="__codelineno-179-3" name="__codelineno-179-3"></a>to<span class="w"> </span><span class="m">5</span>.00<span class="w"> </span>GiB<span class="w"> </span><span class="o">(</span><span class="m">1280</span><span class="w"> </span>extents<span class="o">)</span>.<span class="w"> </span>
<a id="__codelineno-179-4" name="__codelineno-179-4"></a>Logical<span class="w"> </span>volume<span class="w"> </span>df_vg1/df_lv01<span class="w"> </span>successfully<span class="w"> </span>resized.<span class="w"> </span>
<a id="__codelineno-179-5" name="__codelineno-179-5"></a>-L<span class="w"> </span>10G<span class="w"> </span>将<span class="w"> </span>lv<span class="w"> </span>大小正好调整到<span class="w"> </span>10G<span class="w"> </span>
<a id="__codelineno-179-6" name="__codelineno-179-6"></a>-L<span class="w"> </span>+10G<span class="w"> </span>将<span class="w"> </span>lv<span class="w"> </span>增加<span class="w"> </span>10G<span class="w"> </span>
<a id="__codelineno-179-7" name="__codelineno-179-7"></a>-l<span class="w"> </span><span class="m">100</span><span class="w"> </span>将<span class="w"> </span>lv<span class="w"> </span>大小正好调整为<span class="w"> </span><span class="m">100</span><span class="w"> </span>个<span class="w"> </span>PE<span class="w"> </span>大小<span class="w"> </span>
<a id="__codelineno-179-8" name="__codelineno-179-8"></a>-l<span class="w"> </span>+100<span class="w"> </span>
<a id="__codelineno-179-9" name="__codelineno-179-9"></a>-l<span class="w"> </span>+50%FREE<span class="w"> </span>向<span class="w"> </span>lv<span class="w"> </span>中增加卷组剩余空间的<span class="w"> </span><span class="m">50</span>%<span class="w"> </span>
<a id="__codelineno-179-10" name="__codelineno-179-10"></a>使用-r<span class="w"> </span>选项可以一并扩展文件系统<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">2. </font></strong><strong><font style="color:rgb(0,0,0);">扩展文件系统 </font></strong></p>
<p><font style="color:rgb(223,64,42);">ext4 </font><font style="color:rgb(223,64,42);">文件系统扩展 </font></p>
<p><font style="color:rgb(223,64,42);">#resize2fs /dev/VG_NAME/LV_NAME </font></p>
<p><font style="color:rgb(223,64,42);">xfs </font><font style="color:rgb(223,64,42);">文件系统扩展 </font></p>
<p><font style="color:rgb(223,64,42);">#xfs_growfs /dev/VG_NAME/LV_NAME </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-180-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-180-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-180-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-180-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-180-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-180-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-180-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-180-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-180-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-180-10">10</a></span>
<span class="normal"><a href="#__codelineno-180-11">11</a></span>
<span class="normal"><a href="#__codelineno-180-12">12</a></span>
<span class="normal"><a href="#__codelineno-180-13">13</a></span>
<span class="normal"><a href="#__codelineno-180-14">14</a></span>
<span class="normal"><a href="#__codelineno-180-15">15</a></span>
<span class="normal"><a href="#__codelineno-180-16">16</a></span>
<span class="normal"><a href="#__codelineno-180-17">17</a></span>
<span class="normal"><a href="#__codelineno-180-18">18</a></span>
<span class="normal"><a href="#__codelineno-180-19">19</a></span>
<span class="normal"><a href="#__codelineno-180-20">20</a></span>
<span class="normal"><a href="#__codelineno-180-21">21</a></span>
<span class="normal"><a href="#__codelineno-180-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-180-1" name="__codelineno-180-1"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># xfs_growfs /dev/mapper/df_vg1-df_lv01 </span>
<a id="__codelineno-180-2" name="__codelineno-180-2"></a>meta-data<span class="o">=</span>/dev/mapper/df_vg1-df_lv01<span class="w"> </span><span class="nv">isize</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">agcount</span><span class="o">=</span><span class="m">4</span>,<span class="w"> </span><span class="nv">agsize</span><span class="o">=</span><span class="m">196608</span><span class="w"> </span><span class="nv">blks</span><span class="w"> </span>
<a id="__codelineno-180-3" name="__codelineno-180-3"></a><span class="o">=</span><span class="w"> </span><span class="nv">sectsz</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">attr</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">projid32bit</span><span class="o">=</span><span class="nv">1</span><span class="w"> </span>
<a id="__codelineno-180-4" name="__codelineno-180-4"></a><span class="o">=</span><span class="w"> </span><span class="nv">crc</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">finobt</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">spinodes</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-180-5" name="__codelineno-180-5"></a><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">786432</span>,<span class="w"> </span><span class="nv">imaxpct</span><span class="o">=</span><span class="nv">25</span><span class="w"> </span>
<a id="__codelineno-180-6" name="__codelineno-180-6"></a><span class="o">=</span><span class="w"> </span><span class="nv">sunit</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">swidth</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>blks<span class="w"> </span>
<a id="__codelineno-180-7" name="__codelineno-180-7"></a><span class="nv">naming</span><span class="w"> </span><span class="o">=</span>version<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span>ascii-ci<span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">ftype</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>
<a id="__codelineno-180-8" name="__codelineno-180-8"></a><span class="nv">log</span><span class="w"> </span><span class="o">=</span>internal<span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">2560</span>,<span class="w"> </span><span class="nv">version</span><span class="o">=</span><span class="nv">2</span><span class="w"> </span>
<a id="__codelineno-180-9" name="__codelineno-180-9"></a><span class="o">=</span><span class="w"> </span><span class="nv">sectsz</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">sunit</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>blks,<span class="w"> </span>lazy-count<span class="o">=</span><span class="m">1</span><span class="w"> </span>
<a id="__codelineno-180-10" name="__codelineno-180-10"></a><span class="nv">realtime</span><span class="w"> </span><span class="o">=</span>none<span class="w"> </span><span class="nv">extsz</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">rtextents</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>
<a id="__codelineno-180-11" name="__codelineno-180-11"></a>data<span class="w"> </span>blocks<span class="w"> </span>changed<span class="w"> </span>from<span class="w"> </span><span class="m">786432</span><span class="w"> </span>to<span class="w"> </span><span class="m">1310720</span><span class="w"> </span>
<a id="__codelineno-180-12" name="__codelineno-180-12"></a><span class="o">[</span>root@myth<span class="w"> </span>~<span class="o">]</span><span class="c1"># df -Th </span>
<a id="__codelineno-180-13" name="__codelineno-180-13"></a>Filesystem<span class="w"> </span>Type<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on<span class="w"> </span>
<a id="__codelineno-180-14" name="__codelineno-180-14"></a>/dev/mapper/rhel-root<span class="w"> </span>xfs<span class="w"> </span>20G<span class="w"> </span><span class="m">3</span>.4G<span class="w"> </span>16G<span class="w"> </span><span class="m">18</span>%<span class="w"> </span>/
<a id="__codelineno-180-15" name="__codelineno-180-15"></a>devtmpfs<span class="w"> </span>devtmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev
<a id="__codelineno-180-16" name="__codelineno-180-16"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev/shm
<a id="__codelineno-180-17" name="__codelineno-180-17"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span>13M<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/run
<a id="__codelineno-180-18" name="__codelineno-180-18"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/sys/fs/cgroup
<a id="__codelineno-180-19" name="__codelineno-180-19"></a>/dev/sda1<span class="w"> </span>xfs<span class="w"> </span>497M<span class="w"> </span>145M<span class="w"> </span>353M<span class="w"> </span><span class="m">30</span>%<span class="w"> </span>/boot
<a id="__codelineno-180-20" name="__codelineno-180-20"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span>378M<span class="w"> </span>36K<span class="w"> </span>378M<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/run/user/0
<a id="__codelineno-180-21" name="__codelineno-180-21"></a>/dev/sr0<span class="w"> </span>iso9660<span class="w"> </span><span class="m">4</span>.4G<span class="w"> </span><span class="m">4</span>.4G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">100</span>%<span class="w"> </span>/run/media/root/RHEL-7.5<span class="w"> </span>Server.x86_64
<a id="__codelineno-180-22" name="__codelineno-180-22"></a>/dev/mapper/df_vg1-df_lv01<span class="w"> </span>xfs<span class="w"> </span><span class="m">5</span>.0G<span class="w"> </span>33M<span class="w"> </span><span class="m">5</span>.0G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/home/myth/lv_dir
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">逻辑卷缩减： </font></strong></p>
<p><strong><font style="color:rgb(0,0,0);">缩减卷组： </font></strong></p>
<p><font style="color:rgb(223,64,42);">#pvmove /dev/sdb3 </font></p>
<p><font style="color:rgb(223,64,42);">#vgreduce VG_NAME /dev/sdb3 </font></p>
<p><strong><font style="color:rgb(0,0,0);">缩减逻辑卷： </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">1.</font></strong><strong><font style="color:rgb(57,57,57);">卸载文件系统 </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">2.</font></strong><strong><font style="color:rgb(57,57,57);">对文件系统进行检查 </font></strong></p>
<p><font style="color:rgb(223,64,42);">#e2fsck -f /dev/vg_name/lv_name </font></p>
<p><strong><font style="color:rgb(57,57,57);">3.</font></strong><strong><font style="color:rgb(57,57,57);">缩减文件系统 </font></strong></p>
<p><font style="color:rgb(223,64,42);">#resize2fs /dev/vg_name/lv_name 2G </font></p>
<p><strong><font style="color:rgb(57,57,57);">4.</font></strong><strong><font style="color:rgb(57,57,57);">缩减 </font></strong><strong><font style="color:rgb(57,57,57);">lv </font></strong></p>
<p><font style="color:rgb(223,64,42);">#lvreduce -L -1G /dev/vg_name/lv_name </font></p>
<p><strong><font style="color:rgb(57,57,57);">5.</font></strong><strong><font style="color:rgb(57,57,57);">重新挂载文件系统 </font></strong></p>
<p><font style="color:rgb(57,57,57);">注意：</font><font style="color:rgb(57,57,57);">xfs </font><font style="color:rgb(57,57,57);">文件系统不支持缩减 </font></p>
<p><strong><font style="color:rgb(0,0,0);">实施高级存储功能 </font></strong></p>
<p><strong><font style="color:rgb(0,0,0);">stratis： </font></strong></p>
<p><font style="color:rgb(0,0,0);">近年来出现了新一代的存储管理解决方案，称为卷管理文件系统，它可以在创建文件系统及 调整其大小时以动态、透明的方式来管理卷层。目前常见主流的一些存储技术有 LVM、 </font></p>
<p><font style="color:rgb(0,0,0);">Stratis</font><font style="color:rgb(0,0,0);">、</font><font style="color:rgb(0,0,0);">VDO</font><font style="color:rgb(0,0,0);">、</font><font style="color:rgb(0,0,0);">Gluster</font><font style="color:rgb(0,0,0);">、</font><font style="color:rgb(0,0,0);">Ceph </font><font style="color:rgb(0,0,0);">等。 </font></p>
<p><font style="color:rgb(0,0,0);">Stratis </font><font style="color:rgb(0,0,0);">是一个卷管理文件系统 </font><font style="color:rgb(0,0,0);">volume-managing filesystem</font><font style="color:rgb(0,0,0);">（</font><font style="color:rgb(0,0,0);">VMF</font><font style="color:rgb(0,0,0);">），类似于 </font><font style="color:rgb(0,0,0);">ZFS </font></p>
<p><font style="color:rgb(0,0,0);">（动态文件系统）和 </font><font style="color:rgb(0,0,0);">Btrfs</font><font style="color:rgb(0,0,0);">。它使用了存储</font><font style="color:rgb(0,0,0);">“</font><font style="color:rgb(0,0,0);">池</font><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">的核心思想，该思想被各种独立卷管理器 </font></p>
<p><font style="color:rgb(0,0,0);">采用。使用一个或多个硬盘（或分区）创建存储池，然后在存储池中创建卷 </font><font style="color:rgb(0,0,0);">volume</font><font style="color:rgb(0,0,0);">。与使 </font></p>
<p><font style="color:rgb(0,0,0);">用 </font><font style="color:rgb(0,0,0);">fdisk </font><font style="color:rgb(0,0,0);">或 </font><font style="color:rgb(0,0,0);">GParted </font><font style="color:rgb(0,0,0);">执行的传统硬盘分区不同，存储池中的卷分布无需用户指定。 </font></p>
<p><strong><font style="color:rgb(0,0,0);">Stratis </font></strong><strong><font style="color:rgb(0,0,0);">架构： </font></strong></p>
<p><font style="color:rgb(0,0,0);">Stratis 将磁盘设备放置于一个精简配置的共享池中，stratis 文件系统没有固定大小， 也不会预分配未使用的块空间。一个共享池中可以创建多个文件系统，文件系统类型为 xfs。 </font></p>
<p><font style="color:rgb(0,0,0);">因为在上文中提到，stratis 基于 xfs，默认为 xfs 系统。</font></p>
<p><img alt="" src="../../../../images/1717413087128-e0fdd6c3-c6bc-4627-a93b-d8cec056012c.png" /></p>
<p><font style="color:rgb(0,0,0);">这幅图中我们可以看到，几个硬盘转变为一个池，池化，而文件系统大小从池中来获取。 </font></p>
<p><font style="color:rgb(0,0,0);">那么 </font><font style="color:rgb(0,0,0);">Stratis </font><font style="color:rgb(0,0,0);">的优点是什么呢？ </font></p>
<p><font style="color:rgb(0,0,0);">stratis 注重文件系统的精简分配，可以实现我们用一个文件系统的时候不用指定任何大小。 </font></p>
<p><font style="color:rgb(0,0,0);">没有限制，精简分配。 </font></p>
<p><font style="color:rgb(0,0,0);">例如如图，我们把几块盘做成一个池，称之为池化。 </font></p>
<p><font style="color:rgb(0,0,0);">最大就是池的大小，也就是几块硬盘合起来之后的大小，只需要将池子创建出来，文件系统 </font></p>
<p><font style="color:rgb(0,0,0);">不需要指定大小，需要多大的空间，直接从池子里面取。 </font></p>
<p><strong><font style="color:rgb(0,0,0);">接下来，我们开始管理精简配置的文件系统： </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-181-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-181-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-181-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-181-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-181-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-181-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-181-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-181-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-181-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-181-10">10</a></span>
<span class="normal"><a href="#__codelineno-181-11">11</a></span>
<span class="normal"><a href="#__codelineno-181-12">12</a></span>
<span class="normal"><a href="#__codelineno-181-13">13</a></span>
<span class="normal"><a href="#__codelineno-181-14">14</a></span>
<span class="normal"><a href="#__codelineno-181-15">15</a></span>
<span class="normal"><a href="#__codelineno-181-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-181-1" name="__codelineno-181-1"></a>安装软件包<span class="w"> </span>
<a id="__codelineno-181-2" name="__codelineno-181-2"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># yum -y install stratis-cli.noarch stratisd.x86_64 </span>
<a id="__codelineno-181-3" name="__codelineno-181-3"></a>激活服务<span class="w"> </span>
<a id="__codelineno-181-4" name="__codelineno-181-4"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># systemctl start stratisd.service </span>
<a id="__codelineno-181-5" name="__codelineno-181-5"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># systemctl enable stratisd.service </span>
<a id="__codelineno-181-6" name="__codelineno-181-6"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis pool create pool01 /dev/sda #创建池，先以一 </span>
<a id="__codelineno-181-7" name="__codelineno-181-7"></a>块盘为例子。<span class="w"> </span>
<a id="__codelineno-181-8" name="__codelineno-181-8"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis pool list </span>
<a id="__codelineno-181-9" name="__codelineno-181-9"></a>Name<span class="w"> </span>
<a id="__codelineno-181-10" name="__codelineno-181-10"></a>Total<span class="w"> </span>Physical<span class="w"> </span>
<a id="__codelineno-181-11" name="__codelineno-181-11"></a>pool01<span class="w"> </span><span class="m">100</span><span class="w"> </span>GiB<span class="w"> </span>/<span class="w"> </span><span class="m">45</span>.66<span class="w"> </span>MiB<span class="w"> </span>/<span class="w"> </span><span class="m">99</span>.96<span class="w"> </span>GiB<span class="w"> </span>
<a id="__codelineno-181-12" name="__codelineno-181-12"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis blockdev list pool01 </span>
<a id="__codelineno-181-13" name="__codelineno-181-13"></a>Pool<span class="w"> </span>Name<span class="w"> </span>Device<span class="w"> </span>Node<span class="w"> </span>Physical<span class="w"> </span>Size<span class="w"> </span>Tier<span class="w"> </span>
<a id="__codelineno-181-14" name="__codelineno-181-14"></a>pool01<span class="w"> </span>
<a id="__codelineno-181-15" name="__codelineno-181-15"></a>/dev/sda<span class="w"> </span>
<a id="__codelineno-181-16" name="__codelineno-181-16"></a><span class="m">100</span><span class="w"> </span>GiB<span class="w"> </span>Data
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">#这两句命令的意思都是查看精简池的信息，但是因为是一块硬盘，所以显示的不是很明显，下面实验会看出来差别。 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-182-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-182-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-182-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-182-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-182-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-182-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-182-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-182-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-182-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-182-10">10</a></span>
<span class="normal"><a href="#__codelineno-182-11">11</a></span>
<span class="normal"><a href="#__codelineno-182-12">12</a></span>
<span class="normal"><a href="#__codelineno-182-13">13</a></span>
<span class="normal"><a href="#__codelineno-182-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-182-1" name="__codelineno-182-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis pool add-data pool01 /dev/sdb #往精简池里面添加一块盘，</span>
<a id="__codelineno-182-2" name="__codelineno-182-2"></a>增加池的容量。<span class="w"> </span>
<a id="__codelineno-182-3" name="__codelineno-182-3"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis pool list </span>
<a id="__codelineno-182-4" name="__codelineno-182-4"></a>Name<span class="w"> </span>
<a id="__codelineno-182-5" name="__codelineno-182-5"></a>Total<span class="w"> </span>Physical<span class="w"> </span>
<a id="__codelineno-182-6" name="__codelineno-182-6"></a>pool01<span class="w"> </span><span class="m">190</span><span class="w"> </span>GiB<span class="w"> </span>/<span class="w"> </span><span class="m">56</span>.09<span class="w"> </span>MiB<span class="w"> </span>/<span class="w"> </span><span class="m">189</span>.95<span class="w"> </span>GiB<span class="w"> </span>
<a id="__codelineno-182-7" name="__codelineno-182-7"></a>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis blockdev list pool01 </span>
<a id="__codelineno-182-8" name="__codelineno-182-8"></a>Pool<span class="w"> </span>Name<span class="w"> </span>Device<span class="w"> </span>Node<span class="w"> </span>Physical<span class="w"> </span>Size<span class="w"> </span>Tier<span class="w"> </span>
<a id="__codelineno-182-9" name="__codelineno-182-9"></a>pool01<span class="w"> </span>
<a id="__codelineno-182-10" name="__codelineno-182-10"></a>/dev/sda<span class="w"> </span>
<a id="__codelineno-182-11" name="__codelineno-182-11"></a><span class="m">100</span><span class="w"> </span>GiB<span class="w"> </span>Data<span class="w"> </span>
<a id="__codelineno-182-12" name="__codelineno-182-12"></a>pool01<span class="w"> </span>
<a id="__codelineno-182-13" name="__codelineno-182-13"></a>/dev/sdb<span class="w"> </span>
<a id="__codelineno-182-14" name="__codelineno-182-14"></a><span class="m">90</span><span class="w"> </span>GiB<span class="w"> </span>Data<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">#</font><font style="color:rgb(0,0,0);">这个时候就能看到，</font><font style="color:rgb(0,0,0);">list </font><font style="color:rgb(0,0,0);">是查看硬盘合起来后的精简池信息，而 </font><font style="color:rgb(0,0,0);">stratis blockdev </font></p>
<p><font style="color:rgb(0,0,0);">list pool01 </font><font style="color:rgb(0,0,0);">是查看精简池中的硬盘。 </font></p>
<p><font style="color:rgb(0,0,0);">此刻磁盘的池已经创建完成，接下来就是创建文件系统 </font></p>
<p><strong><font style="color:rgb(0,0,0);">创建文件系统 </font></strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-183-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-183-1" name="__codelineno-183-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis filesystem create pool01 fs01 #创建文件系统， </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">用 </font><font style="color:rgb(0,0,0);">pool01 </font><font style="color:rgb(0,0,0);">这个池来创建 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-184-1">1</a></span>
<span class="normal"><a href="#__codelineno-184-2">2</a></span>
<span class="normal"><a href="#__codelineno-184-3">3</a></span>
<span class="normal"><a href="#__codelineno-184-4">4</a></span>
<span class="normal"><a href="#__codelineno-184-5">5</a></span>
<span class="normal"><a href="#__codelineno-184-6">6</a></span>
<span class="normal"><a href="#__codelineno-184-7">7</a></span>
<span class="normal"><a href="#__codelineno-184-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-184-1" name="__codelineno-184-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis filesystem list </span>
<a id="__codelineno-184-2" name="__codelineno-184-2"></a>Pool<span class="w"> </span>Name<span class="w"> </span>
<a id="__codelineno-184-3" name="__codelineno-184-3"></a>Name<span class="w"> </span>
<a id="__codelineno-184-4" name="__codelineno-184-4"></a>Used<span class="w"> </span>
<a id="__codelineno-184-5" name="__codelineno-184-5"></a>Created<span class="w"> </span>
<a id="__codelineno-184-6" name="__codelineno-184-6"></a>Device<span class="w"> </span>
<a id="__codelineno-184-7" name="__codelineno-184-7"></a>UUID<span class="w"> </span>
<a id="__codelineno-184-8" name="__codelineno-184-8"></a>pool01<span class="w"> </span>fs01<span class="w"> </span><span class="m">546</span><span class="w"> </span>MiB<span class="w"> </span>Sep<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span><span class="m">00</span>:02<span class="w"> </span>/stratis/pool01/fs01<span class="w"> </span>0e06bfdb2f7c4d0e8c2552873c3500f9<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">#</font><font style="color:rgb(0,0,0);">可以发现，这个文件系统的大小，位置，</font><font style="color:rgb(0,0,0);">uuid </font><font style="color:rgb(0,0,0);">都已经自动创建成功，与 </font><font style="color:rgb(0,0,0);">lvm </font><font style="color:rgb(0,0,0);">相比节省了 </font></p>
<p><font style="color:rgb(0,0,0);">很多步骤。可以直接进行挂载，不需要再进行格式化，因为 </font><font style="color:rgb(0,0,0);">stratis </font><font style="color:rgb(0,0,0);">基于 </font><font style="color:rgb(0,0,0);">xfs</font><font style="color:rgb(0,0,0);">，所以文件 </font></p>
<p><font style="color:rgb(0,0,0);">系统默认为 </font><font style="color:rgb(0,0,0);">xfs </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-185-1">1</a></span>
<span class="normal"><a href="#__codelineno-185-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-185-1" name="__codelineno-185-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># mount /stratis/pool01/fs01 /data </span>
<a id="__codelineno-185-2" name="__codelineno-185-2"></a><span class="o">[</span>root@guochanghe<span class="w"> </span>~<span class="o">]</span><span class="c1"># df -TH </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">文件系统 类型 容量 已用 可用 已用</font><font style="color:rgb(0,0,0);">% </font><font style="color:rgb(0,0,0);">挂载点 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-186-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-186-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-186-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-186-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-186-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-186-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-186-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-186-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-186-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-186-10">10</a></span>
<span class="normal"><a href="#__codelineno-186-11">11</a></span>
<span class="normal"><a href="#__codelineno-186-12">12</a></span>
<span class="normal"><a href="#__codelineno-186-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-186-1" name="__codelineno-186-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># df -h </span>
<a id="__codelineno-186-2" name="__codelineno-186-2"></a>Filesystem<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on<span class="w"> </span>
<a id="__codelineno-186-3" name="__codelineno-186-3"></a>devtmpfs<span class="w"> </span>866M<span class="w"> </span><span class="m">0</span><span class="w"> </span>866M<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev<span class="w"> </span>
<a id="__codelineno-186-4" name="__codelineno-186-4"></a>tmpfs<span class="w"> </span>896M<span class="w"> </span><span class="m">0</span><span class="w"> </span>896M<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev/shm<span class="w"> </span>
<a id="__codelineno-186-5" name="__codelineno-186-5"></a>tmpfs<span class="w"> </span>896M<span class="w"> </span><span class="m">9</span>.8M<span class="w"> </span>886M<span class="w"> </span><span class="m">2</span>%<span class="w"> </span>/run<span class="w"> </span>
<a id="__codelineno-186-6" name="__codelineno-186-6"></a>tmpfs<span class="w"> </span>896M<span class="w"> </span><span class="m">0</span><span class="w"> </span>896M<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/sys/fs/cgroup<span class="w"> </span>
<a id="__codelineno-186-7" name="__codelineno-186-7"></a>/dev/mapper/rhel-root<span class="w"> </span>37G<span class="w"> </span><span class="m">4</span>.9G<span class="w"> </span>33G<span class="w"> </span><span class="m">14</span>%<span class="w"> </span>/<span class="w"> </span>
<a id="__codelineno-186-8" name="__codelineno-186-8"></a>/dev/sda1<span class="w"> </span>1014M<span class="w"> </span>240M<span class="w"> </span>775M<span class="w"> </span><span class="m">24</span>%<span class="w"> </span>/boot
<a id="__codelineno-186-9" name="__codelineno-186-9"></a>tmpfs<span class="w"> </span>179M<span class="w"> </span><span class="m">1</span>.2M<span class="w"> </span>178M<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/run/user/42
<a id="__codelineno-186-10" name="__codelineno-186-10"></a>tmpfs<span class="w"> </span>179M<span class="w"> </span><span class="m">4</span>.6M<span class="w"> </span>175M<span class="w"> </span><span class="m">3</span>%<span class="w"> </span>/run/user/0
<a id="__codelineno-186-11" name="__codelineno-186-11"></a>/dev/sr0<span class="w"> </span>fd8.9G<span class="w"> </span><span class="m">8</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">100</span>%<span class="w"> </span>/media
<a id="__codelineno-186-12" name="__codelineno-186-12"></a>/dev/mapper/stratis-1-219148f13a5b45239f9a22523dc6041f-thin-fs-d925f3ac6ca3477cadc7f7d
<a id="__codelineno-186-13" name="__codelineno-186-13"></a>a5d8705b9<span class="w"> </span><span class="m">1</span>.0T<span class="w"> </span><span class="m">7</span>.2G<span class="w"> </span>1017G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/data<span class="w"> </span><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1">#</span>
</code></pre></div></td></tr></table></div>
<p><strong><font style="color:rgb(0,0,0);">创建快照 </font></strong></p>
<p><font style="color:rgb(0,0,0);">在创建快照之前要先把挂载给卸载掉 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-187-1">1</a></span>
<span class="normal"><a href="#__codelineno-187-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-187-1" name="__codelineno-187-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis filesystem snapshot pool01 fs01 snap01 #创 </span>
<a id="__codelineno-187-2" name="__codelineno-187-2"></a>建快照<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-188-1">1</a></span>
<span class="normal"><a href="#__codelineno-188-2">2</a></span>
<span class="normal"><a href="#__codelineno-188-3">3</a></span>
<span class="normal"><a href="#__codelineno-188-4">4</a></span>
<span class="normal"><a href="#__codelineno-188-5">5</a></span>
<span class="normal"><a href="#__codelineno-188-6">6</a></span>
<span class="normal"><a href="#__codelineno-188-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-188-1" name="__codelineno-188-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis filesystem list pool01 </span>
<a id="__codelineno-188-2" name="__codelineno-188-2"></a>Pool<span class="w"> </span>Name<span class="w"> </span>Name<span class="w"> </span>Used<span class="w"> </span>Created<span class="w"> </span>Device<span class="w"> </span>UUID<span class="w"> </span>
<a id="__codelineno-188-3" name="__codelineno-188-3"></a>pool01<span class="w"> </span>fs01<span class="w"> </span><span class="m">546</span><span class="w"> </span>MiB<span class="w"> </span>Sep<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span><span class="m">00</span>:02<span class="w"> </span>/stratis/pool01/fs01<span class="w"> </span>
<a id="__codelineno-188-4" name="__codelineno-188-4"></a>0e06bfdb2f7c4d0e8c2552873c3500f9<span class="w"> </span>
<a id="__codelineno-188-5" name="__codelineno-188-5"></a>pool01<span class="w"> </span>
<a id="__codelineno-188-6" name="__codelineno-188-6"></a>snap01<span class="w"> </span><span class="m">546</span><span class="w"> </span>MiB<span class="w"> </span>Sep<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span>
<a id="__codelineno-188-7" name="__codelineno-188-7"></a><span class="m">00</span>:06<span class="w"> </span>/stratis/pool01/snap01<span class="w"> </span>3d181b5b95414b03bad283f711667968<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">#可以看到 这个快照和源文件有着同等的大小，甚至有着自己的路径。但是，stratis 和 lvm 快照的最大区别就是，lvm 的快照和源文件有一定的关系，而 stratis 的快照做好之 后，和之前的源文件就没有任何关系了。 </font></p>
<p><font style="color:rgb(0,0,0);">接下来进行恢复快照 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-189-1">1</a></span>
<span class="normal"><a href="#__codelineno-189-2">2</a></span>
<span class="normal"><a href="#__codelineno-189-3">3</a></span>
<span class="normal"><a href="#__codelineno-189-4">4</a></span>
<span class="normal"><a href="#__codelineno-189-5">5</a></span>
<span class="normal"><a href="#__codelineno-189-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-189-1" name="__codelineno-189-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis filesystem destroy pool01 fs01 #删除原文件系 </span>
<a id="__codelineno-189-2" name="__codelineno-189-2"></a>统<span class="w"> </span>
<a id="__codelineno-189-3" name="__codelineno-189-3"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis filesystem list pool01 </span>
<a id="__codelineno-189-4" name="__codelineno-189-4"></a>Pool<span class="w"> </span>Name<span class="w"> </span>Name<span class="w"> </span>Used<span class="w"> </span>Created<span class="w"> </span>Device<span class="w"> </span>UUID<span class="w"> </span>
<a id="__codelineno-189-5" name="__codelineno-189-5"></a>pool01<span class="w"> </span>snap01<span class="w"> </span><span class="m">546</span><span class="w"> </span>MiB<span class="w"> </span>Sep<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span>
<a id="__codelineno-189-6" name="__codelineno-189-6"></a><span class="m">00</span>:06<span class="w"> </span>/stratis/pool01/snap01<span class="w"> </span>3d181b5b95414b03bad283f711667968<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">#</font><font style="color:rgb(0,0,0);">查看，可以发现 </font><font style="color:rgb(0,0,0);">fs01 </font><font style="color:rgb(0,0,0);">没了 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-190-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-190-1" name="__codelineno-190-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis filesystem snapshot pool01 snap01 fs01 # </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">根据快照再创建出原文件系统 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-191-1">1</a></span>
<span class="normal"><a href="#__codelineno-191-2">2</a></span>
<span class="normal"><a href="#__codelineno-191-3">3</a></span>
<span class="normal"><a href="#__codelineno-191-4">4</a></span>
<span class="normal"><a href="#__codelineno-191-5">5</a></span>
<span class="normal"><a href="#__codelineno-191-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-191-1" name="__codelineno-191-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># stratis filesystem list pool01 </span>
<a id="__codelineno-191-2" name="__codelineno-191-2"></a>Pool<span class="w"> </span>Name<span class="w"> </span>Name<span class="w"> </span>Used<span class="w"> </span>Created<span class="w"> </span>Device<span class="w"> </span>UUID<span class="w"> </span>
<a id="__codelineno-191-3" name="__codelineno-191-3"></a>pool01<span class="w"> </span>snap01<span class="w"> </span><span class="m">546</span><span class="w"> </span>MiB<span class="w"> </span>Sep<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span>
<a id="__codelineno-191-4" name="__codelineno-191-4"></a><span class="m">00</span>:06<span class="w"> </span>/stratis/pool01/snap01<span class="w"> </span>3d181b5b95414b03bad283f711667968
<a id="__codelineno-191-5" name="__codelineno-191-5"></a>pool01<span class="w"> </span>fs01<span class="w"> </span><span class="m">546</span><span class="w"> </span>MiB<span class="w"> </span>Sep<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">2020</span>
<a id="__codelineno-191-6" name="__codelineno-191-6"></a><span class="m">00</span>:10<span class="w"> </span>/stratis/pool01/fs01<span class="w"> </span>4b309323e618460c9ec84bd37790176a
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">#</font><font style="color:rgb(0,0,0);">查看文件系统的信息。发现 </font><font style="color:rgb(0,0,0);">fs01 </font><font style="color:rgb(0,0,0);">回来了而且与原来没差别 </font></p>
<p><font style="color:rgb(0,0,0);">至此完成了恢复快照</font></p>
<p><strong><font style="color:rgb(0,0,0);">Vdo </font></strong><strong><font style="color:rgb(0,0,0);">高级存储功能： </font></strong></p>
<p><font style="color:rgb(0,0,0);">红帽企业 Linux8 使用 vdo 功能，可以优化块设备上数据空间占用问题，它可以减少块设备上的磁盘使用空间，同时最大限度减少数据重复，从而节省磁盘空间，甚至提高数据的吞吐量。 </font></p>
<p><font style="color:rgb(0,0,0);">Vdo </font><font style="color:rgb(0,0,0);">包含两个模块：</font><font style="color:rgb(0,0,0);">Kvdo </font><font style="color:rgb(0,0,0);">用于控制数据压缩，</font><font style="color:rgb(0,0,0);">uds </font><font style="color:rgb(0,0,0);">用于重复数据的删除。 </font></p>
<p><font style="color:rgb(0,0,0);">vdo 层位于现在块设备（RAID 或者本地磁盘）之上，存储层（如 LVM 和文件系统）位于vdo 之上。 </font></p>
<p><font style="color:rgb(0,0,0);">下图显示了 KVM 虚拟机架构中，vdo 所在的位置。</font></p>
<p><img alt="" src="../../../../images/1717413418995-5f80514e-6ccc-4c34-8cef-40b8efa469a4.png" /></p>
<p><font style="color:rgb(0,0,0);">对于 </font><font style="color:rgb(0,0,0);">Vdo </font><font style="color:rgb(0,0,0);">的重删压缩，是什么一个意思呢？ </font></p>
<p><font style="color:rgb(0,0,0);">比如 挂载到/data 上，这个目录上如果有重复的数据，那么 vdo 就可以对这个目录上重复的数据进行删除重复和压缩的。这个功能是默认的 </font></p>
<p><font style="color:rgb(0,0,0);">关于 </font><font style="color:rgb(0,0,0);">vdo </font><font style="color:rgb(0,0,0);">的特性说明： </font></p>
<p><font style="color:rgb(0,0,0);">1、利用 vdo 创建的逻辑设备成为 vdo 卷，vdo 卷与磁盘类似，可以将这些卷格式化为所需要的文件系统类型。此外,还可以将 vdo 卷用作 LVM 物理卷。 </font></p>
<p><font style="color:rgb(0,0,0);">2、在创建 vdo 卷时, 可以指定块设备，以及 vdo 向用户显示的逻辑设备的名称。也可以指定 vdo 卷的逻辑大小，vdo 卷的逻辑大小可以大于实际块设备的物理大小。 </font></p>
<p><font style="color:rgb(0,0,0);">3、如果未指定逻辑大小， 则 vdo 会将实际物理大小视为卷的逻辑大小，这种方式有利于提高性能，但是会降低存储空间的使用效率，应视情况而定。由于 vdo 卷采用了精简配置, </font></p>
<p><font style="color:rgb(0,0,0);">因此用户只能看到正在使用的逻辑空间，而无法了解实际可用的物理空间。 </font></p>
<p><font style="color:rgb(0,0,0);">4、vdo 卷的逻辑大小超过实际物理大小， 应使用 vdostatus -verbose 命令查看实际使用情况。</font></p>
<p><strong><font style="color:rgb(0,0,0);">配置过程： </font></strong></p>
<p><font style="color:rgb(0,0,0);">首先安装 </font><font style="color:rgb(0,0,0);">vdo </font><font style="color:rgb(0,0,0);">的软件包 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-192-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-192-1" name="__codelineno-192-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># yum -y install vdo kmod-kvdo #RHEL8 系统中默认已安装 </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">创建 vdo 卷</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-193-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-193-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-193-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-193-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-193-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-193-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-193-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-193-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-193-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-193-10">10</a></span>
<span class="normal"><a href="#__codelineno-193-11">11</a></span>
<span class="normal"><a href="#__codelineno-193-12">12</a></span>
<span class="normal"><a href="#__codelineno-193-13">13</a></span>
<span class="normal"><a href="#__codelineno-193-14">14</a></span>
<span class="normal"><a href="#__codelineno-193-15">15</a></span>
<span class="normal"><a href="#__codelineno-193-16">16</a></span>
<span class="normal"><a href="#__codelineno-193-17">17</a></span>
<span class="normal"><a href="#__codelineno-193-18">18</a></span>
<span class="normal"><a href="#__codelineno-193-19">19</a></span>
<span class="normal"><a href="#__codelineno-193-20">20</a></span>
<span class="normal"><a href="#__codelineno-193-21">21</a></span>
<span class="normal"><a href="#__codelineno-193-22">22</a></span>
<span class="normal"><a href="#__codelineno-193-23">23</a></span>
<span class="normal"><a href="#__codelineno-193-24">24</a></span>
<span class="normal"><a href="#__codelineno-193-25">25</a></span>
<span class="normal"><a href="#__codelineno-193-26">26</a></span>
<span class="normal"><a href="#__codelineno-193-27">27</a></span>
<span class="normal"><a href="#__codelineno-193-28">28</a></span>
<span class="normal"><a href="#__codelineno-193-29">29</a></span>
<span class="normal"><a href="#__codelineno-193-30">30</a></span>
<span class="normal"><a href="#__codelineno-193-31">31</a></span>
<span class="normal"><a href="#__codelineno-193-32">32</a></span>
<span class="normal"><a href="#__codelineno-193-33">33</a></span>
<span class="normal"><a href="#__codelineno-193-34">34</a></span>
<span class="normal"><a href="#__codelineno-193-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-193-1" name="__codelineno-193-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># vdo create --name=vdo0 --device /dev/sdc</span>
<a id="__codelineno-193-2" name="__codelineno-193-2"></a>--vdoLogicalSize<span class="o">=</span>20G<span class="w"> </span><span class="c1">#创建一个 20G 的 VDO 卷</span>
<a id="__codelineno-193-3" name="__codelineno-193-3"></a>Creating<span class="w"> </span>VDO<span class="w"> </span>vdo0
<a id="__codelineno-193-4" name="__codelineno-193-4"></a>The<span class="w"> </span>VDO<span class="w"> </span>volume<span class="w"> </span>can<span class="w"> </span>address<span class="w"> </span><span class="m">76</span><span class="w"> </span>GB<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">38</span><span class="w"> </span>data<span class="w"> </span>slabs,<span class="w"> </span>each<span class="w"> </span><span class="m">2</span><span class="w"> </span>GB.
<a id="__codelineno-193-5" name="__codelineno-193-5"></a>It<span class="w"> </span>can<span class="w"> </span>grow<span class="w"> </span>to<span class="w"> </span>address<span class="w"> </span>at<span class="w"> </span>mostof<span class="w"> </span>physical<span class="w"> </span>storage<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">8192</span><span class="w"> </span>slabs.
<a id="__codelineno-193-6" name="__codelineno-193-6"></a>If<span class="w"> </span>a<span class="w"> </span>larger<span class="w"> </span>maximum<span class="w"> </span>size<span class="w"> </span>might<span class="w"> </span>be<span class="w"> </span>needed,<span class="w"> </span>use<span class="w"> </span>bigger<span class="w"> </span>slabs.
<a id="__codelineno-193-7" name="__codelineno-193-7"></a>Starting<span class="w"> </span>VDO<span class="w"> </span>vdo0
<a id="__codelineno-193-8" name="__codelineno-193-8"></a>Starting<span class="w"> </span>compression<span class="w"> </span>on<span class="w"> </span>VDO<span class="w"> </span>vdo0
<a id="__codelineno-193-9" name="__codelineno-193-9"></a>VDO<span class="w"> </span>instance<span class="w"> </span><span class="m">0</span><span class="w"> </span>volume<span class="w"> </span>is<span class="w"> </span>ready<span class="w"> </span>at<span class="w"> </span>/dev/mapper/vdo0
<a id="__codelineno-193-10" name="__codelineno-193-10"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># vdo list 查看 vdo 卷</span>
<a id="__codelineno-193-11" name="__codelineno-193-11"></a>vdo0
<a id="__codelineno-193-12" name="__codelineno-193-12"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># vdostats --human-readable #用 vdostatus 来查看卷的状</span>
<a id="__codelineno-193-13" name="__codelineno-193-13"></a>态
<a id="__codelineno-193-14" name="__codelineno-193-14"></a>Device<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Available<span class="w"> </span>Use%<span class="w"> </span>Space
<a id="__codelineno-193-15" name="__codelineno-193-15"></a>saving%
<a id="__codelineno-193-16" name="__codelineno-193-16"></a>/dev/mapper/vdo0<span class="w"> </span><span class="m">80</span>.0G<span class="w"> </span><span class="m">4</span>.1G<span class="w"> </span><span class="m">75</span>.9G<span class="w"> </span><span class="m">5</span>%
<a id="__codelineno-193-17" name="__codelineno-193-17"></a>N/A
<a id="__codelineno-193-18" name="__codelineno-193-18"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># mkfs.xfs -K /dev/mapper/vdo0 #将 vdo 格式化为 xfs 文件</span>
<a id="__codelineno-193-19" name="__codelineno-193-19"></a>系统
<a id="__codelineno-193-20" name="__codelineno-193-20"></a>meta-data<span class="o">=</span>/dev/mapper/vdo0<span class="w"> </span><span class="nv">isize</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">agcount</span><span class="o">=</span><span class="m">4</span>,
<a id="__codelineno-193-21" name="__codelineno-193-21"></a><span class="nv">agsize</span><span class="o">=</span><span class="m">1310720</span><span class="w"> </span><span class="nv">blks</span>
<a id="__codelineno-193-22" name="__codelineno-193-22"></a><span class="o">=</span><span class="w"> </span><span class="nv">sectsz</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">attr</span><span class="o">=</span><span class="m">2</span>,
<a id="__codelineno-193-23" name="__codelineno-193-23"></a><span class="nv">projid32bit</span><span class="o">=</span><span class="nv">1</span>
<a id="__codelineno-193-24" name="__codelineno-193-24"></a><span class="o">=</span><span class="w"> </span><span class="nv">crc</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">finobt</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">sparse</span><span class="o">=</span><span class="m">1</span>,
<a id="__codelineno-193-25" name="__codelineno-193-25"></a><span class="nv">rmapbt</span><span class="o">=</span><span class="nv">0</span>
<a id="__codelineno-193-26" name="__codelineno-193-26"></a><span class="o">=</span><span class="w"> </span><span class="nv">reflink</span><span class="o">=</span><span class="m">1</span>
<a id="__codelineno-193-27" name="__codelineno-193-27"></a><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">5242880</span>,
<a id="__codelineno-193-28" name="__codelineno-193-28"></a><span class="nv">imaxpct</span><span class="o">=</span><span class="nv">25</span>
<a id="__codelineno-193-29" name="__codelineno-193-29"></a><span class="o">=</span><span class="w"> </span><span class="nv">sunit</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">swidth</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>blks
<a id="__codelineno-193-30" name="__codelineno-193-30"></a><span class="nv">naming</span><span class="w"> </span><span class="o">=</span>version<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span>ascii-ci<span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">ftype</span><span class="o">=</span><span class="m">1</span>
<a id="__codelineno-193-31" name="__codelineno-193-31"></a><span class="nv">log</span><span class="w"> </span><span class="o">=</span>internal<span class="w"> </span>log<span class="w"> </span><span class="nv">bsize</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">2560</span>,
<a id="__codelineno-193-32" name="__codelineno-193-32"></a><span class="nv">version</span><span class="o">=</span><span class="nv">2</span>
<a id="__codelineno-193-33" name="__codelineno-193-33"></a><span class="o">=</span><span class="w"> </span><span class="nv">sectsz</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">sunit</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>blks,
<a id="__codelineno-193-34" name="__codelineno-193-34"></a>lazy-count<span class="o">=</span><span class="m">1</span>
<a id="__codelineno-193-35" name="__codelineno-193-35"></a><span class="nv">realtime</span><span class="w"> </span><span class="o">=</span>none<span class="w"> </span><span class="nv">extsz</span><span class="o">=</span><span class="m">4096</span><span class="w"> </span><span class="nv">blocks</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">rtextents</span><span class="o">=</span><span class="m">0</span>
</code></pre></div></td></tr></table></div>
<h1 id="mkfsxfs--k-选项可以防止文件系统中未使用的块被立即丢弃这样可以让命令更快的">mkfs.xfs -K 选项可以防止文件系统中未使用的块被立即丢弃，这样可以让命令更快的<a class="headerlink" href="#mkfsxfs--k-选项可以防止文件系统中未使用的块被立即丢弃这样可以让命令更快的" title="Permanent link">&para;</a></h1>
<p>返回</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-194-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-194-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-194-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-194-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-194-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-194-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-194-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-194-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-194-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-194-10">10</a></span>
<span class="normal"><a href="#__codelineno-194-11">11</a></span>
<span class="normal"><a href="#__codelineno-194-12">12</a></span>
<span class="normal"><a href="#__codelineno-194-13">13</a></span>
<span class="normal"><a href="#__codelineno-194-14">14</a></span>
<span class="normal"><a href="#__codelineno-194-15">15</a></span>
<span class="normal"><a href="#__codelineno-194-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-194-1" name="__codelineno-194-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># udevadm settle #注册新的设备节点</span>
<a id="__codelineno-194-2" name="__codelineno-194-2"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>/<span class="o">]</span><span class="c1"># mkdir /vdofile</span>
<a id="__codelineno-194-3" name="__codelineno-194-3"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>/<span class="o">]</span><span class="c1"># mount /dev/mapper/vdo0 /vdofile/ #挂载在 file01 目录</span>
<a id="__codelineno-194-4" name="__codelineno-194-4"></a>上
<a id="__codelineno-194-5" name="__codelineno-194-5"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>/<span class="o">]</span><span class="c1"># df -h</span>
<a id="__codelineno-194-6" name="__codelineno-194-6"></a>Filesystem<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on
<a id="__codelineno-194-7" name="__codelineno-194-7"></a>devtmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev
<a id="__codelineno-194-8" name="__codelineno-194-8"></a>tmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev/shm
<a id="__codelineno-194-9" name="__codelineno-194-9"></a>tmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">9</span>.7M<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/run
<a id="__codelineno-194-10" name="__codelineno-194-10"></a>tmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/sys/fs/cgroup
<a id="__codelineno-194-11" name="__codelineno-194-11"></a>/dev/mapper/rhel-root<span class="w"> </span>50G<span class="w"> </span>33G<span class="w"> </span>18G<span class="w"> </span><span class="m">65</span>%<span class="w"> </span>/
<a id="__codelineno-194-12" name="__codelineno-194-12"></a>/dev/mapper/rhel-home<span class="w"> </span>46G<span class="w"> </span>354M<span class="w"> </span>45G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/home
<a id="__codelineno-194-13" name="__codelineno-194-13"></a>/dev/nvme0n1p1<span class="w"> </span>1014M<span class="w"> </span>229M<span class="w"> </span>786M<span class="w"> </span><span class="m">23</span>%<span class="w"> </span>/boot
<a id="__codelineno-194-14" name="__codelineno-194-14"></a>tmpfs<span class="w"> </span>376M<span class="w"> </span><span class="m">1</span>.2M<span class="w"> </span>375M<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/run/user/42
<a id="__codelineno-194-15" name="__codelineno-194-15"></a>tmpfs<span class="w"> </span>376M<span class="w"> </span><span class="m">4</span>.0K<span class="w"> </span>376M<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/run/user/0
<a id="__codelineno-194-16" name="__codelineno-194-16"></a>/dev/mapper/vdo0<span class="w"> </span>20G<span class="w"> </span>176M<span class="w"> </span>20G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/vdofile
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">#这个是逻辑上的空间</font></p>
<p><font style="color:rgb(0,0,0);">现在进行重复数据删除和压缩的功能 </font></p>
<p><font style="color:rgb(0,0,0);">使用 </font><font style="color:rgb(0,0,0);">dd </font><font style="color:rgb(0,0,0);">创建一个文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-195-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-195-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-195-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-195-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-195-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-195-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-195-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-195-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-195-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-195-10">10</a></span>
<span class="normal"><a href="#__codelineno-195-11">11</a></span>
<span class="normal"><a href="#__codelineno-195-12">12</a></span>
<span class="normal"><a href="#__codelineno-195-13">13</a></span>
<span class="normal"><a href="#__codelineno-195-14">14</a></span>
<span class="normal"><a href="#__codelineno-195-15">15</a></span>
<span class="normal"><a href="#__codelineno-195-16">16</a></span>
<span class="normal"><a href="#__codelineno-195-17">17</a></span>
<span class="normal"><a href="#__codelineno-195-18">18</a></span>
<span class="normal"><a href="#__codelineno-195-19">19</a></span>
<span class="normal"><a href="#__codelineno-195-20">20</a></span>
<span class="normal"><a href="#__codelineno-195-21">21</a></span>
<span class="normal"><a href="#__codelineno-195-22">22</a></span>
<span class="normal"><a href="#__codelineno-195-23">23</a></span>
<span class="normal"><a href="#__codelineno-195-24">24</a></span>
<span class="normal"><a href="#__codelineno-195-25">25</a></span>
<span class="normal"><a href="#__codelineno-195-26">26</a></span>
<span class="normal"><a href="#__codelineno-195-27">27</a></span>
<span class="normal"><a href="#__codelineno-195-28">28</a></span>
<span class="normal"><a href="#__codelineno-195-29">29</a></span>
<span class="normal"><a href="#__codelineno-195-30">30</a></span>
<span class="normal"><a href="#__codelineno-195-31">31</a></span>
<span class="normal"><a href="#__codelineno-195-32">32</a></span>
<span class="normal"><a href="#__codelineno-195-33">33</a></span>
<span class="normal"><a href="#__codelineno-195-34">34</a></span>
<span class="normal"><a href="#__codelineno-195-35">35</a></span>
<span class="normal"><a href="#__codelineno-195-36">36</a></span>
<span class="normal"><a href="#__codelineno-195-37">37</a></span>
<span class="normal"><a href="#__codelineno-195-38">38</a></span>
<span class="normal"><a href="#__codelineno-195-39">39</a></span>
<span class="normal"><a href="#__codelineno-195-40">40</a></span>
<span class="normal"><a href="#__codelineno-195-41">41</a></span>
<span class="normal"><a href="#__codelineno-195-42">42</a></span>
<span class="normal"><a href="#__codelineno-195-43">43</a></span>
<span class="normal"><a href="#__codelineno-195-44">44</a></span>
<span class="normal"><a href="#__codelineno-195-45">45</a></span>
<span class="normal"><a href="#__codelineno-195-46">46</a></span>
<span class="normal"><a href="#__codelineno-195-47">47</a></span>
<span class="normal"><a href="#__codelineno-195-48">48</a></span>
<span class="normal"><a href="#__codelineno-195-49">49</a></span>
<span class="normal"><a href="#__codelineno-195-50">50</a></span>
<span class="normal"><a href="#__codelineno-195-51">51</a></span>
<span class="normal"><a href="#__codelineno-195-52">52</a></span>
<span class="normal"><a href="#__codelineno-195-53">53</a></span>
<span class="normal"><a href="#__codelineno-195-54">54</a></span>
<span class="normal"><a href="#__codelineno-195-55">55</a></span>
<span class="normal"><a href="#__codelineno-195-56">56</a></span>
<span class="normal"><a href="#__codelineno-195-57">57</a></span>
<span class="normal"><a href="#__codelineno-195-58">58</a></span>
<span class="normal"><a href="#__codelineno-195-59">59</a></span>
<span class="normal"><a href="#__codelineno-195-60">60</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-195-1" name="__codelineno-195-1"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># dd if=/dev/urandom of=/root/vdofile bs=1M count=2048</span>
<a id="__codelineno-195-2" name="__codelineno-195-2"></a>或者使用<span class="w"> </span>Xftp<span class="w"> </span>上传一个文件
<a id="__codelineno-195-3" name="__codelineno-195-3"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>vdofile<span class="o">]</span><span class="c1"># ls</span>
<a id="__codelineno-195-4" name="__codelineno-195-4"></a>rhel3-workstation-vda-10G-8.0-20190521.qcow2
<a id="__codelineno-195-5" name="__codelineno-195-5"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>vdofile<span class="o">]</span><span class="c1"># ll -h</span>
<a id="__codelineno-195-6" name="__codelineno-195-6"></a>rhel3-workstation-vda-10G-8.0-20190521.qcow2
<a id="__codelineno-195-7" name="__codelineno-195-7"></a>-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">2</span>.1G<span class="w"> </span>Sep<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">00</span>:43
<a id="__codelineno-195-8" name="__codelineno-195-8"></a>rhel3-workstation-vda-10G-8.0-20190521.qcow2
<a id="__codelineno-195-9" name="__codelineno-195-9"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>vdofile<span class="o">]</span><span class="c1"># vdostats --human-readable</span>
<a id="__codelineno-195-10" name="__codelineno-195-10"></a>Device<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Available<span class="w"> </span>Use%<span class="w"> </span>Space
<a id="__codelineno-195-11" name="__codelineno-195-11"></a>saving%
<a id="__codelineno-195-12" name="__codelineno-195-12"></a>/dev/mapper/vdo0<span class="w"> </span><span class="m">80</span>.0G<span class="w"> </span><span class="m">9</span>.0G<span class="w"> </span><span class="m">71</span>.0G<span class="w"> </span><span class="m">11</span>%
<a id="__codelineno-195-13" name="__codelineno-195-13"></a><span class="m">1</span>%
<a id="__codelineno-195-14" name="__codelineno-195-14"></a><span class="c1">#上传第一个文件后的物理空间</span>
<a id="__codelineno-195-15" name="__codelineno-195-15"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>vdofile<span class="o">]</span><span class="c1"># df -Th /vdofile/</span>
<a id="__codelineno-195-16" name="__codelineno-195-16"></a>Filesystem<span class="w"> </span>Type<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on
<a id="__codelineno-195-17" name="__codelineno-195-17"></a>/dev/mapper/vdo0<span class="w"> </span>xfs<span class="w"> </span>20G<span class="w"> </span><span class="m">2</span>.3G<span class="w"> </span>18G<span class="w"> </span><span class="m">12</span>%<span class="w"> </span>/vdofile
<a id="__codelineno-195-18" name="__codelineno-195-18"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>vdofile<span class="o">]</span><span class="c1"># mv</span>
<a id="__codelineno-195-19" name="__codelineno-195-19"></a>rhel3-workstation-vda-10G-8.0-20190521.qcow2
<a id="__codelineno-195-20" name="__codelineno-195-20"></a>rhel-workstation-bak.qcow2
<a id="__codelineno-195-21" name="__codelineno-195-21"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>vdofile<span class="o">]</span><span class="c1"># ls</span>
<a id="__codelineno-195-22" name="__codelineno-195-22"></a>rhel-workstation-bak.qcow2
<a id="__codelineno-195-23" name="__codelineno-195-23"></a><span class="c1">#改个名字，使用 Xftp 再进行上传一次相等的数据。</span>
<a id="__codelineno-195-24" name="__codelineno-195-24"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>vdofile<span class="o">]</span><span class="c1"># ls</span>
<a id="__codelineno-195-25" name="__codelineno-195-25"></a>rhel3-workstation-vda-10G-8.0-20190521.qcow2<span class="w"> </span>rhel-workstation-ba
<a id="__codelineno-195-26" name="__codelineno-195-26"></a>k.qcow2
<a id="__codelineno-195-27" name="__codelineno-195-27"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>vdofile<span class="o">]</span><span class="c1"># df -Th /vdofile/</span>
<a id="__codelineno-195-28" name="__codelineno-195-28"></a>Filesystem<span class="w"> </span>Type<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on
<a id="__codelineno-195-29" name="__codelineno-195-29"></a>/dev/mapper/vdo0<span class="w"> </span>xfs<span class="w"> </span>20G<span class="w"> </span><span class="m">4</span>.3G<span class="w"> </span>16G<span class="w"> </span><span class="m">22</span>%<span class="w"> </span>/vdofile
<a id="__codelineno-195-30" name="__codelineno-195-30"></a><span class="c1">#可以看到，两个文件都占用了逻辑空间。</span>
<a id="__codelineno-195-31" name="__codelineno-195-31"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>vdofile<span class="o">]</span><span class="c1"># vdostats --human-readable</span>
<a id="__codelineno-195-32" name="__codelineno-195-32"></a>Device<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Available<span class="w"> </span>Use%<span class="w"> </span>Space
<a id="__codelineno-195-33" name="__codelineno-195-33"></a>saving%
<a id="__codelineno-195-34" name="__codelineno-195-34"></a>/dev/mapper/vdo0<span class="w"> </span><span class="m">80</span>.0G<span class="w"> </span><span class="m">9</span>.0G<span class="w"> </span><span class="m">71</span>.0G<span class="w"> </span><span class="m">11</span>%<span class="w"> </span><span class="m">42</span>%
<a id="__codelineno-195-35" name="__codelineno-195-35"></a><span class="c1">#但是可以看到，物理空间几乎没有变化。</span>
<a id="__codelineno-195-36" name="__codelineno-195-36"></a>vdo<span class="w"> </span>的重复删除，其实有点类似于百度网盘，传进来之后进行计算，如果重复了就删除。
<a id="__codelineno-195-37" name="__codelineno-195-37"></a>Vdo<span class="w"> </span>的永久挂载
<a id="__codelineno-195-38" name="__codelineno-195-38"></a>vdo<span class="w"> </span>的永久挂载，其实和普通的永久挂载不一样。需要在<span class="w"> </span>defaults<span class="w"> </span>后面加
<a id="__codelineno-195-39" name="__codelineno-195-39"></a>上<span class="w"> </span>,x-systemd.requires<span class="o">=</span>vdo.service
<a id="__codelineno-195-40" name="__codelineno-195-40"></a>挂载选项<span class="w"> </span>,x-systemd.requires<span class="o">=</span>vdo.service<span class="w"> </span>意思为可延迟挂在文件系统，直到
<a id="__codelineno-195-41" name="__codelineno-195-41"></a>vdo.service<span class="w"> </span>启动为止。
<a id="__codelineno-195-42" name="__codelineno-195-42"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># vim /etc/fstab</span>
<a id="__codelineno-195-43" name="__codelineno-195-43"></a>/dev/mapper/vdo0<span class="w"> </span>/vdofile<span class="w"> </span>xfs
<a id="__codelineno-195-44" name="__codelineno-195-44"></a>defaults,x-systemd.requires<span class="o">=</span>vdo.service<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<a id="__codelineno-195-45" name="__codelineno-195-45"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># mount -a</span>
<a id="__codelineno-195-46" name="__codelineno-195-46"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># df -Th</span>
<a id="__codelineno-195-47" name="__codelineno-195-47"></a>Filesystem<span class="w"> </span>Type<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on
<a id="__codelineno-195-48" name="__codelineno-195-48"></a>devtmpfs<span class="w"> </span>devtmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev
<a id="__codelineno-195-49" name="__codelineno-195-49"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>/dev/shm
<a id="__codelineno-195-50" name="__codelineno-195-50"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">9</span>.7M<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/run
<a id="__codelineno-195-51" name="__codelineno-195-51"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>.9G<span class="w"> </span><span class="m">0</span>%
<a id="__codelineno-195-52" name="__codelineno-195-52"></a>/sys/fs/cgroup
<a id="__codelineno-195-53" name="__codelineno-195-53"></a>/dev/mapper/rhel-root<span class="w"> </span>xfs<span class="w"> </span>50G<span class="w"> </span>33G<span class="w"> </span>18G<span class="w"> </span><span class="m">65</span>%<span class="w"> </span>/
<a id="__codelineno-195-54" name="__codelineno-195-54"></a>/dev/mapper/rhel-home<span class="w"> </span>xfs<span class="w"> </span>46G<span class="w"> </span>354M<span class="w"> </span>45G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/home
<a id="__codelineno-195-55" name="__codelineno-195-55"></a>/dev/nvme0n1p1<span class="w"> </span>xfs<span class="w"> </span>1014M<span class="w"> </span>229M<span class="w"> </span>786M<span class="w"> </span><span class="m">23</span>%<span class="w"> </span>/boot
<a id="__codelineno-195-56" name="__codelineno-195-56"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span>376M<span class="w"> </span><span class="m">1</span>.2M<span class="w"> </span>375M<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/run/user/42
<a id="__codelineno-195-57" name="__codelineno-195-57"></a>tmpfs<span class="w"> </span>tmpfs<span class="w"> </span>376M<span class="w"> </span><span class="m">4</span>.0K<span class="w"> </span>376M<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/run/user/0
<a id="__codelineno-195-58" name="__codelineno-195-58"></a>/dev/mapper/vdo0<span class="w"> </span>xfs<span class="w"> </span>20G<span class="w"> </span><span class="m">6</span>.4G<span class="w"> </span>14G<span class="w"> </span><span class="m">32</span>%<span class="w"> </span>/vdofile
<a id="__codelineno-195-59" name="__codelineno-195-59"></a>可以正常挂载，重启测试
<a id="__codelineno-195-60" name="__codelineno-195-60"></a><span class="o">[</span>root@RHEL8<span class="w"> </span>~<span class="o">]</span><span class="c1"># reboot</span>
</code></pre></div></td></tr></table></div>
<h1 id="nfs网络文件系统">NFS网络文件系统<a class="headerlink" href="#nfs网络文件系统" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">概述： </font></p>
<p><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">（</font><font style="color:rgb(0,0,0);">Network File System</font><font style="color:rgb(0,0,0);">）：网络文件共享系统，架构方式为</font><font style="color:rgb(0,0,0);">c/s</font><font style="color:rgb(0,0,0);">架构。 </font></p>
<p><font style="color:rgb(0,0,0);">由</font><font style="color:rgb(0,0,0);">SUN</font><font style="color:rgb(0,0,0);">公司研发的</font><font style="color:rgb(0,0,0);">unix</font><font style="color:rgb(0,0,0);">表示层协议</font><font style="color:rgb(0,0,0);">(presentation layer protocol)</font><font style="color:rgb(0,0,0);">，能让使用者访问网络上别 </font></p>
<p><font style="color:rgb(0,0,0);">处的文件就像在使用自己的计算机一样</font><font style="color:rgb(0,0,0);">.nfs</font><font style="color:rgb(0,0,0);">也是一个非常稳定，可移植的网络文件系统 </font></p>
<p><font style="color:rgb(0,0,0);">特点： </font></p>
<p><font style="color:rgb(0,0,0);">1</font><font style="color:rgb(0,0,0);">）提供透明问访问以及文件传输 </font></p>
<p><font style="color:rgb(0,0,0);">2</font><font style="color:rgb(0,0,0);">）容易扩充新的资源或软件，不需要改变现有的工作环境 </font></p>
<p><font style="color:rgb(0,0,0);">3</font><font style="color:rgb(0,0,0);">）高性能，可灵活配置 </font></p>
<p><font style="color:rgb(0,0,0);">作用：通过网络让不同的机器系统之间可以彼此共享文件和目录 </font></p>
<p><font style="color:rgb(0,0,0);">原理： </font></p>
<p><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">是网络文件共享，那么</font><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">是通过</font><font style="color:rgb(0,0,0);">network</font><font style="color:rgb(0,0,0);">来进行</font><font style="color:rgb(0,0,0);">server</font><font style="color:rgb(0,0,0);">与</font><font style="color:rgb(0,0,0);">client</font><font style="color:rgb(0,0,0);">之间的数据传输。也就需要相 </font></p>
<p><font style="color:rgb(0,0,0);">对应的端口。而这个端口是由</font><font style="color:rgb(0,0,0);">RPC(Remote Procedure Call)</font><font style="color:rgb(0,0,0);">来管理和调用的，</font><font style="color:rgb(0,0,0);">RPC</font><font style="color:rgb(0,0,0);">使得</font><font style="color:rgb(0,0,0);">client</font><font style="color:rgb(0,0,0);">可以调 </font></p>
<p><font style="color:rgb(0,0,0);">用</font><font style="color:rgb(0,0,0);">server</font><font style="color:rgb(0,0,0);">的函数。 </font></p>
<p><font style="color:rgb(0,0,0);">由于有 </font><font style="color:rgb(0,0,0);">VFS </font><font style="color:rgb(0,0,0);">的存在，</font><font style="color:rgb(0,0,0);">client</font><font style="color:rgb(0,0,0);">可以像使用其它普通文件系统一样使用 </font><font style="color:rgb(0,0,0);">NFS </font><font style="color:rgb(0,0,0);">。经过</font><font style="color:rgb(0,0,0);">os</font><font style="color:rgb(0,0,0);">的内核，将 </font><font style="color:rgb(0,0,0);">NFS </font></p>
<p><font style="color:rgb(0,0,0);">的调用请求通过 </font><font style="color:rgb(0,0,0);">TCP/IP </font><font style="color:rgb(0,0,0);">发送至</font><font style="color:rgb(0,0,0);">server</font><font style="color:rgb(0,0,0);">的 </font><font style="color:rgb(0,0,0);">NFS </font><font style="color:rgb(0,0,0);">服务。</font><font style="color:rgb(0,0,0);">NFS</font><font style="color:rgb(0,0,0);">服务端执行相关的操作，并将操作结果返回 </font></p>
<p><font style="color:rgb(0,0,0);">给</font><font style="color:rgb(0,0,0);">client</font><font style="color:rgb(0,0,0);">。 </font></p>
<p><font style="color:rgb(0,0,0);">而</font><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">的功能有很多，所有不同的功能就需要使用不同的端口，因此</font><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">无法固定端口，但</font><font style="color:rgb(0,0,0);">RPC</font><font style="color:rgb(0,0,0);">会去记 </font></p>
<p><font style="color:rgb(0,0,0);">录端口信息。结果</font><font style="color:rgb(0,0,0);">server</font><font style="color:rgb(0,0,0);">和</font><font style="color:rgb(0,0,0);">client</font><font style="color:rgb(0,0,0);">通过</font><font style="color:rgb(0,0,0);">RPC</font><font style="color:rgb(0,0,0);">来沟通端口信息 </font></p>
<p><strong><font style="color:rgb(0,0,0);">ps</font></strong><font style="color:rgb(0,0,0);">：</font><font style="color:rgb(0,0,0);">VFS</font><font style="color:rgb(0,0,0);">（</font><font style="color:rgb(0,0,0);">virtual File System</font><font style="color:rgb(0,0,0);">）的作用就是采用标准的</font><font style="color:rgb(0,0,0);">Unix</font><font style="color:rgb(0,0,0);">系统调用读写位于不同物理介质上的不 </font></p>
<p><font style="color:rgb(0,0,0);">同文件系统</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">即为各类文件系统提供了一个统一的操作界面和应用编程接口。（</font><font style="color:rgb(0,0,0);">sun</font><font style="color:rgb(0,0,0);">公司研发） </font></p>
<p><font style="color:rgb(0,0,0);">RPC（Remote Procedure Call）远程过程调用。作用：对数据进行处理后显示或打印</font></p>
<p><img alt="" src="../../../../images/1717656524053-ebb7cc40-32bd-4fc1-a568-a97a7df63c9b.png" /></p>
<p><font style="color:rgb(0,0,0);">相关进程： </font></p>
<p><font style="color:rgb(0,0,0);">rpc.nfsd</font><font style="color:rgb(0,0,0);">：最主要的</font><font style="color:rgb(0,0,0);">NFS</font><font style="color:rgb(0,0,0);">进程，管理客户端是否可登录 </font></p>
<p><font style="color:rgb(0,0,0);">rpc.mountd</font><font style="color:rgb(0,0,0);">：挂载和卸载</font><font style="color:rgb(0,0,0);">NFS</font><font style="color:rgb(0,0,0);">文件系统，包括权限管理 </font></p>
<p><font style="color:rgb(0,0,0);">rpc.lockd</font><font style="color:rgb(0,0,0);">：管理文件锁，避免同时写出错（非必要） </font></p>
<p><font style="color:rgb(0,0,0);">rpc.statd</font><font style="color:rgb(0,0,0);">：检查文件一致性，可修复文件（非必要）</font><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">配置文件 </font></p>
<p><font style="color:rgb(0,0,0);">默认文件路径：/etc/exports</font><img alt="" src="../../../../images/1717656553074-6fff2af5-fab4-47b6-8b29-e0b922e3b746.png" /></p>
<p><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">常用命令 </font></p>
<p><font style="color:rgb(0,0,0);">exportfs: </font><font style="color:rgb(0,0,0);">管理</font><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">导出的文件系统 </font></p>
<p><font style="color:rgb(0,0,0);">语法： </font><font style="color:rgb(0,0,0);">exporfs [</font><font style="color:rgb(0,0,0);">参数</font><font style="color:rgb(0,0,0);">] </font></p>
<p><font style="color:rgb(0,0,0);">常用参数： </font></p>
<p><font style="color:rgb(0,0,0);">1</font><font style="color:rgb(0,0,0);">） </font><font style="color:rgb(0,0,0);">­v </font><font style="color:rgb(0,0,0);">显示</font><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">共享信息 </font></p>
<p><font style="color:rgb(0,0,0);">2</font><font style="color:rgb(0,0,0);">） </font><font style="color:rgb(0,0,0);">­r </font><font style="color:rgb(0,0,0);">重新读取</font><font style="color:rgb(0,0,0);">/etc/exports </font></p>
<p><font style="color:rgb(0,0,0);">3</font><font style="color:rgb(0,0,0);">） </font><font style="color:rgb(0,0,0);">­i [</font><font style="color:rgb(0,0,0);">文件路径</font><font style="color:rgb(0,0,0);">] </font><font style="color:rgb(0,0,0);">指定配置文件 </font></p>
<p><font style="color:rgb(0,0,0);">4</font><font style="color:rgb(0,0,0);">） </font><font style="color:rgb(0,0,0);">­a </font><font style="color:rgb(0,0,0);">输出所有共享 </font></p>
<p><font style="color:rgb(0,0,0);">5</font><font style="color:rgb(0,0,0);">） </font><font style="color:rgb(0,0,0);">­u </font><font style="color:rgb(0,0,0);">停止或卸载共享 </font></p>
<p><font style="color:rgb(0,0,0);">showmount </font><font style="color:rgb(0,0,0);">查看远程</font><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">共享 </font></p>
<p><font style="color:rgb(0,0,0);">语法： </font><font style="color:rgb(0,0,0);">showmount [</font><font style="color:rgb(0,0,0);">参数</font><font style="color:rgb(0,0,0);">] </font></p>
<p><font style="color:rgb(0,0,0);">常用参数： </font></p>
<p><font style="color:rgb(0,0,0);">­a </font><font style="color:rgb(0,0,0);">以</font><font style="color:rgb(0,0,0);">host</font><font style="color:rgb(0,0,0);">： </font><font style="color:rgb(0,0,0);">dir</font><font style="color:rgb(0,0,0);">的格式来实现服务端信息 </font></p>
<p><font style="color:rgb(0,0,0);">­d </font><font style="color:rgb(0,0,0);">只显示挂在目录名 </font></p>
<p><font style="color:rgb(0,0,0);">­e </font><font style="color:rgb(0,0,0);">显示</font><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">服务端的输出信息 </font></p>
<p><font style="color:rgb(0,0,0);">mount </font><font style="color:rgb(0,0,0);">挂载命令 </font></p>
<p><font style="color:rgb(0,0,0);">临时挂载： </font><font style="color:rgb(0,0,0);">mount ­t nfs 127.0.0.1</font><font style="color:rgb(0,0,0);">：</font><font style="color:rgb(0,0,0);">/nfs /root/nfs </font></p>
<p><font style="color:rgb(0,0,0);">永久挂载： </font><font style="color:rgb(0,0,0);">vim /etc/fstab </font></p>
<p><font style="color:rgb(0,0,0);">127.0.0.1</font><font style="color:rgb(0,0,0);">：</font><font style="color:rgb(0,0,0);">/nfs /root/nfs nfs defaults</font><font style="color:rgb(0,0,0);">，</font><font style="color:rgb(0,0,0);">_netdev 0 0 </font></p>
<p><font style="color:rgb(0,0,0);">操作配置：</font></p>
<p><strong><font style="color:rgb(0,0,0);">服务端（</font></strong><strong><font style="color:rgb(0,0,0);">server</font></strong><strong><font style="color:rgb(0,0,0);">） </font></strong></p>
<p><font style="color:rgb(0,0,0);">1</font><font style="color:rgb(0,0,0);">）添加一块</font><font style="color:rgb(0,0,0);">1T</font><font style="color:rgb(0,0,0);">的硬盘 </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# lsblk</font><img alt="" src="../../../../images/1717656576490-8714fbb6-ae83-45e8-a491-fe5ef5c3cea0.png" /></p>
<p><font style="color:rgb(0,0,0);">2</font><font style="color:rgb(0,0,0);">）给这个</font><font style="color:rgb(0,0,0);">1T</font><font style="color:rgb(0,0,0);">硬盘做</font><font style="color:rgb(0,0,0);">lvm </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# fdisk /dev/sdb</font><img alt="" src="../../../../images/1717656590491-92fce0fa-93c1-4e75-9253-b6dcb768590f.png" /></p>
<p><font style="color:rgb(0,0,0);">查看分区情况 </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# lsblk </font></p>
<p><font style="color:rgb(0,0,0);">NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT </font></p>
<p><font style="color:rgb(0,0,0);">sdb 8:16 0 1T 0 disk </font></p>
<p><font style="color:rgb(243,50,50);">└─sdb1 8:17 0 1024G 0 part </font></p>
<p><font style="color:rgb(0,0,0);">sr0 11:0 1 8.8G 0 rom /run/media/root/RHEL­8­3­0­BaseOS­x86 </font></p>
<p><font style="color:rgb(0,0,0);">nvme0n1 259:0 0 100G 0 disk </font></p>
<p><font style="color:rgb(0,0,0);">├─nvme0n1p1 259:1 0 300M 0 part /boot </font></p>
<p><font style="color:rgb(0,0,0);">└─nvme0n1p2 259:2 0 99.7G 0 part </font></p>
<p><font style="color:rgb(0,0,0);">├─rhel­root 253:0 0 91.7G 0 lvm / </font></p>
<p><font style="color:rgb(0,0,0);">├─rhel­swap 253:1 0 4G 0 lvm [SWAP] </font></p>
<p><font style="color:rgb(0,0,0);">└─rhel­home 253:2 0 4G 0 lvm /home </font></p>
<p><font style="color:rgb(0,0,0);">创建</font><font style="color:rgb(0,0,0);">pv</font><font style="color:rgb(0,0,0);">物理卷 </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# pvcreate /dev/sdb1 </font></p>
<p><font style="color:rgb(0,0,0);">Physical volume "/dev/sdb1" </font><font style="color:rgb(243,50,50);">successfully </font><font style="color:rgb(0,0,0);">created. </font></p>
<p><font style="color:rgb(0,0,0);">查看</font><font style="color:rgb(0,0,0);">pv </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# pvs </font><font style="color:rgb(0,0,0);">或</font><font style="color:rgb(0,0,0);">pvdisplay </font></p>
<p><font style="color:rgb(0,0,0);">PV VG Fmt Attr PSize PFree </font></p>
<p><font style="color:rgb(0,0,0);">/dev/nvme0n1p2 rhel lvm2 a­­ 99.70g 4.00m</font></p>
<p><font style="color:rgb(0,0,0);">/dev/sdb1 lvm2 ­­­ &lt;1024.00g &lt;1024.00g </font></p>
<p><font style="color:rgb(0,0,0);">创建</font><font style="color:rgb(0,0,0);">vg</font><font style="color:rgb(0,0,0);">卷组 </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# vgcreate vg0 /dev/sdb1 </font></p>
<p><font style="color:rgb(0,0,0);">Volume group "vg0" </font><font style="color:rgb(243,50,50);">successfully </font><font style="color:rgb(0,0,0);">created </font></p>
<p><font style="color:rgb(0,0,0);">查看</font><font style="color:rgb(0,0,0);">vg </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# vgs </font><font style="color:rgb(0,0,0);">或</font><font style="color:rgb(0,0,0);">vgdisplay </font></p>
<p><font style="color:rgb(0,0,0);">VG #PV #LV #SN Attr VSize VFree </font></p>
<p><font style="color:rgb(0,0,0);">rhel 1 3 0 wz­­n­ 99.70g 4.00m </font></p>
<p><font style="color:rgb(243,50,50);">vg0 1 0 0 wz­­n­ &lt;1024.00g &lt;1024.00g </font></p>
<p><font style="color:rgb(0,0,0);">创建</font><font style="color:rgb(0,0,0);">lv</font><font style="color:rgb(0,0,0);">逻辑卷 </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# lvcreate ­n lv0 ­l 262143 vg0 </font></p>
<p><font style="color:rgb(0,0,0);">Logical volume "lv0" </font><font style="color:rgb(243,50,50);">created</font><font style="color:rgb(0,0,0);">. </font></p>
<p><font style="color:rgb(0,0,0);">查看</font><font style="color:rgb(0,0,0);">lv </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# lvs </font><font style="color:rgb(0,0,0);">或 </font><font style="color:rgb(0,0,0);">lvdisplay </font></p>
<p><font style="color:rgb(0,0,0);">LV VG Attr LSize Pool Origin Data% Meta% Move Log Cpy%Sync </font></p>
<p><font style="color:rgb(0,0,0);">Convert </font></p>
<p><font style="color:rgb(0,0,0);">home rhel ­wi­ao­­­­ 4.00g </font></p>
<p><font style="color:rgb(0,0,0);">root rhel ­wi­ao­­­­ &lt;91.70g </font></p>
<p><font style="color:rgb(0,0,0);">swap rhel ­wi­ao­­­­ 4.00g </font></p>
<p><font style="color:rgb(243,50,50);">lv0 vg0 ­wi­a­­­­­ &lt;1024.00g </font></p>
<p><font style="color:rgb(0,0,0);">创建文件系统 </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# mkfs.xfs /dev/vg0/lv0 </font></p>
<p><font style="color:rgb(0,0,0);">meta­data=/dev/vg0/lv0 isize=512 agcount=4, agsize=67108608 blks </font></p>
<p><font style="color:rgb(0,0,0);">= sectsz=512 attr=2, projid32bit=1 </font></p>
<p><font style="color:rgb(0,0,0);">= crc=1 finobt=1, sparse=1, rmapbt=0 </font></p>
<p><font style="color:rgb(0,0,0);">= reflink=1 </font></p>
<p><font style="color:rgb(0,0,0);">data = bsize=4096 blocks=268434432, imaxpct=25 </font></p>
<p><font style="color:rgb(0,0,0);">= sunit=0 swidth=0 blks </font></p>
<p><font style="color:rgb(0,0,0);">naming =version 2 bsize=4096 ascii­ci=0, ftype=1 </font></p>
<p><font style="color:rgb(0,0,0);">log =internal log bsize=4096 blocks=131071, version=2 </font></p>
<p><font style="color:rgb(0,0,0);">= sectsz=512 sunit=0 blks, lazy­count=1 </font></p>
<p><font style="color:rgb(0,0,0);">realtime =none extsz=4096 blocks=0, rtextents=0 </font></p>
<p><font style="color:rgb(0,0,0);">查看是否创建了文件系统 </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# blkid /dev/mapper/vg0­lv0 </font></p>
<p><font style="color:rgb(0,0,0);">/dev/mapper/vg0­lv0: </font><font style="color:rgb(243,50,50);">UUID="b79a3fef­6c2b­4be6­a688­8da1a2e9a1df" </font></p>
<p><font style="color:rgb(0,0,0);">BLOCK_SIZE="512" TYPE="xfs"</font></p>
<p><font style="color:rgb(0,0,0);">挂载（永久） </font></p>
<p><font style="color:rgb(0,0,0);">[</font><font style="color:rgb(0,0,0);">root@node1 ~]# vim /etc/fstab </font></p>
<p><font style="color:rgb(0,0,0);">UUID=b79a3fef­6c2b­4be6­a688­8da1a2e9a1df /nfs xfs defaults 0 0 </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# mount ­-a </font></p>
<p><font style="color:rgb(0,0,0);">验证 </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# df ­Th</font></p>
<p><img alt="" src="../../../../images/1717656634536-c188cea2-2f05-463f-98df-4c6fd9c3b404.png" /></p>
<p><font style="color:rgb(0,0,0);">3</font><font style="color:rgb(0,0,0);">）修改</font><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">配置文件 </font></p>
<p><font style="color:rgb(0,0,0);">查看</font><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">服务是否安装 </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# rpm ­qa | grep nfs </font></p>
<p><font style="color:rgb(243,50,50);">nfs­utils­2.3.3­35.el8.x86_64 </font></p>
<p><font style="color:rgb(243,50,50);">修改</font><font style="color:rgb(243,50,50);">nfs</font><font style="color:rgb(243,50,50);">配置文件 </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# vim /etc/exports </font></p>
<p><font style="color:rgb(0,0,0);">/nfs 172.25.250.0/24(rw,sync,no_root_squash) </font></p>
<p><font style="color:rgb(0,0,0);">/nfs </font><font style="color:rgb(0,0,0);">指明要共享的目录 </font></p>
<p><font style="color:rgb(0,0,0);">172.25.250..0/24 </font><font style="color:rgb(0,0,0);">要共享的网络范围（可以是网段） </font></p>
<p><font style="color:rgb(0,0,0);">（</font><font style="color:rgb(0,0,0);">rw,sync,no_root_squash</font><font style="color:rgb(0,0,0);">） 共享权限 </font></p>
<p><font style="color:rgb(0,0,0);">确定</font><font style="color:rgb(0,0,0);">nfs</font><font style="color:rgb(0,0,0);">服务是否开启（</font><font style="color:rgb(0,0,0);">nfs­utils</font><font style="color:rgb(0,0,0);">和</font><font style="color:rgb(0,0,0);">nfs­server</font><font style="color:rgb(0,0,0);">） </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# systemctl status nfs­utils.service </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# systemctl status nfs­server.service</font></p>
<p><font style="color:rgb(0,0,0);">管理nfs导出文件系统</font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# exportfs ­arv </font></p>
<p><font style="color:rgb(0,0,0);">exporting 172.25.250.0/24:/nfs </font></p>
<p><font style="color:rgb(0,0,0);">防火墙放行策略 </font></p>
<p><font style="color:rgb(0,0,0);">[root@node1 ~]# systemctl status firewalld.service</font></p>
<p><img alt="" src="../../../../images/1717658239409-3ce56859-31be-4a48-85dc-260b82d24556.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-196-1">1</a></span>
<span class="normal"><a href="#__codelineno-196-2">2</a></span>
<span class="normal"><a href="#__codelineno-196-3">3</a></span>
<span class="normal"><a href="#__codelineno-196-4">4</a></span>
<span class="normal"><a href="#__codelineno-196-5">5</a></span>
<span class="normal"><a href="#__codelineno-196-6">6</a></span>
<span class="normal"><a href="#__codelineno-196-7">7</a></span>
<span class="normal"><a href="#__codelineno-196-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-196-1" name="__codelineno-196-1"></a><span class="o">[</span>root@liyedong<span class="w"> </span>/<span class="o">]</span><span class="c1"># firewall-cmd --permanent --add-service=nfs</span>
<a id="__codelineno-196-2" name="__codelineno-196-2"></a>success
<a id="__codelineno-196-3" name="__codelineno-196-3"></a><span class="o">[</span>root@liyedong<span class="w"> </span>/<span class="o">]</span><span class="c1"># firewall-cmd --permanent --add-service=rpc-bind </span>
<a id="__codelineno-196-4" name="__codelineno-196-4"></a>success
<a id="__codelineno-196-5" name="__codelineno-196-5"></a><span class="o">[</span>root@liyedong<span class="w"> </span>/<span class="o">]</span><span class="c1"># firewall-cmd --permanent --add-service=mountd </span>
<a id="__codelineno-196-6" name="__codelineno-196-6"></a>success
<a id="__codelineno-196-7" name="__codelineno-196-7"></a><span class="o">[</span>root@liyedong<span class="w"> </span>/<span class="o">]</span><span class="c1"># firewall-cmd --reload </span>
<a id="__codelineno-196-8" name="__codelineno-196-8"></a>success
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">客户端（</font><font style="color:rgb(0,0,0);">clinet</font><font style="color:rgb(0,0,0);">） </font></p>
<p><font style="color:rgb(0,0,0);">[root@node2 ~]# showmount ­e 172.25.250.10 </font></p>
<p><font style="color:rgb(0,0,0);">Export list for 172.25.250.10: </font></p>
<p><font style="color:rgb(0,0,0);">/nfs 172.25.250.0/24 </font></p>
<p><font style="color:rgb(0,0,0);">挂载（临时） </font></p>
<p><font style="color:rgb(0,0,0);">[root@node2 ~]# mount ­t nfs 172.25.250.10:/nfs /root/nfs_client/ </font></p>
<p><font style="color:rgb(0,0,0);">永久： </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-197-1">1</a></span>
<span class="normal"><a href="#__codelineno-197-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-197-1" name="__codelineno-197-1"></a><span class="o">[</span>root@node2<span class="w"> </span>~<span class="o">]</span><span class="c1"># vim /etc/fstab </span>
<a id="__codelineno-197-2" name="__codelineno-197-2"></a><span class="m">172</span>.25.250.10:/nfs<span class="w"> </span>/root/nfs_client<span class="w"> </span>nfs<span class="w"> </span>defaults,_netdev<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">_netdev </font><font style="color:rgb(0,0,0);">当网络启动时，才进行挂载 </font></p>
<p><font style="color:rgb(0,0,0);">验证： </font></p>
<p><font style="color:rgb(0,0,0);">[root@node2 ~]# df ­Th</font></p>
<p><img alt="" src="../../../../images/1717658255413-3ddb75f9-7bbf-4f0d-85a0-7c5b1bf99c36.png" /></p>
<p><font style="color:rgb(0,0,0);">验证： </font></p>
<p><font style="color:rgb(0,0,0);">在服务端上创建一个目录，客户端是否能同步</font></p>
<h1 id="apache-httpd-服务"><font style="color:rgb(34,34,34);">Apache httpd 服务</font><a class="headerlink" href="#apache-httpd-服务" title="Permanent link">&para;</a></h1>
<p><strong><font style="color:rgb(0,0,0);">HTTP </font></strong><strong><font style="color:rgb(0,0,0);">协议 </font></strong></p>
<p><font style="color:rgb(57,57,57);">HTTP: Hyper Text Transport Protocol </font><font style="color:rgb(57,57,57);">超文本传输协议，是互联网中最为常见的 </font></p>
<p><font style="color:rgb(57,57,57);">一种协议，最重要的应用就是 </font><font style="color:rgb(57,57,57);">web </font><font style="color:rgb(57,57,57);">服务，</font><font style="color:rgb(57,57,57);">http </font><font style="color:rgb(57,57,57);">主要功能就是接收和发布 </font><font style="color:rgb(57,57,57);">HTML </font><font style="color:rgb(57,57,57);">页面。 </font></p>
<p><font style="color:rgb(57,57,57);">HTTP </font><font style="color:rgb(57,57,57);">默认是工作在 </font><font style="color:rgb(57,57,57);">TCP 80 </font><font style="color:rgb(57,57,57);">端口</font><font style="color:rgb(57,57,57);">(</font><font style="color:rgb(57,57,57);">也可以使用其它端口</font><font style="color:rgb(57,57,57);">)</font><font style="color:rgb(57,57,57);">，</font><font style="color:rgb(57,57,57);">HTTPS(</font><font style="color:rgb(57,57,57);">使用 </font><font style="color:rgb(57,57,57);">TLS/SSL </font><font style="color:rgb(57,57,57);">加密</font><font style="color:rgb(57,57,57);">)</font><font style="color:rgb(57,57,57);">工 </font></p>
<p><font style="color:rgb(57,57,57);">作在 </font><font style="color:rgb(57,57,57);">TCP 443 </font><font style="color:rgb(57,57,57);">端口 </font></p>
<p><font style="color:rgb(57,57,57);">可以实现 http 协议的软件有多种</font></p>
<p><strong><font style="color:rgb(0,0,0);">Apache HTTPD </font></strong></p>
<p><font style="color:rgb(57,57,57);">Apache HTTPD </font><font style="color:rgb(57,57,57);">是 </font><font style="color:rgb(57,57,57);">apache </font><font style="color:rgb(57,57,57);">软件基金会</font><font style="color:rgb(57,57,57);">(ASF)</font><font style="color:rgb(57,57,57);">的一个著名的开源 </font><font style="color:rgb(57,57,57);">web </font><font style="color:rgb(57,57,57);">服务器软件，可以 </font></p>
<p><font style="color:rgb(57,57,57);">在多个平台系统中运行，由于其跨平台和安全性，被广泛使用，是当前最为流行的 </font><font style="color:rgb(57,57,57);">web </font><font style="color:rgb(57,57,57);">服 </font></p>
<p><font style="color:rgb(57,57,57);">务器软件之一，所以 </font><font style="color:rgb(57,57,57);">Apache </font></p>
<p><font style="color:rgb(57,57,57);">HTTPD </font><font style="color:rgb(57,57,57);">通常被叫做 </font><font style="color:rgb(57,57,57);">Apache</font><font style="color:rgb(57,57,57);">。 </font></p>
<p><strong><font style="color:rgb(0,0,0);">Apache HTTPD </font></strong><strong><font style="color:rgb(0,0,0);">配置 </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">使用 </font></strong><strong><font style="color:rgb(57,57,57);">yum </font></strong><strong><font style="color:rgb(57,57,57);">安装 </font></strong><strong><font style="color:rgb(57,57,57);">httpd </font></strong></p>
<p><font style="color:rgb(223,64,42);">#yum -y install httpd</font></p>
<p><font style="color:rgb(57,57,57);">查看安装了哪些目录： </font></p>
<p><font style="color:rgb(57,57,57);">[root@server ~]# rpm -ql httpd </font></p>
<p><font style="color:rgb(57,57,57);">/etc/httpd [</font><font style="color:rgb(57,57,57);">配置文件的根目录</font><font style="color:rgb(57,57,57);">] </font></p>
<p><font style="color:rgb(57,57,57);">/etc/httpd/conf </font></p>
<p><font style="color:rgb(223,64,42);">/etc/httpd/conf.d </font></p>
<p><font style="color:rgb(57,57,57);">/etc/httpd/conf.d/README </font></p>
<p><font style="color:rgb(57,57,57);">/etc/httpd/conf.d/autoindex.conf </font></p>
<p><font style="color:rgb(57,57,57);">/etc/httpd/conf.d/userdir.conf </font></p>
<p><font style="color:rgb(57,57,57);">/etc/httpd/conf.d/welcome.conf </font></p>
<p><font style="color:rgb(57,57,57);">/etc/httpd/conf.modules.d </font></p>
<p><font style="color:rgb(223,64,42);">/etc/httpd/conf/httpd.conf </font></p>
<p><font style="color:rgb(57,57,57);">/etc/sysconfig/httpd </font></p>
<p><font style="color:rgb(57,57,57);">。。。。。。。。。。</font><font style="color:rgb(57,57,57);">[</font><font style="color:rgb(57,57,57);">中间省略</font><font style="color:rgb(57,57,57);">] </font></p>
<p><font style="color:rgb(57,57,57);">/usr/share/man/man8/suexec.8.gz </font></p>
<p><font style="color:rgb(57,57,57);">/var/cache/httpd </font></p>
<p><font style="color:rgb(57,57,57);">/var/cache/httpd/proxy </font></p>
<p><font style="color:rgb(57,57,57);">/var/lib/dav </font></p>
<p><font style="color:rgb(57,57,57);">/var/log/httpd </font></p>
<p><font style="color:rgb(57,57,57);">/var/www [</font><font style="color:rgb(57,57,57);">站点文件的根目录</font><font style="color:rgb(57,57,57);">] </font></p>
<p><font style="color:rgb(57,57,57);">/var/www/cgi-bin </font></p>
<p><font style="color:rgb(223,64,42);">/var/www/html </font></p>
<p><strong><font style="color:rgb(57,57,57);">启动 </font></strong><strong><font style="color:rgb(57,57,57);">httpd </font></strong></p>
<p><font style="color:rgb(223,64,42);"># systemctl start httpd </font></p>
<p><font style="color:rgb(57,57,57);">查看本地服务监听端口 </font></p>
<p><font style="color:rgb(57,57,57);">[root@server conf.d]# ss -tanl </font></p>
<p><font style="color:rgb(57,57,57);">在</font><font style="color:rgb(57,57,57);">/var/www/html/</font><font style="color:rgb(57,57,57);">下创建 </font><font style="color:rgb(57,57,57);">index.html </font><font style="color:rgb(57,57,57);">文件 </font></p>
<p><font style="color:rgb(57,57,57);"># cd /var/www/html/ </font></p>
<p><font style="color:rgb(57,57,57);"># vim index.html [</font><font style="color:rgb(57,57,57);">编辑网页文件或者将开发的网页文件放入该目录</font><font style="color:rgb(57,57,57);">] </font></p>
<p><font style="color:rgb(57,57,57);"># systemctl restart httpd </font></p>
<p><font style="color:rgb(57,57,57);">在本机通过 </font><font style="color:rgb(57,57,57);">http://127.0.0.1/index.html </font><font style="color:rgb(57,57,57);">访问网页 </font></p>
<p><font style="color:rgb(57,57,57);">开启防火墙放行 </font></p>
<p><font style="color:rgb(57,57,57);">[root@server conf.d]# </font><font style="color:rgb(223,64,42);">firewall-cmd --add-service=http --permanent </font></p>
<p><font style="color:rgb(57,57,57);">success </font></p>
<p><font style="color:rgb(57,57,57);">[root@server conf.d]# </font><font style="color:rgb(223,64,42);">firewall-cmd --reload </font></p>
<p><font style="color:rgb(57,57,57);">测试： </font></p>
<p><strong><font style="color:rgb(57,57,57);">http://192.168.200.40/index.html</font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">站点文档目录 </font></strong></p>
<p><font style="color:rgb(223,64,42);">/var/www/html/ </font></p>
<p><strong><font style="color:rgb(57,57,57);">httpd </font></strong><strong><font style="color:rgb(57,57,57);">的配置文件 </font></strong></p>
<p><font style="color:rgb(223,64,42);">/etc/httpd/</font><strong><font style="color:rgb(223,64,42);">conf</font></strong><font style="color:rgb(223,64,42);">/httpd.conf </font></p>
<p><font style="color:rgb(223,64,42);">/etc/httpd/</font><strong><font style="color:rgb(223,64,42);">conf.d</font></strong><font style="color:rgb(223,64,42);">/*.conf </font></p>
<p><strong><font style="color:rgb(57,57,57);">httpd </font></strong><strong><font style="color:rgb(57,57,57);">基本配置 </font></strong></p>
<p><font style="color:rgb(57,57,57);">httpd </font><font style="color:rgb(57,57,57);">配置主要是由指令、值和区块构成</font><font style="color:rgb(57,57,57);">,</font><font style="color:rgb(57,57,57);">区块内的指令仅对区块局部有效，区块外的指令 </font></p>
<p><font style="color:rgb(57,57,57);">全局有效。 </font></p>
<p><font style="color:rgb(57,57,57);">httpd </font><font style="color:rgb(57,57,57);">的配置格式</font><font style="color:rgb(57,57,57);">: </font></p>
<p><font style="color:rgb(223,64,42);">key(</font><font style="color:rgb(223,64,42);">指令</font><font style="color:rgb(223,64,42);">) value(</font><font style="color:rgb(223,64,42);">值</font><font style="color:rgb(223,64,42);">) </font></p>
<p><font style="color:rgb(223,64,42);">serverroot /var/www/html </font></p>
<p><font style="color:rgb(223,64,42);">serverroot:</font><font style="color:rgb(223,64,42);">指令 不区分大小写 </font></p>
<p><font style="color:rgb(223,64,42);">/var/www/html:指令对应的值</font></p>
<p><strong><font style="color:rgb(0,0,0);">主要配置指令</font></strong></p>
<p><img alt="" src="../../../../images/1717662769386-79fe3b57-027a-4750-bcf6-32dc3d7ceee9.png" /></p>
<p><font style="color:rgb(57,57,57);">目录容器：容器内的指令仅在在指定的目录下生效 </font></p>
<p><font style="color:rgb(223,64,42);">Options Indexes FollowSymLinks </font></p>
<p><font style="color:rgb(223,64,42);">AllowOverride None [</font><font style="color:rgb(223,64,42);">拒绝对网页文件内容重写</font><font style="color:rgb(223,64,42);">] </font></p>
<p><font style="color:rgb(223,64,42);">Require all granted [</font><font style="color:rgb(223,64,42);">允许所有请求， </font><font style="color:rgb(223,64,42);">Require </font></p>
<p><font style="color:rgb(223,64,42);">all denied 是拒绝]</font></p>
<p><font style="color:rgb(223,64,42);">Options: </font><font style="color:rgb(223,64,42);">目录所支持的选项 </font></p>
<p><font style="color:rgb(57,57,57);">none </font><font style="color:rgb(57,57,57);">不支持任何选项 </font></p>
<p><font style="color:rgb(57,57,57);">indexes </font><font style="color:rgb(57,57,57);">允许索引目录 </font></p>
<p><font style="color:rgb(57,57,57);">followsymlinks </font><font style="color:rgb(57,57,57);">允许访问符号链接 </font></p>
<p><font style="color:rgb(57,57,57);">execcgi </font><font style="color:rgb(57,57,57);">允许执行 </font><font style="color:rgb(57,57,57);">CGI </font><font style="color:rgb(57,57,57);">程序 </font></p>
<p><font style="color:rgb(57,57,57);">all </font><font style="color:rgb(57,57,57);">支持所有选项 </font></p>
<p><font style="color:rgb(57,57,57);">更改站文件点根目录： </font></p>
<p><font style="color:rgb(57,57,57);">[root@server /]# cd var/ </font></p>
<p><font style="color:rgb(57,57,57);">[root@server var]# mkdir www2 </font></p>
<p><font style="color:rgb(57,57,57);">[root@server www2]# </font><font style="color:rgb(223,64,42);">vim index.html </font></p>
<p><font style="color:rgb(57,57,57);">i like ahdifu! </font></p>
<p><font style="color:rgb(57,57,57);">root@server ~]# cd /etc/httpd/conf/ </font></p>
<p><font style="color:rgb(57,57,57);">[root@server conf]# </font><font style="color:rgb(223,64,42);">vim httpd.conf </font></p>
<p><font style="color:rgb(57,57,57);">#DocumentRoot "/var/www/html" </font></p>
<p><font style="color:rgb(223,64,42);">DocumentRoot "/var/www2" </font></p>
<p><strong><font style="color:rgb(57,57,57);"><Directory “/var/www2”> </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">Require all granted </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">AllowOverride None </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);"></Directory> </font></strong></p>
<p><font style="color:rgb(57,57,57);">[root@server ~]# systemctl restart httpd </font></p>
<p><font style="color:rgb(57,57,57);">测试： </font></p>
<p><font style="color:rgb(57,57,57);">http://192.168.200.40/index.html </font></p>
<p><font style="color:rgb(57,57,57);">修改 </font><font style="color:rgb(57,57,57);">selinux </font><font style="color:rgb(57,57,57);">标签： </font></p>
<p><font style="color:rgb(57,57,57);">[root@server ~]# ls -ldZ /var/www/html </font></p>
<p><font style="color:rgb(57,57,57);">drwxr-xr-x. root root system_u:object_r:</font><font style="color:rgb(223,64,42);">httpd_sys_content_t</font><font style="color:rgb(57,57,57);">:s0 </font></p>
<p><font style="color:rgb(57,57,57);">/var/www/html </font></p>
<p><font style="color:rgb(57,57,57);">[root@server ~]# ls -ldZ /var/www2 </font></p>
<p><font style="color:rgb(57,57,57);">drwxr-xr-x. root root unconfined_u:object_r:</font><font style="color:rgb(223,64,42);">var_t</font><font style="color:rgb(57,57,57);">:s0 /var/www2 </font></p>
<p><font style="color:rgb(57,57,57);">[root@server ~]# semanage fcontext -a -t </font><font style="color:rgb(223,64,42);">httpd_sys_content_t </font></p>
<p><font style="color:rgb(57,57,57);">'/var/www2(/.*)?' </font></p>
<p><font style="color:rgb(57,57,57);">[root@server ~]# restorecon -Rv /var/www2 </font></p>
<p><font style="color:rgb(57,57,57);">[root@server ~]# ls -ldZ /var/www2 </font></p>
<p><font style="color:rgb(57,57,57);">防火墙放行： </font></p>
<p><font style="color:rgb(57,57,57);">[root@server conf.d]# </font><font style="color:rgb(223,64,42);">firewall-cmd --add-service=http --permanent </font></p>
<p><font style="color:rgb(57,57,57);">success </font></p>
<p><font style="color:rgb(57,57,57);">[root@server conf.d]# </font><font style="color:rgb(223,64,42);">firewall-cmd --reload</font></p>
<p><font style="color:rgb(57,57,57);">测试： </font></p>
<p><font style="color:rgb(57,57,57);">http://192.168.200.40/index.html </font></p>
<p><strong><font style="color:rgb(0,0,0);">虚拟主机：允许单个 </font></strong><strong><font style="color:rgb(0,0,0);">http </font></strong><strong><font style="color:rgb(0,0,0);">服务器提供多个站点服务 </font></strong></p>
<p><font style="color:rgb(57,57,57);">虚拟主机类型： </font></p>
<p><font style="color:rgb(57,57,57);">基于 </font><font style="color:rgb(57,57,57);">IP </font></p>
<p><font style="color:rgb(57,57,57);">基于端口 </font></p>
<p><font style="color:rgb(57,57,57);">基于主机名 </font></p>
<p><font style="color:rgb(57,57,57);">虚拟主机使用块来进行配置，一般会把虚拟机主机单独写一个配置文件 </font></p>
<p><font style="color:rgb(57,57,57);">虚拟主机配置示例： </font></p>
<p><font style="color:rgb(57,57,57);"># vim /etc/httpd/conf.d/ahdifu.conf </font></p>
<p><font style="color:rgb(223,64,42);">listen 8080 </font><font style="color:rgb(57,57,57);">[</font><font style="color:rgb(57,57,57);">非 </font><font style="color:rgb(57,57,57);">80 </font><font style="color:rgb(57,57,57);">端口，必须 </font><font style="color:rgb(57,57,57);">listen] </font></p>
<p><font style="color:rgb(57,57,57);"><Virtualhost *:8080> </font></p>
<p><font style="color:rgb(57,57,57);">servername www.ahdifu123.com </font></p>
<p><font style="color:rgb(57,57,57);">documentroot </font><font style="color:rgb(223,64,42);">/var/www2 </font></p>
<p><font style="color:rgb(57,57,57);"></Virtualhost> </font></p>
<p><font style="color:rgb(57,57,57);"><directory "\</font>\<font style="color:rgb(223,64,42);">/var/www2\</font>\<font style="color:rgb(57,57,57);">"> </font></p>
<p><font style="color:rgb(57,57,57);">allowoverride none </font></p>
<p><font style="color:rgb(57,57,57);">require all granted </font></p>
<p><font style="color:rgb(57,57,57);"></directory> </font></p>
<p><font style="color:rgb(57,57,57);">防火墙、</font><font style="color:rgb(57,57,57);">selinux </font><font style="color:rgb(57,57,57);">放行 </font></p>
<p><font style="color:rgb(57,57,57);">[root@server conf.d]# semanage port -l | grep http </font></p>
<p><font style="color:rgb(57,57,57);">[root@server conf.d]# firewall-cmd --list-all </font></p>
<p><font style="color:rgb(223,64,42);"># semanage port -a -t http_port_t -p tcp 8080 </font></p>
<p><font style="color:rgb(223,64,42);">#semanage port -m -t http_port_t -p tcp 8080</font></p>
<p><font style="color:rgb(223,64,42);"># firewall-cmd --permanent --add-port=8080/tcp </font></p>
<p><font style="color:rgb(223,64,42);"># firewall-cmd --reload </font></p>
<p><font style="color:rgb(57,57,57);">重启服务 </font></p>
<p><font style="color:rgb(57,57,57);">#</font><font style="color:rgb(223,64,42);">systemctl restart httpd </font></p>
<p><font style="color:rgb(57,57,57);">查看本机监听的端口 </font></p>
<p><font style="color:rgb(57,57,57);">[root@server conf.d]# ss -tanl </font></p>
<p><font style="color:rgb(57,57,57);">State Recv-Q Send-Q Local Address:Port Peer Address:Port </font></p>
<p><font style="color:rgb(57,57,57);">LISTEN 0 128 <em>:111 </em>:* </font></p>
<p><font style="color:rgb(57,57,57);">LISTEN 0 5 192.168.122.1:53 <em>:</em> </font></p>
<p><font style="color:rgb(57,57,57);">LISTEN 0 128 <em>:22 </em>:* </font></p>
<p><font style="color:rgb(57,57,57);">LISTEN 0 128 127.0.0.1:631 <em>:</em> </font></p>
<p><font style="color:rgb(57,57,57);">LISTEN 0 100 127.0.0.1:25 <em>:</em> </font></p>
<p><font style="color:rgb(57,57,57);">LISTEN 0 128 :::111 :::*</font></p>
<p><font style="color:rgb(57,57,57);">LISTEN 0 128 </font><strong><font style="color:rgb(223,64,42);">:::8080 </font></strong><font style="color:rgb(57,57,57);">:::* </font></p>
<p><font style="color:rgb(57,57,57);">LISTEN 0 128 :::80 :::* </font></p>
<p><font style="color:rgb(57,57,57);">LISTEN 0 128 :::22 :::* </font></p>
<p><font style="color:rgb(57,57,57);">LISTEN 0 128 ::1:631 :::* </font></p>
<p><font style="color:rgb(57,57,57);">LISTEN 0 100 ::1:25 :::* </font></p>
<p><font style="color:rgb(57,57,57);">测试： </font></p>
<p><font style="color:rgb(57,57,57);">http://192.168.200.40:8080 </font></p>
<p><font style="color:rgb(223,64,42);">一个配置文件可以配置多个虚拟主机，也可以一个文件就配置一个虚拟主机 </font></p>
<p><font style="color:rgb(0,0,0);">第一步：创建配置文件 </font></p>
<p><font style="color:rgb(0,0,0);">第二步：创建站点文件 </font></p>
<p><font style="color:rgb(0,0,0);">第三步：selinux 和防火墙 </font></p>
<p><font style="color:rgb(57,57,57);">HTTPS </font><font style="color:rgb(57,57,57);">安全网页站点配置： </font></p>
<p><font style="color:rgb(57,57,57);">http </font><font style="color:rgb(57,57,57);">协议存在的问题： </font></p>
<p><font style="color:rgb(57,57,57);">容易被监听 、被伪装 、被篡改 </font></p>
<p><font style="color:rgb(57,57,57);">https</font><font style="color:rgb(57,57,57);">： </font></p>
<p><font style="color:rgb(57,57,57);">https 很好的解决了 http 的三个缺点（被监听、被篡改、被伪装），https 不是一种新的协议，它是 http+SSL(TLS)的结合体，SSL 是一种独立协议，所以其它协议比如 smtp </font></p>
<p><font style="color:rgb(57,57,57);">等也可以跟 </font><font style="color:rgb(57,57,57);">ssl </font><font style="color:rgb(57,57,57);">结合。</font><font style="color:rgb(57,57,57);">https </font><font style="color:rgb(57,57,57);">改变了通信方式，它由以前的 </font><font style="color:rgb(57,57,57);">http—–&gt;tcp</font><font style="color:rgb(57,57,57);">，改为 </font></p>
<p><font style="color:rgb(57,57,57);">http——&gt;SSL—–&gt;tcp</font><font style="color:rgb(57,57,57);">；</font><font style="color:rgb(57,57,57);">https </font><font style="color:rgb(57,57,57);">采用了共享密钥加密</font><font style="color:rgb(57,57,57);">+</font><font style="color:rgb(57,57,57);">公开密钥加密的方式： </font></p>
<p><font style="color:rgb(57,57,57);">储备知识： </font></p>
<p><font style="color:rgb(57,57,57);">证书：（</font><font style="color:rgb(57,57,57);">digital certificate</font><font style="color:rgb(57,57,57);">） 一般用来证明你是你 </font></p>
<p><font style="color:rgb(57,57,57);">CA:(Certificate Authority)</font><font style="color:rgb(57,57,57);">证书授权中心</font><font style="color:rgb(57,57,57);">,</font><font style="color:rgb(57,57,57);">负责管理和签发证书的第三方机构 </font></p>
<p><font style="color:rgb(57,57,57);">CA </font><font style="color:rgb(57,57,57);">证书：</font><font style="color:rgb(57,57,57);">CA </font><font style="color:rgb(57,57,57);">颁发的证书 </font></p>
<p><font style="color:rgb(57,57,57);">证书的签发过程： </font></p>
<p><font style="color:rgb(57,57,57);">1</font><font style="color:rgb(57,57,57);">、服务方 </font><font style="color:rgb(57,57,57);">S </font><font style="color:rgb(57,57,57);">向第三方机构 </font><font style="color:rgb(57,57,57);">CA </font><font style="color:rgb(57,57,57);">提交公钥、组织信息、个人信息</font><font style="color:rgb(57,57,57);">(</font><font style="color:rgb(57,57,57);">域名</font><font style="color:rgb(57,57,57);">)</font><font style="color:rgb(57,57,57);">等信息并申请认证； </font></p>
<p><font style="color:rgb(57,57,57);">2、CA 通过线上、线下等多种手段验证申请者提供信息的真实性，如组织是否存在、企业 是否合法，是否拥有域名的所有权等； </font></p>
<p><font style="color:rgb(57,57,57);">3</font><font style="color:rgb(57,57,57);">、如信息审核通过，</font><font style="color:rgb(57,57,57);">CA </font><font style="color:rgb(57,57,57);">会向申请者签发认证文件</font><font style="color:rgb(57,57,57);">-</font><font style="color:rgb(57,57,57);">证书。 </font></p>
<p><font style="color:rgb(57,57,57);">证书包含以下信息：</font><font style="color:rgb(223,64,42);">申请者公钥</font><font style="color:rgb(57,57,57);">、申请者的组织信息和个人信息、签发机构 CA 的信息、 有效时间、证书序列号等信息的明文，同时包含一个</font><font style="color:rgb(223,64,42);">签名</font><font style="color:rgb(57,57,57);">； </font></p>
<p><font style="color:rgb(57,57,57);">签名的产生算法：首先，使用散列函数计算公开的明文信息的信息摘要，然后，采用 CA 的</font><font style="color:rgb(223,64,42);">私钥</font><font style="color:rgb(57,57,57);">对信息</font><font style="color:rgb(223,64,42);">摘要</font><font style="color:rgb(57,57,57);">进行加密，密文即</font><font style="color:rgb(223,64,42);">签名</font><font style="color:rgb(57,57,57);">；</font></p>
<p><font style="color:rgb(57,57,57);">4</font><font style="color:rgb(57,57,57);">、客户端 </font><font style="color:rgb(57,57,57);">C </font><font style="color:rgb(57,57,57);">向服务器 </font><font style="color:rgb(57,57,57);">S </font><font style="color:rgb(57,57,57);">发出请求时，</font><font style="color:rgb(57,57,57);">S </font><font style="color:rgb(57,57,57);">返回证书文件； </font></p>
<p><font style="color:rgb(57,57,57);">5、客户端 C 读取证书中的相关的明文信息，采用相同的散列函数计算得到信息</font><font style="color:rgb(223,64,42);">摘要</font><font style="color:rgb(57,57,57);">，然 后，利用对应 CA 的公钥</font><font style="color:rgb(223,64,42);">解密签名数据</font><font style="color:rgb(57,57,57);">，对比证书的信息摘要，如果一致，则可以确认证 书的合法性，即公钥合法； </font></p>
<p><font style="color:rgb(57,57,57);">6</font><font style="color:rgb(57,57,57);">、客户端然后验证证书相关的域名信息、有效时间等信息； </font></p>
<p><font style="color:rgb(57,57,57);">7、客户端会内置信任 CA 的证书信息(包含公钥)，如果 CA 不被信任，则找不到对应 CA 的证书，证书也会被判定非法。 </font></p>
<p><font style="color:rgb(57,57,57);">https </font><font style="color:rgb(57,57,57);">连接过程 </font></p>
<p><font style="color:rgb(57,57,57);">--</font><font style="color:rgb(57,57,57);">客户端发送请求到服务器端 </font></p>
<p><font style="color:rgb(57,57,57);">--</font><font style="color:rgb(57,57,57);">服务器端返回证书和公开密钥，公开密钥作为证书的一部分而存在 </font></p>
<p><font style="color:rgb(57,57,57);">--</font><font style="color:rgb(57,57,57);">客户端验证证书和公开密钥的有效性，如果有效，</font><font style="color:rgb(223,64,42);">则生成共享密钥并使用公开密钥加密 </font></p>
<p><font style="color:rgb(223,64,42);">发送到服务器端 </font></p>
<p><font style="color:rgb(57,57,57);">--</font><font style="color:rgb(57,57,57);">服务器端使用私有密钥解密数据，并使用收到的共享密钥加密数据，发送到客户端 </font></p>
<p><font style="color:rgb(57,57,57);">--</font><font style="color:rgb(57,57,57);">客户端使用共享密钥解密数据 </font></p>
<p><font style="color:rgb(57,57,57);">--SSL </font><font style="color:rgb(57,57,57);">加密建立</font><font style="color:rgb(57,57,57);">……… </font></p>
<p><font style="color:rgb(57,57,57);">https </font><font style="color:rgb(57,57,57);">站点搭建： </font></p>
<p><font style="color:rgb(57,57,57);">安装 </font><font style="color:rgb(57,57,57);">mod_ssl </font></p>
<p><font style="color:rgb(57,57,57);"># yum -y install mod_ssl </font></p>
<p><font style="color:rgb(57,57,57);">首先需要下载 </font><font style="color:rgb(57,57,57);">server </font><font style="color:rgb(57,57,57);">的证书、</font><font style="color:rgb(57,57,57);">server </font><font style="color:rgb(57,57,57);">的公钥、</font><font style="color:rgb(57,57,57);">CA </font><font style="color:rgb(57,57,57);">的证书 </font></p>
<p><font style="color:rgb(57,57,57);"># </font><font style="color:rgb(223,64,42);">vim /etc/httpd/conf.d/ssl.conf </font></p>
<p><font style="color:rgb(57,57,57);">DocumentRoot "/var/www/html" </font></p>
<p><font style="color:rgb(57,57,57);">ServerName server0.example.com </font></p>
<p><font style="color:rgb(57,57,57);">SSLCertificateFile /etc/pki/tls/certs/server0.crt </font></p>
<p><font style="color:rgb(57,57,57);">SSLCertificateKeyFile /etc/pki/tls/private/server0.key </font></p>
<p><font style="color:rgb(57,57,57);">SSLCACertificateFile /etc/pki/tls/certs/example-ca.crt </font></p>
<p><font style="color:rgb(57,57,57);">防火墙放行： </font></p>
<p><font style="color:rgb(57,57,57);">[root@server ~]# firewall-cmd --permanent --add-service=https </font></p>
<p><font style="color:rgb(57,57,57);">success </font></p>
<p><font style="color:rgb(57,57,57);">[root@server ~]# firewall-cmd --reload </font></p>
<p><font style="color:rgb(57,57,57);">success</font></p>
<p><strong><font style="color:rgb(57,57,57);">基于 </font></strong><strong><font style="color:rgb(57,57,57);">LAMP </font></strong><strong><font style="color:rgb(57,57,57);">搭建 </font></strong><strong><font style="color:rgb(57,57,57);">wordpress </font></strong><strong><font style="color:rgb(57,57,57);">博客 </font></strong></p>
<p><font style="color:rgb(57,57,57);">LAMP </font><font style="color:rgb(57,57,57);">是目前最流行的一种网站架构 </font></p>
<p><strong><font style="color:rgb(57,57,57);">LAMP: Linux+Apache+Mysql+PHP </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">1.</font></strong><strong><font style="color:rgb(57,57,57);">安装相关软件包 </font></strong></p>
<p><font style="color:rgb(223,64,42);">#yum -y install httpd mariadb mariadb-server php* </font></p>
<p><strong><font style="color:rgb(57,57,57);">2.</font></strong><strong><font style="color:rgb(57,57,57);">配置 </font></strong><strong><font style="color:rgb(57,57,57);">httpd </font></strong><strong><font style="color:rgb(57,57,57);">虚拟主机 </font></strong></p>
<p><font style="color:rgb(223,64,42);"># vim /etc/httpd/conf.d/blog.conf </font></p>
<p><font style="color:rgb(57,57,57);"><Virtualhost *:80> </font></p>
<p><font style="color:rgb(21,54,95);">servername bbs.qmnetwork.cn </font></p>
<p><font style="color:rgb(21,54,95);">documentroot /blog </font></p>
<p><font style="color:rgb(57,57,57);"></Virtualhost> </font></p>
<p><font style="color:rgb(57,57,57);"><directory ”/blog”> </font></p>
<p><font style="color:rgb(21,54,95);">allowoverride none </font></p>
<p><font style="color:rgb(21,54,95);">require all granted </font></p>
<p><font style="color:rgb(57,57,57);"></directory> </font></p>
<p><strong><font style="color:rgb(57,57,57);">3.</font></strong><strong><font style="color:rgb(57,57,57);">创建文档根目录 </font></strong></p>
<p><font style="color:rgb(223,64,42);"># mkdir /blog </font></p>
<p><font style="color:rgb(223,64,42);">上传 </font><font style="color:rgb(223,64,42);">wordpress </font></p>
<p><font style="color:rgb(223,64,42);">#rz </font></p>
<p><font style="color:rgb(223,64,42);"># tar -xzvf wordpress-4.5.2-zh_CN.tar.gz </font></p>
<p><font style="color:rgb(223,64,42);"># cp -a wordpress/* /blog/ </font></p>
<p><font style="color:rgb(223,64,42);"># setfacl -R -m u:apache:rwx /blog/ </font></p>
<p><strong><font style="color:rgb(57,57,57);">4.</font></strong><strong><font style="color:rgb(57,57,57);">调整 </font></strong><strong><font style="color:rgb(57,57,57);">selinux </font></strong><strong><font style="color:rgb(57,57,57);">和防火墙，启动服务 </font></strong></p>
<p><font style="color:rgb(223,64,42);"># setenforce 0 </font></p>
<p><font style="color:rgb(223,64,42);"># firewall-cmd --add-service=http --permanent </font></p>
<p><font style="color:rgb(223,64,42);"># firewall-cmd --reload </font></p>
<p><font style="color:rgb(223,64,42);"># systemctl restart httpd </font></p>
<p><strong><font style="color:rgb(57,57,57);">5.</font></strong><strong><font style="color:rgb(57,57,57);">配置 </font></strong><strong><font style="color:rgb(57,57,57);">mariadb </font></strong></p>
<p><font style="color:rgb(223,64,42);"># systemctl restart mariadb </font></p>
<p><font style="color:rgb(223,64,42);"># mysql </font></p>
<p><font style="color:rgb(223,64,42);">&gt;create database blog; </font></p>
<p><font style="color:rgb(223,64,42);">&gt;grant all privileges on blog.* to 'blog'@'localhost' identified by </font></p>
<p><font style="color:rgb(223,64,42);">'blog'; </font></p>
<p><font style="color:rgb(223,64,42);">&gt;flush privileges;</font></p>
<p><strong><font style="color:rgb(57,57,57);">6.访问虚拟机 ip,开始配置 wordpress</font></strong></p>
<p><img alt="" src="../../../../images/1717662838923-f3b642be-618f-4389-9190-f48061e38770.png" /></p>
<p><img alt="" src="../../../../images/1717662845431-69784baa-cc46-4b20-8600-50403cb32ac5.png" /></p>
<p><font style="color:rgb(57,57,57);">根据提示进行配置</font></p>
<p><img alt="" src="../../../../images/1717662859623-0d51c044-bd82-4c34-9709-65c2723abae4.png" /></p>
<h1 id="cron周期性计划任务"><strong><font style="color:rgb(0,0,0);">cron周期性计划任务 </font></strong><a class="headerlink" href="#cron周期性计划任务" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">cron周期性计划任务用来定期执行程序，目前最主要的用途是定期备份数据 </font></p>
<p><font style="color:rgb(0,0,0);">软件包名：cronie、crontabs </font></p>
<p><font style="color:rgb(0,0,0);">服务名：crond </font></p>
<p><font style="color:rgb(0,0,0);">日志文件：/var/log/cron</font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-198-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-198-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-198-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-198-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-198-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-198-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-198-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-198-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-198-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-198-10">10</a></span>
<span class="normal"><a href="#__codelineno-198-11">11</a></span>
<span class="normal"><a href="#__codelineno-198-12">12</a></span>
<span class="normal"><a href="#__codelineno-198-13">13</a></span>
<span class="normal"><a href="#__codelineno-198-14">14</a></span>
<span class="normal"><a href="#__codelineno-198-15">15</a></span>
<span class="normal"><a href="#__codelineno-198-16">16</a></span>
<span class="normal"><a href="#__codelineno-198-17">17</a></span>
<span class="normal"><a href="#__codelineno-198-18">18</a></span>
<span class="normal"><a href="#__codelineno-198-19">19</a></span>
<span class="normal"><a href="#__codelineno-198-20">20</a></span>
<span class="normal"><a href="#__codelineno-198-21">21</a></span>
<span class="normal"><a href="#__codelineno-198-22">22</a></span>
<span class="normal"><a href="#__codelineno-198-23">23</a></span>
<span class="normal"><a href="#__codelineno-198-24">24</a></span>
<span class="normal"><a href="#__codelineno-198-25">25</a></span>
<span class="normal"><a href="#__codelineno-198-26">26</a></span>
<span class="normal"><a href="#__codelineno-198-27">27</a></span>
<span class="normal"><a href="#__codelineno-198-28">28</a></span>
<span class="normal"><a href="#__codelineno-198-29">29</a></span>
<span class="normal"><a href="#__codelineno-198-30">30</a></span>
<span class="normal"><a href="#__codelineno-198-31">31</a></span>
<span class="normal"><a href="#__codelineno-198-32">32</a></span>
<span class="normal"><a href="#__codelineno-198-33">33</a></span>
<span class="normal"><a href="#__codelineno-198-34">34</a></span>
<span class="normal"><a href="#__codelineno-198-35">35</a></span>
<span class="normal"><a href="#__codelineno-198-36">36</a></span>
<span class="normal"><a href="#__codelineno-198-37">37</a></span>
<span class="normal"><a href="#__codelineno-198-38">38</a></span>
<span class="normal"><a href="#__codelineno-198-39">39</a></span>
<span class="normal"><a href="#__codelineno-198-40">40</a></span>
<span class="normal"><a href="#__codelineno-198-41">41</a></span>
<span class="normal"><a href="#__codelineno-198-42">42</a></span>
<span class="normal"><a href="#__codelineno-198-43">43</a></span>
<span class="normal"><a href="#__codelineno-198-44">44</a></span>
<span class="normal"><a href="#__codelineno-198-45">45</a></span>
<span class="normal"><a href="#__codelineno-198-46">46</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-198-1" name="__codelineno-198-1"></a><span class="c1">#软件包默认系统自动安装</span>
<a id="__codelineno-198-2" name="__codelineno-198-2"></a><span class="o">[</span>root@localhost<span class="w"> </span>~<span class="o">]</span><span class="c1"># rpm -q cronie</span>
<a id="__codelineno-198-3" name="__codelineno-198-3"></a>cronie-1.4.11-19.el7.x86_64
<a id="__codelineno-198-4" name="__codelineno-198-4"></a>
<a id="__codelineno-198-5" name="__codelineno-198-5"></a><span class="c1">#服务默认随机自启</span>
<a id="__codelineno-198-6" name="__codelineno-198-6"></a><span class="o">[</span>root@localhost<span class="w"> </span>~<span class="o">]</span><span class="c1"># systemctl status crond</span>
<a id="__codelineno-198-7" name="__codelineno-198-7"></a><span class="c1">#cron定义时间格式</span>
<a id="__codelineno-198-8" name="__codelineno-198-8"></a>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>执行的命令
<a id="__codelineno-198-9" name="__codelineno-198-9"></a><span class="w"> </span>分<span class="w"> </span>时<span class="w"> </span>日<span class="w"> </span>月<span class="w"> </span>周
<a id="__codelineno-198-10" name="__codelineno-198-10"></a>
<a id="__codelineno-198-11" name="__codelineno-198-11"></a><span class="w"> </span>分钟：从0到59之间的整数
<a id="__codelineno-198-12" name="__codelineno-198-12"></a><span class="w"> </span>小时：从0到23之间的整数
<a id="__codelineno-198-13" name="__codelineno-198-13"></a><span class="w"> </span>日期：从1到31之间的整数
<a id="__codelineno-198-14" name="__codelineno-198-14"></a><span class="w"> </span>月份：从1到12之间的整数
<a id="__codelineno-198-15" name="__codelineno-198-15"></a><span class="w"> </span>星期：0~6之间的整数，0代表周日
<a id="__codelineno-198-16" name="__codelineno-198-16"></a><span class="w"> </span>*<span class="w"> </span><span class="c1">#每分，每时，每天，每月，每周</span>
<a id="__codelineno-198-17" name="__codelineno-198-17"></a><span class="w"> </span>，<span class="w"> </span><span class="c1">#分隔多个不连续的时间</span>
<a id="__codelineno-198-18" name="__codelineno-198-18"></a><span class="w"> </span>-<span class="w"> </span><span class="c1">#指定连续时间范围</span>
<a id="__codelineno-198-19" name="__codelineno-198-19"></a><span class="w"> </span>/<span class="w"> </span><span class="c1">#指定执行任务的时间间隔</span>
<a id="__codelineno-198-20" name="__codelineno-198-20"></a>
<a id="__codelineno-198-21" name="__codelineno-198-21"></a><span class="w"> </span><span class="c1">#每周5上午8点执行一个任务</span>
<a id="__codelineno-198-22" name="__codelineno-198-22"></a><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">8</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span><span class="m">5</span><span class="w"> </span>xx命令
<a id="__codelineno-198-23" name="__codelineno-198-23"></a>
<a id="__codelineno-198-24" name="__codelineno-198-24"></a><span class="w"> </span><span class="c1">#每天晚上23：30执行一个任务</span>
<a id="__codelineno-198-25" name="__codelineno-198-25"></a><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">23</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>xx命令
<a id="__codelineno-198-26" name="__codelineno-198-26"></a>
<a id="__codelineno-198-27" name="__codelineno-198-27"></a><span class="w"> </span><span class="c1">#日期跟星期不能同时定义，发生矛盾（没有这么定义的！）</span>
<a id="__codelineno-198-28" name="__codelineno-198-28"></a><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>*<span class="w"> </span><span class="m">2</span><span class="w"> </span>xx命令
<a id="__codelineno-198-29" name="__codelineno-198-29"></a>
<a id="__codelineno-198-30" name="__codelineno-198-30"></a><span class="w"> </span><span class="c1">#每月1号23：30分执行一个任务</span>
<a id="__codelineno-198-31" name="__codelineno-198-31"></a><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>xx命令
<a id="__codelineno-198-32" name="__codelineno-198-32"></a>
<a id="__codelineno-198-33" name="__codelineno-198-33"></a><span class="w"> </span><span class="c1">#每月1、3、5号23：30执行一个任务</span>
<a id="__codelineno-198-34" name="__codelineno-198-34"></a><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">1</span>,3,5<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>xx命令
<a id="__codelineno-198-35" name="__codelineno-198-35"></a>
<a id="__codelineno-198-36" name="__codelineno-198-36"></a><span class="w"> </span><span class="c1">#每周1、3、5凌晨3点执行一个任务</span>
<a id="__codelineno-198-37" name="__codelineno-198-37"></a><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span><span class="m">1</span>,3,5<span class="w"> </span>xx命令
<a id="__codelineno-198-38" name="__codelineno-198-38"></a>
<a id="__codelineno-198-39" name="__codelineno-198-39"></a><span class="w"> </span><span class="c1">#每月2-5号凌晨3：30分执行一个任务</span>
<a id="__codelineno-198-40" name="__codelineno-198-40"></a><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span>-5<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>xx命令
<a id="__codelineno-198-41" name="__codelineno-198-41"></a>
<a id="__codelineno-198-42" name="__codelineno-198-42"></a><span class="w"> </span><span class="c1">#每两小时执行一个任务</span>
<a id="__codelineno-198-43" name="__codelineno-198-43"></a><span class="w"> </span>*<span class="w"> </span>*/2<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>xx命令
<a id="__codelineno-198-44" name="__codelineno-198-44"></a>
<a id="__codelineno-198-45" name="__codelineno-198-45"></a><span class="w"> </span><span class="c1">#每两分钟执行一个任务</span>
<a id="__codelineno-198-46" name="__codelineno-198-46"></a><span class="w"> </span>*/2<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>xx命令
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">crontab：用于管理计划任务 </font></p>
<p><font style="color:rgb(0,0,0);">crontab -e -u 用户名 #编写计划任务 </font></p>
<p><font style="color:rgb(0,0,0);">crontab -l -u 用户名 #查看计划任务 </font></p>
<p><font style="color:rgb(0,0,0);">crontab -r -u 用户名 #清除计划任务 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-199-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-199-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-199-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-199-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-199-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-199-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-199-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-199-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-199-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-199-10">10</a></span>
<span class="normal"><a href="#__codelineno-199-11">11</a></span>
<span class="normal"><a href="#__codelineno-199-12">12</a></span>
<span class="normal"><a href="#__codelineno-199-13">13</a></span>
<span class="normal"><a href="#__codelineno-199-14">14</a></span>
<span class="normal"><a href="#__codelineno-199-15">15</a></span>
<span class="normal"><a href="#__codelineno-199-16">16</a></span>
<span class="normal"><a href="#__codelineno-199-17">17</a></span>
<span class="normal"><a href="#__codelineno-199-18">18</a></span>
<span class="normal"><a href="#__codelineno-199-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-199-1" name="__codelineno-199-1"></a><span class="w"> </span><span class="c1">#每一分钟执行一个任务</span>
<a id="__codelineno-199-2" name="__codelineno-199-2"></a><span class="w"> </span><span class="o">[</span>root@localhost<span class="w"> </span>~<span class="o">]</span><span class="c1"># crontab -e</span>
<a id="__codelineno-199-3" name="__codelineno-199-3"></a><span class="w"> </span>*/1<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>date<span class="w"> </span>&gt;&gt;<span class="w"> </span>/opt/date.txt
<a id="__codelineno-199-4" name="__codelineno-199-4"></a>
<a id="__codelineno-199-5" name="__codelineno-199-5"></a><span class="w"> </span><span class="o">[</span>root@localhost<span class="w"> </span>~<span class="o">]</span><span class="c1"># cat /opt/date.txt </span>
<a id="__codelineno-199-6" name="__codelineno-199-6"></a><span class="w"> </span>2021年<span class="w"> </span>05月<span class="w"> </span>23日<span class="w"> </span>星期日<span class="w"> </span><span class="m">17</span>:30:02<span class="w"> </span>CST
<a id="__codelineno-199-7" name="__codelineno-199-7"></a>
<a id="__codelineno-199-8" name="__codelineno-199-8"></a><span class="w"> </span><span class="c1">#每周6凌晨3：30分备份/var/log/日志文件</span>
<a id="__codelineno-199-9" name="__codelineno-199-9"></a><span class="w"> </span><span class="o">[</span>root@localhost<span class="w"> </span>~<span class="o">]</span><span class="c1"># crontab -e</span>
<a id="__codelineno-199-10" name="__codelineno-199-10"></a><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span><span class="m">6</span><span class="w"> </span>tar<span class="w"> </span>-czf<span class="w"> </span><span class="sb">`</span>date<span class="w"> </span>+%F<span class="sb">`</span>-log.tar.gz<span class="w"> </span>/var/log/*.log
<a id="__codelineno-199-11" name="__codelineno-199-11"></a>
<a id="__codelineno-199-12" name="__codelineno-199-12"></a><span class="w"> </span><span class="c1">#查看计划任务</span>
<a id="__codelineno-199-13" name="__codelineno-199-13"></a><span class="w"> </span><span class="o">[</span>root@localhost<span class="w"> </span>~<span class="o">]</span><span class="c1"># crontab -l</span>
<a id="__codelineno-199-14" name="__codelineno-199-14"></a><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span><span class="m">6</span><span class="w"> </span>tar<span class="w"> </span>-czf<span class="w"> </span><span class="sb">`</span>date<span class="w"> </span>+%F<span class="sb">`</span>-log.tar.gz<span class="w"> </span>/var/log/*.log
<a id="__codelineno-199-15" name="__codelineno-199-15"></a>
<a id="__codelineno-199-16" name="__codelineno-199-16"></a><span class="w"> </span><span class="c1">#清除计划任务</span>
<a id="__codelineno-199-17" name="__codelineno-199-17"></a><span class="w"> </span><span class="o">[</span>root@localhost<span class="w"> </span>~<span class="o">]</span><span class="c1"># crontab -r</span>
<a id="__codelineno-199-18" name="__codelineno-199-18"></a><span class="w"> </span><span class="o">[</span>root@localhost<span class="w"> </span>~<span class="o">]</span><span class="c1"># crontab -l</span>
<a id="__codelineno-199-19" name="__codelineno-199-19"></a><span class="w"> </span>no<span class="w"> </span>crontab<span class="w"> </span><span class="k">for</span><span class="w"> </span>root
</code></pre></div></td></tr></table></div>
<h1 id="ntp">NTP<a class="headerlink" href="#ntp" title="Permanent link">&para;</a></h1>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-200-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-200-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-200-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-200-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-200-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-200-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-200-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-200-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-200-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-200-10">10</a></span>
<span class="normal"><a href="#__codelineno-200-11">11</a></span>
<span class="normal"><a href="#__codelineno-200-12">12</a></span>
<span class="normal"><a href="#__codelineno-200-13">13</a></span>
<span class="normal"><a href="#__codelineno-200-14">14</a></span>
<span class="normal"><a href="#__codelineno-200-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-200-1" name="__codelineno-200-1"></a><span class="o">[</span>root@liyedong<span class="w"> </span>~<span class="o">]</span><span class="c1"># systemctl is-enabled chronyd</span>
<a id="__codelineno-200-2" name="__codelineno-200-2"></a>enabled
<a id="__codelineno-200-3" name="__codelineno-200-3"></a><span class="o">[</span>root@liyedong<span class="w"> </span>~<span class="o">]</span><span class="c1"># systemctl status chronyd</span>
<a id="__codelineno-200-4" name="__codelineno-200-4"></a>vim<span class="w"> </span>/etc/chrony.conf<span class="w">   </span><span class="c1">#配置客户端</span>
<a id="__codelineno-200-5" name="__codelineno-200-5"></a><span class="c1">#pool 2.rhel.pool.ntp.org iburst</span>
<a id="__codelineno-200-6" name="__codelineno-200-6"></a>server<span class="w"> </span>ntp1.aliyun.com<span class="w"> </span>iburst
<a id="__codelineno-200-7" name="__codelineno-200-7"></a>systemctl<span class="w"> </span>restart<span class="w"> </span>chronyd
<a id="__codelineno-200-8" name="__codelineno-200-8"></a>
<a id="__codelineno-200-9" name="__codelineno-200-9"></a><span class="c1">#配置ntp服务端</span>
<a id="__codelineno-200-10" name="__codelineno-200-10"></a>firewall-cmd<span class="w"> </span>--add-service<span class="o">=</span>ntp
<a id="__codelineno-200-11" name="__codelineno-200-11"></a>vim<span class="w"> </span>/etc/chrony.conf<span class="w"> </span>
<a id="__codelineno-200-12" name="__codelineno-200-12"></a><span class="c1"># Allow NTP client access from local network.</span>
<a id="__codelineno-200-13" name="__codelineno-200-13"></a><span class="c1">#allow 192.168.0.0/16</span>
<a id="__codelineno-200-14" name="__codelineno-200-14"></a>allow<span class="w"> </span>*.*.*.*
<a id="__codelineno-200-15" name="__codelineno-200-15"></a>systemctl<span class="w"> </span>restart<span class="w"> </span>chronyd
</code></pre></div></td></tr></table></div>
<h1 id="配置系统调优-tuned配置集">配置系统调优-tuned配置集<a class="headerlink" href="#配置系统调优-tuned配置集" title="Permanent link">&para;</a></h1>
<p><img alt="" src="../../../../images/1718030583086-e5e25c73-318c-45e7-96f7-b6ea24cf4b40.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-201-1">1</a></span>
<span class="normal"><a href="#__codelineno-201-2">2</a></span>
<span class="normal"><a href="#__codelineno-201-3">3</a></span>
<span class="normal"><a href="#__codelineno-201-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-201-1" name="__codelineno-201-1"></a>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>tuned
<a id="__codelineno-201-2" name="__codelineno-201-2"></a>tuned-adm<span class="w"> </span>recommend<span class="w"> </span><span class="c1">#建议</span>
<a id="__codelineno-201-3" name="__codelineno-201-3"></a>tuned-adm<span class="w"> </span>profile<span class="w"> </span>virtual-guest<span class="w"> </span><span class="c1">#根据建议设置</span>
<a id="__codelineno-201-4" name="__codelineno-201-4"></a>tuned-adm<span class="w"> </span>active<span class="w"> </span><span class="c1">#查看存活配置</span>
</code></pre></div></td></tr></table></div>
<h1 id="ssh-介绍"><strong><font style="color:rgb(0,0,0);">SSH 介绍</font></strong><a class="headerlink" href="#ssh-介绍" title="Permanent link">&para;</a></h1>
<p><strong><font style="color:rgb(57,57,57);">SSH(Secure SHell) </font></strong><font style="color:rgb(57,57,57);">:</font><font style="color:rgb(57,57,57);">是一个提供数据通信安全、远程登录、远程指令执行等功能的安 </font></p>
<p><font style="color:rgb(57,57,57);">全网络协议。 </font></p>
<p><font style="color:rgb(57,57,57);">SSH </font><font style="color:rgb(57,57,57);">协议使用 </font><font style="color:rgb(57,57,57);">TCP 22 </font><font style="color:rgb(57,57,57);">端口号，</font><font style="color:rgb(57,57,57);">C/S </font><font style="color:rgb(57,57,57);">架构 </font></p>
<p><font style="color:rgb(57,57,57);">Server </font><font style="color:rgb(57,57,57);">端软件：</font><font style="color:rgb(57,57,57);">openssh </font></p>
<p><font style="color:rgb(57,57,57);">Client </font><font style="color:rgb(57,57,57);">端软件：</font><font style="color:rgb(57,57,57);">ssh putty </font></p>
<p><font style="color:rgb(57,57,57);">xshell SecureCRT </font></p>
<p><strong><font style="color:rgb(0,0,0);">SSH </font></strong><strong><font style="color:rgb(0,0,0);">协议版本： </font></strong></p>
<p><font style="color:rgb(57,57,57);">SSH1</font><font style="color:rgb(57,57,57);">：采用 </font><font style="color:rgb(57,57,57);">DES</font><font style="color:rgb(57,57,57);">、</font><font style="color:rgb(57,57,57);">3DES</font><font style="color:rgb(57,57,57);">、</font><font style="color:rgb(57,57,57);">Blowfish </font><font style="color:rgb(57,57,57);">和 </font><font style="color:rgb(57,57,57);">RC4 </font><font style="color:rgb(57,57,57);">等</font><font style="color:rgb(223,64,42);">对称加密算法</font><font style="color:rgb(57,57,57);">保护数据安全传输，</font><strong><font style="color:rgb(57,57,57);">而</font></strong><strong><font style="color:rgb(223,64,42);">对称 </font></strong></p>
<p><strong><font style="color:rgb(223,64,42);">加密算法</font></strong><strong><font style="color:rgb(57,57,57);">的密钥是通过</font></strong><strong><font style="color:rgb(223,64,42);">非对称加密算法</font></strong><strong><font style="color:rgb(57,57,57);">（</font></strong><strong><font style="color:rgb(57,57,57);">RSA</font></strong><strong><font style="color:rgb(57,57,57);">）来完成交换的 </font></strong></p>
<p><font style="color:rgb(57,57,57);">SSH2</font><font style="color:rgb(57,57,57);">：</font><strong><font style="color:rgb(57,57,57);">用数字签名算法（</font></strong><strong><font style="color:rgb(57,57,57);">DSA</font></strong><strong><font style="color:rgb(57,57,57);">）和 </font></strong><strong><font style="color:rgb(57,57,57);">Diffie-Hellman</font></strong><strong><font style="color:rgb(57,57,57);">（</font></strong><strong><font style="color:rgb(57,57,57);">DH</font></strong><strong><font style="color:rgb(57,57,57);">）算法代替 </font></strong><strong><font style="color:rgb(57,57,57);">RSA </font></strong><strong><font style="color:rgb(57,57,57);">来完成对称密 </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">钥的交换，</font></strong><font style="color:rgb(57,57,57);">用消息证实代码（</font><font style="color:rgb(57,57,57);">HMAC</font><font style="color:rgb(57,57,57);">）来代替 </font><font style="color:rgb(57,57,57);">CRC </font></p>
<p><font style="color:rgb(57,57,57);">基于 </font><font style="color:rgb(57,57,57);">DH </font><font style="color:rgb(57,57,57);">算法做密钥交换 </font></p>
<p><font style="color:rgb(57,57,57);">基于 </font><font style="color:rgb(57,57,57);">RSA </font><font style="color:rgb(57,57,57);">或 </font><font style="color:rgb(57,57,57);">DSA </font><font style="color:rgb(57,57,57);">算法实现身份认证 </font></p>
<p><font style="color:rgb(57,57,57);">兼容 </font><font style="color:rgb(57,57,57);">SSH1 </font></p>
<p><font style="color:rgb(0,0,0);">补充知识： </font></p>
<p><font style="color:rgb(0,0,0);">如何保障两台终端传递数据时候，完成数据机密性、完整性和无可否认性校验 </font></p>
<p><font style="color:rgb(0,0,0);">机密性：加密 </font></p>
<p><font style="color:rgb(0,0,0);">对称加密：只有一把钥匙，同时用于加密和解密 </font></p>
<p><font style="color:rgb(0,0,0);">缺点：传输的过程，密钥容易被中间人劫持；密钥的管理不方便 </font></p>
<p><font style="color:rgb(0,0,0);">优点：加密速度快，加密后的数据不会变大 </font></p>
<p><font style="color:rgb(0,0,0);">非对称加密：有两把钥匙，一把公钥，一把私钥。公钥加密的数据只有私钥能解开，私钥加密的数据只有公钥能解开。 </font></p>
<p><font style="color:rgb(0,0,0);">私钥永远存在于本地，公钥任何人都可以获取 </font></p>
<p><font style="color:rgb(0,0,0);">缺点：加密速度慢、加密后文件会变大 </font></p>
<p><strong><font style="color:rgb(0,0,0);">SSH </font></strong><strong><font style="color:rgb(0,0,0);">主要特性： </font></strong></p>
<p><font style="color:rgb(57,57,57);">加密：避免数据内容泄漏 </font></p>
<p><font style="color:rgb(57,57,57);">通信完整性：避免数据内容被纂改 </font></p>
<p><font style="color:rgb(57,57,57);">认证：识别数据发送者和接收者 </font></p>
<p><font style="color:rgb(57,57,57);">SSH </font><font style="color:rgb(57,57,57);">建立连接的过程主要分为下面几个阶段 </font></p>
<p><font style="color:rgb(57,57,57);">-SSH </font><font style="color:rgb(57,57,57);">协议版本协商阶段。</font><font style="color:rgb(57,57,57);">SSH </font><font style="color:rgb(57,57,57);">目前包括 </font><font style="color:rgb(57,57,57);">SSH1 </font><font style="color:rgb(57,57,57);">和 </font><font style="color:rgb(57,57,57);">SSH2 </font><font style="color:rgb(57,57,57);">两个大版本。 </font></p>
<p><font style="color:rgb(57,57,57);">-密钥和算法协商阶段，SSH 支持</font><font style="color:rgb(223,64,42);">多种加密算</font><font style="color:rgb(57,57,57);">法，双方根据自己和对端支持的算</font><font style="color:rgb(10,10,10);">法进行协商， 最终决定要使用的算法。</font></p>
<p><font style="color:rgb(57,57,57);">-</font><font style="color:rgb(57,57,57);">认证阶段，服务器对客户端进行身份验证。 </font></p>
<p><font style="color:rgb(57,57,57);">-</font><font style="color:rgb(57,57,57);">会话请求阶段，完成认证后，客户端会向服务器端发送会话请求。 </font></p>
<p><font style="color:rgb(57,57,57);">-交互会话阶段，会话请求通过后，服务器端和客户端进行信息的交互。</font></p>
<p><strong><font style="color:rgb(57,57,57);">1) SSH </font></strong><strong><font style="color:rgb(57,57,57);">协议版本协商阶段： </font></strong></p>
<p><font style="color:rgb(57,57,57);">客户端通过 </font><font style="color:rgb(223,64,42);">TCP </font><font style="color:rgb(223,64,42);">三次握手</font><font style="color:rgb(57,57,57);">与服务器的 </font><font style="color:rgb(57,57,57);">SSH </font><font style="color:rgb(57,57,57);">端口建立 </font><font style="color:rgb(57,57,57);">TCP </font><font style="color:rgb(57,57,57);">连接。 </font></p>
<p><font style="color:rgb(57,57,57);">服务器通过建立好的连接向客户端发送一个包含 </font><font style="color:rgb(57,57,57);">SSH </font><font style="color:rgb(57,57,57);">版本信息的报文，格式为</font><font style="color:rgb(57,57,57);">“SSH-&lt;SSH </font></p>
<p><font style="color:rgb(57,57,57);">协议大版本号</font><font style="color:rgb(57,57,57);">&gt;.<SSH \</font>\<font style="color:rgb(57,57,57);">协议小版本号\</font>\<font style="color:rgb(57,57,57);">>-&lt;</font><font style="color:rgb(57,57,57);">软件版本号</font><font style="color:rgb(57,57,57);">&gt;”</font><font style="color:rgb(57,57,57);">，软件版本号主要用于调试。 </font></p>
<p><font style="color:rgb(57,57,57);">客户端收到版本号信息后，如果服务器使用的协议版本号低于自己的，但是客户端能够兼容 </font></p>
<p><font style="color:rgb(57,57,57);">这个低版本的 </font><font style="color:rgb(57,57,57);">SSH </font><font style="color:rgb(57,57,57);">协议，则就使用这个版本进行通信。否则，客户端会使用自己的版本号。 </font></p>
<p><font style="color:rgb(57,57,57);">客户端将自己决定使用的版本号发给服务器，服务器判断客户端使用的版本号自己是否支持， </font></p>
<p><font style="color:rgb(57,57,57);">从而决定是否能够继续完成 </font><font style="color:rgb(57,57,57);">SSH </font><font style="color:rgb(57,57,57);">连接。 </font></p>
<p><font style="color:rgb(57,57,57);">如果协商成功，则</font><font style="color:rgb(223,64,42);">进入密钥和算法协商阶段。 </font></p>
<p><font style="color:rgb(57,57,57);">2)</font><strong><font style="color:rgb(57,57,57);">密钥和算法协商阶段： </font></strong></p>
<p><font style="color:rgb(57,57,57);">服务器端和客户端分别发送算法协商报文给对端，报文中包含自己支持的公钥算法列表，加密算法列表，MAC（Message Authentication Code，消息验证码）算法列表，压缩算法列表等。 </font></p>
<p><font style="color:rgb(57,57,57);">和</font><font style="color:rgb(223,64,42);">版本协商阶段类</font><font style="color:rgb(57,57,57);">似，服务器端和客户端根据自己和对端支持的算法来决定最终要使用的各 个算法。 </font></p>
<p><font style="color:rgb(57,57,57);">服务器端和客户端利用 Diffie-Hellman 密钥交换算法，主机密钥对等参数，生成共享密 钥和会话 ID。会话密钥用于在后续的通信过程中两端对传输的数据进行加密和解密，而会 话 ID 用于认证过程。 </font></p>
<p><font style="color:rgb(57,57,57);">3)</font><strong><font style="color:rgb(57,57,57);">认证阶段： </font></strong></p>
<p><font style="color:rgb(57,57,57);">客户端向服务器端发送认证请求，请求中包含</font><font style="color:rgb(223,64,42);">用户名，认证方法，密码或密钥。 </font></p>
<p><font style="color:rgb(57,57,57);">服务器端对客户端进行认证，如果认证失败，则向客户端发送失败消息，其中包含可以再次 认证的方法列表。 </font></p>
<p><font style="color:rgb(57,57,57);">客户端再次使用支持的认证方法中的一种进行认证，直到达到</font><font style="color:rgb(223,64,42);">认证次数上限</font><font style="color:rgb(57,57,57);">被服务器终止连 接，或者认证成功为止。 </font></p>
<p><font style="color:rgb(57,57,57);">4)</font><strong><font style="color:rgb(57,57,57);">会话请求阶段： </font></strong></p>
<p><font style="color:rgb(57,57,57);">服务器等待客户端请求。 </font></p>
<p><font style="color:rgb(57,57,57);">认证完成后，客户端向服务器发送会话请求。 </font></p>
<p><font style="color:rgb(57,57,57);">服务器处理客户端请求，完成后，会向客户端回复 </font><font style="color:rgb(223,64,42);">SSH_SMSG_SUCCESS </font><font style="color:rgb(57,57,57);">报文，双方进入 交互会话阶段。如果请求未被成功处理，则服务器返回 </font><font style="color:rgb(223,64,42);">SSH_SMSG_FAILURE </font><font style="color:rgb(57,57,57);">报文，表示 请求处理失败或者不能识别客户端请求。 </font></p>
<p><font style="color:rgb(57,57,57);">5)</font><strong><font style="color:rgb(57,57,57);">交互会话阶段： </font></strong></p>
<p><font style="color:rgb(57,57,57);">客户端将要执行的命令加密发送给服务器。 </font></p>
<p><font style="color:rgb(57,57,57);">服务器收到后，解密命令，执行后将结果加密返回客户端。 </font></p>
<p><font style="color:rgb(57,57,57);">客户端将返回结果解密后显示到终端上。</font></p>
<p><strong><font style="color:rgb(0,0,0);">用户认证的两种方式 </font></strong></p>
<p><font style="color:rgb(57,57,57);">密码认证 </font></p>
<p><font style="color:rgb(57,57,57);">客户端提供用户名和密码，服务端对用户名和密码进行匹配 </font></p>
<p><font style="color:rgb(57,57,57);">公钥认证</font></p>
<p><img alt="" src="../../../../images/1717731016701-b10c5f35-3c4a-43aa-b75e-a05d57cb9c80.png" /></p>
<p><img alt="" src="../../../../images/1717731023352-d4f97031-345f-4c5d-9b92-e478cccd471d.png" /></p>
<p><strong><font style="color:rgb(0,0,0);">OPENSSH </font></strong><strong><font style="color:rgb(0,0,0);">配置 </font></strong></p>
<p><font style="color:rgb(57,57,57);">SSH </font><font style="color:rgb(57,57,57);">是一种协议规范，可以实现 </font><font style="color:rgb(57,57,57);">ssh </font><font style="color:rgb(57,57,57);">协议的软件有很多中，其中使用最广泛的就是 </font><font style="color:rgb(57,57,57);">OpenBSD </font></p>
<p><font style="color:rgb(57,57,57);">组织开发的开源软件 </font><font style="color:rgb(57,57,57);">OPEN </font></p>
<p><font style="color:rgb(57,57,57);">SSH </font></p>
<p><font style="color:rgb(57,57,57);">默认已安装 openssh（没安装 可以使用 YUM 进行安装） </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# rpm -qa | grep openssh </font></p>
<p><strong><font style="color:rgb(223,64,42);">openssh</font></strong><font style="color:rgb(57,57,57);">-7.4p1-16.el7.x86_64 </font></p>
<p><strong><font style="color:rgb(223,64,42);">openssh</font></strong><font style="color:rgb(57,57,57);">-clients-7.4p1-16.el7.x86_64 </font></p>
<p><strong><font style="color:rgb(223,64,42);">openssh</font></strong><font style="color:rgb(57,57,57);">-server-7.4p1-16.el7.x86_64 </font></p>
<p><font style="color:rgb(57,57,57);">OPENSSH </font><font style="color:rgb(57,57,57);">同时提供了客户端、服务端和密钥生成工具 </font></p>
<h2 id="配置文件-etcssh"><strong><font style="color:rgb(0,0,0);">配置文件： /etc/ssh/ </font></strong><a class="headerlink" href="#配置文件-etcssh" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(57,57,57);">客户端配置文件：</font><font style="color:rgb(57,57,57);">ssh_config </font></p>
<p><font style="color:rgb(57,57,57);">服务端配置文件：</font><font style="color:rgb(57,57,57);">sshd_config </font></p>
<p><strong><font style="color:rgb(0,0,0);">服务端配置：</font></strong></p>
<p><img alt="" src="../../../../images/1717731051487-a1c4acd1-24c6-4fe4-b038-eca9a8ccbdf5.png" /></p>
<p><img alt="" src="../../../../images/1717731374994-039d0c9b-2d68-4413-8e18-3da1167feeb1.png" /></p>
<p><font style="color:rgb(57,57,57);">参数修改后需要重启 </font><font style="color:rgb(57,57,57);">sshd </font><font style="color:rgb(57,57,57);">服务</font><font style="color:rgb(57,57,57);">---(selinux,firewalld) </font></p>
<p><font style="color:rgb(223,64,42);">#systemctl restart sshd </font></p>
<h2 id="ssh-安全配置推荐"><strong><font style="color:rgb(0,0,0);">SSH 安全配置推荐 </font></strong><a class="headerlink" href="#ssh-安全配置推荐" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(57,57,57);">1.</font><font style="color:rgb(57,57,57);">修改默认端口 </font></p>
<p><font style="color:rgb(57,57,57);">2.</font><font style="color:rgb(57,57,57);">修改监听的 </font><font style="color:rgb(57,57,57);">IP </font></p>
<p><font style="color:rgb(57,57,57);">3.</font><font style="color:rgb(57,57,57);">禁止 </font><font style="color:rgb(57,57,57);">root </font><font style="color:rgb(57,57,57);">用户登录 </font></p>
<p><font style="color:rgb(57,57,57);">4.</font><font style="color:rgb(223,64,42);">禁止空密码登录 </font></p>
<p><font style="color:rgb(57,57,57);">5.</font><font style="color:rgb(223,64,42);">只是用 </font><font style="color:rgb(223,64,42);">SSH2 </font><font style="color:rgb(223,64,42);">版本 </font></p>
<p><font style="color:rgb(57,57,57);">6.</font><font style="color:rgb(57,57,57);">推荐密钥认证，最好禁止密码认证 </font></p>
<p><font style="color:rgb(57,57,57);">7.</font><font style="color:rgb(57,57,57);">设置登录白名单</font><font style="color:rgb(57,57,57);">(</font><font style="color:rgb(57,57,57);">设置 </font><strong><font style="color:rgb(223,64,42);">AllowUsers USER_NAME</font></strong><font style="color:rgb(57,57,57);">) </font></p>
<p><font style="color:rgb(57,57,57);">8.</font><font style="color:rgb(57,57,57);">取消 </font><font style="color:rgb(57,57,57);">DNS </font><font style="color:rgb(57,57,57);">反解 </font></p>
<p><font style="color:rgb(57,57,57);">9.</font><font style="color:rgb(57,57,57);">限制 </font><font style="color:rgb(57,57,57);">SSH </font><font style="color:rgb(57,57,57);">会话数量 </font></p>
<p><font style="color:rgb(57,57,57);">注：修改 </font><font style="color:rgb(57,57,57);">sshd </font><font style="color:rgb(57,57,57);">连接端口后，需要修改 </font><font style="color:rgb(57,57,57);">selinux </font><font style="color:rgb(57,57,57);">和 </font><font style="color:rgb(57,57,57);">firewalld </font><font style="color:rgb(57,57,57);">规则 </font></p>
<p><font style="color:rgb(57,57,57);">可以临时关闭 </font><font style="color:rgb(57,57,57);">selinux </font><font style="color:rgb(57,57,57);">和 </font><font style="color:rgb(57,57,57);">firewalld</font><font style="color:rgb(57,57,57);">（后续课程中会介绍 </font><font style="color:rgb(57,57,57);">selinux </font><font style="color:rgb(57,57,57);">和 </font><font style="color:rgb(57,57,57);">firewalld </font><font style="color:rgb(57,57,57);">技术） </font></p>
<p><font style="color:rgb(57,57,57);">[root@difu1909 ~]# setenforce 0</font></p>
<p><font style="color:rgb(57,57,57);">[root@difu1909 ~]# systemctl stop firewalld.service</font></p>
<p><strong><font style="color:rgb(0,0,0);">OPENSSH </font></strong><strong><font style="color:rgb(0,0,0);">相关操作 </font></strong></p>
<p><strong><font style="color:rgb(0,0,0);">SSH: </font></strong></p>
<p><strong><font style="color:rgb(0,0,0);">openssh </font></strong><strong><font style="color:rgb(0,0,0);">提供的客户端工具，基于 </font></strong><strong><font style="color:rgb(0,0,0);">ssh </font></strong><strong><font style="color:rgb(0,0,0);">协议连接到服务器 </font></strong></p>
<p><font style="color:rgb(57,57,57);">用法：</font><font style="color:rgb(223,64,42);">#ssh [option] [user_name@]host [command] </font></p>
<p><font style="color:rgb(57,57,57);">ssh </font><font style="color:rgb(57,57,57);">连接如果没有指定用户则以当前系统登录的用户作为远程登录的用户名 </font></p>
<h2 id="常用选项"><strong><font style="color:rgb(0,0,0);">常用选项： </font></strong><a class="headerlink" href="#常用选项" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(223,64,42);">-l USER </font><font style="color:rgb(57,57,57);">指定远程登录用户 </font></p>
<p><font style="color:rgb(223,64,42);">-p PORT </font><font style="color:rgb(57,57,57);">指定 </font><font style="color:rgb(57,57,57);">ssh </font><font style="color:rgb(57,57,57);">端口，默认端口是 </font><font style="color:rgb(57,57,57);">22 </font></p>
<p><font style="color:rgb(223,64,42);">-i FILE_NAME </font><font style="color:rgb(57,57,57);">指定密钥文件 </font></p>
<p><font style="color:rgb(223,64,42);">-Y </font><font style="color:rgb(223,64,42);">或者</font><font style="color:rgb(223,64,42);">-X </font><font style="color:rgb(57,57,57);">支持可信任的 </font><font style="color:rgb(57,57,57);">X11 </font><font style="color:rgb(57,57,57);">转发 </font></p>
<p><font style="color:rgb(223,64,42);">-v </font><font style="color:rgb(57,57,57);">调试 </font><font style="color:rgb(57,57,57);">SSH </font><font style="color:rgb(57,57,57);">会话 </font></p>
<p><font style="color:rgb(57,57,57);">ssh </font><font style="color:rgb(57,57,57);">连接到远程主机：</font><font style="color:rgb(223,64,42);">#ssh myth</font><font style="color:rgb(57,57,57);">@192.168.10.20 </font></p>
<p><font style="color:rgb(57,57,57);">在远程主机上执行命令：</font><font style="color:rgb(57,57,57);">#ssh myth@192.168.10.20 'uname </font></p>
<p><font style="color:rgb(57,57,57);">-r' </font></p>
<p><strong><font style="color:rgb(0,0,0);">密钥创建和传输</font></strong><strong><font style="color:rgb(0,0,0);">---- </font></strong></p>
<p><font style="color:rgb(57,57,57);">密钥对创建：</font><font style="color:rgb(57,57,57);">#ssh-keygen </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# ssh-keygen </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# cd .ssh/ </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth .ssh]# ls </font></p>
<p><strong><font style="color:rgb(223,64,42);">id_rsa id_rsa.pub </font></strong><font style="color:rgb(57,57,57);">known_hosts </font></p>
<p><font style="color:rgb(57,57,57);">选项： </font></p>
<p><font style="color:rgb(57,57,57);">-t </font><font style="color:rgb(57,57,57);">指定加密算法类型 </font></p>
<p><font style="color:rgb(57,57,57);">-f </font><font style="color:rgb(57,57,57);">指定密钥文件保存位置 </font></p>
<p><font style="color:rgb(57,57,57);">-b </font><font style="color:rgb(57,57,57);">密钥长度 </font></p>
<p><font style="color:rgb(57,57,57);">-P </font><font style="color:rgb(57,57,57);">指定密钥密码 </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# ssh-keygen </font><font style="color:rgb(223,64,42);">-t </font><font style="color:rgb(57,57,57);">rsa </font><font style="color:rgb(223,64,42);">-f </font><font style="color:rgb(57,57,57);">/root/myth_key/myth_rsa_key </font><font style="color:rgb(223,64,42);">-P </font></p>
<p><font style="color:rgb(57,57,57);">ahdifu.com </font><font style="color:rgb(223,64,42);">-b </font><font style="color:rgb(57,57,57);">4096 </font></p>
<p><font style="color:rgb(57,57,57);">Generating public/private rsa key pair. </font></p>
<p><font style="color:rgb(57,57,57);">Your identification has been saved in </font><strong><font style="color:rgb(223,64,42);">/root/myth_key/myth_rsa_key</font></strong><font style="color:rgb(57,57,57);">. </font></p>
<p><font style="color:rgb(57,57,57);">Your public key has been saved in </font><strong><font style="color:rgb(223,64,42);">/root/myth_key/myth_rsa_key.pub</font></strong><font style="color:rgb(57,57,57);">. </font></p>
<p><font style="color:rgb(57,57,57);">The key fingerprint is: </font></p>
<p><font style="color:rgb(57,57,57);">74:1f:e6:b8:9c:42:ee:26:7f:a6:b7:2a:53:1b:7f:88 root@myth </font></p>
<p><font style="color:rgb(57,57,57);">The key's randomart image is: </font></p>
<p><font style="color:rgb(57,57,57);">+--[ RSA 4096]----+ </font></p>
<p><font style="color:rgb(57,57,57);">| | </font></p>
<p><font style="color:rgb(57,57,57);">| | </font></p>
<p><font style="color:rgb(57,57,57);">| . . o | </font></p>
<p><font style="color:rgb(57,57,57);">| . . = . | </font></p>
<p><font style="color:rgb(57,57,57);">| S . o | </font></p>
<p><font style="color:rgb(57,57,57);">| oo. o | </font></p>
<p><font style="color:rgb(57,57,57);">| .o=+. |</font></p>
<p><font style="color:rgb(57,57,57);">| +.E.* . | </font></p>
<p><font style="color:rgb(57,57,57);">| <em>=</em>.o | </font></p>
<p><font style="color:rgb(57,57,57);">+-----------------+ </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# cd myth_key/ </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth myth_key]# ls </font></p>
<p><font style="color:rgb(223,64,42);">myth_rsa_key myth_rsa_key.pub </font></p>
<p><font style="color:rgb(57,57,57);">密钥发送： 基于 </font><font style="color:rgb(57,57,57);">ssh </font><font style="color:rgb(57,57,57);">将公钥文件 </font></p>
<p><font style="color:rgb(57,57,57);">选项： </font></p>
<p><font style="color:rgb(57,57,57);">-p </font><font style="color:rgb(57,57,57);">指定 </font><font style="color:rgb(57,57,57);">ssh </font><font style="color:rgb(57,57,57);">端口 </font></p>
<p><font style="color:rgb(57,57,57);">-i </font><font style="color:rgb(57,57,57);">指定本地公钥文件 </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# </font><strong><font style="color:rgb(57,57,57);">ssh-copy-id -i /root/myth_key/myth_rsa_key.pub </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">root@192.168.200.114 </font></strong></p>
<p><font style="color:rgb(57,57,57);">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), </font></p>
<p><font style="color:rgb(57,57,57);">to filter out any that are already installed </font></p>
<p><font style="color:rgb(57,57,57);">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you </font></p>
<p><font style="color:rgb(57,57,57);">are prompted now it is to install the new keys </font></p>
<p><font style="color:rgb(57,57,57);">Enter passphrase for key '/root/.ssh/id_rsa': </font></p>
<p><font style="color:rgb(57,57,57);">Number of key(s) added: 1 </font></p>
<p><font style="color:rgb(57,57,57);">Now try logging into the machine, with: "ssh 'root@192.168.200.114'" </font></p>
<p><font style="color:rgb(57,57,57);">and check to make sure that only the key(s) you wanted were added. </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# </font></p>
<p><font style="color:rgb(57,57,57);">[root@difu1909 ~]# cd .ssh/ </font></p>
<p><font style="color:rgb(57,57,57);">[root@difu1909 .ssh]# ls </font></p>
<p><strong><font style="color:rgb(223,64,42);">authorized_keys </font></strong><font style="color:rgb(57,57,57);">id_rsa id_rsa.pub known_hosts </font></p>
<p><font style="color:rgb(57,57,57);">[root@difu1909 .ssh]# vim </font><font style="color:rgb(223,64,42);">authorized_keys</font></p>
<p><img alt="" src="../../../../images/1717731735217-2419f6aa-5ae3-428e-a569-200dadd981d5.png" /></p>
<h2 id="scp基于-ssh-的跨主机复制"><strong><font style="color:rgb(0,0,0);">SCP:基于 SSH 的跨主机复制 </font></strong><a class="headerlink" href="#scp基于-ssh-的跨主机复制" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(57,57,57);">将本地文件推送给远程主机 </font></p>
<p><font style="color:rgb(223,64,42);">#scp [options] /path/file [user@]host:/path/file </font></p>
<p><font style="color:rgb(57,57,57);">将远程主机上的文件拉取到本地 </font></p>
<p><font style="color:rgb(223,64,42);">#scp [options] [user@]host:/path/file /path/file </font></p>
<p><font style="color:rgb(57,57,57);">常用选项： </font></p>
<p><font style="color:rgb(57,57,57);">-p </font><font style="color:rgb(57,57,57);">指定 </font><font style="color:rgb(57,57,57);">ssh </font><font style="color:rgb(57,57,57);">端口 </font><font style="color:rgb(57,57,57);">(</font><font style="color:rgb(57,57,57);">小写</font><font style="color:rgb(57,57,57);">) </font></p>
<p><font style="color:rgb(57,57,57);">-r </font><font style="color:rgb(57,57,57);">递归复制 </font></p>
<p><font style="color:rgb(57,57,57);">-P </font><font style="color:rgb(57,57,57);">保留源文件属性 </font></p>
<p><font style="color:rgb(57,57,57);">-q </font><font style="color:rgb(57,57,57);">静默传送 </font></p>
<p><font style="color:rgb(57,57,57);">推文件：</font><font style="color:rgb(223,64,42);"># scp -r </font></p>
<p><font style="color:rgb(223,64,42);">-p /etc/ root@192.168.10.20:/tmp </font></p>
<p><font style="color:rgb(57,57,57);">拉文件：</font><font style="color:rgb(223,64,42);"># scp root@192.168.10.20:/etc/passwd /tmp/</font></p>
<h1 id="selinux-介绍"><strong><font style="color:rgb(0,0,0);">SELinux </font></strong><strong><font style="color:rgb(0,0,0);">介绍 </font></strong><a class="headerlink" href="#selinux-介绍" title="Permanent link">&para;</a></h1>
<p><strong><font style="color:rgb(57,57,57);">系统中两种访问控制机制： </font></strong></p>
<p><font style="color:rgb(57,57,57);">DAC: </font><font style="color:rgb(57,57,57);">自主访问控制，即传统的用户权限控制 </font></p>
<p><font style="color:rgb(57,57,57);">MAC: </font><font style="color:rgb(57,57,57);">强制访问控制，通过一套安全策略来控制</font><font style="color:rgb(223,64,42);">主体和客体</font><font style="color:rgb(57,57,57);">之间的交互 </font></p>
<p><font style="color:rgb(57,57,57);">一个主体进程想要访问客体资源必须同时</font><font style="color:rgb(223,64,42);">满足 </font><font style="color:rgb(223,64,42);">DAC </font><font style="color:rgb(223,64,42);">和 </font><font style="color:rgb(223,64,42);">MAC </font></p>
<p><strong><font style="color:rgb(57,57,57);">SELinux: </font></strong><font style="color:rgb(57,57,57);">Security Enhanceed Linux</font><font style="color:rgb(57,57,57);">，即安全增强的 </font><font style="color:rgb(57,57,57);">Linux </font></p>
<p><font style="color:rgb(57,57,57);">SELinux </font><font style="color:rgb(57,57,57);">是一个 </font><font style="color:rgb(57,57,57);">Linux </font><font style="color:rgb(57,57,57);">内核的安全模型，提供了</font><font style="color:rgb(223,64,42);">访问控制安全策略机制</font><font style="color:rgb(57,57,57);">，是美国国家安全局</font><font style="color:rgb(57,57,57);">(NSA) </font></p>
<p><font style="color:rgb(57,57,57);">在 </font><font style="color:rgb(57,57,57);">Linux </font><font style="color:rgb(57,57,57);">社区帮助下开发的一种安全访问控制体系，是 </font><font style="color:rgb(57,57,57);">Linux </font><font style="color:rgb(57,57,57);">历史上最杰出的安全子系统。 </font></p>
<p><strong><font style="color:rgb(57,57,57);">SElinux </font></strong><strong><font style="color:rgb(57,57,57);">机制</font></strong><font style="color:rgb(57,57,57);">：所有的进程和文件都被</font><font style="color:rgb(223,64,42);">标记一种类型</font><font style="color:rgb(57,57,57);">，类型定义了进程的操作域，每一个进程都被 </font></p>
<p><font style="color:rgb(57,57,57);">限制在自己的活动域中，</font><font style="color:rgb(57,57,57);">SElinux </font><font style="color:rgb(57,57,57);">策略规则定义了</font><font style="color:rgb(223,64,42);">进程和文件之间的访问权限</font><font style="color:rgb(57,57,57);">，仅当有明确的策略 </font></p>
<p><font style="color:rgb(57,57,57);">规则时才会被允许。 </font></p>
<p><strong><font style="color:rgb(57,57,57);">SELinux </font></strong><strong><font style="color:rgb(57,57,57);">配置文件</font></strong><font style="color:rgb(57,57,57);">：</font><font style="color:rgb(223,64,42);">/etc/selinux/config </font></p>
<p><font style="color:rgb(57,57,57);">SELinux </font><font style="color:rgb(57,57,57);">工作类型： </font></p>
<p><font style="color:rgb(57,57,57);">targeted</font><font style="color:rgb(57,57,57);">：用来保护常见的网络服务，仅有限进程受到 </font><font style="color:rgb(57,57,57);">selinux </font><font style="color:rgb(57,57,57);">控制，默认类型 </font></p>
<p><font style="color:rgb(57,57,57);">minimum</font><font style="color:rgb(57,57,57);">：</font><font style="color:rgb(57,57,57);">targeted </font><font style="color:rgb(57,57,57);">的修改版，只对选择的网络服务，仅对选中的进程生效 </font></p>
<p><font style="color:rgb(34,34,34);">mls</font><font style="color:rgb(34,34,34);">：提供 </font><font style="color:rgb(34,34,34);">mls </font><font style="color:rgb(34,34,34);">机制的安全性，</font><font style="color:rgb(223,64,42);">国防级别</font><font style="color:rgb(34,34,34);">的 </font></p>
<p><font style="color:rgb(57,57,57);">SELinux </font><font style="color:rgb(57,57,57);">工作模式： </font></p>
<p><strong><font style="color:rgb(57,57,57);">enforcing: </font></strong><font style="color:rgb(57,57,57);">强制模式，拦截并记录非法访问 </font></p>
<p><strong><font style="color:rgb(57,57,57);">permissive: </font></strong><font style="color:rgb(57,57,57);">宽容模式，只记录不阻止 </font></p>
<p><strong><font style="color:rgb(57,57,57);">disabled</font></strong><strong><font style="color:rgb(57,57,57);">：</font></strong><font style="color:rgb(57,57,57);">禁用 </font><font style="color:rgb(57,57,57);">SElinux </font></p>
<p><strong><font style="color:rgb(57,57,57);">临时设置 </font></strong><strong><font style="color:rgb(57,57,57);">SELinux </font></strong><strong><font style="color:rgb(57,57,57);">模式： </font></strong></p>
<p><font style="color:rgb(223,64,42);">#setenforce 0 </font></p>
<p><font style="color:rgb(57,57,57);">--0 </font><font style="color:rgb(57,57,57);">表示临时设置为 </font><font style="color:rgb(57,57,57);">permissive</font><font style="color:rgb(57,57,57);">，</font><font style="color:rgb(57,57,57);">1 </font><font style="color:rgb(57,57,57);">表示设置为 </font><font style="color:rgb(57,57,57);">enforcing </font></p>
<p><font style="color:rgb(223,64,42);">#getenforce </font></p>
<p><font style="color:rgb(57,57,57);">--</font><font style="color:rgb(57,57,57);">查看当前 </font><font style="color:rgb(57,57,57);">SELinux </font><font style="color:rgb(57,57,57);">模式 </font></p>
<p><strong><font style="color:rgb(0,0,0);">安全上下文： </font></strong></p>
<p><font style="color:rgb(0,0,0);">所有文件、端口、进程都会被打上安全标签，这个标签就是安全上下文 </font></p>
<p><strong><font style="color:rgb(57,57,57);">安全上下文的组成： </font></strong></p>
<p><font style="color:rgb(57,57,57);">查看文件的上下文标签：</font><font style="color:rgb(223,64,42);">#ls -lZ </font></p>
<p><font style="color:rgb(57,57,57);">查看进程的上下文标签：</font><font style="color:rgb(223,64,42);">#ps -auxZ </font></p>
<p><font style="color:rgb(57,57,57);">yum </font><font style="color:rgb(57,57,57);">安装 </font><font style="color:rgb(57,57,57);">httpd </font></p>
<p><font style="color:rgb(57,57,57);">#yum -y install httpd</font></p>
<p><font style="color:rgb(57,57,57);">在</font><font style="color:rgb(57,57,57);">/var/www/html/</font><font style="color:rgb(57,57,57);">下创建 </font><font style="color:rgb(57,57,57);">index.html </font><font style="color:rgb(57,57,57);">文件 </font></p>
<p><font style="color:rgb(57,57,57);"># cd /var/www/html/ </font></p>
<p><font style="color:rgb(57,57,57);"># vim index.html [</font><font style="color:rgb(57,57,57);">编辑网页文件</font><font style="color:rgb(57,57,57);">] </font></p>
<p><font style="color:rgb(57,57,57);"># systemctl restart httpd </font></p>
<p><font style="color:rgb(57,57,57);">在本机通过 </font><font style="color:rgb(0,56,132);">http://127.0.0.1/index.html </font><font style="color:rgb(57,57,57);">访问网页 </font></p>
<p><font style="color:rgb(57,57,57);">更改 </font><font style="color:rgb(57,57,57);">index.html </font><font style="color:rgb(57,57,57);">文件及相应的位置 </font></p>
<p><font style="color:rgb(57,57,57);">修改 </font><font style="color:rgb(57,57,57);">httpd.conf </font><font style="color:rgb(57,57,57);">文件 </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth html]# vim /etc/httpd/conf/httpd.conf </font></p>
<p><font style="color:rgb(223,64,42);">#</font><font style="color:rgb(57,57,57);">DocumentRoot "/var/www/html" </font></p>
<p><font style="color:rgb(57,57,57);">DocumentRoot "/test/" </font></p>
<p><font style="color:rgb(57,57,57);">....... </font></p>
<p><font style="color:rgb(57,57,57);"><Directory \</font>\<font style="color:rgb(57,57,57);">"/test/"\</font>\<font style="color:rgb(57,57,57);">> </font></p>
<p><font style="color:rgb(57,57,57);">AllowOverride None </font></p>
<p><font style="color:rgb(57,57,57);">Options Indexes FollowSymLinks </font></p>
<p><font style="color:rgb(57,57,57);">Require all granted </font></p>
<p><font style="color:rgb(57,57,57);"></Directory > </font></p>
<p><font style="color:rgb(57,57,57);">再次访问 </font><font style="color:rgb(0,56,132);">http://127.0.0.1/index.html </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# ls -Z /var/www/html/index.html </font></p>
<p><font style="color:rgb(57,57,57);">-rw-r--r--. root root unconfined_u:object_r:httpd_sys_content_t:s0 </font></p>
<p><font style="color:rgb(57,57,57);">/var/www/html/index.html </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# ls -Z /test/index.html </font></p>
<p><font style="color:rgb(57,57,57);">-rw-r--r--. root root unconfined_u:object_r:default_t:s0 /test/index.html </font></p>
<p><strong><font style="color:rgb(223,64,42);">system_u:object_r:admin_home_t:s0 </font></strong></p>
<p><strong><font style="color:rgb(223,64,42);">用户</font></strong><strong><font style="color:rgb(223,64,42);">:</font></strong><strong><font style="color:rgb(223,64,42);">角色</font></strong><strong><font style="color:rgb(223,64,42);">:</font></strong><strong><font style="color:rgb(223,64,42);">类型</font></strong><strong><font style="color:rgb(223,64,42);">:</font></strong><strong><font style="color:rgb(223,64,42);">级别 </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">用户：</font></strong><font style="color:rgb(223,64,42);">每一个系统账户都被映射到一个 </font><font style="color:rgb(223,64,42);">selinux </font><font style="color:rgb(223,64,42);">用户 </font></p>
<p><font style="color:rgb(223,64,42);">#semanage login -l --</font><font style="color:rgb(223,64,42);">查看系统用户与 </font><font style="color:rgb(223,64,42);">selinux </font><font style="color:rgb(223,64,42);">账户的映射 </font></p>
<p><strong><font style="color:rgb(57,57,57);">角色</font></strong><font style="color:rgb(57,57,57);">：</font><font style="color:rgb(223,64,42);">定义数据是程序、用户、还是文件资源 </font></p>
<p><font style="color:rgb(223,64,42);">object_r</font><font style="color:rgb(57,57,57);">:</font><font style="color:rgb(57,57,57);">代表是文件或目录等文件资源 </font></p>
<p><font style="color:rgb(223,64,42);">system_r</font><font style="color:rgb(57,57,57);">：代表进程 </font></p>
<p><strong><font style="color:rgb(57,57,57);">类型：重要属性，定义何种类型的进程可以访问何种类型的文件资源 </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">对于进程和文件，类型字段意义不同 </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">在资源文件</font></strong><strong><font style="color:rgb(57,57,57);">(object)</font></strong><strong><font style="color:rgb(57,57,57);">上称为 </font></strong><strong><font style="color:rgb(57,57,57);">type </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">在主体进程</font></strong><strong><font style="color:rgb(57,57,57);">(subject)</font></strong><strong><font style="color:rgb(57,57,57);">称为域 </font></strong><strong><font style="color:rgb(57,57,57);">domain </font></strong></p>
<p><strong><font style="color:rgb(57,57,57);">级别：</font></strong><font style="color:rgb(223,64,42);">安全级别，从 </font><font style="color:rgb(223,64,42);">s0 </font><font style="color:rgb(223,64,42);">到 </font><font style="color:rgb(223,64,42);">s15</font><font style="color:rgb(223,64,42);">，</font><font style="color:rgb(223,64,42);">s0 </font><font style="color:rgb(223,64,42);">是最低级别 </font></p>
<p><strong><font style="color:rgb(57,57,57);">安全上下文修改： </font></strong></p>
<p><font style="color:rgb(223,64,42);"># semanage fcontext [</font><font style="color:rgb(223,64,42);">修改默认标签，修改后无法还原</font><font style="color:rgb(223,64,42);">] </font></p>
<p><font style="color:rgb(223,64,42);">选项</font></p>
<p><font style="color:rgb(223,64,42);">-a </font><font style="color:rgb(223,64,42);">添加 </font></p>
<p><font style="color:rgb(223,64,42);">-t </font><font style="color:rgb(223,64,42);">修改类型 </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# </font><font style="color:rgb(223,64,42);">semanage fcontext -a -t httpd_sys_content_t '/test(/.*)?' </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# ls -Z /test/index.html </font></p>
<p><font style="color:rgb(57,57,57);">-rw-r--r--. root root unconfined_u:object_r:default_t:s0 /test/index.html </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# </font><font style="color:rgb(223,64,42);">restorecon -Rv /test/* [</font><font style="color:rgb(223,64,42);">刷新下默认值</font><font style="color:rgb(223,64,42);">] </font></p>
<p><font style="color:rgb(57,57,57);">restorecon reset /test/index.html context </font></p>
<p><font style="color:rgb(57,57,57);">unconfined_u:object_r:default_t:s0-&gt;unconfined_u:object_r:httpd_sys_cont </font></p>
<p><font style="color:rgb(57,57,57);">ent_t:s0 </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# ls -Z /test/index.html </font></p>
<p><font style="color:rgb(57,57,57);">-rw-r--r--. root root unconfined_u:object_r:httpd_sys_content_t:s0 </font></p>
<p><font style="color:rgb(57,57,57);">/test/index.html </font></p>
<p><font style="color:rgb(223,64,42);">#chcon [options] file [</font><font style="color:rgb(223,64,42);">修改后的标签可以还原</font><font style="color:rgb(223,64,42);">] </font></p>
<p><font style="color:rgb(223,64,42);">选项： </font></p>
<p><font style="color:rgb(223,64,42);">-R </font><font style="color:rgb(223,64,42);">递归修改 </font></p>
<p><font style="color:rgb(223,64,42);">-t </font><font style="color:rgb(223,64,42);">修改类型 </font></p>
<p><font style="color:rgb(223,64,42);">-r </font><font style="color:rgb(223,64,42);">修改角色 </font></p>
<p><font style="color:rgb(223,64,42);">-u </font><font style="color:rgb(223,64,42);">修改用户 </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# </font><font style="color:rgb(223,64,42);">chcon -t httpd_sys_content_t /test/index.html </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# ls -Z /test/index.html </font></p>
<p><font style="color:rgb(57,57,57);">-rw-r--r--. root root unconfined_u:object_r:httpd_sys_content_t:s0 </font></p>
<p><font style="color:rgb(57,57,57);">/test/index.html </font></p>
<p><font style="color:rgb(223,64,42);">查看端口标签 </font></p>
<p><font style="color:rgb(223,64,42);">#semanage port -l </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# semanage port -l | grep ssh </font></p>
<p><strong><font style="color:rgb(223,64,42);">ssh</font></strong><font style="color:rgb(57,57,57);">_port_t tcp </font><font style="color:rgb(223,64,42);">22 </font></p>
<p><font style="color:rgb(223,64,42);">向现有的端口标签中添加新的端口 </font></p>
<p><font style="color:rgb(0,0,0);">首选修改 </font><font style="color:rgb(0,0,0);">sshd_conf </font><font style="color:rgb(0,0,0);">配置文件，把 </font><font style="color:rgb(0,0,0);">SSH </font><font style="color:rgb(0,0,0);">的访问端口修改为 </font><font style="color:rgb(0,0,0);">2202 </font></p>
<p><font style="color:rgb(57,57,57);">[root@myth ~]# vim /etc/ssh/sshd_config </font></p>
<p><font style="color:rgb(57,57,57);">............... </font></p>
<p><strong><font style="color:rgb(24,59,106);">Port 2202 </font></strong></p>
<p><font style="color:rgb(57,57,57);">................ </font></p>
<p><font style="color:rgb(0,0,0);">重启 </font><font style="color:rgb(0,0,0);">sshd </font><font style="color:rgb(0,0,0);">服务： </font></p>
<p><font style="color:rgb(0,0,0);">[root@difu1909 ~]# systemctl restart sshd </font></p>
<p><font style="color:rgb(0,0,0);">Job for sshd.service failed because the control process exited with </font></p>
<p><font style="color:rgb(0,0,0);">error code. See "systemctl status sshd.service" and "journalctl -xe" </font></p>
<p><font style="color:rgb(0,0,0);">for details.</font></p>
<p><font style="color:rgb(0,0,0);">[root@difu1909 ~]# </font><font style="color:rgb(223,64,42);">semanage port -a -t ssh_port_t -p tcp 2202 </font></p>
<p><font style="color:rgb(0,0,0);">[root@difu1909 ~]# semanage port --list | grep ssh </font></p>
<p><font style="color:rgb(0,0,0);">ssh_port_t tcp 2202, 22 </font></p>
<p><font style="color:rgb(0,0,0);">[root@difu1909 ~]# </font></p>
<p><font style="color:rgb(0,0,0);">[root@difu1909 ~]# systemctl restart sshd </font></p>
<p><font style="color:rgb(0,0,0);">[root@difu1909 ~]# semanage port </font><font style="color:rgb(223,64,42);">-d </font><font style="color:rgb(0,0,0);">-t ssh_port_t -p tcp 2202 </font></p>
<p><font style="color:rgb(0,0,0);">-d </font><font style="color:rgb(0,0,0);">删除 </font></p>
<p><font style="color:rgb(0,0,0);">[root@difu1909 ~]# semanage port --list | grep ssh </font></p>
<p><font style="color:rgb(0,0,0);">ssh_port_t tcp 22</font></p>
<h1 id="防火墙管理配置"><font style="color:rgb(34,34,34);">防火墙管理配置 </font><a class="headerlink" href="#防火墙管理配置" title="Permanent link">&para;</a></h1>
<p><font style="color:rgb(0,0,0);">iptables </font><font style="color:rgb(0,0,0);">通过控制端口来控制服务，而 </font><font style="color:rgb(0,0,0);">firewalld </font><font style="color:rgb(0,0,0);">则是通过控制协议来控制端口 </font></p>
<p><strong><font style="color:rgb(0,0,0);">Linux </font></strong><strong><font style="color:rgb(0,0,0);">防火墙介绍 </font></strong></p>
<p><font style="color:rgb(57,57,57);">Linux </font><font style="color:rgb(57,57,57);">防火墙工作在网络层，主要实现对数据包的过滤和限制，属于典型的</font><font style="color:rgb(223,64,42);">包过滤防火墙。 </font></p>
<p><font style="color:rgb(57,57,57);">Linux </font><font style="color:rgb(57,57,57);">系统中的防火墙是基于内核中的 </font><font style="color:rgb(223,64,42);">netfilter </font><font style="color:rgb(57,57,57);">实现，</font><font style="color:rgb(223,64,42);">netfilter </font><font style="color:rgb(223,64,42);">是</font><font style="color:rgb(57,57,57);">内核中网络数据包过滤模 </font></p>
<p><font style="color:rgb(57,57,57);">块，对任何传入、传出、转发的数据包进行检查，可以对数据包进行拒绝、丢弃、修改等操作。 </font></p>
<p><font style="color:rgb(57,57,57);">在 </font><font style="color:rgb(57,57,57);">RHEL6 </font><font style="color:rgb(57,57,57);">中，可以使用 </font><font style="color:rgb(57,57,57);">iptables </font><font style="color:rgb(57,57,57);">命令工具对 </font><font style="color:rgb(57,57,57);">netfilter </font><font style="color:rgb(57,57,57);">进行管理控制 </font></p>
<p><font style="color:rgb(57,57,57);">在 </font><font style="color:rgb(57,57,57);">RHEL7 </font><font style="color:rgb(57,57,57);">之后，系统默认使用 </font><font style="color:rgb(57,57,57);">firewalld </font><font style="color:rgb(57,57,57);">工具对 </font><font style="color:rgb(57,57,57);">netfilter </font><font style="color:rgb(57,57,57);">进行管理控制，同时也支持使用 </font></p>
<p><font style="color:rgb(57,57,57);">iptables, </font></p>
<p><strong><font style="color:rgb(0,0,0);">Firewalld </font></strong></p>
<p><font style="color:rgb(57,57,57);">RHEL7</font><font style="color:rgb(57,57,57);">、</font><font style="color:rgb(57,57,57);">RHEL8 </font><font style="color:rgb(57,57,57);">系统默认已安装 </font><font style="color:rgb(57,57,57);">firewalld </font></p>
<p><font style="color:rgb(57,57,57);">查看 </font><font style="color:rgb(57,57,57);">firewalld </font><font style="color:rgb(57,57,57);">服务状态：默认情况 </font><font style="color:rgb(57,57,57);">firewalld </font><font style="color:rgb(57,57,57);">是开机自启动的 </font></p>
<p><font style="color:rgb(223,64,42);"># systemctl status firewalld.service </font></p>
<p><strong><font style="color:rgb(0,0,0);">firewalld </font></strong><strong><font style="color:rgb(0,0,0);">管理配置方法 </font></strong></p>
<p><font style="color:rgb(57,57,57);">命令行配置 </font><font style="color:rgb(223,64,42);">#firewall-cmd </font></p>
<p><font style="color:rgb(57,57,57);">图形界面配置 </font><font style="color:rgb(223,64,42);">#firewall-config </font><font style="color:rgb(223,64,42);">（</font><font style="color:rgb(223,64,42);">yum </font></p>
<p><font style="color:rgb(223,64,42);">-y install firewall-config</font><font style="color:rgb(223,64,42);">） </font></p>
<p><font style="color:rgb(57,57,57);">修改配置文件 </font><font style="color:rgb(223,64,42);">/etc/firewalld/ </font></p>
<p><strong><font style="color:rgb(0,0,0);">firewalld </font></strong><strong><font style="color:rgb(0,0,0);">区域： </font></strong></p>
<p><font style="color:rgb(57,57,57);">firewalld </font><font style="color:rgb(57,57,57);">和 </font><font style="color:rgb(57,57,57);">iptables </font><font style="color:rgb(57,57,57);">一个大的区别就是 </font><font style="color:rgb(57,57,57);">firewalld </font><font style="color:rgb(57,57,57);">引入了区域概念</font><font style="color:rgb(57,57,57);">(zone) </font></p>
<p><font style="color:rgb(57,57,57);">区域 </font><font style="color:rgb(57,57,57);">zone: </font></p>
<p><font style="color:rgb(0,0,0);">区域定义了</font><font style="color:rgb(223,64,42);">网络连接的可信等级</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">数据包要进入到内核必须要通过这些 </font><font style="color:rgb(0,0,0);">zone </font><font style="color:rgb(0,0,0);">中的一个，而 </font></p>
<p><font style="color:rgb(0,0,0);">不同的 </font><font style="color:rgb(0,0,0);">zone </font><font style="color:rgb(0,0,0);">里定义的规则不一样（即信任度不一样，过滤的强度也不一样）。可以根据网 </font></p>
<p><font style="color:rgb(0,0,0);">卡所连接的网络的安全性来判断，这张网卡的流量到底使用哪个 </font><font style="color:rgb(0,0,0);">zone</font><font style="color:rgb(0,0,0);">，比如 </font><font style="color:rgb(0,0,0);">eth0 </font><font style="color:rgb(0,0,0);">的流量 </font></p>
<p><font style="color:rgb(0,0,0);">全部使用</font><font style="color:rgb(0,0,0);">zone1</font><font style="color:rgb(0,0,0);">的过滤规则，</font><font style="color:rgb(0,0,0);">eth1</font><font style="color:rgb(0,0,0);">的流量使用</font><font style="color:rgb(0,0,0);">zone2</font><font style="color:rgb(0,0,0);">。一张网卡同时只能绑定到一个</font><font style="color:rgb(0,0,0);">zone </font></p>
<p><font style="color:rgb(57,57,57);">查看防火墙区域：</font><font style="color:rgb(57,57,57);">firewalld </font><font style="color:rgb(57,57,57);">默认提供了九个 </font><font style="color:rgb(57,57,57);">zone</font><font style="color:rgb(57,57,57);">（区域） </font></p>
<p><font style="color:rgb(57,57,57);">work drop internal external trusted home dmz public block</font></p>
<p><img alt="" src="../../../../images/1718026499763-6ea9751e-9abe-48d1-9623-59d9e51362f1.png" /><font style="color:rgb(57,57,57);">默认处于激活状态并且在使用的区域是 </font><font style="color:rgb(57,57,57);">public </font></p>
<p><font style="color:rgb(57,57,57);">zone </font></p>
<p><font style="color:rgb(223,64,42);"># firewall-cmd --get-zones </font><font style="color:rgb(223,64,42);">查看有哪些区域 </font></p>
<p><font style="color:rgb(223,64,42);">--get-default-zone </font><font style="color:rgb(223,64,42);">查看当前默认区域 </font></p>
<p><font style="color:rgb(223,64,42);">--get-active-zones </font><font style="color:rgb(223,64,42);">查看当前正在使用的区域 </font></p>
<p><strong><font style="color:rgb(0,0,0);">firewalld </font></strong><strong><font style="color:rgb(0,0,0);">规则： </font></strong></p>
<p><strong><font style="color:rgb(0,0,0);">查看规则</font></strong><strong><font style="color:rgb(0,0,0);">: </font></strong></p>
<p><font style="color:rgb(223,64,42);">--list-all </font><font style="color:rgb(223,64,42);">查看默认区域和活动区域的所有策略 </font></p>
<p><font style="color:rgb(223,64,42);">--list-services </font><font style="color:rgb(223,64,42);">查看默认区域允许哪些服务 </font></p>
<p><font style="color:rgb(223,64,42);">--list-ports </font><font style="color:rgb(223,64,42);">查看默认区域允许哪些端口 </font></p>
<p><font style="color:rgb(223,64,42);">--list-all-zones </font><font style="color:rgb(223,64,42);">查看所有区域的默认规则 </font></p>
<p><strong><font style="color:rgb(0,0,0);">规则配置: </font></strong></p>
<p><img alt="" src="../../../../images/1718026519311-4f5089dd-ac99-4a3b-854a-a730eb6bdb58.png" /></p>
<p><img alt="" src="../../../../images/1718026531375-c18a798a-1405-4dbd-bccd-0b31945de9bb.png" /></p>
<p><strong><font style="color:rgb(0,0,0);">规则清除： </font></strong></p>
<p><font style="color:rgb(223,64,42);">--remove-port=80/tcp </font></p>
<p><font style="color:rgb(223,64,42);">--remove-service=mysql </font></p>
<p><font style="color:rgb(223,64,42);">--remove-source=192.168.10.0/24 </font></p>
<p><font style="color:rgb(57,57,57);">规则生效时间： </font></p>
<p><font style="color:rgb(57,57,57);">默认情况添加的规则都是临时规则，会立即生效，</font><font style="color:rgb(57,57,57);">firewalld </font><font style="color:rgb(57,57,57);">重启或规则重新载入，临时规则会清 </font></p>
<p><font style="color:rgb(57,57,57);">除。添加永久规则需要重新载入配置 </font></p>
<p><font style="color:rgb(223,64,42);">--permanent </font><font style="color:rgb(223,64,42);">规则永久生效 </font></p>
<p><font style="color:rgb(223,64,42);">--timeout </font><font style="color:rgb(223,64,42);">规则超时时间 </font></p>
<p><font style="color:rgb(223,64,42);">--reload </font><font style="color:rgb(223,64,42);">重新载入配置 </font></p>
<p><font style="color:rgb(223,64,42);">#firewall-cmd --add-service=http --permanent </font></p>
<p><font style="color:rgb(223,64,42);">#firewall-cmd —reload </font></p>
<p><strong><font style="color:rgb(0,0,0);">富规则</font></strong><strong><font style="color:rgb(0,0,0);">/</font></strong><strong><font style="color:rgb(0,0,0);">自定义规则 </font></strong></p>
<p><font style="color:rgb(223,64,42);">rich rule </font><font style="color:rgb(223,64,42);">自定义的防火墙规则，可以定义更加具体丰富的规则 </font></p>
<p><font style="color:rgb(223,64,42);">添加富规则： </font></p>
<p><font style="color:rgb(223,64,42);"># firewall-cmd --add-rich-rule='rule [source] [destination] </font></p>
<p><font style="color:rgb(223,64,42);">service|port|protocol|forward-port| [accept|drop|reject]' </font></p>
<p><font style="color:rgb(223,64,42);">富规则实例： </font></p>
<p><font style="color:rgb(223,64,42);">1.</font><font style="color:rgb(223,64,42);">拒绝所有来自 </font><font style="color:rgb(223,64,42);">192.168.10.0/24 </font><font style="color:rgb(223,64,42);">流量 </font></p>
<p><font style="color:rgb(223,64,42);">#firewall-cmd --add-rich-rule 'rule family=ipv4 source adderss=192.168.10.0/24 reject ' </font></p>
<p><font style="color:rgb(223,64,42);">2.</font><font style="color:rgb(223,64,42);">拒绝 </font><font style="color:rgb(223,64,42);">192.168.10.254 ssh </font><font style="color:rgb(223,64,42);">连接 </font></p>
<p><font style="color:rgb(223,64,42);">#firewall-cmd --add-rich-rule 'rule family=ipv4 source address=192.168.10.254 service </font></p>
<p><font style="color:rgb(223,64,42);">name=ssh reject' </font></p>
<p><font style="color:rgb(223,64,42);">3.</font><font style="color:rgb(223,64,42);">将所有来自 </font><font style="color:rgb(223,64,42);">192.168.10.254 </font><font style="color:rgb(223,64,42);">访问 </font><font style="color:rgb(223,64,42);">80 </font><font style="color:rgb(223,64,42);">都转发至 </font><font style="color:rgb(223,64,42);">8080 </font></p>
<p><font style="color:rgb(223,64,42);">#firewall-cmd --add-rich-rule 'rule family=ipv4 source address=192.168.10.254 forward-port </font></p>
<p><font style="color:rgb(223,64,42);">port=80 protocol=tcp to-port=8080 '</font></p>
<p><strong><font style="color:rgb(0,0,0);">firewalld </font></strong><strong><font style="color:rgb(0,0,0);">规则匹配原则 </font></strong></p>
<p><font style="color:rgb(57,57,57);">--如果一个数据包的源 IP 地址匹配某个 zone 的 sources,那么该 zone 的规则就适用于这个数据包；一个 IP 源只 能属于一个 zone </font></p>
<p><font style="color:rgb(57,57,57);">--如果一个数据包进入服务器的某个被 zone 匹配的接口,那么该 zone 的规则就适用于这个数据包；一个接口只能属 于一个 zone </font></p>
<p><font style="color:rgb(57,57,57);">--</font><font style="color:rgb(57,57,57);">如果以上两个原则都不匹配，那么默认 </font><font style="color:rgb(57,57,57);">zone </font><font style="color:rgb(57,57,57);">规则将被应用</font><font style="color:rgb(57,57,57);">---public</font><font style="color:rgb(57,57,57);">（公共的） </font></p>
<p><font style="color:rgb(57,57,57);">--</font><font style="color:rgb(57,57,57);">无明确允许策略，默认策略是拒绝 </font></p>
<p><font style="color:rgb(57,57,57);">--富规则优先匹配，自上而下匹配</font></p>
<h1 id="podman容器"><font style="color:rgb(57,57,57);">Podman容器</font><a class="headerlink" href="#podman容器" title="Permanent link">&para;</a></h1>
<h2 id="容器的概念"><strong><font style="color:rgb(0,0,0);">容器的概念 </font></strong><a class="headerlink" href="#容器的概念" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(0,0,0);">容器是由一个或多个与系统其余部分隔离的进程组成的集合。我们可以理解为</font><font style="color:rgb(0,0,0);">“</font><font style="color:rgb(0,0,0);">集装箱</font><font style="color:rgb(0,0,0);">”</font><font style="color:rgb(0,0,0);">。 </font></p>
<p><font style="color:rgb(0,0,0);">集装箱是打包和装运货物的标准方式。它作为一个箱子进行标记、装载、卸载，以及从一个位置运输到另一个位置。该容器的内容与其 </font></p>
<p><font style="color:rgb(0,0,0);">他容器的内容隔离，因此互不影响。 </font></p>
<p><font style="color:rgb(0,0,0);">容器的目的：为进程集合提供一个独立的运行环境 </font></p>
<p><font style="color:rgb(0,0,0);">而容器是怎么实现的呢： </font></p>
<p><font style="color:rgb(0,0,0);">1.</font><font style="color:rgb(0,0,0);">文件系统隔离 </font></p>
<p><font style="color:rgb(0,0,0);">（每个容器都具有独立的文件系统，单个容器内对文件系统进行增删改查不会影响到其他容器） </font></p>
<p><font style="color:rgb(0,0,0);">2.</font><font style="color:rgb(0,0,0);">资源隔离 </font></p>
<p><font style="color:rgb(0,0,0);">利用</font><font style="color:rgb(0,0,0);"> namespace </font><font style="color:rgb(0,0,0);">隔离进程之间的相互可见及通信 </font></p>
<p><font style="color:rgb(0,0,0);">使用</font><font style="color:rgb(0,0,0);"> Cgroup </font><font style="color:rgb(0,0,0);">限制资源使用率，设置其能够使用的</font><font style="color:rgb(0,0,0);"> CPU </font><font style="color:rgb(0,0,0);">以及内存量的大小 </font></p>
<p><font style="color:rgb(0,0,0);">加强安全边界的</font><font style="color:rgb(0,0,0);">SElinux</font><font style="color:rgb(0,0,0);">和</font><font style="color:rgb(0,0,0);">seccomp(</font><font style="color:rgb(0,0,0);">安全计算模式</font><font style="color:rgb(0,0,0);">) </font></p>
<p><font style="color:rgb(0,0,0);">cgroup</font><font style="color:rgb(0,0,0);">：用于资源管理控制组 </font></p>
<p><font style="color:rgb(0,0,0);">namespace 命名空间</font></p>
<p><img alt="" src="../../../../images/1718084107969-f445eedf-3873-49d7-a3da-383c34b93080.png" /></p>
<p><font style="color:rgb(0,0,0);">容器与虚拟机在硬件和底层操作系统交互有所不同： </font></p>
<p><font style="color:rgb(0,0,0);">虚拟机： </font></p>
<p><font style="color:rgb(0,0,0);">1. </font><font style="color:rgb(57,57,57);">使多个操作系统能够同时在一个硬件平台上运行。 </font></p>
<p><font style="color:rgb(0,0,0);">2. </font><font style="color:rgb(57,57,57);">使用虚拟机监控程序将硬件分为多个虚拟硬件系统</font><font style="color:rgb(57,57,57);">,</font><font style="color:rgb(57,57,57);">从而允许多个操作系统并行运行。 </font></p>
<p><font style="color:rgb(0,0,0);">3. </font><font style="color:rgb(57,57,57);">需要一个完整的操作系统环境来支持该应用。 </font></p>
<p><font style="color:rgb(0,0,0);">容器</font><font style="color:rgb(0,0,0);">: </font></p>
<p><font style="color:rgb(0,0,0);">1. </font><font style="color:rgb(57,57,57);">直接在操作系统上运行，从而跨系统上的所有容器共享硬件和操作系统资源。这使得应用能够保持轻巧，并快速并行运行。 </font></p>
<p><font style="color:rgb(0,0,0);">2. </font><font style="color:rgb(57,57,57);">共享相同的操作系统内核</font><font style="color:rgb(57,57,57);">,</font><font style="color:rgb(57,57,57);">将容器化应用进程与系统的其余进程隔离开</font><font style="color:rgb(57,57,57);">,</font><font style="color:rgb(57,57,57);">并使用与该内核兼容的软件。 </font></p>
<p><font style="color:rgb(0,0,0);">3. </font><font style="color:rgb(57,57,57);">需要的硬件资源比虚拟机少得多</font><font style="color:rgb(57,57,57);">,</font><font style="color:rgb(57,57,57);">这也使其能够快速启动和停止并降低存储要求 </font></p>
<p><font style="color:rgb(0,0,0);">而相比容器通常提供的对硬件的访问</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">访问底层硬件信息的应用可能需要更直接地访问硬件，这就不合适作为容器运行 </font></p>
<p><font style="color:rgb(0,0,0);">在</font><font style="color:rgb(0,0,0);">redhat</font><font style="color:rgb(0,0,0);">中提供了一组用于管理容器操作的容器工具： </font></p>
<p><strong><font style="color:rgb(0,0,0);">podman</font></strong><font style="color:rgb(0,0,0);">： 直接管理容器和容器镜像 </font></p>
<p><strong><font style="color:rgb(0,0,0);">skopeo</font></strong><font style="color:rgb(0,0,0);">：用于检查，复制，删除和部署镜像</font><strong><font style="color:rgb(0,0,0);">buildah</font></strong><font style="color:rgb(0,0,0);">：用于创建新的容器镜像 </font></p>
<p><font style="color:rgb(0,0,0);">容器镜像：将容器运行时所需要的所有文件的集合 </font></p>
<p><font style="color:rgb(0,0,0);">在容器主机上，您可以</font><font style="color:rgb(0,0,0);"> root </font><font style="color:rgb(0,0,0);">用户或普通非特权用户身份运⾏容器。由特权用户运行的容器称为 </font></p>
<p><strong><font style="color:rgb(0,0,0);">Rootful </font></strong><font style="color:rgb(0,0,0);">容器。由非特权用户运⾏的容器称为 </font><strong><font style="color:rgb(0,0,0);">Rootless </font></strong><font style="color:rgb(0,0,0);">容器。 </font></p>
<p><strong><font style="color:rgb(0,0,0);">Rootless</font></strong><font style="color:rgb(0,0,0);">容器更安全</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">但存在一些限制。 </font></p>
<p><font style="color:rgb(0,0,0);">Rootless </font><font style="color:rgb(0,0,0);">容器不允许使⽤通常为特权用户保留的系统资源，例如访问受限⽬录，或在受限端⼝ （</font><font style="color:rgb(0,0,0);">1024 </font><font style="color:rgb(0,0,0);">以下的端⼝）上发布⽹络服 </font></p>
<p><font style="color:rgb(0,0,0);">务。 </font></p>
<p><font style="color:rgb(0,0,0);">此功能可防⽌潜在攻击者获取容器主机上的</font><font style="color:rgb(0,0,0);"> root </font><font style="color:rgb(0,0,0);">特权。 </font></p>
<p><font style="color:rgb(0,0,0);">如有必要，您可以</font><font style="color:rgb(0,0,0);"> root </font><font style="color:rgb(0,0,0);">用户身份直接运⾏容器，但如果有漏洞允许攻击者破坏容器，这样做会削 弱系统的安全性。 </font></p>
<p><font style="color:rgb(0,0,0);">选择容器镜像和注册表的概念 </font></p>
<p><strong><font style="color:rgb(0,0,0);">容器注册表</font></strong><font style="color:rgb(0,0,0);">是用于存储和检索容器镜像的存储库。 </font></p>
<p><font style="color:rgb(0,0,0);">开发人员将容器镜像上传或推送到容器注册表中。 </font></p>
<p><font style="color:rgb(0,0,0);">从注册表中将这些容器镜像下载或提取到本地系统，可用于运行容器。 </font></p>
<p><font style="color:rgb(0,0,0);">也可以使用第三方镜像的公共注册表</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">也可使用贵组织控制的私有注册表 </font></p>
<p><font style="color:rgb(0,0,0);">红帽通过两个主容器注册表分发认证容器镜像： </font></p>
<p><strong><font style="color:rgb(0,0,0);">registry.redhat.io:</font></strong><font style="color:rgb(0,0,0);">适用于基于官方红帽产品的容器。 </font></p>
<p><strong><font style="color:rgb(0,0,0);">registry.connect.redhat.com:</font></strong><font style="color:rgb(0,0,0);">适用于基于第三方产品的容器 </font></p>
<p><strong><font style="color:rgb(0,0,0);">registry.access.redhat.com:</font></strong><font style="color:rgb(0,0,0);">旧的注册表 </font></p>
<p><font style="color:rgb(0,0,0);">容器命名规则 </font></p>
<p><strong><font style="color:rgb(243,50,50);">registry.access.redhat.com/rhel7 </font></strong></p>
<p><font style="color:rgb(0,0,0);">语法：</font><font style="color:rgb(0,0,0);">registry_name/user_name/image_name:tag </font></p>
<p><font style="color:rgb(0,0,0);">registry_name </font><font style="color:rgb(0,0,0);">是存储镜像的注册表的名称，通常是注册表的完全限定域名。 </font></p>
<p><font style="color:rgb(0,0,0);">user_name</font><font style="color:rgb(0,0,0);">表示镜像所属的用户和组织 </font></p>
<p><font style="color:rgb(0,0,0);">image_name</font><font style="color:rgb(0,0,0);">在用户命名空间必须唯一 </font></p>
<p><font style="color:rgb(0,0,0);">tag</font><font style="color:rgb(0,0,0);">标识镜像版本。</font><font style="color:rgb(0,0,0);"> latest </font></p>
<p><font style="color:rgb(0,0,0);">安装</font><font style="color:rgb(0,0,0);">container-tools</font><font style="color:rgb(0,0,0);">模块 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-202-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-202-1" name="__codelineno-202-1"></a><span class="o">[</span>root@example<span class="w"> </span>~<span class="o">]</span><span class="c1"># dnf install container-tools -y </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">使用登录容器注册表 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-203-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-203-1" name="__codelineno-203-1"></a><span class="o">[</span>root@example<span class="w"> </span>~<span class="o">]</span><span class="c1"># podman login registry.connect.redhat.com </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">Username: </font></p>
<p><font style="color:rgb(0,0,0);">但我们没有账号，暂时不登录 </font></p>
<p><font style="color:rgb(0,0,0);">使用旧的注册表进行登陆测试 </font></p>
<p><font style="color:rgb(0,0,0);">再次重复登陆会显示已经登陆。</font></p>
<p><img alt="" src="../../../../images/1718084126146-5abb68d7-bff3-477b-b89f-95874a68b7a2.png" /></p>
<p><font style="color:rgb(0,0,0);">登陆某一个容器注册表时，显示已经登陆，可以后加 --get-login 来显示已经登陆的身份</font></p>
<p><font style="color:rgb(0,0,0);">root身份</font></p>
<p><img alt="" src="../../../../images/1718084140701-d5753f5e-f53c-4229-9094-ad9b8b6fb473.png" /></p>
<p><font style="color:rgb(0,0,0);">test 身份</font><img alt="" src="../../../../images/1718084151298-b446905b-dbed-4e74-8cf2-e8f70fe50b0a.png" /></p>
<p><font style="color:rgb(0,0,0);">要登出容器注册表，可以使用 podman logout 命令，登出已经登陆的注册表</font></p>
<p><img alt="" src="../../../../images/1718084163178-ead806d1-7e63-4b5f-97cc-5f0594fc6310.png" /></p>
<p><strong><font style="color:rgb(0,0,0);">Podman 命令</font></strong></p>
<p><font style="color:rgb(57,57,57);"> podman build </font></p>
<p><font style="color:rgb(57,57,57);">使⽤容器⽂件构建容器镜像。 </font></p>
<p><font style="color:rgb(57,57,57);"> podman run </font></p>
<p><font style="color:rgb(57,57,57);">在新容器中运⾏命令。 </font></p>
<p><font style="color:rgb(57,57,57);"> podman images </font></p>
<p><font style="color:rgb(57,57,57);">列出本地存储中的镜像。 </font></p>
<p><font style="color:rgb(57,57,57);"> podman ps </font></p>
<p><font style="color:rgb(57,57,57);">打印有关容器的信息。 </font></p>
<p><font style="color:rgb(57,57,57);"> podman inspect </font></p>
<p><font style="color:rgb(57,57,57);">显⽰容器、镜像、卷、⽹络或容器集的配置。 </font></p>
<p><font style="color:rgb(57,57,57);"> podman pull </font></p>
<p><font style="color:rgb(57,57,57);">从注册表下载镜像。 </font></p>
<p><font style="color:rgb(57,57,57);"> podman cp </font></p>
<p><font style="color:rgb(57,57,57);">在容器和本地⽂件系统之间复制⽂件或⽂件夹。 </font></p>
<p><font style="color:rgb(57,57,57);"> podman exec </font></p>
<p><font style="color:rgb(57,57,57);">在运⾏中的容器内执⾏命令。 </font></p>
<p><font style="color:rgb(57,57,57);"> podman rm </font></p>
<p><font style="color:rgb(57,57,57);">删除⼀个或多个容器。 </font></p>
<p><font style="color:rgb(57,57,57);"> podman rmi </font></p>
<p><font style="color:rgb(57,57,57);">删除⼀个或多个本地存储的镜像。 </font></p>
<p><font style="color:rgb(57,57,57);"> podman search </font></p>
<p><font style="color:rgb(57,57,57);">在注册表中搜索镜像。</font></p>
<p><img alt="" src="../../../../images/1718084206067-7fc3648a-ed13-4611-bc92-d2400e9ea291.png" /></p>
<p><strong><font style="color:rgb(0,0,0);">安装容器实用工具 </font></strong></p>
<p><font style="color:rgb(0,0,0);">container-tools </font><font style="color:rgb(0,0,0);">元软件包包含与容器和容器镜像交互所需的实⽤程序。 </font></p>
<p><font style="color:rgb(0,0,0);">若要在系统上下载、运 ⾏和⽐较容器，请使⽤</font><font style="color:rgb(0,0,0);"> yum install </font><font style="color:rgb(0,0,0);">命令来安装</font><font style="color:rgb(0,0,0);"> container-tools </font><font style="color:rgb(0,0,0);">元软件包。 </font></p>
<p><font style="color:rgb(0,0,0);">使⽤</font><font style="color:rgb(0,0,0);"> yum info </font><font style="color:rgb(0,0,0);">命令查看</font><font style="color:rgb(0,0,0);"> container-tools </font><font style="color:rgb(0,0,0);">软件包的版本和内容。 </font></p>
<p><font style="color:rgb(0,0,0);">yum module install container-tools -y </font></p>
<p><strong><font style="color:rgb(0,0,0);">从注册表下载容器镜像文件 </font></strong></p>
<p><font style="color:rgb(0,0,0);">⾸先，确保</font><font style="color:rgb(0,0,0);"> podman </font><font style="color:rgb(0,0,0);">实⽤程序已配置了成功登录的注册表搜索和下载容 器。 </font></p>
<p><font style="color:rgb(0,0,0);">podman info 命令显⽰ podman 实⽤程序的配置信息，包括其配置的注册表。</font></p>
<p><strong><font style="color:rgb(0,0,0);">搜索镜像 </font></strong></p>
<p><font style="color:rgb(0,0,0);">podman search </font><font style="color:rgb(0,0,0);">命令在已配置注册表列表中搜索匹配的镜像。 </font></p>
<p><font style="color:rgb(0,0,0);">默认情况下，</font><font style="color:rgb(0,0,0);">Podman </font><font style="color:rgb(0,0,0);">在所有⾮限 定搜索注册表中执⾏搜索。 </font></p>
<p><font style="color:rgb(0,0,0);">根据使⽤注册表实施的</font><font style="color:rgb(0,0,0);"> Docker </font><font style="color:rgb(0,0,0);">分发</font><font style="color:rgb(0,0,0);"> API</font><font style="color:rgb(0,0,0);">，⼀些注册表可能不⽀持搜索功 能。 </font></p>
<p><font style="color:rgb(0,0,0);">[root@example ~]# podman search rhel7</font></p>
<h2 id="查找并管理容器镜像"><strong><font style="color:rgb(0,0,0);">查找并管理容器镜像</font></strong><a class="headerlink" href="#查找并管理容器镜像" title="Permanent link">&para;</a></h2>
<p><font style="color:rgb(0,0,0);">在</font><font style="color:rgb(0,0,0);">/etc/containers/registries.conf </font><font style="color:rgb(0,0,0);">文件中可以获取有关 </font></p>
<p><font style="color:rgb(0,0,0);">使用容器注册表的信息 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-204-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-204-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-204-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-204-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-204-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-204-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-204-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-204-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-204-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-204-10">10</a></span>
<span class="normal"><a href="#__codelineno-204-11">11</a></span>
<span class="normal"><a href="#__codelineno-204-12">12</a></span>
<span class="normal"><a href="#__codelineno-204-13">13</a></span>
<span class="normal"><a href="#__codelineno-204-14">14</a></span>
<span class="normal"><a href="#__codelineno-204-15">15</a></span>
<span class="normal"><a href="#__codelineno-204-16">16</a></span>
<span class="normal"><a href="#__codelineno-204-17">17</a></span>
<span class="normal"><a href="#__codelineno-204-18">18</a></span>
<span class="normal"><a href="#__codelineno-204-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-204-1" name="__codelineno-204-1"></a><span class="o">[</span>root@example<span class="w"> </span>~<span class="o">]</span><span class="c1"># cat </span>
<a id="__codelineno-204-2" name="__codelineno-204-2"></a>/etc/containers/registries.conf<span class="w"> </span>
<a id="__codelineno-204-3" name="__codelineno-204-3"></a>....<span class="w"> </span>
<a id="__codelineno-204-4" name="__codelineno-204-4"></a><span class="o">[</span>registries.search<span class="o">]</span><span class="w"> </span>
<a id="__codelineno-204-5" name="__codelineno-204-5"></a><span class="nv">registries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;registry.access.redhat.com&#39;</span>,<span class="w"> </span>
<a id="__codelineno-204-6" name="__codelineno-204-6"></a><span class="s1">&#39;registry.redhat.io&#39;</span><span class="o">]</span><span class="w"> </span>
<a id="__codelineno-204-7" name="__codelineno-204-7"></a><span class="c1"># The following registries entry can be used for </span>
<a id="__codelineno-204-8" name="__codelineno-204-8"></a>convenience<span class="w"> </span>but<span class="w"> </span>includes<span class="w"> </span>
<a id="__codelineno-204-9" name="__codelineno-204-9"></a><span class="c1"># container images built by the community. This </span>
<a id="__codelineno-204-10" name="__codelineno-204-10"></a><span class="nb">set</span><span class="w"> </span>of<span class="w"> </span>content<span class="w"> </span>comes<span class="w"> </span>with<span class="w"> </span>all<span class="w"> </span>
<a id="__codelineno-204-11" name="__codelineno-204-11"></a><span class="c1"># of the risks of any user generated content </span>
<a id="__codelineno-204-12" name="__codelineno-204-12"></a>including<span class="w"> </span>security<span class="w"> </span>and<span class="w"> </span>performance
<a id="__codelineno-204-13" name="__codelineno-204-13"></a><span class="c1"># issues. To use this list first comment out the </span>
<a id="__codelineno-204-14" name="__codelineno-204-14"></a>default<span class="w"> </span>list,<span class="w"> </span><span class="k">then</span><span class="w"> </span>uncomment<span class="w"> </span>
<a id="__codelineno-204-15" name="__codelineno-204-15"></a><span class="c1"># the following list </span>
<a id="__codelineno-204-16" name="__codelineno-204-16"></a><span class="c1">#registries = [&#39;registry.access.redhat.com&#39;, </span>
<a id="__codelineno-204-17" name="__codelineno-204-17"></a><span class="s1">&#39;registry.redhat.io&#39;</span>,<span class="w"> </span><span class="s1">&#39;docker.io&#39;</span>,<span class="w"> </span><span class="s1">&#39;quay.io&#39;</span><span class="o">]</span><span class="w"> </span>
<a id="__codelineno-204-18" name="__codelineno-204-18"></a><span class="c1"># Registries that do not use TLS when pulling </span>
<a id="__codelineno-204-19" name="__codelineno-204-19"></a>images<span class="w"> </span>or<span class="w"> </span>uses<span class="w"> </span>self-signed<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">正对于 </font><font style="color:rgb(0,0,0);">rootless</font><font style="color:rgb(0,0,0);">（普通）用户，存储路径在 </font></p>
<p><font style="color:rgb(0,0,0);">$HOME/.config/containers </font><font style="color:rgb(0,0,0);">目录中 </font></p>
<p><font style="color:rgb(0,0,0);">显示 </font><font style="color:rgb(0,0,0);">podman </font><font style="color:rgb(0,0,0);">的配置信息（包括注册表） </font></p>
<p><font style="color:rgb(0,0,0);"></font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-205-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-205-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-205-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-205-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-205-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-205-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-205-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-205-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-205-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-205-10">10</a></span>
<span class="normal"><a href="#__codelineno-205-11">11</a></span>
<span class="normal"><a href="#__codelineno-205-12">12</a></span>
<span class="normal"><a href="#__codelineno-205-13">13</a></span>
<span class="normal"><a href="#__codelineno-205-14">14</a></span>
<span class="normal"><a href="#__codelineno-205-15">15</a></span>
<span class="normal"><a href="#__codelineno-205-16">16</a></span>
<span class="normal"><a href="#__codelineno-205-17">17</a></span>
<span class="normal"><a href="#__codelineno-205-18">18</a></span>
<span class="normal"><a href="#__codelineno-205-19">19</a></span>
<span class="normal"><a href="#__codelineno-205-20">20</a></span>
<span class="normal"><a href="#__codelineno-205-21">21</a></span>
<span class="normal"><a href="#__codelineno-205-22">22</a></span>
<span class="normal"><a href="#__codelineno-205-23">23</a></span>
<span class="normal"><a href="#__codelineno-205-24">24</a></span>
<span class="normal"><a href="#__codelineno-205-25">25</a></span>
<span class="normal"><a href="#__codelineno-205-26">26</a></span>
<span class="normal"><a href="#__codelineno-205-27">27</a></span>
<span class="normal"><a href="#__codelineno-205-28">28</a></span>
<span class="normal"><a href="#__codelineno-205-29">29</a></span>
<span class="normal"><a href="#__codelineno-205-30">30</a></span>
<span class="normal"><a href="#__codelineno-205-31">31</a></span>
<span class="normal"><a href="#__codelineno-205-32">32</a></span>
<span class="normal"><a href="#__codelineno-205-33">33</a></span>
<span class="normal"><a href="#__codelineno-205-34">34</a></span>
<span class="normal"><a href="#__codelineno-205-35">35</a></span>
<span class="normal"><a href="#__codelineno-205-36">36</a></span>
<span class="normal"><a href="#__codelineno-205-37">37</a></span>
<span class="normal"><a href="#__codelineno-205-38">38</a></span>
<span class="normal"><a href="#__codelineno-205-39">39</a></span>
<span class="normal"><a href="#__codelineno-205-40">40</a></span>
<span class="normal"><a href="#__codelineno-205-41">41</a></span>
<span class="normal"><a href="#__codelineno-205-42">42</a></span>
<span class="normal"><a href="#__codelineno-205-43">43</a></span>
<span class="normal"><a href="#__codelineno-205-44">44</a></span>
<span class="normal"><a href="#__codelineno-205-45">45</a></span>
<span class="normal"><a href="#__codelineno-205-46">46</a></span>
<span class="normal"><a href="#__codelineno-205-47">47</a></span>
<span class="normal"><a href="#__codelineno-205-48">48</a></span>
<span class="normal"><a href="#__codelineno-205-49">49</a></span>
<span class="normal"><a href="#__codelineno-205-50">50</a></span>
<span class="normal"><a href="#__codelineno-205-51">51</a></span>
<span class="normal"><a href="#__codelineno-205-52">52</a></span>
<span class="normal"><a href="#__codelineno-205-53">53</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-205-1" name="__codelineno-205-1"></a><span class="o">[</span>root@example<span class="w"> </span>~<span class="o">]</span><span class="c1"># podman info </span>
<a id="__codelineno-205-2" name="__codelineno-205-2"></a>host:<span class="w"> </span>
<a id="__codelineno-205-3" name="__codelineno-205-3"></a><span class="w"> </span>BuildahVersion:<span class="w"> </span><span class="m">1</span>.12.0-dev<span class="w"> </span>
<a id="__codelineno-205-4" name="__codelineno-205-4"></a><span class="w"> </span>CgroupVersion:<span class="w"> </span>v1<span class="w"> </span>
<a id="__codelineno-205-5" name="__codelineno-205-5"></a><span class="w"> </span>Conmon:<span class="w"> </span>
<a id="__codelineno-205-6" name="__codelineno-205-6"></a><span class="w"> </span>package:<span class="w"> </span>conmon-2.0.6-<span class="w"> </span>
<a id="__codelineno-205-7" name="__codelineno-205-7"></a><span class="m">1</span>.module+el8.2.0+5182+3136e5d4.x86_64<span class="w"> </span>
<a id="__codelineno-205-8" name="__codelineno-205-8"></a><span class="w"> </span>path:<span class="w"> </span>/usr/bin/conmon<span class="w"> </span>
<a id="__codelineno-205-9" name="__codelineno-205-9"></a><span class="w"> </span>version:<span class="w"> </span><span class="s1">&#39;conmon version 2.0.6, commit: </span>
<a id="__codelineno-205-10" name="__codelineno-205-10"></a><span class="s1">fbca3e1d62c2486af1ffcff43a14dba646f7abd2&#39;</span><span class="w"> </span>
<a id="__codelineno-205-11" name="__codelineno-205-11"></a><span class="w"> </span>Distribution:<span class="w"> </span>
<a id="__codelineno-205-12" name="__codelineno-205-12"></a><span class="w"> </span>distribution:<span class="w"> </span><span class="s1">&#39;&quot;rhel&quot;&#39;</span><span class="w"> </span>
<a id="__codelineno-205-13" name="__codelineno-205-13"></a><span class="w"> </span>version:<span class="w"> </span><span class="s2">&quot;8.2&quot;</span><span class="w"> </span>
<a id="__codelineno-205-14" name="__codelineno-205-14"></a><span class="w"> </span>MemFree:<span class="w"> </span><span class="m">5563613184</span><span class="w"> </span>
<a id="__codelineno-205-15" name="__codelineno-205-15"></a><span class="w"> </span>MemTotal:<span class="w"> </span><span class="m">8162136064</span><span class="w"> </span>
<a id="__codelineno-205-16" name="__codelineno-205-16"></a><span class="w"> </span>OCIRuntime:<span class="w"> </span>
<a id="__codelineno-205-17" name="__codelineno-205-17"></a><span class="w"> </span>name:<span class="w"> </span>runc<span class="w"> </span>
<a id="__codelineno-205-18" name="__codelineno-205-18"></a><span class="w"> </span>package:<span class="w"> </span>runc-1.0.0-<span class="w"> </span>
<a id="__codelineno-205-19" name="__codelineno-205-19"></a><span class="m">65</span>.rc10.module+el8.2.0+5762+aaee29fb.x86_64<span class="w"> </span>
<a id="__codelineno-205-20" name="__codelineno-205-20"></a><span class="w"> </span>path:<span class="w"> </span>/usr/bin/runc<span class="w"> </span>
<a id="__codelineno-205-21" name="__codelineno-205-21"></a><span class="w"> </span>version:<span class="w"> </span><span class="s1">&#39;runc version spec: 1.0.1-dev&#39;</span><span class="w"> </span>
<a id="__codelineno-205-22" name="__codelineno-205-22"></a><span class="w"> </span>SwapFree:<span class="w"> </span><span class="m">2147479552</span><span class="w"> </span>
<a id="__codelineno-205-23" name="__codelineno-205-23"></a><span class="w"> </span>SwapTotal:<span class="w"> </span><span class="m">2147479552</span><span class="w"> </span>
<a id="__codelineno-205-24" name="__codelineno-205-24"></a><span class="w"> </span>arch:<span class="w"> </span>amd64<span class="w"> </span>
<a id="__codelineno-205-25" name="__codelineno-205-25"></a><span class="w"> </span>cpus:<span class="w"> </span><span class="m">4</span><span class="w"> </span>
<a id="__codelineno-205-26" name="__codelineno-205-26"></a><span class="w"> </span>eventlogger:<span class="w"> </span>journald<span class="w"> </span>
<a id="__codelineno-205-27" name="__codelineno-205-27"></a><span class="w"> </span>hostname:<span class="w"> </span>example<span class="w"> </span>
<a id="__codelineno-205-28" name="__codelineno-205-28"></a><span class="w"> </span>kernel:<span class="w"> </span><span class="m">4</span>.18.0-193.el8.x86_64<span class="w"> </span>
<a id="__codelineno-205-29" name="__codelineno-205-29"></a><span class="w"> </span>os:<span class="w"> </span>linux<span class="w"> </span>
<a id="__codelineno-205-30" name="__codelineno-205-30"></a><span class="w"> </span>rootless:<span class="w"> </span><span class="nb">false</span><span class="w"> </span>
<a id="__codelineno-205-31" name="__codelineno-205-31"></a><span class="w"> </span>uptime:<span class="w"> </span>6h<span class="w"> </span>49m<span class="w"> </span><span class="m">6</span>.11s<span class="w"> </span><span class="o">(</span>Approximately<span class="w"> </span><span class="m">0</span>.25<span class="w"> </span>days<span class="o">)</span>
<a id="__codelineno-205-32" name="__codelineno-205-32"></a>registries:<span class="w"> </span>
<a id="__codelineno-205-33" name="__codelineno-205-33"></a><span class="w"> </span>blocked:<span class="w"> </span>null<span class="w"> </span>
<a id="__codelineno-205-34" name="__codelineno-205-34"></a><span class="w"> </span>insecure:<span class="w"> </span>null<span class="w"> </span>
<a id="__codelineno-205-35" name="__codelineno-205-35"></a><span class="w"> </span>search:<span class="w"> </span>
<a id="__codelineno-205-36" name="__codelineno-205-36"></a><span class="w"> </span>-<span class="w"> </span>registry.access.redhat.com<span class="w"> </span>
<a id="__codelineno-205-37" name="__codelineno-205-37"></a><span class="w"> </span>-<span class="w"> </span>registry.redhat.io<span class="w"> </span>
<a id="__codelineno-205-38" name="__codelineno-205-38"></a>store:<span class="w"> </span>
<a id="__codelineno-205-39" name="__codelineno-205-39"></a><span class="w"> </span>ConfigFile:<span class="w"> </span>/etc/containers/storage.conf<span class="w"> </span>
<a id="__codelineno-205-40" name="__codelineno-205-40"></a><span class="w"> </span>ContainerStore:<span class="w"> </span>
<a id="__codelineno-205-41" name="__codelineno-205-41"></a><span class="w"> </span>number:<span class="w"> </span><span class="m">9</span><span class="w"> </span>
<a id="__codelineno-205-42" name="__codelineno-205-42"></a><span class="w"> </span>GraphDriverName:<span class="w"> </span>overlay<span class="w"> </span>
<a id="__codelineno-205-43" name="__codelineno-205-43"></a><span class="w"> </span>GraphOptions:<span class="w"> </span><span class="o">{}</span><span class="w"> </span>
<a id="__codelineno-205-44" name="__codelineno-205-44"></a><span class="w"> </span>GraphRoot:<span class="w"> </span>/var/lib/containers/storage<span class="w"> </span>
<a id="__codelineno-205-45" name="__codelineno-205-45"></a><span class="w"> </span>GraphStatus:<span class="w"> </span>
<a id="__codelineno-205-46" name="__codelineno-205-46"></a><span class="w"> </span>Backing<span class="w"> </span>Filesystem:<span class="w"> </span>xfs<span class="w"> </span>
<a id="__codelineno-205-47" name="__codelineno-205-47"></a><span class="w"> </span>Native<span class="w"> </span>Overlay<span class="w"> </span>Diff:<span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="w"> </span>
<a id="__codelineno-205-48" name="__codelineno-205-48"></a><span class="w"> </span>Supports<span class="w"> </span>d_type:<span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="w"> </span>
<a id="__codelineno-205-49" name="__codelineno-205-49"></a><span class="w"> </span>Using<span class="w"> </span>metacopy:<span class="w"> </span><span class="s2">&quot;false&quot;</span><span class="w"> </span>
<a id="__codelineno-205-50" name="__codelineno-205-50"></a><span class="w"> </span>ImageStore:<span class="w"> </span>
<a id="__codelineno-205-51" name="__codelineno-205-51"></a><span class="w"> </span>number:<span class="w"> </span><span class="m">1</span><span class="w"> </span>
<a id="__codelineno-205-52" name="__codelineno-205-52"></a><span class="w"> </span>RunRoot:<span class="w"> </span>/var/run/containers/storage<span class="w"> </span>
<a id="__codelineno-205-53" name="__codelineno-205-53"></a><span class="w"> </span>VolumePath:<span class="w"> </span>/var/lib/containers/storage/volumes
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">安全性 </font></p>
<p><font style="color:rgb(0,0,0);">registries. conf </font><font style="color:rgb(0,0,0);">文件的</font><font style="color:rgb(0,0,0);">[registries.insecure]</font><font style="color:rgb(0,0,0);">部分中列 </font></p>
<p><font style="color:rgb(0,0,0);">出了不安全的注册表。如果注册表被列为不安全</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">则不会使用 </font><font style="color:rgb(0,0,0);">TLS </font></p>
<p><font style="color:rgb(0,0,0);">加密来保护与该注册表的连接。如果注册表既可搜索又不安全则会 </font></p>
<p><font style="color:rgb(0,0,0);">同时在</font><font style="color:rgb(0,0,0);">[registries.search]</font><font style="color:rgb(0,0,0);">和</font><font style="color:rgb(0,0,0);">[registries.insecure]</font><font style="color:rgb(0,0,0);">中 </font></p>
<p><font style="color:rgb(0,0,0);">列出。 </font></p>
<p><font style="color:rgb(0,0,0);">可将容器注册表配置为需要身份验证。如前所述</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">可使用 </font><font style="color:rgb(0,0,0);">podman </font></p>
<p><font style="color:rgb(0,0,0);">login </font><font style="color:rgb(0,0,0);">命令登录需要身份验证的容器注册表。 </font></p>
<p><font style="color:rgb(0,0,0);">检查容器镜像 </font></p>
<p><font style="color:rgb(0,0,0);">使用 </font><font style="color:rgb(0,0,0);">skopeo inspect </font><font style="color:rgb(0,0,0);">命令检查注册表中的远程容器镜像，无需 </font></p>
<p><font style="color:rgb(0,0,0);">将镜像提取到本地系统 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-206-1">1</a></span>
<span class="normal"><a href="#__codelineno-206-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-206-1" name="__codelineno-206-1"></a><span class="o">[</span>root@example<span class="w"> </span>~<span class="o">]</span><span class="c1"># skopeo inspect </span>
<a id="__codelineno-206-2" name="__codelineno-206-2"></a>docker://registry.access.redhat.com/quarkus/mandrel-20-rhel8
</code></pre></div></td></tr></table></div>
<p><img alt="" src="../../../../images/1718085494164-d9d0c884-e5bd-42d0-a477-c1580ab2999f.png" /></p>
<p><font style="color:rgb(0,0,0);">也可以查看本地存储的镜像信息，提供的信息比 </font><font style="color:rgb(0,0,0);">skopep inspect </font></p>
<p><font style="color:rgb(0,0,0);">要多（看情况而定） </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-207-1">1</a></span>
<span class="normal"><a href="#__codelineno-207-2">2</a></span>
<span class="normal"><a href="#__codelineno-207-3">3</a></span>
<span class="normal"><a href="#__codelineno-207-4">4</a></span>
<span class="normal"><a href="#__codelineno-207-5">5</a></span>
<span class="normal"><a href="#__codelineno-207-6">6</a></span>
<span class="normal"><a href="#__codelineno-207-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-207-1" name="__codelineno-207-1"></a><span class="o">[</span>root@example<span class="w"> </span>~<span class="o">]</span><span class="c1"># podman images </span>
<a id="__codelineno-207-2" name="__codelineno-207-2"></a>REPOSITORY<span class="w"> </span>TAG<span class="w"> </span>
<a id="__codelineno-207-3" name="__codelineno-207-3"></a>IMAGE<span class="w"> </span>ID<span class="w"> </span>CREATED<span class="w"> </span>SIZE<span class="w"> </span>
<a id="__codelineno-207-4" name="__codelineno-207-4"></a>registry.access.redhat.com/rhel7.0<span class="w"> </span>latest<span class="w"> </span>
<a id="__codelineno-207-5" name="__codelineno-207-5"></a>bc668af2b27f<span class="w"> </span><span class="m">6</span><span class="w"> </span>years<span class="w"> </span>ago<span class="w"> </span><span class="m">153</span><span class="w"> </span>MB<span class="w"> </span>
<a id="__codelineno-207-6" name="__codelineno-207-6"></a><span class="o">[</span>root@example<span class="w"> </span>~<span class="o">]</span><span class="c1"># podman inspect </span>
<a id="__codelineno-207-7" name="__codelineno-207-7"></a>registry.access.redhat.com/rhel7.0
</code></pre></div></td></tr></table></div>
<p><img alt="" src="../../../../images/1718085509740-c217ab19-1575-4e85-80d8-b84e7208aa55.png" /></p>
<h2 id="管理容器即服务"><strong><font style="color:rgb(0,0,0);">管理容器即服务 </font></strong><a class="headerlink" href="#管理容器即服务" title="Permanent link">&para;</a></h2>
<p><strong><font style="color:rgb(0,0,0);">初级概念： </font></strong></p>
<p><font style="color:rgb(0,0,0);">在将数据库或 </font><font style="color:rgb(0,0,0);">Web </font><font style="color:rgb(0,0,0);">服务器等服务部署为容器时，通常希望这些容器 </font></p>
<p><font style="color:rgb(0,0,0);">在服务器启动时自动启动，所以我们将容器作为 </font><strong><font style="color:rgb(0,0,0);">systemd </font></strong><font style="color:rgb(0,0,0);">服务启 </font></p>
<p><font style="color:rgb(0,0,0);">动和停止</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">并检查其状态。（</font><font style="color:rgb(0,0,0);">systemd </font><font style="color:rgb(0,0,0);">服务取代了 </font><font style="color:rgb(0,0,0);">initd</font><font style="color:rgb(0,0,0);">，成为系 </font></p>
<p><font style="color:rgb(0,0,0);">统的第一个进程（</font><font style="color:rgb(0,0,0);">PID </font><font style="color:rgb(0,0,0);">等于 </font><font style="color:rgb(0,0,0);">1</font><font style="color:rgb(0,0,0);">），其他进程都是它的子进程） </font></p>
<p><strong><font style="color:rgb(0,0,0);">systemd </font></strong><strong><font style="color:rgb(0,0,0);">管理系统服务： </font></strong></p>
<p><font style="color:rgb(0,0,0);">通过 </font><font style="color:rgb(0,0,0);">rootless </font><font style="color:rgb(0,0,0);">容器创建 </font><font style="color:rgb(0,0,0);">systemd </font><font style="color:rgb(0,0,0);">用户单元文件，可以使用 </font></p>
<p><font style="color:rgb(0,0,0);">systemctl </font><font style="color:rgb(0,0,0);">来管理。若容器在 </font><strong><font style="color:rgb(0,0,0);">rootless </font></strong><font style="color:rgb(0,0,0);">模式中运行</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">则可以从非 </font></p>
<p><font style="color:rgb(0,0,0);">特权用户帐户管理这些服务，以提高安全性。</font></p>
<p><strong><font style="color:rgb(0,0,0);">systemd </font></strong><strong><font style="color:rgb(0,0,0);">管理用户服务： </font></strong></p>
<p><font style="color:rgb(0,0,0);">借助 </font><font style="color:rgb(0,0,0);">systemd </font><font style="color:rgb(0,0,0);">用户服务</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">用户可以为自己的服务创建单元文件</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">并 </font></p>
<p><font style="color:rgb(0,0,0);">使用 </font><font style="color:rgb(0,0,0);">systemctl </font><font style="color:rgb(0,0,0);">命令管理这些服务</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">无需 </font><font style="color:rgb(0,0,0);">root </font><font style="color:rgb(0,0,0);">访问权限。 </font></p>
<p><font style="color:rgb(0,0,0);">当您将用户服务作为非 </font><font style="color:rgb(0,0,0);">root </font><font style="color:rgb(0,0,0);">用户启用时</font><font style="color:rgb(0,0,0);">, </font></p>
<p><font style="color:rgb(0,0,0);">该服务会在您通过文本或图形控制台或使用 </font><font style="color:rgb(0,0,0);">SSH </font><font style="color:rgb(0,0,0);">打开第一个会话时 </font></p>
<p><font style="color:rgb(0,0,0);">自动启动。当您关闭最后一个会话时</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">服务停止。 </font></p>
<p><font style="color:rgb(0,0,0);">此行为与系统服务有所不同</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">系统服务是在系统启动时启动</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">在系统 </font></p>
<p><font style="color:rgb(0,0,0);">关闭时停止； </font></p>
<p><font style="color:rgb(0,0,0);">可以通过 </font><strong><font style="color:rgb(0,0,0);">loginctl enable-linger/disable-linger </font></strong><strong><font style="color:rgb(0,0,0);">来改 </font></strong></p>
<p><strong><font style="color:rgb(0,0,0);">变 </font></strong></p>
<p><font style="color:rgb(0,0,0);">启用</font><font style="color:rgb(0,0,0);">/</font><font style="color:rgb(0,0,0);">禁止用户逗留</font><font style="color:rgb(0,0,0);">(</font><font style="color:rgb(0,0,0);">相当于保持登录状态</font><font style="color:rgb(0,0,0);">)</font><font style="color:rgb(0,0,0);">。 </font></p>
<p><font style="color:rgb(0,0,0);">若没有指定就是当前用户，如果指定了用户名或 </font><font style="color:rgb(0,0,0);">UID</font><font style="color:rgb(0,0,0);">， 那么系统将 </font></p>
<p><font style="color:rgb(0,0,0);">会在启动时自动为这些用户派生出用户管理器， 并且在用户登出后 </font></p>
<p><font style="color:rgb(0,0,0);">继续保持运行。 </font></p>
<p><font style="color:rgb(0,0,0);">允许未登录的用户在后台运行持续时间很长的服务。 </font></p>
<p><font style="color:rgb(0,0,0);">（</font><font style="color:rgb(0,0,0);">loginctl — </font><font style="color:rgb(0,0,0);">控制 </font><font style="color:rgb(0,0,0);">systemd </font><font style="color:rgb(0,0,0);">登录管理器： </font></p>
<p><font style="color:rgb(0,56,132);">http://www.jinbuguo.com/systemd/loginctl.html</font><font style="color:rgb(0,0,0);">）</font></p>
<p><font style="color:rgb(0,0,0);">查看 </font><font style="color:rgb(0,0,0);">username </font><font style="color:rgb(0,0,0);">当前各项属性值 </font></p>
<p><strong><font style="color:rgb(0,0,0);">loginct1 show-user username </font></strong></p>
<h3 id="创建和管理-systemd-用户服务"><strong><font style="color:rgb(0,0,0);">创建和管理 systemd 用户服务 </font></strong><a class="headerlink" href="#创建和管理-systemd-用户服务" title="Permanent link">&para;</a></h3>
<p><font style="color:rgb(0,0,0);">定义 </font><font style="color:rgb(0,0,0);">systemd </font><font style="color:rgb(0,0,0);">用户服务</font><font style="color:rgb(0,0,0);">,</font><font style="color:rgb(0,0,0);">在</font><font style="color:rgb(0,0,0);">~/.config/systemd/user/</font><font style="color:rgb(0,0,0);">目录来 </font></p>
<p><font style="color:rgb(0,0,0);">下创建服务文件。 </font></p>
<p><font style="color:rgb(0,0,0);">使用 </font><font style="color:rgb(0,0,0);">systemctl --user </font><font style="color:rgb(0,0,0);">命令来控制，但必须在控制台登录或直 </font></p>
<p><font style="color:rgb(0,0,0);">接通过 </font><font style="color:rgb(0,0,0);">ssh </font><font style="color:rgb(0,0,0);">登录。</font><font style="color:rgb(0,0,0);">sudo </font><font style="color:rgb(0,0,0);">和 </font><font style="color:rgb(0,0,0);">su </font><font style="color:rgb(0,0,0);">不起作用。 </font></p>
<p><font style="color:rgb(0,0,0);">systemctl </font><font style="color:rgb(0,0,0);">守护进程会与 </font><font style="color:rgb(0,0,0);">systemctl --user </font><font style="color:rgb(0,0,0);">进程交互。仅当 </font></p>
<p><font style="color:rgb(0,0,0);">用户首次从控制台或 </font><font style="color:rgb(0,0,0);">ssh </font><font style="color:rgb(0,0,0);">登录时，系统才会启动该进程。 </font></p>
<p><font style="color:rgb(0,0,0);">扩展：（比较系统和用户服务）</font></p>
<p><img alt="" src="../../../../images/1718085635277-c1015b5a-3a02-43ea-812f-4ddf6d2f717a.png" /></p>
<p><font style="color:rgb(0,0,0);">podman </font><font style="color:rgb(0,0,0);">生成 </font><font style="color:rgb(0,0,0);">systemd </font><font style="color:rgb(0,0,0);">文件有两种方式： </font></p>
<p><font style="color:rgb(0,0,0);">1</font><font style="color:rgb(0,0,0);">）生成的容器，在开机时服务启动的时候启动容器，关机时停止它</font><font style="color:rgb(0,0,0);">. </font></p>
<p><font style="color:rgb(0,0,0);">2</font><font style="color:rgb(0,0,0);">）每次服务启动的时候创建并运行容器，在停止服务时删除容器</font><font style="color:rgb(0,0,0);">. </font></p>
<p><font style="color:rgb(0,0,0);">版本：</font><font style="color:rgb(0,0,0);">[root@example ~]# podman --version </font></p>
<p><font style="color:rgb(0,0,0);">podman version 1.6.4 </font></p>
<p><font style="color:rgb(0,0,0);">1.6.4 </font><font style="color:rgb(0,0,0);">版本不支持</font><font style="color:rgb(0,0,0);">--new </font><font style="color:rgb(0,0,0);">参数 </font></p>
<p><font style="color:rgb(0,0,0);">案例：创建 </font><font style="color:rgb(0,0,0);">systemd </font><font style="color:rgb(0,0,0);">单元文件 </font></p>
<p><font style="color:rgb(0,0,0);">1</font><font style="color:rgb(0,0,0);">）创建用户 </font><font style="color:rgb(0,0,0);">contsvc </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-208-1">1</a></span>
<span class="normal"><a href="#__codelineno-208-2">2</a></span>
<span class="normal"><a href="#__codelineno-208-3">3</a></span>
<span class="normal"><a href="#__codelineno-208-4">4</a></span>
<span class="normal"><a href="#__codelineno-208-5">5</a></span>
<span class="normal"><a href="#__codelineno-208-6">6</a></span>
<span class="normal"><a href="#__codelineno-208-7">7</a></span>
<span class="normal"><a href="#__codelineno-208-8">8</a></span>
<span class="normal"><a href="#__codelineno-208-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-208-1" name="__codelineno-208-1"></a><span class="o">[</span>root@example<span class="w"> </span>~<span class="o">]</span><span class="c1"># useradd contsvc </span>
<a id="__codelineno-208-2" name="__codelineno-208-2"></a><span class="o">[</span>root@example<span class="w"> </span>~<span class="o">]</span><span class="c1"># passwd contsvc </span>
<a id="__codelineno-208-3" name="__codelineno-208-3"></a>Changing<span class="w"> </span>password<span class="w"> </span><span class="k">for</span><span class="w"> </span>user<span class="w"> </span>contsvc.<span class="w"> </span>
<a id="__codelineno-208-4" name="__codelineno-208-4"></a>New<span class="w"> </span>password:<span class="w"> </span>redhat<span class="w"> </span>
<a id="__codelineno-208-5" name="__codelineno-208-5"></a>BAD<span class="w"> </span>PASSWORD:<span class="w"> </span>The<span class="w"> </span>password<span class="w"> </span>is<span class="w"> </span>shorter<span class="w"> </span>than<span class="w"> </span><span class="m">8</span><span class="w"> </span>
<a id="__codelineno-208-6" name="__codelineno-208-6"></a>characters<span class="w"> </span>
<a id="__codelineno-208-7" name="__codelineno-208-7"></a>Retype<span class="w"> </span>new<span class="w"> </span>password:<span class="w"> </span>redhat<span class="w"> </span>
<a id="__codelineno-208-8" name="__codelineno-208-8"></a>passwd:<span class="w"> </span>all<span class="w"> </span>authentication<span class="w"> </span>tokens<span class="w"> </span>updated<span class="w"> </span>
<a id="__codelineno-208-9" name="__codelineno-208-9"></a>successfully.<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">2</font><font style="color:rgb(0,0,0);">）登录 </font><font style="color:rgb(0,0,0);">contsvc </font><font style="color:rgb(0,0,0);">用户，搜索 </font><font style="color:rgb(0,0,0);">httpd </font><font style="color:rgb(0,0,0);">镜像 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-209-1">1</a></span>
<span class="normal"><a href="#__codelineno-209-2">2</a></span>
<span class="normal"><a href="#__codelineno-209-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-209-1" name="__codelineno-209-1"></a>ssh<span class="w"> </span>contsvc@example
<a id="__codelineno-209-2" name="__codelineno-209-2"></a><span class="o">[</span>contsvc@example<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>podman<span class="w"> </span>search<span class="w"> </span>httpd
<a id="__codelineno-209-3" name="__codelineno-209-3"></a>podman<span class="w"> </span>pull<span class="w"> </span>registry.access.redhat.com/rhscl/httpd-24-rhel7
</code></pre></div></td></tr></table></div>
<p><img alt="" src="../../../../images/1718085742316-ec1dd7e5-2dbc-4e44-9729-c8c159dbe080.png" /></p>
<p><font style="color:rgb(0,0,0);">3</font><font style="color:rgb(0,0,0);">）创建 </font><font style="color:rgb(0,0,0);">webcontent/html </font><font style="color:rgb(0,0,0);">网页文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-210-1">1</a></span>
<span class="normal"><a href="#__codelineno-210-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-210-1" name="__codelineno-210-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/webcontent/html<span class="w"> </span>
<a id="__codelineno-210-2" name="__codelineno-210-2"></a><span class="o">[</span>contsvc@example<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;hello world&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>webcontent/html/index.html<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">4</font><font style="color:rgb(0,0,0);">）确定权限 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-211-1">1</a></span>
<span class="normal"><a href="#__codelineno-211-2">2</a></span>
<span class="normal"><a href="#__codelineno-211-3">3</a></span>
<span class="normal"><a href="#__codelineno-211-4">4</a></span>
<span class="normal"><a href="#__codelineno-211-5">5</a></span>
<span class="normal"><a href="#__codelineno-211-6">6</a></span>
<span class="normal"><a href="#__codelineno-211-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-211-1" name="__codelineno-211-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>ls<span class="w"> </span>-ld<span class="w"> </span>webcontent/html/<span class="w"> </span>
<a id="__codelineno-211-2" name="__codelineno-211-2"></a>drwxrwxr-x.<span class="w"> </span><span class="m">2</span><span class="w"> </span>contsvc<span class="w"> </span>contsvc<span class="w"> </span><span class="m">24</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">20</span>:45<span class="w"> </span>
<a id="__codelineno-211-3" name="__codelineno-211-3"></a>webcontent/html/<span class="w"> </span>
<a id="__codelineno-211-4" name="__codelineno-211-4"></a><span class="o">[</span>contsvc@example<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>
<a id="__codelineno-211-5" name="__codelineno-211-5"></a>webcontent/html/index.html<span class="w"> </span>
<a id="__codelineno-211-6" name="__codelineno-211-6"></a>-rw-rw-r--.<span class="w"> </span><span class="m">1</span><span class="w"> </span>contsvc<span class="w"> </span>contsvc<span class="w"> </span><span class="m">12</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">20</span>:45<span class="w"> </span>
<a id="__codelineno-211-7" name="__codelineno-211-7"></a>webcontent/html/index.html<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">5</font><font style="color:rgb(0,0,0);">）拉取 </font><font style="color:rgb(0,0,0);">httpd </font><font style="color:rgb(0,0,0);">到公共镜像 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-212-1">1</a></span>
<span class="normal"><a href="#__codelineno-212-2">2</a></span>
<span class="normal"><a href="#__codelineno-212-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-212-1" name="__codelineno-212-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>podman<span class="w"> </span>pull<span class="w"> </span>
<a id="__codelineno-212-2" name="__codelineno-212-2"></a>registry.access.redhat.com/rhscl/httpd-24-<span class="w"> </span>
<a id="__codelineno-212-3" name="__codelineno-212-3"></a>rhel7:latest
</code></pre></div></td></tr></table></div>
<p><img alt="" src="../../../../images/1718085754338-120875ec-e986-4ca7-a4ed-ffecbbc87ee3.png" /></p>
<p><font style="color:rgb(0,0,0);">6</font><font style="color:rgb(0,0,0);">）创建容器 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-213-1">1</a></span>
<span class="normal"><a href="#__codelineno-213-2">2</a></span>
<span class="normal"><a href="#__codelineno-213-3">3</a></span>
<span class="normal"><a href="#__codelineno-213-4">4</a></span>
<span class="normal"><a href="#__codelineno-213-5">5</a></span>
<span class="normal"><a href="#__codelineno-213-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-213-1" name="__codelineno-213-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>podman<span class="w"> </span>run<span class="w"> </span>-itd<span class="w"> </span>--name<span class="w"> </span>myweb<span class="w"> </span>
<a id="__codelineno-213-2" name="__codelineno-213-2"></a>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span>-v<span class="w"> </span>~/webcontent:/var/www:Z<span class="w"> </span>
<a id="__codelineno-213-3" name="__codelineno-213-3"></a>registry.access.redhat.com/rhscl/httpd-24-<span class="w"> </span>
<a id="__codelineno-213-4" name="__codelineno-213-4"></a>rhel7:latest<span class="w"> </span>
<a id="__codelineno-213-5" name="__codelineno-213-5"></a>4e25c4a00bb1e78a6977d177f069d37efe589c88809180b63<span class="w"> </span>
<a id="__codelineno-213-6" name="__codelineno-213-6"></a>f28a010d684d86f<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">7</font><font style="color:rgb(0,0,0);">）验证 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-214-1">1</a></span>
<span class="normal"><a href="#__codelineno-214-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-214-1" name="__codelineno-214-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>curl<span class="w"> </span>http://localhost:8080<span class="w"> </span>
<a id="__codelineno-214-2" name="__codelineno-214-2"></a>hello<span class="w"> </span>world<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">8</font><font style="color:rgb(0,0,0);">）创建目录 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-215-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-215-1" name="__codelineno-215-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/.config/systemd/user
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">9</font><font style="color:rgb(0,0,0);">）创建 </font><font style="color:rgb(0,0,0);">systemd </font><font style="color:rgb(0,0,0);">单元文件 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-216-1">1</a></span>
<span class="normal"><a href="#__codelineno-216-2">2</a></span>
<span class="normal"><a href="#__codelineno-216-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-216-1" name="__codelineno-216-1"></a><span class="nb">cd</span><span class="w"> </span>.config/systemd/user/
<a id="__codelineno-216-2" name="__codelineno-216-2"></a>podman<span class="w"> </span>generate<span class="w"> </span>systemd<span class="w"> </span>--name<span class="w"> </span>myweb<span class="w"> </span>--files<span class="w"> </span>--new<span class="w"> </span>
<a id="__codelineno-216-3" name="__codelineno-216-3"></a>/home/contsvc/.config/systemd/user/container-myweb.service（在原有的文件名称前加了<span class="w"> </span>container）<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">在 </font><font style="color:rgb(0,0,0);">1.6.4 </font><font style="color:rgb(0,0,0);">中没有</font><font style="color:rgb(0,0,0);">--new </font><font style="color:rgb(0,0,0);">选项： </font></p>
<p><font style="color:rgb(0,0,0);">生成系统化的单位文件，这些文件在服务启动和停止命令处创建和 </font></p>
<p><font style="color:rgb(0,0,0);">删除容器。此类单位文件不绑定到单个计算机，可以轻松地在其他 </font></p>
<p><font style="color:rgb(0,0,0);">计算机上共享和使用。 </font></p>
<p><font style="color:rgb(0,0,0);">10</font><font style="color:rgb(0,0,0);">）停止删除原本的 </font><font style="color:rgb(0,0,0);">http </font><font style="color:rgb(0,0,0);">容器 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-217-1">1</a></span>
<span class="normal"><a href="#__codelineno-217-2">2</a></span>
<span class="normal"><a href="#__codelineno-217-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-217-1" name="__codelineno-217-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>user<span class="o">]</span>$<span class="w"> </span>podman<span class="w"> </span>stop<span class="w"> </span>myweb<span class="w"> </span>
<a id="__codelineno-217-2" name="__codelineno-217-2"></a>4e25c4a00bb1e78a6977d177f069d37efe589c88809180b63<span class="w"> </span>
<a id="__codelineno-217-3" name="__codelineno-217-3"></a>f28a010d684d86f<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">若没有</font><font style="color:rgb(0,0,0);">--new </font><font style="color:rgb(0,0,0);">参数不需要删除容器 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-218-1">1</a></span>
<span class="normal"><a href="#__codelineno-218-2">2</a></span>
<span class="normal"><a href="#__codelineno-218-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-218-1" name="__codelineno-218-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>user<span class="o">]</span>$<span class="w"> </span>podman<span class="w"> </span>rm<span class="w"> </span>myweb<span class="w"> </span>
<a id="__codelineno-218-2" name="__codelineno-218-2"></a>4e25c4a00bb1e78a6977d177f069d37efe589c88809180b63<span class="w"> </span>
<a id="__codelineno-218-3" name="__codelineno-218-3"></a>f28a010d684d86f<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">11</font><font style="color:rgb(0,0,0);">）强制 </font><font style="color:rgb(0,0,0);">systemd </font><font style="color:rgb(0,0,0);">重启加载配置 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-219-1">1</a></span>
<span class="normal"><a href="#__codelineno-219-2">2</a></span>
<span class="normal"><a href="#__codelineno-219-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-219-1" name="__codelineno-219-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>user<span class="o">]</span>$<span class="w"> </span>systemctl<span class="w"> </span>--user<span class="w"> </span>daemon-reload
<a id="__codelineno-219-2" name="__codelineno-219-2"></a><span class="o">[</span>contsvc@example<span class="w"> </span>user<span class="o">]</span>$<span class="w"> </span>podman<span class="w"> </span>ps<span class="w"> </span>-a<span class="w"> </span>
<a id="__codelineno-219-3" name="__codelineno-219-3"></a><span class="o">[</span>contsvc@example<span class="w"> </span>user<span class="o">]</span>$<span class="w"> </span>podman<span class="w"> </span>ps<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">12</font><font style="color:rgb(0,0,0);">）启动并启用 </font><font style="color:rgb(0,0,0);">container-myweb </font><font style="color:rgb(0,0,0);">服务 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-220-1">1</a></span>
<span class="normal"><a href="#__codelineno-220-2">2</a></span>
<span class="normal"><a href="#__codelineno-220-3">3</a></span>
<span class="normal"><a href="#__codelineno-220-4">4</a></span>
<span class="normal"><a href="#__codelineno-220-5">5</a></span>
<span class="normal"><a href="#__codelineno-220-6">6</a></span>
<span class="normal"><a href="#__codelineno-220-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-220-1" name="__codelineno-220-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>user<span class="o">]</span>$<span class="w"> </span>loginctl<span class="w"> </span>enable-linger<span class="w"> </span>
<a id="__codelineno-220-2" name="__codelineno-220-2"></a><span class="o">[</span>contsvc@example<span class="w"> </span>user<span class="o">]</span>$<span class="w"> </span>systemctl<span class="w"> </span>--user<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>container-myweb.service<span class="w"> </span>
<a id="__codelineno-220-3" name="__codelineno-220-3"></a>Created<span class="w"> </span>symlink<span class="w"> </span>
<a id="__codelineno-220-4" name="__codelineno-220-4"></a>/home/contsvc/.config/systemd/user/multi
<a id="__codelineno-220-5" name="__codelineno-220-5"></a>user.target.wants/container
<a id="__codelineno-220-6" name="__codelineno-220-6"></a>myweb.service<span class="w"> </span>?𺐠/home/contsvc/.config/systemd/use<span class="w"> </span>
<a id="__codelineno-220-7" name="__codelineno-220-7"></a>r/container-myweb.service.<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p><font style="color:rgb(0,0,0);">... </font></p>
<p><font style="color:rgb(0,0,0);">13</font><font style="color:rgb(0,0,0);">）验证 </font></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-221-1">1</a></span>
<span class="normal"><a href="#__codelineno-221-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-221-1" name="__codelineno-221-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>user<span class="o">]</span>$<span class="w"> </span>systemctl<span class="w"> </span>--user<span class="w"> </span>status<span class="w"> </span>
<a id="__codelineno-221-2" name="__codelineno-221-2"></a>container-myweb.service<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p>:::color2
<font style="color:rgb(0,0,0);">?𺐠container-myweb.service - Podman container</font></p>
<p><font style="color:rgb(0,0,0);">myweb.servic</font><font style="color:rgb(0,0,0);">e</font><font style="color:rgb(0,0,0);">Loaded: loaded </font></p>
<p><font style="color:rgb(0,0,0);">(/home/contsvc/.config/systemd/user/con</font><font style="color:rgb(0,0,0);">t</font><font style="color:rgb(0,0,0);">ainer</font></p>
<p><font style="color:rgb(0,0,0);">myweb.service; enabled; vendor preset: </font></p>
<p><font style="color:rgb(0,0,0);">enabled</font><font style="color:rgb(0,0,0);">)</font><font style="color:rgb(0,0,0);">Active: inactive (dead</font><font style="color:rgb(0,0,0);">)</font><font style="color:rgb(0,0,0);">Docs: man:podman</font></p>
<p><font style="color:rgb(0,0,0);">generate-systemd(1</font><font style="color:rgb(0,0,0);">)</font></p>
<p>:::</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-222-1">1</a></span>
<span class="normal"><a href="#__codelineno-222-2">2</a></span>
<span class="normal"><a href="#__codelineno-222-3">3</a></span>
<span class="normal"><a href="#__codelineno-222-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-222-1" name="__codelineno-222-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>user<span class="o">]</span>$<span class="w"> </span>systemctl<span class="w"> </span>--user<span class="w"> </span>start<span class="w"> </span>
<a id="__codelineno-222-2" name="__codelineno-222-2"></a>container-myweb.service<span class="w"> </span>
<a id="__codelineno-222-3" name="__codelineno-222-3"></a><span class="o">[</span>contsvc@example<span class="w"> </span>user<span class="o">]</span>$<span class="w"> </span>systemctl<span class="w"> </span>--user<span class="w"> </span>status<span class="w"> </span>
<a id="__codelineno-222-4" name="__codelineno-222-4"></a>container-myweb.service<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-223-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-223-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-223-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-223-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-223-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-223-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-223-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-223-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-223-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-223-10">10</a></span>
<span class="normal"><a href="#__codelineno-223-11">11</a></span>
<span class="normal"><a href="#__codelineno-223-12">12</a></span>
<span class="normal"><a href="#__codelineno-223-13">13</a></span>
<span class="normal"><a href="#__codelineno-223-14">14</a></span>
<span class="normal"><a href="#__codelineno-223-15">15</a></span>
<span class="normal"><a href="#__codelineno-223-16">16</a></span>
<span class="normal"><a href="#__codelineno-223-17">17</a></span>
<span class="normal"><a href="#__codelineno-223-18">18</a></span>
<span class="normal"><a href="#__codelineno-223-19">19</a></span>
<span class="normal"><a href="#__codelineno-223-20">20</a></span>
<span class="normal"><a href="#__codelineno-223-21">21</a></span>
<span class="normal"><a href="#__codelineno-223-22">22</a></span>
<span class="normal"><a href="#__codelineno-223-23">23</a></span>
<span class="normal"><a href="#__codelineno-223-24">24</a></span>
<span class="normal"><a href="#__codelineno-223-25">25</a></span>
<span class="normal"><a href="#__codelineno-223-26">26</a></span>
<span class="normal"><a href="#__codelineno-223-27">27</a></span>
<span class="normal"><a href="#__codelineno-223-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-223-1" name="__codelineno-223-1"></a>?𺐠container-myweb.service<span class="w"> </span>-<span class="w"> </span>Podman<span class="w"> </span>containermyweb.serviceLoaded:<span class="w"> </span>loaded<span class="w"> </span>
<a id="__codelineno-223-2" name="__codelineno-223-2"></a><span class="o">(</span>/home/contsvc/.config/systemd/user/containermyweb.service<span class="p">;</span><span class="w"> </span>enabled<span class="p">;</span><span class="w"> </span>vendor<span class="w"> </span>preset:<span class="w"> </span>
<a id="__codelineno-223-3" name="__codelineno-223-3"></a>enabled<span class="o">)</span>Active:<span class="w"> </span>active<span class="w"> </span><span class="o">(</span>running<span class="o">)</span><span class="w"> </span>since<span class="w"> </span>Mon<span class="w"> </span><span class="m">2021</span>-
<a id="__codelineno-223-4" name="__codelineno-223-4"></a><span class="m">02</span>-22<span class="w"> </span><span class="m">11</span>:50:42<span class="w"> </span>CST<span class="p">;</span><span class="w"> </span>13s<span class="w"> </span>agoDocs:<span class="w"> </span>man:podmangenerate-systemd<span class="o">(</span><span class="m">1</span><span class="o">)</span>Process:<span class="w"> </span><span class="m">2934</span><span class="w"> </span>
<a id="__codelineno-223-5" name="__codelineno-223-5"></a><span class="nv">ExecStart</span><span class="o">=</span>/usr/bin/podman<span class="w"> </span>start<span class="w"> </span>myweb<span class="w"> </span>
<a id="__codelineno-223-6" name="__codelineno-223-6"></a><span class="o">(</span><span class="nv">code</span><span class="o">=</span>exited,<span class="w"> </span><span class="nv">status</span><span class="o">=</span><span class="m">0</span>/SUCCESS<span class="o">)</span>Main<span class="w"> </span>PID:<span class="w"> </span><span class="m">2957</span><span class="w"> </span>
<a id="__codelineno-223-7" name="__codelineno-223-7"></a><span class="o">(</span>conmon<span class="o">)</span>CGroup:<span class="w"> </span>/user.slice/user-
<a id="__codelineno-223-8" name="__codelineno-223-8"></a><span class="m">1001</span>.slice/user@1001.service/containermyweb.service?𺐠𺐠2951<span class="w"> </span>/usr/bin/fuse-overlayfs<span class="w"> </span>-o<span class="w"> </span>
<a id="__codelineno-223-9" name="__codelineno-223-9"></a><span class="nv">lowerdir</span><span class="o">=</span>/home/contsvc/.local/share/containers/st
<a id="__codelineno-223-10" name="__codelineno-223-10"></a>orage/overlay/l/FPCXTGSVDUKFNTRN354VU6W2TL:/ho&gt;<span class="w"> </span>
<a id="__codelineno-223-11" name="__codelineno-223-11"></a><span class="w"> </span>?𺐠𺐠2954<span class="w"> </span>/usr/bin/slirp4netns<span class="w"> </span>--apisocket<span class="w"> </span>
<a id="__codelineno-223-12" name="__codelineno-223-12"></a>/run/user/1001/libpod/tmp/b4167b60c4274d60c17c324
<a id="__codelineno-223-13" name="__codelineno-223-13"></a>bef8ef67fb1b627e97cd0d76bf3067cea9268c5&gt;<span class="w"> </span>
<a id="__codelineno-223-14" name="__codelineno-223-14"></a><span class="w"> </span>?𺐠𺐠2957<span class="w"> </span>/usr/bin/conmon<span class="w"> </span>--api-version<span class="w"> </span><span class="m">1</span><span class="w"> </span>-c<span class="w"> </span>
<a id="__codelineno-223-15" name="__codelineno-223-15"></a>b4167b60c4274d60c17c324bef8ef67fb1b627e97cd0d76bf
<a id="__codelineno-223-16" name="__codelineno-223-16"></a>3067cea9268c539<span class="w"> </span>-u<span class="w"> </span>
<a id="__codelineno-223-17" name="__codelineno-223-17"></a>b4167b60c4274d60c17&gt;<span class="w"> </span>?𺐠𺐠b4167b60c4274d
<a id="__codelineno-223-18" name="__codelineno-223-18"></a>60c17c324bef8ef67fb1b627e97cd0d76bf3067cea9268c539
<a id="__codelineno-223-19" name="__codelineno-223-19"></a><span class="w"> </span>?𺐠𺐠2969<span class="w"> </span>httpd<span class="w"> </span>-D
<a id="__codelineno-223-20" name="__codelineno-223-20"></a>FOREGROUND<span class="w"> </span>?𺐠𺐠3018
<a id="__codelineno-223-21" name="__codelineno-223-21"></a>/usr/bin/cat<span class="w"> </span>?𺐠𺐠3019<span class="w"> </span>
<a id="__codelineno-223-22" name="__codelineno-223-22"></a>/usr/bin/cat<span class="w"> </span>?𺐠𺐠3020<span class="w"> </span>
<a id="__codelineno-223-23" name="__codelineno-223-23"></a>/usr/bin/cat<span class="w"> </span>?𺐠??3021<span class="w"> </span>
<a id="__codelineno-223-24" name="__codelineno-223-24"></a>/usr/bin/cat<span class="w"> </span>?𺐠𺐠3022<span class="w"> </span>httpd<span class="w"> </span>-D<span class="w"> </span>
<a id="__codelineno-223-25" name="__codelineno-223-25"></a>FOREGROUND<span class="w"> </span>?𺐠𺐠3026<span class="w"> </span>httpd<span class="w"> </span>-D<span class="w"> </span>
<a id="__codelineno-223-26" name="__codelineno-223-26"></a>FOREGROUND<span class="w"> </span>?𺐠??3038<span class="w"> </span>httpd<span class="w"> </span>-D<span class="w"> </span>
<a id="__codelineno-223-27" name="__codelineno-223-27"></a>FOREGROUND<span class="w"> </span>???𺐠3047<span class="w"> </span>httpd<span class="w"> </span>-D
<a id="__codelineno-223-28" name="__codelineno-223-28"></a>FOREGROUND<span class="w"> </span>?𺰿𺰿3062<span class="w"> </span>httpd<span class="w"> </span>-D<span class="w"> </span>FOREGROUND
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-224-1">1</a></span>
<span class="normal"><a href="#__codelineno-224-2">2</a></span>
<span class="normal"><a href="#__codelineno-224-3">3</a></span>
<span class="normal"><a href="#__codelineno-224-4">4</a></span>
<span class="normal"><a href="#__codelineno-224-5">5</a></span>
<span class="normal"><a href="#__codelineno-224-6">6</a></span>
<span class="normal"><a href="#__codelineno-224-7">7</a></span>
<span class="normal"><a href="#__codelineno-224-8">8</a></span>
<span class="normal"><a href="#__codelineno-224-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-224-1" name="__codelineno-224-1"></a><span class="o">[</span>contsvc@example<span class="w"> </span>user<span class="o">]</span>$<span class="w"> </span>curl<span class="w"> </span>
<a id="__codelineno-224-2" name="__codelineno-224-2"></a>http://localhost:8080<span class="w"> </span>
<a id="__codelineno-224-3" name="__codelineno-224-3"></a>hello<span class="w"> </span>world<span class="w"> </span>
<a id="__codelineno-224-4" name="__codelineno-224-4"></a>重启：<span class="w"> </span>
<a id="__codelineno-224-5" name="__codelineno-224-5"></a><span class="o">[</span>contsvc@example<span class="w"> </span>user<span class="o">]</span>$<span class="w"> </span>su<span class="w"> </span>-<span class="w"> </span>
<a id="__codelineno-224-6" name="__codelineno-224-6"></a>Password:<span class="w"> </span>redhat<span class="w"> </span>
<a id="__codelineno-224-7" name="__codelineno-224-7"></a><span class="o">[</span>root@example<span class="w"> </span>~<span class="o">]</span><span class="c1"># systemctl reboot </span>
<a id="__codelineno-224-8" name="__codelineno-224-8"></a>...<span class="w"> </span>
<a id="__codelineno-224-9" name="__codelineno-224-9"></a>ssh<span class="w"> </span>contsvc@192.168.0.118
</code></pre></div></td></tr></table></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../RHEL9-RHCE%E5%AD%A6%E4%B9%A0/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 部署ansible">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                部署ansible
              </div>
            </div>
          </a>
        
        
          
          <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%B4%E6%8A%A4/ventoy%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5%E3%80%82/" class="md-footer__link md-footer__link--next" aria-label="下一页: Ventoy启动失败。">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                Ventoy启动失败。
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 李烨栋
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["header.autohide", "announce.dismiss", "navigation.instant", "navigation.tracking", "content.code.annotate", "toc.integrate", "toc.follow", "navigation.path", "navigation.top", "navigation.tabs", "navigation.prune", "navigation.footer", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "content.code.copy", "navigation.indexes", "search.share", "search.suggest", "search.highlight"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>