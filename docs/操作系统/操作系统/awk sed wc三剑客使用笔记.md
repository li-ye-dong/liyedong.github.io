明白了！  
这里我为你整理了一份**【awk/sed/wc 使用笔记（备查版）】**，内容清晰、实用，便于你随时翻阅。

## 一、awk 使用笔记
文本分析和格式化输出专家

### 常用格式
```bash
awk 'pattern {action}' 文件名
awk '{print $1, $3}' 文件名   # 打印第1列和第3列
```

### 常用技巧
+ `$0`：整行内容
+ `$1`、`$2` … `$n`：第n列
+ `NR`：当前记录数（行号）
+ `NF`：当前行字段数
+ `FS`：输入字段分隔符（默认空格）
+ `OFS`：输出字段分隔符
+ `BEGIN {}`：文件处理前执行
+ `END {}`：文件处理后执行

### 示例
```bash
awk '{sum += $2} END {print sum}' file.txt
# 累加第2列并输出总和

awk -F ',' '{print $1, $3}' data.csv
# 指定分隔符为逗号，打印第1列和第3列
```

---

## 二、sed 使用笔记
流式编辑利器，专攻文本修改

### 常用格式
```bash
sed 's/原内容/新内容/' 文件名
sed 's/原内容/新内容/g' 文件名   # 全局替换
```

### 常用技巧
+ `-i`：直接修改原文件（就地编辑）
+ `s///g`：全局替换行内所有匹配
+ `d`：删除
+ `i`：插入（insert）
+ `a`：追加（append）
+ `p`：打印（通常与 `-n` 配合）
+ 正则匹配灵活支持（行定位/字符定位）

### 示例
```bash
sed -i 's/80/8080/g' *.conf
# 把所有.conf文件中的80改成8080

sed -n '/ERROR/p' log.txt
# 只打印包含 ERROR 的行
```

### 高级示例
```bash
sed -i '2i 新插入的一行内容' file.txt
# 在第2行之前插入新行

sed -i '/pattern/a 追加内容' file.txt
# 匹配pattern后，在下一行追加内容
```

---

## 三、wc 使用笔记
文本快速统计助手

### 常用格式
```bash
wc 文件名
```

输出：**行数 单词数 字节数**

### 常用选项
+ `-l`：统计行数
+ `-w`：统计单词数
+ `-c`：统计字节数
+ `-m`：统计字符数（支持多字节，比如中文）

### 示例
```bash
wc -l file.txt
# 统计行数

cat file.txt | wc -w
# 统计单词数

cat file.txt | wc -c
# 统计字节数
```

---

# 🔥 三剑客组合技实战
### 统计包含"ERROR"的行数
```bash
grep "ERROR" log.txt | wc -l
```

### 提取第二列数据并去重排序
```bash
awk '{print $2}' access.log | sort | uniq
```

### 删除包含特定关键词的行
```bash
sed -i '/pattern/d' file.txt
```

---

# ✨ 总结小表格
| 工具 | 主要作用 | 典型用法示例 |
| --- | --- | --- |
| `awk` | 提取字段、格式化输出 | `awk '{print $1}' file` |
| `sed` | 批量替换、插入删除 | `sed 's/old/new/g' file` |
| `wc` | 行/字数/字符统计 | `wc -l file` |


---

# 📌 备查小结
+ 文本处理，优先考虑 **awk** 提取、**sed** 修改、**wc** 统计。
+ 复杂处理：**awk** 比 **sed** 更灵活。
+ 简单替换：**sed** 比 **awk** 简单直白。
+ 配合 `grep`/`sort`/`uniq`，提升战斗力。
+ 多用管道 `|`，一行搞定一堆任务！

 好的！我来为你扩展一份很实用的  
**《awk/sed常见错误排查表》**  
内容会**带中文解释+排查建议**，重点覆盖常见坑点和注意事项。

---

# 📋 awk / sed 常见错误排查表（附解决建议）
| 场景/错误现象 | 可能原因 | 解决方法 / 建议 |
| --- | --- | --- |
| `awk`<br/> 报错：**unexpected character ''** | Windows 格式文件，行末隐藏 `\r` | 用 `dos2unix`<br/> 转换文件格式，或在 awk 里加处理：`awk '{gsub(/\r/, ""); print}' file` |
| `awk '{print $1}'`<br/> 输出为空 | 行首有空格或制表符，导致 `$1`<br/> 实际为空 | 指定正确的分隔符，比如：`awk -F '[ \t]+' '{print $1}' file` |
| `awk`<br/> 分隔符设定无效 | 忘记加 `-F`<br/> 或 `FS`<br/> 设置不正确 | 格式化写：`awk -F',' '{print $1}'`<br/> 或 `BEGIN{FS=","}` |
| `sed -i`<br/> 报错：**invalid option -- 'i'**（特别是在macOS） | macOS BSD sed 和 GNU sed 参数不兼容 | macOS 用法：`sed -i '' 's/old/new/' file`<br/>，即 `-i`<br/> 后要有空字符串参数 |
| `sed`<br/> 正则不生效，匹配失败 | 正则语法问题，比如少转义、贪婪匹配 | 注意正则写法，比如匹配点`.`<br/>要写成`\.`<br/>，尽量加引号保护正则：`sed 's/\.txt/\.bak/'` |
| `sed 's/.../.../'`<br/> 替换不全 | 默认只替换**每行第一个匹配项** | 加 `g`<br/> 参数：`sed 's/pattern/replacement/g'`<br/>，全局替换每行所有匹配 |
| `sed -i`<br/> 后文件变空 | 命令中使用了错误的匹配/替换逻辑 | 先不加 `-i`<br/> 测试确认输出正常后，再加 `-i`<br/> 直接修改 |
| `awk`<br/> 处理大文件很慢 | awk代码逻辑太复杂或用到了子shell | 简化逻辑，避免在awk内部频繁调用外部命令（比如 `system()`<br/>），必要时考虑换用 `gawk` |
| `sed`<br/> 批量处理时报错：**No such file or directory** | 使用 `*`<br/> 通配符时，文件列表为空 | 确认当前目录是否有匹配文件，可以加判断保护，例如 `if ls *.conf 2>/dev/null; then sed -i ...; fi` |


---

# 📚 小技巧汇总
| 小技巧 | 用法 |
| --- | --- |
| awk 遇到带制表符的文件 | `awk -F'\t' '{print $1}'`<br/> 明确用 `\t`<br/> 分隔 |
| sed 只替换第N行内容 | `sed '5s/old/new/' file.txt`<br/> （只替换第5行） |
| awk 输出格式美化（比如对齐） | `printf`<br/> 格式控制：`awk '{printf "%-10s %-5s\n", $1, $2}' file` |
| sed 匹配多行复杂替换 | sed 本身难处理多行，建议换 `awk`<br/> 或 `perl` |
| sed 删除多行区间 | `sed '10,20d' file.txt`<br/> 删除第10到20行 |


---

# ⚡ 额外提示
+ ➡ **测试前先别加 **`**-i**`，用标准输出确认没问题再覆盖文件！
+ ➡ **awk** 更适合**结构化文本**；**sed** 更适合**行内简单替换**。
+ ➡ **大批量文件处理时**，可以考虑 `find` + `xargs` + `sed/awk`，提高效率。

---

