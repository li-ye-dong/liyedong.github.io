好的！来，我分别给你整理好：

---

# 📊 MySQL 复制拓扑图 & InnoDB Cluster结构图（简洁版）
## 1. 经典主从复制拓扑图（Master-Replica）
```plain
+----------------+            +----------------+
|    Primary     |    --->    |     Replica     |
|  (Master Node) | 复制数据到 | (Slave Node)     |
+----------------+            +----------------+
```

**特点：**

+ 主库写入，复制到从库。
+ 异步/半同步任选。
+ 从库可以读请求，减轻主库压力。

---

## 2. InnoDB Cluster 高可用拓扑图（Group Replication）
```plain
          +------------------+
          |    MySQL Router  |
          +--------+---------+
                   |
        +----------+-----------+
        |          |           |
+-------+--+ +-----+------+ +---+-------+
|  Node1   | |  Node2     | |  Node3    |
| (Primary)| | (Secondary)| | (Secondary)|
+----------+ +------------+ +------------+
         (Group Replication 自动同步)
```

**特点：**

+ Router负责连接分发，应用无感知。
+ 节点之间组复制，故障自动转移。
+ 支持读写分离、横向扩展。

---

# 🛠️ MySQL 常用命令手册（速查版）
## 一、服务管理
```bash
# 启动 MySQL
sudo systemctl start mysqld

# 停止 MySQL
sudo systemctl stop mysqld

# 重启 MySQL
sudo systemctl restart mysqld

# 查看 MySQL 服务状态
sudo systemctl status mysqld
```

---

## 二、用户和权限管理
```sql
-- 创建用户
CREATE USER 'user'@'host' IDENTIFIED BY 'password';

-- 授权
GRANT ALL PRIVILEGES ON database.* TO 'user'@'host';

-- 刷新权限
FLUSH PRIVILEGES;

-- 修改密码
ALTER USER 'user'@'host' IDENTIFIED BY 'new_password';

-- 删除用户
DROP USER 'user'@'host';
```

---

## 三、主从复制管理
```sql
-- 主库查看 binlog 位置
SHOW MASTER STATUS;

-- 从库配置复制
CHANGE MASTER TO MASTER_HOST='ip', MASTER_USER='repl', MASTER_PASSWORD='pwd', MASTER_AUTO_POSITION=1;

-- 启动复制
START SLAVE;

-- 停止复制
STOP SLAVE;

-- 查看复制状态
SHOW SLAVE STATUS\G;
```

---

## 四、备份与恢复
```bash
# 使用mysqldump备份
mysqldump -uroot -p dbname > backup.sql

# 恢复数据库
mysql -uroot -p dbname < backup.sql
```

---

## 五、性能监控与调优
```sql
-- 查看慢查询
SHOW VARIABLES LIKE 'slow_query_log%';

-- 打开慢查询日志
SET GLOBAL slow_query_log = 'ON';

-- 查询当前连接数
SHOW STATUS LIKE 'Threads_connected';

-- 查询数据库大小
SELECT table_schema, 
       ROUND(SUM(data_length+index_length)/1024/1024, 2) AS 'DB Size (MB)'
FROM information_schema.tables 
GROUP BY table_schema;
```

---

## 六、InnoDB Cluster 管理命令（mysqlsh工具）
```bash
# 登录
mysqlsh root@localhost

# 创建集群
dba.createCluster('myCluster')

# 加节点
cluster = dba.getCluster('myCluster')
cluster.addInstance('root@node2_ip')
cluster.addInstance('root@node3_ip')

# 查看集群状态
cluster.status()

# 从集群中移除节点
cluster.removeInstance('root@node_ip')
```

---

# ✨ 补充小建议
+ 复制部署优先使用 GTID 模式
+ 日志格式优先使用 ROW
+ 从库启用只读模式（read_only=1）
+ 定期做全备 + binlog 增量备份
+ InnoDB Cluster部署后，应用层必须走 MySQL Router

---

✅ **这两份资料全部打包好了！**

如果需要，我还能把上面这些：

+ 输出成 Markdown 格式（适合你自己继续整理或归档）
+ 或者直接打包成 PDF 文件（方便带走）

要的话直接告诉我要哪种格式哈！🎯  
要不要一起顺便补充一个"考试题库版"？比如复习小测试题目合集？👀  
要的话我也可以一并给你！

