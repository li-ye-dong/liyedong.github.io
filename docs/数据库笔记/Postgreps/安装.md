[https://www.postgresql.org/download/linux/redhat/](https://www.postgresql.org/download/linux/redhat/)

[https://developer.aliyun.com/mirror/postgresql?spm=a2c6h.13651102.0.0.60401b119r8XZs](https://developer.aliyun.com/mirror/postgresql?spm=a2c6h.13651102.0.0.60401b119r8XZs)



[https://mirrors.aliyun.com/postgresql/repos/yum/reporpms/EL-9-x86_64/?spm=a2c6h.25603864.0.0.3037bd65u68cBf](https://mirrors.aliyun.com/postgresql/repos/yum/reporpms/EL-9-x86_64/?spm=a2c6h.25603864.0.0.3037bd65u68cBf)

```sql
rpm -Uvh https://mirrors.aliyun.com/postgresql/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm
sed -i "s@https://download.postgresql.org/pub@https://mirrors.aliyun.com/postgresql@g" /etc/yum.repos.d/pgdg-redhat-all.repo



tee /etc/yum.repos.d/rocky-aliyun.repo << 'EOF'
[baseos]
name=Rocky Linux $releasever - BaseOS - aliyun
baseurl=http://mirrors.aliyun.com/rockylinux/$releasever/BaseOS/$basearch/os/
gpgcheck=0
enabled=1

[appstream]
name=Rocky Linux $releasever - AppStream - aliyun
baseurl=http://mirrors.aliyun.com/rockylinux/$releasever/AppStream/$basearch/os/
gpgcheck=0
enabled=1

[extras]
name=Rocky Linux $releasever - Extras - aliyun
baseurl=http://mirrors.aliyun.com/rockylinux/$releasever/extras/$basearch/os/
gpgcheck=0
enabled=1
EOF


# Install PostgreSQL:
sudo dnf install -y postgresql17-server

# Optionally initialize the database and enable automatic start:
sudo /usr/pgsql-17/bin/postgresql-17-setup initdb
sudo systemctl enable postgresql-17
sudo systemctl start postgresql-17


su - postgres

```

## PostgreSQL psql 常用反斜杠命令速查表
### 通用
+ `\bind [PARAM]...` 设置查询参数
+ `\copyright` 显示 PostgreSQL 使用和分发条款
+ `\crosstabview` 交叉表方式展示查询结果
+ `\errverbose` 显示最近一次错误的详细信息
+ `\g [FILE]` 执行查询（可输出到文件或管道）
+ `\gdesc` 只描述结果，不执行查询
+ `\gexec` 执行查询，然后逐行执行结果
+ `\gset [PREFIX]` 执行查询并保存结果到变量
+ `\gx [FILE]` 执行查询，强制扩展显示
+ `\q` 退出 psql
+ `\watch SEC` 每隔 SEC 秒重复执行查询

### 帮助
+ `\?` 查看命令帮助
+ `\h [NAME]` 查看 SQL 语法帮助（`\h *` 查看所有）

### 查询缓冲区
+ `\e [FILE]` 在外部编辑器中编辑缓冲区
+ `\ef [FUNCNAME]` 编辑函数定义
+ `\ev [VIEWNAME]` 编辑视图定义
+ `\p` 显示当前缓冲区内容
+ `\r` 重置清空缓冲区
+ `\s [FILE]` 显示历史命令或保存到文件
+ `\w FILE` 把缓冲区内容写入文件

### 输入/输出
+ `\copy ...` 本地执行 SQL COPY
+ `\echo [STRING]` 输出字符串
+ `\i FILE` 执行文件中的命令
+ `\ir FILE` 执行相对路径文件中的命令
+ `\o [FILE]` 将输出结果重定向到文件或管道
+ `\qecho [STRING]` 输出到 `\o` 指定的文件
+ `\warn [STRING]` 输出警告信息

### 条件执行
+ `\if` / `\elif` / `\else` / `\endif` 条件语句块

### 信息查询
（S = 显示系统对象, + = 更多详情）

+ `\d` 列出表、视图、序列
+ `\d NAME` 描述表/视图/索引
+ `\da` 列出聚合函数
+ `\db` 列出表空间
+ `\dC` 列出类型转换
+ `\dd` 显示对象描述
+ `\dD` 列出域
+ `\det` 列出外部表
+ `\des` 列出外部服务器
+ `\deu` 列出用户映射
+ `\dew` 列出外部数据封装器
+ `\df` 列出函数
+ `\dg` 或 `\du` 列出角色
+ `\di` 列出索引
+ `\dm` 列出物化视图
+ `\dn` 列出模式
+ `\do` 列出操作符
+ `\dp` 或 `\z` 列出权限
+ `\drds` 列出数据库角色设置
+ `\dRp` 列出发布（publication）
+ `\dRs` 列出订阅（subscription）
+ `\ds` 列出序列
+ `\dt` 列出表
+ `\dT` 列出数据类型
+ `\dv` 列出视图
+ `\dx` 列出扩展
+ `\dy` 列出事件触发器
+ `\l` 列出数据库
+ `\sf FUNC` 显示函数定义
+ `\sv VIEW` 显示视图定义

### 大对象
+ `\lo_list` 列出大对象
+ `\lo_import FILE` 导入大对象
+ `\lo_export OID FILE` 导出大对象
+ `\lo_unlink OID` 删除大对象

### 格式化
+ `\a` 切换对齐/非对齐模式
+ `\H` 切换 HTML 输出
+ `\t` 只显示行（不显示列名）
+ `\x` 切换扩展输出模式
+ `\pset` 设置输出格式选项
+ `\f` 设置字段分隔符
+ `\C` 设置表格标题
+ `\T` 设置 HTML `<table>` 属性

### 连接
+ `\c [DBNAME]` 连接到数据库
+ `\conninfo` 显示当前连接信息
+ `\encoding` 查看/设置客户端编码
+ `\password [USER]` 修改用户密码

### 操作系统
### `\cd DIR` 切换工作目录
+ `\timing` 显示/关闭命令执行时间
+ `\! [CMD]` 执行 shell 命令

### 变量
+ `\set NAME VALUE` 设置变量
+ `\unset NAME` 删除变量
+ `\prompt TEXT NAME` 提示用户输入变量值
+ `\getenv PSQLVAR ENVVAR` 从环境变量读取值
+ `\setenv NAME VALUE` 设置环境变量

## PostgreSQL psql 命令速查表（Top 20）
| 分类 | 命令 / SQL | 说明 |
| --- | --- | --- |
| **连接操作** | `psql -U 用户 -d 数据库` | 连接数据库 |
| | `\c 数据库名 [用户名]` | 切换数据库 |
| | `\q` | 退出 psql |
| **数据库管理** | `\l` | 列出所有数据库 |
| | `CREATE DATABASE testdb OWNER user;` | 创建数据库并指定所有者 |
| | `DROP DATABASE testdb;` | 删除数据库 |
| **表管理** | `\dt` | 查看所有表 |
| | `\d 表名` | 查看表结构 |
| | `\di` | 查看索引 |
| **用户与权限** | `CREATE USER test WITH PASSWORD '123456';` | 创建用户 |
| | `\du` | 查看所有用户/角色 |
| | `GRANT ALL PRIVILEGES ON DATABASE testdb TO test;` | 授权 |
| | `ALTER USER test WITH SUPERUSER;` | 提升为超级用户 |
| **SQL 常用** | `SELECT version();` | 查看 PostgreSQL 版本 |
| | `SELECT current_database();` | 当前数据库 |
| | `SELECT current_user;` | 当前用户 |
| **导入导出** | `\copy 表名 FROM 'file.csv' CSV HEADER;` | 导入 CSV |
| | `\copy 表名 TO 'file.csv' CSV HEADER;` | 导出 CSV |
| | `pg_dump -U 用户 -d 数据库 > backup.sql` | 导出 SQL |
| | `psql -U 用户 -d 数据库 < backup.sql` | 导入 SQL |
| **诊断调试** | `\conninfo` | 查看当前连接信息 |
| | `SELECT * FROM pg_stat_activity;` | 查看活跃连接 |
| | `\watch 5` | 每 5 秒刷新一次查询 |


