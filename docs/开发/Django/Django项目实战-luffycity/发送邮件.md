dev.py

```python
# 邮件服务器配置
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.qq.com'         # 邮件服务器地址（如 smtp.gmail.com）
EMAIL_PORT = 465                        # 邮件服务器端口（587 为 TLS或者465）
EMAIL_HOST_USER = 'xxxx@qq.com'  # 发件人邮箱地址
EMAIL_HOST_PASSWORD = 'xxxx'  # 邮箱授权码或密码
EMAIL_USE_SSL = True
EMAIL_USE_TLS = False
EMAIL_FROM = 'xxxx@qq.com'   # 默认发件人地址

```

EmailUtil.py

```python
from django.core.mail import send_mail, BadHeaderError
from django.conf import settings
import logging

class EmailUtil:
    logger = logging.getLogger(__name__)

    @staticmethod
    def send_email(subject, message, recipient_list, from_email=None, html_message=None):
        if not isinstance(subject, str):
            EmailUtil.logger.error(f"Subject must be a string, got {type(subject)}: {subject}")
            return False
        if not isinstance(message, str):
            EmailUtil.logger.error(f"Message must be a string, got {type(message)}: {message}")
            return False
        if not isinstance(recipient_list, (list, tuple)):
            EmailUtil.logger.error(f"Recipient_list must be a list or tuple, got {type(recipient_list)}: {recipient_list}")
            return False

        # 规范化 recipient_list
        recipient_list = [str(r).strip("[]'\"") for r in recipient_list if r]
        from_email = settings.EMAIL_FROM

        if not subject or not message or not recipient_list:
            EmailUtil.logger.error("邮件发送失败：主题、正文或收件人列表为空")
            return False

        EmailUtil.logger.info(f"Sending email to {recipient_list}")
        try:
            send_mail(
                subject=subject,
                message=message,
                from_email=from_email,
                recipient_list=recipient_list,
                html_message=html_message,
                fail_silently=False,
            )
            EmailUtil.logger.info(f"邮件发送成功：主题={subject}, 收件人={recipient_list}")
            return True
        except BadHeaderError:
            EmailUtil.logger.error("邮件发送失败：无效的邮件头")
            return False
        except Exception as e:
            EmailUtil.logger.error(f"邮件发送失败：{str(e)}")
            return False

    @staticmethod
    def send_test_email(recipient):
        """发送测试邮件"""
        subject = "测试邮件"
        message = "这是一封来自 Django 的测试邮件。"
        recipient_list = [recipient]

        return EmailUtil.send_email(subject, message, recipient_list)

    @staticmethod
    def send_code_email(recipient,code):
        """发送验证码邮件"""
        subject = "验证码"
        message = f"您的验证码为：{code}，请妥善保管，切勿泄露。"
        recipient_list = [recipient]

        return EmailUtil.send_email(subject, message, recipient_list)
```

使用

```python
from celery import shared_task
# from ronglianyunapi import send_sms as sms
# 记录日志：
import logging
from send_email import EmailUtil

logger = logging.getLogger('celery')


# @shared_task(name="send_sms")
# def send_sms(tid, mobile, datas):
#     """异步发送短信"""
#     try:
#         return sms(tid, mobile, datas)
#     except Exception as e:
#         logger.error(f"手机号：{mobile}，发送短信失败错误: {e}")
@shared_task(name="send_email",queue='Celery')
def send_email(recipient, datas):
    """发送邮件"""
    logger.info(f"发送邮件到：{recipient}")
    return EmailUtil.send_code_email(recipient=recipient, code=datas)



@shared_task(name="send_sms1")
def send_sms1():
    print("send_sms1执行了！！！")

```

